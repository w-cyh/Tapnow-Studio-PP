<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tapnow Studio</title>
  <script type="module" crossorigin>var rv=Object.defineProperty;var ph=e=>{throw TypeError(e)};var sv=(e,t,n)=>t in e?rv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var En=(e,t,n)=>sv(e,typeof t!="symbol"?t+"":t,n),iv=(e,t,n)=>t.has(e)||ph("Cannot "+n);var fh=(e,t,n)=>t.has(e)?ph("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var Ic=(e,t,n)=>(iv(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function og(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ag={exports:{}},Hu={},lg={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=Symbol.for("react.element"),ov=Symbol.for("react.portal"),av=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),cv=Symbol.for("react.profiler"),uv=Symbol.for("react.provider"),dv=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),fv=Symbol.for("react.suspense"),hv=Symbol.for("react.memo"),mv=Symbol.for("react.lazy"),hh=Symbol.iterator;function gv(e){return e===null||typeof e!="object"?null:(e=hh&&e[hh]||e["@@iterator"],typeof e=="function"?e:null)}var cg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ug=Object.assign,dg={};function Ca(e,t,n){this.props=e,this.context=t,this.refs=dg,this.updater=n||cg}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pg(){}pg.prototype=Ca.prototype;function mf(e,t,n){this.props=e,this.context=t,this.refs=dg,this.updater=n||cg}var gf=mf.prototype=new pg;gf.constructor=mf;ug(gf,Ca.prototype);gf.isPureReactComponent=!0;var mh=Array.isArray,fg=Object.prototype.hasOwnProperty,xf={current:null},hg={key:!0,ref:!0,__self:!0,__source:!0};function mg(e,t,n){var s,o={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)fg.call(t,s)&&!hg.hasOwnProperty(s)&&(o[s]=t[s]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var d=Array(u),g=0;g<u;g++)d[g]=arguments[g+2];o.children=d}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)o[s]===void 0&&(o[s]=u[s]);return{$$typeof:ec,type:e,key:a,ref:l,props:o,_owner:xf.current}}function xv(e,t){return{$$typeof:ec,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yf(e){return typeof e=="object"&&e!==null&&e.$$typeof===ec}function yv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gh=/\/+/g;function Ed(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yv(""+e.key):t.toString(36)}function nu(e,t,n,s,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ec:case ov:l=!0}}if(l)return l=e,o=o(l),e=s===""?"."+Ed(l,0):s,mh(o)?(n="",e!=null&&(n=e.replace(gh,"$&/")+"/"),nu(o,t,n,"",function(g){return g})):o!=null&&(yf(o)&&(o=xv(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(gh,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=s===""?".":s+":",mh(e))for(var u=0;u<e.length;u++){a=e[u];var d=s+Ed(a,u);l+=nu(a,t,n,d,o)}else if(d=gv(e),typeof d=="function")for(e=d.call(e),u=0;!(a=e.next()).done;)a=a.value,d=s+Ed(a,u++),l+=nu(a,t,n,d,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Tc(e,t,n){if(e==null)return e;var s=[],o=0;return nu(e,s,"","",function(a){return t.call(n,a,o++)}),s}function vv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pr={current:null},ru={transition:null},bv={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:ru,ReactCurrentOwner:xf};function gg(){throw Error("act(...) is not supported in production builds of React.")}qt.Children={map:Tc,forEach:function(e,t,n){Tc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tc(e,function(){t++}),t},toArray:function(e){return Tc(e,function(t){return t})||[]},only:function(e){if(!yf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qt.Component=Ca;qt.Fragment=av;qt.Profiler=cv;qt.PureComponent=mf;qt.StrictMode=lv;qt.Suspense=fv;qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bv;qt.act=gg;qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=ug({},e.props),o=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=xf.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)fg.call(t,d)&&!hg.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){u=Array(d);for(var g=0;g<d;g++)u[g]=arguments[g+2];s.children=u}return{$$typeof:ec,type:e.type,key:o,ref:a,props:s,_owner:l}};qt.createContext=function(e){return e={$$typeof:dv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uv,_context:e},e.Consumer=e};qt.createElement=mg;qt.createFactory=function(e){var t=mg.bind(null,e);return t.type=e,t};qt.createRef=function(){return{current:null}};qt.forwardRef=function(e){return{$$typeof:pv,render:e}};qt.isValidElement=yf;qt.lazy=function(e){return{$$typeof:mv,_payload:{_status:-1,_result:e},_init:vv}};qt.memo=function(e,t){return{$$typeof:hv,type:e,compare:t===void 0?null:t}};qt.startTransition=function(e){var t=ru.transition;ru.transition={};try{e()}finally{ru.transition=t}};qt.unstable_act=gg;qt.useCallback=function(e,t){return Pr.current.useCallback(e,t)};qt.useContext=function(e){return Pr.current.useContext(e)};qt.useDebugValue=function(){};qt.useDeferredValue=function(e){return Pr.current.useDeferredValue(e)};qt.useEffect=function(e,t){return Pr.current.useEffect(e,t)};qt.useId=function(){return Pr.current.useId()};qt.useImperativeHandle=function(e,t,n){return Pr.current.useImperativeHandle(e,t,n)};qt.useInsertionEffect=function(e,t){return Pr.current.useInsertionEffect(e,t)};qt.useLayoutEffect=function(e,t){return Pr.current.useLayoutEffect(e,t)};qt.useMemo=function(e,t){return Pr.current.useMemo(e,t)};qt.useReducer=function(e,t,n){return Pr.current.useReducer(e,t,n)};qt.useRef=function(e){return Pr.current.useRef(e)};qt.useState=function(e){return Pr.current.useState(e)};qt.useSyncExternalStore=function(e,t,n){return Pr.current.useSyncExternalStore(e,t,n)};qt.useTransition=function(){return Pr.current.useTransition()};qt.version="18.3.1";lg.exports=qt;var F=lg.exports;const Wu=og(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=F,kv=Symbol.for("react.element"),zv=Symbol.for("react.fragment"),jv=Object.prototype.hasOwnProperty,_v=wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nv={key:!0,ref:!0,__self:!0,__source:!0};function xg(e,t,n){var s,o={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)jv.call(t,s)&&!Nv.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:kv,type:e,key:a,ref:l,props:o,_owner:_v.current}}Hu.Fragment=zv;Hu.jsx=xg;Hu.jsxs=xg;ag.exports=Hu;var i=ag.exports,hp={},yg={exports:{}},Qr={},vg={exports:{}},bg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,ge){var Ae=pe.length;pe.push(ge);e:for(;0<Ae;){var X=Ae-1>>>1,Z=pe[X];if(0<o(Z,ge))pe[X]=ge,pe[Ae]=Z,Ae=X;else break e}}function n(pe){return pe.length===0?null:pe[0]}function s(pe){if(pe.length===0)return null;var ge=pe[0],Ae=pe.pop();if(Ae!==ge){pe[0]=Ae;e:for(var X=0,Z=pe.length,Te=Z>>>1;X<Te;){var Ye=2*(X+1)-1,Ne=pe[Ye],At=Ye+1,nn=pe[At];if(0>o(Ne,Ae))At<Z&&0>o(nn,Ne)?(pe[X]=nn,pe[At]=Ae,X=At):(pe[X]=Ne,pe[Ye]=Ae,X=Ye);else if(At<Z&&0>o(nn,Ae))pe[X]=nn,pe[At]=Ae,X=At;else break e}}return ge}function o(pe,ge){var Ae=pe.sortIndex-ge.sortIndex;return Ae!==0?Ae:pe.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],g=[],j=1,w=null,k=3,v=!1,$=!1,z=!1,P=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(pe){for(var ge=n(g);ge!==null;){if(ge.callback===null)s(g);else if(ge.startTime<=pe)s(g),ge.sortIndex=ge.expirationTime,t(d,ge);else break;ge=n(g)}}function L(pe){if(z=!1,S(pe),!$)if(n(d)!==null)$=!0,Ze(W);else{var ge=n(g);ge!==null&&we(L,ge.startTime-pe)}}function W(pe,ge){$=!1,z&&(z=!1,x(de),de=-1),v=!0;var Ae=k;try{for(S(ge),w=n(d);w!==null&&(!(w.expirationTime>ge)||pe&&!He());){var X=w.callback;if(typeof X=="function"){w.callback=null,k=w.priorityLevel;var Z=X(w.expirationTime<=ge);ge=e.unstable_now(),typeof Z=="function"?w.callback=Z:w===n(d)&&s(d),S(ge)}else s(d);w=n(d)}if(w!==null)var Te=!0;else{var Ye=n(g);Ye!==null&&we(L,Ye.startTime-ge),Te=!1}return Te}finally{w=null,k=Ae,v=!1}}var q=!1,Q=null,de=-1,ce=5,ye=-1;function He(){return!(e.unstable_now()-ye<ce)}function V(){if(Q!==null){var pe=e.unstable_now();ye=pe;var ge=!0;try{ge=Q(!0,pe)}finally{ge?he():(q=!1,Q=null)}}else q=!1}var he;if(typeof y=="function")he=function(){y(V)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ae=N.port2;N.port1.onmessage=V,he=function(){ae.postMessage(null)}}else he=function(){P(V,0)};function Ze(pe){Q=pe,q||(q=!0,he())}function we(pe,ge){de=P(function(){pe(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){$||v||($=!0,Ze(W))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(pe){switch(k){case 1:case 2:case 3:var ge=3;break;default:ge=k}var Ae=k;k=ge;try{return pe()}finally{k=Ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,ge){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Ae=k;k=pe;try{return ge()}finally{k=Ae}},e.unstable_scheduleCallback=function(pe,ge,Ae){var X=e.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?X+Ae:X):Ae=X,pe){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Ae+Z,pe={id:j++,callback:ge,priorityLevel:pe,startTime:Ae,expirationTime:Z,sortIndex:-1},Ae>X?(pe.sortIndex=Ae,t(g,pe),n(d)===null&&pe===n(g)&&(z?(x(de),de=-1):z=!0,we(L,Ae-X))):(pe.sortIndex=Z,t(d,pe),$||v||($=!0,Ze(W))),pe},e.unstable_shouldYield=He,e.unstable_wrapCallback=function(pe){var ge=k;return function(){var Ae=k;k=ge;try{return pe.apply(this,arguments)}finally{k=Ae}}}})(bg);vg.exports=bg;var Sv=vg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=F,qr=Sv;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wg=new Set,Dl={};function Mo(e,t){wa(e,t),wa(e+"Capture",t)}function wa(e,t){for(Dl[e]=t,e=0;e<t.length;e++)wg.add(t[e])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=Object.prototype.hasOwnProperty,Ev=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xh={},yh={};function Iv(e){return mp.call(yh,e)?!0:mp.call(xh,e)?!1:Ev.test(e)?yh[e]=!0:(xh[e]=!0,!1)}function Tv(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mv(e,t,n,s){if(t===null||typeof t>"u"||Tv(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rr(e,t,n,s,o,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yr[e]=new Rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yr[t]=new Rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yr[e]=new Rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yr[e]=new Rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yr[e]=new Rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yr[e]=new Rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yr[e]=new Rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yr[e]=new Rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yr[e]=new Rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function bf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vf,bf);yr[t]=new Rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vf,bf);yr[t]=new Rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vf,bf);yr[t]=new Rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yr[e]=new Rr(e,1,!1,e.toLowerCase(),null,!1,!1)});yr.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yr[e]=new Rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function wf(e,t,n,s){var o=yr.hasOwnProperty(t)?yr[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mv(t,n,o,s)&&(n=null),s||o===null?Iv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,s=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Ci=Cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),ra=Symbol.for("react.portal"),sa=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),gp=Symbol.for("react.profiler"),kg=Symbol.for("react.provider"),zg=Symbol.for("react.context"),zf=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),yp=Symbol.for("react.suspense_list"),jf=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),jg=Symbol.for("react.offscreen"),vh=Symbol.iterator;function tl(e){return e===null||typeof e!="object"?null:(e=vh&&e[vh]||e["@@iterator"],typeof e=="function"?e:null)}var Un=Object.assign,Id;function vl(e){if(Id===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Id=t&&t[1]||""}return`
`+Id+e}var Td=!1;function Md(e,t){if(!e||Td)return"";Td=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var s=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){s=g}e.call(t.prototype)}else{try{throw Error()}catch(g){s=g}e()}}catch(g){if(g&&s&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),a=s.stack.split(`
`),l=o.length-1,u=a.length-1;1<=l&&0<=u&&o[l]!==a[u];)u--;for(;1<=l&&0<=u;l--,u--)if(o[l]!==a[u]){if(l!==1||u!==1)do if(l--,u--,0>u||o[l]!==a[u]){var d=`
`+o[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{Td=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vl(e):""}function $v(e){switch(e.tag){case 5:return vl(e.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 2:case 15:return e=Md(e.type,!1),e;case 11:return e=Md(e.type.render,!1),e;case 1:return e=Md(e.type,!0),e;default:return""}}function vp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sa:return"Fragment";case ra:return"Portal";case gp:return"Profiler";case kf:return"StrictMode";case xp:return"Suspense";case yp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zg:return(e.displayName||"Context")+".Consumer";case kg:return(e._context.displayName||"Context")+".Provider";case zf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jf:return t=e.displayName||null,t!==null?t:vp(e.type)||"Memo";case Wi:t=e._payload,e=e._init;try{return vp(e(t))}catch{}}return null}function Av(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vp(t);case 8:return t===kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function so(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _g(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pv(e){var t=_g(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $c(e){e._valueTracker||(e._valueTracker=Pv(e))}function Ng(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=_g(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function gu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bp(e,t){var n=t.checked;return Un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bh(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=so(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sg(e,t){t=t.checked,t!=null&&wf(e,"checked",t,!1)}function wp(e,t){Sg(e,t);var n=so(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?kp(e,t.type,n):t.hasOwnProperty("defaultValue")&&kp(e,t.type,so(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function kp(e,t,n){(t!=="number"||gu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bl=Array.isArray;function ma(e,t,n,s){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&s&&(e[n].defaultSelected=!0)}else{for(n=""+so(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function zp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return Un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(bl(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:so(n)}}function Cg(e,t){var n=so(t.value),s=so(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function zh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Eg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Eg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ac,Ig=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ac.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ll(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rv=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(e){Rv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nl[t]=Nl[e]})});function Tg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Nl.hasOwnProperty(e)&&Nl[e]?(""+t).trim():t+"px"}function Mg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,o=Tg(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,o):e[n]=o}}var Dv=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _p(e,t){if(t){if(Dv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function Np(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sp=null;function _f(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cp=null,ga=null,xa=null;function jh(e){if(e=rc(e)){if(typeof Cp!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=Xu(t),Cp(e.stateNode,e.type,t))}}function $g(e){ga?xa?xa.push(e):xa=[e]:ga=e}function Ag(){if(ga){var e=ga,t=xa;if(xa=ga=null,jh(e),t)for(e=0;e<t.length;e++)jh(t[e])}}function Pg(e,t){return e(t)}function Rg(){}var $d=!1;function Dg(e,t,n){if($d)return e(t,n);$d=!0;try{return Pg(e,t,n)}finally{$d=!1,(ga!==null||xa!==null)&&(Rg(),Ag())}}function Ol(e,t){var n=e.stateNode;if(n===null)return null;var s=Xu(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var Ep=!1;if(ji)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Ep=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Ep=!1}function Lv(e,t,n,s,o,a,l,u,d){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(j){this.onError(j)}}var Sl=!1,xu=null,yu=!1,Ip=null,Ov={onError:function(e){Sl=!0,xu=e}};function Uv(e,t,n,s,o,a,l,u,d){Sl=!1,xu=null,Lv.apply(Ov,arguments)}function Fv(e,t,n,s,o,a,l,u,d){if(Uv.apply(this,arguments),Sl){if(Sl){var g=xu;Sl=!1,xu=null}else throw Error(Pe(198));yu||(yu=!0,Ip=g)}}function $o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _h(e){if($o(e)!==e)throw Error(Pe(188))}function Bv(e){var t=e.alternate;if(!t){if(t=$o(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,s=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return _h(o),e;if(a===s)return _h(o),t;a=a.sibling}throw Error(Pe(188))}if(n.return!==s.return)n=o,s=a;else{for(var l=!1,u=o.child;u;){if(u===n){l=!0,n=o,s=a;break}if(u===s){l=!0,s=o,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,s=o;break}if(u===s){l=!0,s=a,n=o;break}u=u.sibling}if(!l)throw Error(Pe(189))}}if(n.alternate!==s)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function Og(e){return e=Bv(e),e!==null?Ug(e):null}function Ug(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ug(e);if(t!==null)return t;e=e.sibling}return null}var Fg=qr.unstable_scheduleCallback,Nh=qr.unstable_cancelCallback,Hv=qr.unstable_shouldYield,Wv=qr.unstable_requestPaint,Kn=qr.unstable_now,Vv=qr.unstable_getCurrentPriorityLevel,Nf=qr.unstable_ImmediatePriority,Bg=qr.unstable_UserBlockingPriority,vu=qr.unstable_NormalPriority,Kv=qr.unstable_LowPriority,Hg=qr.unstable_IdlePriority,Vu=null,qs=null;function Yv(e){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(Vu,e,void 0,(e.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:Jv,Gv=Math.log,Xv=Math.LN2;function Jv(e){return e>>>=0,e===0?32:31-(Gv(e)/Xv|0)|0}var Pc=64,Rc=4194304;function wl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,o=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~o;u!==0?s=wl(u):(a&=l,a!==0&&(s=wl(a)))}else l=n&~o,l!==0?s=wl(l):a!==0&&(s=wl(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&o)&&(o=s&-s,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ds(t),o=1<<n,s|=e[n],t&=~o;return s}function Zv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qv(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ds(a),u=1<<l,d=o[l];d===-1?(!(u&n)||u&s)&&(o[l]=Zv(u,t)):d<=t&&(e.expiredLanes|=u),a&=~u}}function Tp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wg(){var e=Pc;return Pc<<=1,!(Pc&4194240)&&(Pc=64),e}function Ad(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ds(t),e[t]=n}function Qv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Ds(n),a=1<<o;t[o]=0,s[o]=-1,e[o]=-1,n&=~a}}function Sf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ds(n),o=1<<s;o&t|e[s]&t&&(e[s]|=t),n&=~o}}var mn=0;function Vg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kg,Cf,Yg,Gg,Xg,Mp=!1,Dc=[],Ji=null,Zi=null,qi=null,Ul=new Map,Fl=new Map,Ki=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sh(e,t){switch(e){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Ul.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(t.pointerId)}}function rl(e,t,n,s,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[o]},t!==null&&(t=rc(t),t!==null&&Cf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function tb(e,t,n,s,o){switch(t){case"focusin":return Ji=rl(Ji,e,t,n,s,o),!0;case"dragenter":return Zi=rl(Zi,e,t,n,s,o),!0;case"mouseover":return qi=rl(qi,e,t,n,s,o),!0;case"pointerover":var a=o.pointerId;return Ul.set(a,rl(Ul.get(a)||null,e,t,n,s,o)),!0;case"gotpointercapture":return a=o.pointerId,Fl.set(a,rl(Fl.get(a)||null,e,t,n,s,o)),!0}return!1}function Jg(e){var t=bo(e.target);if(t!==null){var n=$o(t);if(n!==null){if(t=n.tag,t===13){if(t=Lg(n),t!==null){e.blockedOn=t,Xg(e.priority,function(){Yg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function su(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$p(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Sp=s,n.target.dispatchEvent(s),Sp=null}else return t=rc(n),t!==null&&Cf(t),e.blockedOn=n,!1;t.shift()}return!0}function Ch(e,t,n){su(e)&&n.delete(t)}function nb(){Mp=!1,Ji!==null&&su(Ji)&&(Ji=null),Zi!==null&&su(Zi)&&(Zi=null),qi!==null&&su(qi)&&(qi=null),Ul.forEach(Ch),Fl.forEach(Ch)}function sl(e,t){e.blockedOn===t&&(e.blockedOn=null,Mp||(Mp=!0,qr.unstable_scheduleCallback(qr.unstable_NormalPriority,nb)))}function Bl(e){function t(o){return sl(o,e)}if(0<Dc.length){sl(Dc[0],e);for(var n=1;n<Dc.length;n++){var s=Dc[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ji!==null&&sl(Ji,e),Zi!==null&&sl(Zi,e),qi!==null&&sl(qi,e),Ul.forEach(t),Fl.forEach(t),n=0;n<Ki.length;n++)s=Ki[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ki.length&&(n=Ki[0],n.blockedOn===null);)Jg(n),n.blockedOn===null&&Ki.shift()}var ya=Ci.ReactCurrentBatchConfig,wu=!0;function rb(e,t,n,s){var o=mn,a=ya.transition;ya.transition=null;try{mn=1,Ef(e,t,n,s)}finally{mn=o,ya.transition=a}}function sb(e,t,n,s){var o=mn,a=ya.transition;ya.transition=null;try{mn=4,Ef(e,t,n,s)}finally{mn=o,ya.transition=a}}function Ef(e,t,n,s){if(wu){var o=$p(e,t,n,s);if(o===null)Wd(e,t,s,ku,n),Sh(e,s);else if(tb(o,e,t,n,s))s.stopPropagation();else if(Sh(e,s),t&4&&-1<eb.indexOf(e)){for(;o!==null;){var a=rc(o);if(a!==null&&Kg(a),a=$p(e,t,n,s),a===null&&Wd(e,t,s,ku,n),a===o)break;o=a}o!==null&&s.stopPropagation()}else Wd(e,t,s,null,n)}}var ku=null;function $p(e,t,n,s){if(ku=null,e=_f(s),e=bo(e),e!==null)if(t=$o(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ku=e,null}function Zg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vv()){case Nf:return 1;case Bg:return 4;case vu:case Kv:return 16;case Hg:return 536870912;default:return 16}default:return 16}}var Gi=null,If=null,iu=null;function qg(){if(iu)return iu;var e,t=If,n=t.length,s,o="value"in Gi?Gi.value:Gi.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===o[a-s];s++);return iu=o.slice(e,1<s?1-s:void 0)}function ou(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Lc(){return!0}function Eh(){return!1}function es(e){function t(n,s,o,a,l){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Lc:Eh,this.isPropagationStopped=Eh,this}return Un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),t}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tf=es(Ea),nc=Un({},Ea,{view:0,detail:0}),ib=es(nc),Pd,Rd,il,Ku=Un({},nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==il&&(il&&e.type==="mousemove"?(Pd=e.screenX-il.screenX,Rd=e.screenY-il.screenY):Rd=Pd=0,il=e),Pd)},movementY:function(e){return"movementY"in e?e.movementY:Rd}}),Ih=es(Ku),ob=Un({},Ku,{dataTransfer:0}),ab=es(ob),lb=Un({},nc,{relatedTarget:0}),Dd=es(lb),cb=Un({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),ub=es(cb),db=Un({},Ea,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pb=es(db),fb=Un({},Ea,{data:0}),Th=es(fb),hb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gb[e])?!!t[e]:!1}function Mf(){return xb}var yb=Un({},nc,{key:function(e){if(e.key){var t=hb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ou(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(e){return e.type==="keypress"?ou(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ou(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vb=es(yb),bb=Un({},Ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=es(bb),wb=Un({},nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),kb=es(wb),zb=Un({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),jb=es(zb),_b=Un({},Ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nb=es(_b),Sb=[9,13,27,32],$f=ji&&"CompositionEvent"in window,Cl=null;ji&&"documentMode"in document&&(Cl=document.documentMode);var Cb=ji&&"TextEvent"in window&&!Cl,Qg=ji&&(!$f||Cl&&8<Cl&&11>=Cl),$h=" ",Ah=!1;function ex(e,t){switch(e){case"keyup":return Sb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function Eb(e,t){switch(e){case"compositionend":return tx(t);case"keypress":return t.which!==32?null:(Ah=!0,$h);case"textInput":return e=t.data,e===$h&&Ah?null:e;default:return null}}function Ib(e,t){if(ia)return e==="compositionend"||!$f&&ex(e,t)?(e=qg(),iu=If=Gi=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qg&&t.locale!=="ko"?null:t.data;default:return null}}var Tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tb[e.type]:t==="textarea"}function nx(e,t,n,s){$g(s),t=zu(t,"onChange"),0<t.length&&(n=new Tf("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var El=null,Hl=null;function Mb(e){fx(e,0)}function Yu(e){var t=la(e);if(Ng(t))return e}function $b(e,t){if(e==="change")return t}var rx=!1;if(ji){var Ld;if(ji){var Od="oninput"in document;if(!Od){var Rh=document.createElement("div");Rh.setAttribute("oninput","return;"),Od=typeof Rh.oninput=="function"}Ld=Od}else Ld=!1;rx=Ld&&(!document.documentMode||9<document.documentMode)}function Dh(){El&&(El.detachEvent("onpropertychange",sx),Hl=El=null)}function sx(e){if(e.propertyName==="value"&&Yu(Hl)){var t=[];nx(t,Hl,e,_f(e)),Dg(Mb,t)}}function Ab(e,t,n){e==="focusin"?(Dh(),El=t,Hl=n,El.attachEvent("onpropertychange",sx)):e==="focusout"&&Dh()}function Pb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yu(Hl)}function Rb(e,t){if(e==="click")return Yu(t)}function Db(e,t){if(e==="input"||e==="change")return Yu(t)}function Lb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Os=typeof Object.is=="function"?Object.is:Lb;function Wl(e,t){if(Os(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!mp.call(t,o)||!Os(e[o],t[o]))return!1}return!0}function Lh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oh(e,t){var n=Lh(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lh(n)}}function ix(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ix(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ox(){for(var e=window,t=gu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gu(e.document)}return t}function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ob(e){var t=ox(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ix(n.ownerDocument.documentElement,n)){if(s!==null&&Af(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(s.start,o);s=s.end===void 0?a:Math.min(s.end,o),!e.extend&&a>s&&(o=s,s=a,a=o),o=Oh(n,a);var l=Oh(n,s);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ub=ji&&"documentMode"in document&&11>=document.documentMode,oa=null,Ap=null,Il=null,Pp=!1;function Uh(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pp||oa==null||oa!==gu(s)||(s=oa,"selectionStart"in s&&Af(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Il&&Wl(Il,s)||(Il=s,s=zu(Ap,"onSelect"),0<s.length&&(t=new Tf("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=oa)))}function Oc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var aa={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},Ud={},ax={};ji&&(ax=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function Gu(e){if(Ud[e])return Ud[e];if(!aa[e])return e;var t=aa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ax)return Ud[e]=t[n];return e}var lx=Gu("animationend"),cx=Gu("animationiteration"),ux=Gu("animationstart"),dx=Gu("transitionend"),px=new Map,Fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(e,t){px.set(e,t),Mo(t,[e])}for(var Fd=0;Fd<Fh.length;Fd++){var Bd=Fh[Fd],Fb=Bd.toLowerCase(),Bb=Bd[0].toUpperCase()+Bd.slice(1);oo(Fb,"on"+Bb)}oo(lx,"onAnimationEnd");oo(cx,"onAnimationIteration");oo(ux,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(dx,"onTransitionEnd");wa("onMouseEnter",["mouseout","mouseover"]);wa("onMouseLeave",["mouseout","mouseover"]);wa("onPointerEnter",["pointerout","pointerover"]);wa("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hb=new Set("cancel close invalid load scroll toggle".split(" ").concat(kl));function Bh(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Fv(s,t,void 0,e),e.currentTarget=null}function fx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],o=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var u=s[l],d=u.instance,g=u.currentTarget;if(u=u.listener,d!==a&&o.isPropagationStopped())break e;Bh(o,u,g),a=d}else for(l=0;l<s.length;l++){if(u=s[l],d=u.instance,g=u.currentTarget,u=u.listener,d!==a&&o.isPropagationStopped())break e;Bh(o,u,g),a=d}}}if(yu)throw e=Ip,yu=!1,Ip=null,e}function In(e,t){var n=t[Up];n===void 0&&(n=t[Up]=new Set);var s=e+"__bubble";n.has(s)||(hx(t,e,2,!1),n.add(s))}function Hd(e,t,n){var s=0;t&&(s|=4),hx(n,e,s,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Vl(e){if(!e[Uc]){e[Uc]=!0,wg.forEach(function(n){n!=="selectionchange"&&(Hb.has(n)||Hd(n,!1,e),Hd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uc]||(t[Uc]=!0,Hd("selectionchange",!1,t))}}function hx(e,t,n,s){switch(Zg(t)){case 1:var o=rb;break;case 4:o=sb;break;default:o=Ef}n=o.bind(null,t,n,e),o=void 0,!Ep||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wd(e,t,n,s,o){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var u=s.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;l=l.return}for(;u!==null;){if(l=bo(u),l===null)return;if(d=l.tag,d===5||d===6){s=a=l;continue e}u=u.parentNode}}s=s.return}Dg(function(){var g=a,j=_f(n),w=[];e:{var k=px.get(e);if(k!==void 0){var v=Tf,$=e;switch(e){case"keypress":if(ou(n)===0)break e;case"keydown":case"keyup":v=vb;break;case"focusin":$="focus",v=Dd;break;case"focusout":$="blur",v=Dd;break;case"beforeblur":case"afterblur":v=Dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=kb;break;case lx:case cx:case ux:v=ub;break;case dx:v=jb;break;case"scroll":v=ib;break;case"wheel":v=Nb;break;case"copy":case"cut":case"paste":v=pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Mh}var z=(t&4)!==0,P=!z&&e==="scroll",x=z?k!==null?k+"Capture":null:k;z=[];for(var y=g,S;y!==null;){S=y;var L=S.stateNode;if(S.tag===5&&L!==null&&(S=L,x!==null&&(L=Ol(y,x),L!=null&&z.push(Kl(y,L,S)))),P)break;y=y.return}0<z.length&&(k=new v(k,$,null,n,j),w.push({event:k,listeners:z}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",k&&n!==Sp&&($=n.relatedTarget||n.fromElement)&&(bo($)||$[_i]))break e;if((v||k)&&(k=j.window===j?j:(k=j.ownerDocument)?k.defaultView||k.parentWindow:window,v?($=n.relatedTarget||n.toElement,v=g,$=$?bo($):null,$!==null&&(P=$o($),$!==P||$.tag!==5&&$.tag!==6)&&($=null)):(v=null,$=g),v!==$)){if(z=Ih,L="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(z=Mh,L="onPointerLeave",x="onPointerEnter",y="pointer"),P=v==null?k:la(v),S=$==null?k:la($),k=new z(L,y+"leave",v,n,j),k.target=P,k.relatedTarget=S,L=null,bo(j)===g&&(z=new z(x,y+"enter",$,n,j),z.target=S,z.relatedTarget=P,L=z),P=L,v&&$)t:{for(z=v,x=$,y=0,S=z;S;S=Zo(S))y++;for(S=0,L=x;L;L=Zo(L))S++;for(;0<y-S;)z=Zo(z),y--;for(;0<S-y;)x=Zo(x),S--;for(;y--;){if(z===x||x!==null&&z===x.alternate)break t;z=Zo(z),x=Zo(x)}z=null}else z=null;v!==null&&Hh(w,k,v,z,!1),$!==null&&P!==null&&Hh(w,P,$,z,!0)}}e:{if(k=g?la(g):window,v=k.nodeName&&k.nodeName.toLowerCase(),v==="select"||v==="input"&&k.type==="file")var W=$b;else if(Ph(k))if(rx)W=Db;else{W=Pb;var q=Ab}else(v=k.nodeName)&&v.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(W=Rb);if(W&&(W=W(e,g))){nx(w,W,n,j);break e}q&&q(e,k,g),e==="focusout"&&(q=k._wrapperState)&&q.controlled&&k.type==="number"&&kp(k,"number",k.value)}switch(q=g?la(g):window,e){case"focusin":(Ph(q)||q.contentEditable==="true")&&(oa=q,Ap=g,Il=null);break;case"focusout":Il=Ap=oa=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,Uh(w,n,j);break;case"selectionchange":if(Ub)break;case"keydown":case"keyup":Uh(w,n,j)}var Q;if($f)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else ia?ex(e,n)&&(de="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(de="onCompositionStart");de&&(Qg&&n.locale!=="ko"&&(ia||de!=="onCompositionStart"?de==="onCompositionEnd"&&ia&&(Q=qg()):(Gi=j,If="value"in Gi?Gi.value:Gi.textContent,ia=!0)),q=zu(g,de),0<q.length&&(de=new Th(de,e,null,n,j),w.push({event:de,listeners:q}),Q?de.data=Q:(Q=tx(n),Q!==null&&(de.data=Q)))),(Q=Cb?Eb(e,n):Ib(e,n))&&(g=zu(g,"onBeforeInput"),0<g.length&&(j=new Th("onBeforeInput","beforeinput",null,n,j),w.push({event:j,listeners:g}),j.data=Q))}fx(w,t)})}function Kl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zu(e,t){for(var n=t+"Capture",s=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Ol(e,n),a!=null&&s.unshift(Kl(e,a,o)),a=Ol(e,t),a!=null&&s.push(Kl(e,a,o))),e=e.return}return s}function Zo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hh(e,t,n,s,o){for(var a=t._reactName,l=[];n!==null&&n!==s;){var u=n,d=u.alternate,g=u.stateNode;if(d!==null&&d===s)break;u.tag===5&&g!==null&&(u=g,o?(d=Ol(n,a),d!=null&&l.unshift(Kl(n,d,u))):o||(d=Ol(n,a),d!=null&&l.push(Kl(n,d,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Wb=/\r\n?/g,Vb=/\u0000|\uFFFD/g;function Wh(e){return(typeof e=="string"?e:""+e).replace(Wb,`
`).replace(Vb,"")}function Fc(e,t,n){if(t=Wh(t),Wh(e)!==t&&n)throw Error(Pe(425))}function ju(){}var Rp=null,Dp=null;function Lp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,Kb=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,Yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(e){return Vh.resolve(null).then(e).catch(Gb)}:Op;function Gb(e){setTimeout(function(){throw e})}function Vd(e,t){var n=t,s=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){e.removeChild(o),Bl(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);Bl(t)}function Qi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),Xs="__reactFiber$"+Ia,Yl="__reactProps$"+Ia,_i="__reactContainer$"+Ia,Up="__reactEvents$"+Ia,Xb="__reactListeners$"+Ia,Jb="__reactHandles$"+Ia;function bo(e){var t=e[Xs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_i]||n[Xs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Kh(e);e!==null;){if(n=e[Xs])return n;e=Kh(e)}return t}e=n,n=e.parentNode}return null}function rc(e){return e=e[Xs]||e[_i],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function la(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function Xu(e){return e[Yl]||null}var Fp=[],ca=-1;function ao(e){return{current:e}}function Tn(e){0>ca||(e.current=Fp[ca],Fp[ca]=null,ca--)}function jn(e,t){ca++,Fp[ca]=e.current,e.current=t}var io={},_r=ao(io),Hr=ao(!1),_o=io;function ka(e,t){var n=e.type.contextTypes;if(!n)return io;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Wr(e){return e=e.childContextTypes,e!=null}function _u(){Tn(Hr),Tn(_r)}function Yh(e,t,n){if(_r.current!==io)throw Error(Pe(168));jn(_r,t),jn(Hr,n)}function mx(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(Pe(108,Av(e)||"Unknown",o));return Un({},n,s)}function Nu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||io,_o=_r.current,jn(_r,e),jn(Hr,Hr.current),!0}function Gh(e,t,n){var s=e.stateNode;if(!s)throw Error(Pe(169));n?(e=mx(e,t,_o),s.__reactInternalMemoizedMergedChildContext=e,Tn(Hr),Tn(_r),jn(_r,e)):Tn(Hr),jn(Hr,n)}var yi=null,Ju=!1,Kd=!1;function gx(e){yi===null?yi=[e]:yi.push(e)}function Zb(e){Ju=!0,gx(e)}function lo(){if(!Kd&&yi!==null){Kd=!0;var e=0,t=mn;try{var n=yi;for(mn=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}yi=null,Ju=!1}catch(o){throw yi!==null&&(yi=yi.slice(e+1)),Fg(Nf,lo),o}finally{mn=t,Kd=!1}}return null}var ua=[],da=0,Su=null,Cu=0,ms=[],gs=0,No=null,wi=1,ki="";function yo(e,t){ua[da++]=Cu,ua[da++]=Su,Su=e,Cu=t}function xx(e,t,n){ms[gs++]=wi,ms[gs++]=ki,ms[gs++]=No,No=e;var s=wi;e=ki;var o=32-Ds(s)-1;s&=~(1<<o),n+=1;var a=32-Ds(t)+o;if(30<a){var l=o-o%5;a=(s&(1<<l)-1).toString(32),s>>=l,o-=l,wi=1<<32-Ds(t)+o|n<<o|s,ki=a+e}else wi=1<<a|n<<o|s,ki=e}function Pf(e){e.return!==null&&(yo(e,1),xx(e,1,0))}function Rf(e){for(;e===Su;)Su=ua[--da],ua[da]=null,Cu=ua[--da],ua[da]=null;for(;e===No;)No=ms[--gs],ms[gs]=null,ki=ms[--gs],ms[gs]=null,wi=ms[--gs],ms[gs]=null}var Zr=null,Jr=null,Pn=!1,Rs=null;function yx(e,t){var n=xs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Xh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zr=e,Jr=Qi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zr=e,Jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=No!==null?{id:wi,overflow:ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Zr=e,Jr=null,!0):!1;default:return!1}}function Bp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hp(e){if(Pn){var t=Jr;if(t){var n=t;if(!Xh(e,t)){if(Bp(e))throw Error(Pe(418));t=Qi(n.nextSibling);var s=Zr;t&&Xh(e,t)?yx(s,n):(e.flags=e.flags&-4097|2,Pn=!1,Zr=e)}}else{if(Bp(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,Pn=!1,Zr=e}}}function Jh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zr=e}function Bc(e){if(e!==Zr)return!1;if(!Pn)return Jh(e),Pn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Lp(e.type,e.memoizedProps)),t&&(t=Jr)){if(Bp(e))throw vx(),Error(Pe(418));for(;t;)yx(e,t),t=Qi(t.nextSibling)}if(Jh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Jr=Qi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Jr=null}}else Jr=Zr?Qi(e.stateNode.nextSibling):null;return!0}function vx(){for(var e=Jr;e;)e=Qi(e.nextSibling)}function za(){Jr=Zr=null,Pn=!1}function Df(e){Rs===null?Rs=[e]:Rs.push(e)}var qb=Ci.ReactCurrentBatchConfig;function ol(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var s=n.stateNode}if(!s)throw Error(Pe(147,e));var o=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var u=o.refs;l===null?delete u[a]:u[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function Hc(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zh(e){var t=e._init;return t(e._payload)}function bx(e){function t(x,y){if(e){var S=x.deletions;S===null?(x.deletions=[y],x.flags|=16):S.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function s(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function o(x,y){return x=ro(x,y),x.index=0,x.sibling=null,x}function a(x,y,S){return x.index=S,e?(S=x.alternate,S!==null?(S=S.index,S<y?(x.flags|=2,y):S):(x.flags|=2,y)):(x.flags|=1048576,y)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function u(x,y,S,L){return y===null||y.tag!==6?(y=Qd(S,x.mode,L),y.return=x,y):(y=o(y,S),y.return=x,y)}function d(x,y,S,L){var W=S.type;return W===sa?j(x,y,S.props.children,L,S.key):y!==null&&(y.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Wi&&Zh(W)===y.type)?(L=o(y,S.props),L.ref=ol(x,y,S),L.return=x,L):(L=fu(S.type,S.key,S.props,null,x.mode,L),L.ref=ol(x,y,S),L.return=x,L)}function g(x,y,S,L){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=ep(S,x.mode,L),y.return=x,y):(y=o(y,S.children||[]),y.return=x,y)}function j(x,y,S,L,W){return y===null||y.tag!==7?(y=jo(S,x.mode,L,W),y.return=x,y):(y=o(y,S),y.return=x,y)}function w(x,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qd(""+y,x.mode,S),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mc:return S=fu(y.type,y.key,y.props,null,x.mode,S),S.ref=ol(x,null,y),S.return=x,S;case ra:return y=ep(y,x.mode,S),y.return=x,y;case Wi:var L=y._init;return w(x,L(y._payload),S)}if(bl(y)||tl(y))return y=jo(y,x.mode,S,null),y.return=x,y;Hc(x,y)}return null}function k(x,y,S,L){var W=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return W!==null?null:u(x,y,""+S,L);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Mc:return S.key===W?d(x,y,S,L):null;case ra:return S.key===W?g(x,y,S,L):null;case Wi:return W=S._init,k(x,y,W(S._payload),L)}if(bl(S)||tl(S))return W!==null?null:j(x,y,S,L,null);Hc(x,S)}return null}function v(x,y,S,L,W){if(typeof L=="string"&&L!==""||typeof L=="number")return x=x.get(S)||null,u(y,x,""+L,W);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Mc:return x=x.get(L.key===null?S:L.key)||null,d(y,x,L,W);case ra:return x=x.get(L.key===null?S:L.key)||null,g(y,x,L,W);case Wi:var q=L._init;return v(x,y,S,q(L._payload),W)}if(bl(L)||tl(L))return x=x.get(S)||null,j(y,x,L,W,null);Hc(y,L)}return null}function $(x,y,S,L){for(var W=null,q=null,Q=y,de=y=0,ce=null;Q!==null&&de<S.length;de++){Q.index>de?(ce=Q,Q=null):ce=Q.sibling;var ye=k(x,Q,S[de],L);if(ye===null){Q===null&&(Q=ce);break}e&&Q&&ye.alternate===null&&t(x,Q),y=a(ye,y,de),q===null?W=ye:q.sibling=ye,q=ye,Q=ce}if(de===S.length)return n(x,Q),Pn&&yo(x,de),W;if(Q===null){for(;de<S.length;de++)Q=w(x,S[de],L),Q!==null&&(y=a(Q,y,de),q===null?W=Q:q.sibling=Q,q=Q);return Pn&&yo(x,de),W}for(Q=s(x,Q);de<S.length;de++)ce=v(Q,x,de,S[de],L),ce!==null&&(e&&ce.alternate!==null&&Q.delete(ce.key===null?de:ce.key),y=a(ce,y,de),q===null?W=ce:q.sibling=ce,q=ce);return e&&Q.forEach(function(He){return t(x,He)}),Pn&&yo(x,de),W}function z(x,y,S,L){var W=tl(S);if(typeof W!="function")throw Error(Pe(150));if(S=W.call(S),S==null)throw Error(Pe(151));for(var q=W=null,Q=y,de=y=0,ce=null,ye=S.next();Q!==null&&!ye.done;de++,ye=S.next()){Q.index>de?(ce=Q,Q=null):ce=Q.sibling;var He=k(x,Q,ye.value,L);if(He===null){Q===null&&(Q=ce);break}e&&Q&&He.alternate===null&&t(x,Q),y=a(He,y,de),q===null?W=He:q.sibling=He,q=He,Q=ce}if(ye.done)return n(x,Q),Pn&&yo(x,de),W;if(Q===null){for(;!ye.done;de++,ye=S.next())ye=w(x,ye.value,L),ye!==null&&(y=a(ye,y,de),q===null?W=ye:q.sibling=ye,q=ye);return Pn&&yo(x,de),W}for(Q=s(x,Q);!ye.done;de++,ye=S.next())ye=v(Q,x,de,ye.value,L),ye!==null&&(e&&ye.alternate!==null&&Q.delete(ye.key===null?de:ye.key),y=a(ye,y,de),q===null?W=ye:q.sibling=ye,q=ye);return e&&Q.forEach(function(V){return t(x,V)}),Pn&&yo(x,de),W}function P(x,y,S,L){if(typeof S=="object"&&S!==null&&S.type===sa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Mc:e:{for(var W=S.key,q=y;q!==null;){if(q.key===W){if(W=S.type,W===sa){if(q.tag===7){n(x,q.sibling),y=o(q,S.props.children),y.return=x,x=y;break e}}else if(q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Wi&&Zh(W)===q.type){n(x,q.sibling),y=o(q,S.props),y.ref=ol(x,q,S),y.return=x,x=y;break e}n(x,q);break}else t(x,q);q=q.sibling}S.type===sa?(y=jo(S.props.children,x.mode,L,S.key),y.return=x,x=y):(L=fu(S.type,S.key,S.props,null,x.mode,L),L.ref=ol(x,y,S),L.return=x,x=L)}return l(x);case ra:e:{for(q=S.key;y!==null;){if(y.key===q)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(x,y.sibling),y=o(y,S.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=ep(S,x.mode,L),y.return=x,x=y}return l(x);case Wi:return q=S._init,P(x,y,q(S._payload),L)}if(bl(S))return $(x,y,S,L);if(tl(S))return z(x,y,S,L);Hc(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(x,y.sibling),y=o(y,S),y.return=x,x=y):(n(x,y),y=Qd(S,x.mode,L),y.return=x,x=y),l(x)):n(x,y)}return P}var ja=bx(!0),wx=bx(!1),Eu=ao(null),Iu=null,pa=null,Lf=null;function Of(){Lf=pa=Iu=null}function Uf(e){var t=Eu.current;Tn(Eu),e._currentValue=t}function Wp(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function va(e,t){Iu=e,Lf=pa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Br=!0),e.firstContext=null)}function vs(e){var t=e._currentValue;if(Lf!==e)if(e={context:e,memoizedValue:t,next:null},pa===null){if(Iu===null)throw Error(Pe(308));pa=e,Iu.dependencies={lanes:0,firstContext:e}}else pa=pa.next=e;return t}var wo=null;function Ff(e){wo===null?wo=[e]:wo.push(e)}function kx(e,t,n,s){var o=t.interleaved;return o===null?(n.next=n,Ff(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ni(e,s)}function Ni(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vi=!1;function Bf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function eo(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,rn&2){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,Ni(e,n)}return o=s.interleaved,o===null?(t.next=t,Ff(s)):(t.next=o.next,o.next=t),s.interleaved=t,Ni(e,n)}function au(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Sf(e,n)}}function qh(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Tu(e,t,n,s){var o=e.updateQueue;Vi=!1;var a=o.firstBaseUpdate,l=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var d=u,g=d.next;d.next=null,l===null?a=g:l.next=g,l=d;var j=e.alternate;j!==null&&(j=j.updateQueue,u=j.lastBaseUpdate,u!==l&&(u===null?j.firstBaseUpdate=g:u.next=g,j.lastBaseUpdate=d))}if(a!==null){var w=o.baseState;l=0,j=g=d=null,u=a;do{var k=u.lane,v=u.eventTime;if((s&k)===k){j!==null&&(j=j.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var $=e,z=u;switch(k=t,v=n,z.tag){case 1:if($=z.payload,typeof $=="function"){w=$.call(v,w,k);break e}w=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=z.payload,k=typeof $=="function"?$.call(v,w,k):$,k==null)break e;w=Un({},w,k);break e;case 2:Vi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,k=o.effects,k===null?o.effects=[u]:k.push(u))}else v={eventTime:v,lane:k,tag:u.tag,payload:u.payload,callback:u.callback,next:null},j===null?(g=j=v,d=w):j=j.next=v,l|=k;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;k=u,u=k.next,k.next=null,o.lastBaseUpdate=k,o.shared.pending=null}}while(!0);if(j===null&&(d=w),o.baseState=d,o.firstBaseUpdate=g,o.lastBaseUpdate=j,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Co|=l,e.lanes=l,e.memoizedState=w}}function Qh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=n,typeof o!="function")throw Error(Pe(191,o));o.call(s)}}}var sc={},Qs=ao(sc),Gl=ao(sc),Xl=ao(sc);function ko(e){if(e===sc)throw Error(Pe(174));return e}function Hf(e,t){switch(jn(Xl,t),jn(Gl,e),jn(Qs,sc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jp(t,e)}Tn(Qs),jn(Qs,t)}function _a(){Tn(Qs),Tn(Gl),Tn(Xl)}function jx(e){ko(Xl.current);var t=ko(Qs.current),n=jp(t,e.type);t!==n&&(jn(Gl,e),jn(Qs,n))}function Wf(e){Gl.current===e&&(Tn(Qs),Tn(Gl))}var Ln=ao(0);function Mu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yd=[];function Vf(){for(var e=0;e<Yd.length;e++)Yd[e]._workInProgressVersionPrimary=null;Yd.length=0}var lu=Ci.ReactCurrentDispatcher,Gd=Ci.ReactCurrentBatchConfig,So=0,On=null,ir=null,fr=null,$u=!1,Tl=!1,Jl=0,Qb=0;function kr(){throw Error(Pe(321))}function Kf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Os(e[n],t[n]))return!1;return!0}function Yf(e,t,n,s,o,a){if(So=a,On=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lu.current=e===null||e.memoizedState===null?rw:sw,e=n(s,o),Tl){a=0;do{if(Tl=!1,Jl=0,25<=a)throw Error(Pe(301));a+=1,fr=ir=null,t.updateQueue=null,lu.current=iw,e=n(s,o)}while(Tl)}if(lu.current=Au,t=ir!==null&&ir.next!==null,So=0,fr=ir=On=null,$u=!1,t)throw Error(Pe(300));return e}function Gf(){var e=Jl!==0;return Jl=0,e}function Gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?On.memoizedState=fr=e:fr=fr.next=e,fr}function bs(){if(ir===null){var e=On.alternate;e=e!==null?e.memoizedState:null}else e=ir.next;var t=fr===null?On.memoizedState:fr.next;if(t!==null)fr=t,ir=e;else{if(e===null)throw Error(Pe(310));ir=e,e={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},fr===null?On.memoizedState=fr=e:fr=fr.next=e}return fr}function Zl(e,t){return typeof t=="function"?t(e):t}function Xd(e){var t=bs(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var s=ir,o=s.baseQueue,a=n.pending;if(a!==null){if(o!==null){var l=o.next;o.next=a.next,a.next=l}s.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,s=s.baseState;var u=l=null,d=null,g=a;do{var j=g.lane;if((So&j)===j)d!==null&&(d=d.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),s=g.hasEagerState?g.eagerState:e(s,g.action);else{var w={lane:j,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};d===null?(u=d=w,l=s):d=d.next=w,On.lanes|=j,Co|=j}g=g.next}while(g!==null&&g!==a);d===null?l=s:d.next=u,Os(s,t.memoizedState)||(Br=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=d,n.lastRenderedState=s}if(e=n.interleaved,e!==null){o=e;do a=o.lane,On.lanes|=a,Co|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jd(e){var t=bs(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var s=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do a=e(a,l.action),l=l.next;while(l!==o);Os(a,t.memoizedState)||(Br=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function _x(){}function Nx(e,t){var n=On,s=bs(),o=t(),a=!Os(s.memoizedState,o);if(a&&(s.memoizedState=o,Br=!0),s=s.queue,Xf(Ex.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,ql(9,Cx.bind(null,n,s,o,t),void 0,null),hr===null)throw Error(Pe(349));So&30||Sx(n,t,o)}return o}function Sx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cx(e,t,n,s){t.value=n,t.getSnapshot=s,Ix(t)&&Tx(e)}function Ex(e,t,n){return n(function(){Ix(t)&&Tx(e)})}function Ix(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Os(e,n)}catch{return!0}}function Tx(e){var t=Ni(e,1);t!==null&&Ls(t,e,1,-1)}function em(e){var t=Gs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:e},t.queue=e,e=e.dispatch=nw.bind(null,On,e),[t.memoizedState,e]}function ql(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Mx(){return bs().memoizedState}function cu(e,t,n,s){var o=Gs();On.flags|=e,o.memoizedState=ql(1|t,n,void 0,s===void 0?null:s)}function Zu(e,t,n,s){var o=bs();s=s===void 0?null:s;var a=void 0;if(ir!==null){var l=ir.memoizedState;if(a=l.destroy,s!==null&&Kf(s,l.deps)){o.memoizedState=ql(t,n,a,s);return}}On.flags|=e,o.memoizedState=ql(1|t,n,a,s)}function tm(e,t){return cu(8390656,8,e,t)}function Xf(e,t){return Zu(2048,8,e,t)}function $x(e,t){return Zu(4,2,e,t)}function Ax(e,t){return Zu(4,4,e,t)}function Px(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rx(e,t,n){return n=n!=null?n.concat([e]):null,Zu(4,4,Px.bind(null,t,e),n)}function Jf(){}function Dx(e,t){var n=bs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Kf(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Lx(e,t){var n=bs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Kf(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Ox(e,t,n){return So&21?(Os(n,t)||(n=Wg(),On.lanes|=n,Co|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Br=!0),e.memoizedState=n)}function ew(e,t){var n=mn;mn=n!==0&&4>n?n:4,e(!0);var s=Gd.transition;Gd.transition={};try{e(!1),t()}finally{mn=n,Gd.transition=s}}function Ux(){return bs().memoizedState}function tw(e,t,n){var s=no(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Fx(e))Bx(t,n);else if(n=kx(e,t,n,s),n!==null){var o=Mr();Ls(n,e,s,o),Hx(n,t,s)}}function nw(e,t,n){var s=no(e),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fx(e))Bx(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,n);if(o.hasEagerState=!0,o.eagerState=u,Os(u,l)){var d=t.interleaved;d===null?(o.next=o,Ff(t)):(o.next=d.next,d.next=o),t.interleaved=o;return}}catch{}finally{}n=kx(e,t,o,s),n!==null&&(o=Mr(),Ls(n,e,s,o),Hx(n,t,s))}}function Fx(e){var t=e.alternate;return e===On||t!==null&&t===On}function Bx(e,t){Tl=$u=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hx(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Sf(e,n)}}var Au={readContext:vs,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},rw={readContext:vs,useCallback:function(e,t){return Gs().memoizedState=[e,t===void 0?null:t],e},useContext:vs,useEffect:tm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cu(4194308,4,Px.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cu(4194308,4,e,t)},useInsertionEffect:function(e,t){return cu(4,2,e,t)},useMemo:function(e,t){var n=Gs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Gs();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=tw.bind(null,On,e),[s.memoizedState,e]},useRef:function(e){var t=Gs();return e={current:e},t.memoizedState=e},useState:em,useDebugValue:Jf,useDeferredValue:function(e){return Gs().memoizedState=e},useTransition:function(){var e=em(!1),t=e[0];return e=ew.bind(null,e[1]),Gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=On,o=Gs();if(Pn){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),hr===null)throw Error(Pe(349));So&30||Sx(s,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,tm(Ex.bind(null,s,a,e),[e]),s.flags|=2048,ql(9,Cx.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=Gs(),t=hr.identifierPrefix;if(Pn){var n=ki,s=wi;n=(s&~(1<<32-Ds(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Jl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Qb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sw={readContext:vs,useCallback:Dx,useContext:vs,useEffect:Xf,useImperativeHandle:Rx,useInsertionEffect:$x,useLayoutEffect:Ax,useMemo:Lx,useReducer:Xd,useRef:Mx,useState:function(){return Xd(Zl)},useDebugValue:Jf,useDeferredValue:function(e){var t=bs();return Ox(t,ir.memoizedState,e)},useTransition:function(){var e=Xd(Zl)[0],t=bs().memoizedState;return[e,t]},useMutableSource:_x,useSyncExternalStore:Nx,useId:Ux,unstable_isNewReconciler:!1},iw={readContext:vs,useCallback:Dx,useContext:vs,useEffect:Xf,useImperativeHandle:Rx,useInsertionEffect:$x,useLayoutEffect:Ax,useMemo:Lx,useReducer:Jd,useRef:Mx,useState:function(){return Jd(Zl)},useDebugValue:Jf,useDeferredValue:function(e){var t=bs();return ir===null?t.memoizedState=e:Ox(t,ir.memoizedState,e)},useTransition:function(){var e=Jd(Zl)[0],t=bs().memoizedState;return[e,t]},useMutableSource:_x,useSyncExternalStore:Nx,useId:Ux,unstable_isNewReconciler:!1};function As(e,t){if(e&&e.defaultProps){t=Un({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vp(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Un({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qu={isMounted:function(e){return(e=e._reactInternals)?$o(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Mr(),o=no(e),a=zi(s,o);a.payload=t,n!=null&&(a.callback=n),t=eo(e,a,o),t!==null&&(Ls(t,e,o,s),au(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Mr(),o=no(e),a=zi(s,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=eo(e,a,o),t!==null&&(Ls(t,e,o,s),au(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mr(),s=no(e),o=zi(n,s);o.tag=2,t!=null&&(o.callback=t),t=eo(e,o,s),t!==null&&(Ls(t,e,s,n),au(t,e,s))}};function nm(e,t,n,s,o,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!Wl(n,s)||!Wl(o,a):!0}function Wx(e,t,n){var s=!1,o=io,a=t.contextType;return typeof a=="object"&&a!==null?a=vs(a):(o=Wr(t)?_o:_r.current,s=t.contextTypes,a=(s=s!=null)?ka(e,o):io),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qu,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function rm(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&qu.enqueueReplaceState(t,t.state,null)}function Kp(e,t,n,s){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Bf(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=vs(a):(a=Wr(t)?_o:_r.current,o.context=ka(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Vp(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&qu.enqueueReplaceState(o,o.state,null),Tu(e,n,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Na(e,t){try{var n="",s=t;do n+=$v(s),s=s.return;while(s);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Zd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ow=typeof WeakMap=="function"?WeakMap:Map;function Vx(e,t,n){n=zi(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Ru||(Ru=!0,rf=s),Yp(e,t)},n}function Kx(e,t,n){n=zi(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;n.payload=function(){return s(o)},n.callback=function(){Yp(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Yp(e,t),typeof s!="function"&&(to===null?to=new Set([this]):to.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function sm(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new ow;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(n)||(o.add(n),e=bw.bind(null,e,t,n),t.then(e,e))}function im(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function om(e,t,n,s,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zi(-1,1),t.tag=2,eo(n,t,1))),n.lanes|=1),e)}var aw=Ci.ReactCurrentOwner,Br=!1;function Tr(e,t,n,s){t.child=e===null?wx(t,null,n,s):ja(t,e.child,n,s)}function am(e,t,n,s,o){n=n.render;var a=t.ref;return va(t,o),s=Yf(e,t,n,s,a,o),n=Gf(),e!==null&&!Br?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Si(e,t,o)):(Pn&&n&&Pf(t),t.flags|=1,Tr(e,t,s,o),t.child)}function lm(e,t,n,s,o){if(e===null){var a=n.type;return typeof a=="function"&&!s0(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Yx(e,t,a,s,o)):(e=fu(n.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Wl,n(l,s)&&e.ref===t.ref)return Si(e,t,o)}return t.flags|=1,e=ro(a,s),e.ref=t.ref,e.return=t,t.child=e}function Yx(e,t,n,s,o){if(e!==null){var a=e.memoizedProps;if(Wl(a,s)&&e.ref===t.ref)if(Br=!1,t.pendingProps=s=a,(e.lanes&o)!==0)e.flags&131072&&(Br=!0);else return t.lanes=e.lanes,Si(e,t,o)}return Gp(e,t,n,s,o)}function Gx(e,t,n){var s=t.pendingProps,o=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(ha,Gr),Gr|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jn(ha,Gr),Gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,jn(ha,Gr),Gr|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,jn(ha,Gr),Gr|=s;return Tr(e,t,o,n),t.child}function Xx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gp(e,t,n,s,o){var a=Wr(n)?_o:_r.current;return a=ka(t,a),va(t,o),n=Yf(e,t,n,s,a,o),s=Gf(),e!==null&&!Br?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Si(e,t,o)):(Pn&&s&&Pf(t),t.flags|=1,Tr(e,t,n,o),t.child)}function cm(e,t,n,s,o){if(Wr(n)){var a=!0;Nu(t)}else a=!1;if(va(t,o),t.stateNode===null)uu(e,t),Wx(t,n,s),Kp(t,n,s,o),s=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,g=n.contextType;typeof g=="object"&&g!==null?g=vs(g):(g=Wr(n)?_o:_r.current,g=ka(t,g));var j=n.getDerivedStateFromProps,w=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==s||d!==g)&&rm(t,l,s,g),Vi=!1;var k=t.memoizedState;l.state=k,Tu(t,s,l,o),d=t.memoizedState,u!==s||k!==d||Hr.current||Vi?(typeof j=="function"&&(Vp(t,n,j,s),d=t.memoizedState),(u=Vi||nm(t,n,u,s,k,d,g))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),l.props=s,l.state=d,l.context=g,s=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,zx(e,t),u=t.memoizedProps,g=t.type===t.elementType?u:As(t.type,u),l.props=g,w=t.pendingProps,k=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=vs(d):(d=Wr(n)?_o:_r.current,d=ka(t,d));var v=n.getDerivedStateFromProps;(j=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==w||k!==d)&&rm(t,l,s,d),Vi=!1,k=t.memoizedState,l.state=k,Tu(t,s,l,o);var $=t.memoizedState;u!==w||k!==$||Hr.current||Vi?(typeof v=="function"&&(Vp(t,n,v,s),$=t.memoizedState),(g=Vi||nm(t,n,g,s,k,$,d)||!1)?(j||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,$,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,$,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=$),l.props=s,l.state=$,l.context=d,s=g):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),s=!1)}return Xp(e,t,n,s,a,o)}function Xp(e,t,n,s,o,a){Xx(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return o&&Gh(t,n,!1),Si(e,t,a);s=t.stateNode,aw.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=ja(t,e.child,null,a),t.child=ja(t,null,u,a)):Tr(e,t,u,a),t.memoizedState=s.state,o&&Gh(t,n,!0),t.child}function Jx(e){var t=e.stateNode;t.pendingContext?Yh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yh(e,t.context,!1),Hf(e,t.containerInfo)}function um(e,t,n,s,o){return za(),Df(o),t.flags|=256,Tr(e,t,n,s),t.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function Zp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zx(e,t,n){var s=t.pendingProps,o=Ln.current,a=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),jn(Ln,o&1),e===null)return Hp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=td(l,s,0,null),e=jo(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Zp(n),t.memoizedState=Jp,e):Zf(t,l));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return lw(e,t,l,s,u,o,n);if(a){a=s.fallback,l=t.mode,o=e.child,u=o.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=ro(o,d),s.subtreeFlags=o.subtreeFlags&14680064),u!==null?a=ro(u,a):(a=jo(a,l,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?Zp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Jp,s}return a=e.child,e=a.sibling,s=ro(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Zf(e,t){return t=td({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wc(e,t,n,s){return s!==null&&Df(s),ja(t,e.child,null,n),e=Zf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lw(e,t,n,s,o,a,l){if(n)return t.flags&256?(t.flags&=-257,s=Zd(Error(Pe(422))),Wc(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,o=t.mode,s=td({mode:"visible",children:s.children},o,0,null),a=jo(a,o,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&ja(t,e.child,null,l),t.child.memoizedState=Zp(l),t.memoizedState=Jp,a);if(!(t.mode&1))return Wc(e,t,l,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var u=s.dgst;return s=u,a=Error(Pe(419)),s=Zd(a,s,void 0),Wc(e,t,l,s)}if(u=(l&e.childLanes)!==0,Br||u){if(s=hr,s!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|l)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Ni(e,o),Ls(s,e,o,-1))}return r0(),s=Zd(Error(Pe(421))),Wc(e,t,l,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=ww.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,Jr=Qi(o.nextSibling),Zr=t,Pn=!0,Rs=null,e!==null&&(ms[gs++]=wi,ms[gs++]=ki,ms[gs++]=No,wi=e.id,ki=e.overflow,No=t),t=Zf(t,s.children),t.flags|=4096,t)}function dm(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Wp(e.return,t,n)}function qd(e,t,n,s,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=o)}function qx(e,t,n){var s=t.pendingProps,o=s.revealOrder,a=s.tail;if(Tr(e,t,s.children,n),s=Ln.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dm(e,n,t);else if(e.tag===19)dm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(jn(Ln,s),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Mu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),qd(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Mu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}qd(t,!0,n,null,a);break;case"together":qd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Si(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Co|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=ro(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ro(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cw(e,t,n){switch(t.tag){case 3:Jx(t),za();break;case 5:jx(t);break;case 1:Wr(t.type)&&Nu(t);break;case 4:Hf(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;jn(Eu,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(jn(Ln,Ln.current&1),t.flags|=128,null):n&t.child.childLanes?Zx(e,t,n):(jn(Ln,Ln.current&1),e=Si(e,t,n),e!==null?e.sibling:null);jn(Ln,Ln.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return qx(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),jn(Ln,Ln.current),s)break;return null;case 22:case 23:return t.lanes=0,Gx(e,t,n)}return Si(e,t,n)}var Qx,qp,ey,ty;Qx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qp=function(){};ey=function(e,t,n,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,ko(Qs.current);var a=null;switch(n){case"input":o=bp(e,o),s=bp(e,s),a=[];break;case"select":o=Un({},o,{value:void 0}),s=Un({},s,{value:void 0}),a=[];break;case"textarea":o=zp(e,o),s=zp(e,s),a=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ju)}_p(n,s);var l;n=null;for(g in o)if(!s.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var u=o[g];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Dl.hasOwnProperty(g)?a||(a=[]):(a=a||[]).push(g,null));for(g in s){var d=s[g];if(u=o!=null?o[g]:void 0,s.hasOwnProperty(g)&&d!==u&&(d!=null||u!=null))if(g==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(g,n)),n=d;else g==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(a=a||[]).push(g,d)):g==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(g,""+d):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Dl.hasOwnProperty(g)?(d!=null&&g==="onScroll"&&In("scroll",e),a||u===d||(a=[])):(a=a||[]).push(g,d))}n&&(a=a||[]).push("style",n);var g=a;(t.updateQueue=g)&&(t.flags|=4)}};ty=function(e,t,n,s){n!==s&&(t.flags|=4)};function al(e,t){if(!Pn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function zr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function uw(e,t,n){var s=t.pendingProps;switch(Rf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(t),null;case 1:return Wr(t.type)&&_u(),zr(t),null;case 3:return s=t.stateNode,_a(),Tn(Hr),Tn(_r),Vf(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Bc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rs!==null&&(af(Rs),Rs=null))),qp(e,t),zr(t),null;case 5:Wf(t);var o=ko(Xl.current);if(n=t.type,e!==null&&t.stateNode!=null)ey(e,t,n,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Pe(166));return zr(t),null}if(e=ko(Qs.current),Bc(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Xs]=t,s[Yl]=a,e=(t.mode&1)!==0,n){case"dialog":In("cancel",s),In("close",s);break;case"iframe":case"object":case"embed":In("load",s);break;case"video":case"audio":for(o=0;o<kl.length;o++)In(kl[o],s);break;case"source":In("error",s);break;case"img":case"image":case"link":In("error",s),In("load",s);break;case"details":In("toggle",s);break;case"input":bh(s,a),In("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},In("invalid",s);break;case"textarea":kh(s,a),In("invalid",s)}_p(n,a),o=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?s.textContent!==u&&(a.suppressHydrationWarning!==!0&&Fc(s.textContent,u,e),o=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Fc(s.textContent,u,e),o=["children",""+u]):Dl.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&In("scroll",s)}switch(n){case"input":$c(s),wh(s,a,!0);break;case"textarea":$c(s),zh(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=ju)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Eg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[Xs]=t,e[Yl]=s,Qx(e,t,!1,!1),t.stateNode=e;e:{switch(l=Np(n,s),n){case"dialog":In("cancel",e),In("close",e),o=s;break;case"iframe":case"object":case"embed":In("load",e),o=s;break;case"video":case"audio":for(o=0;o<kl.length;o++)In(kl[o],e);o=s;break;case"source":In("error",e),o=s;break;case"img":case"image":case"link":In("error",e),In("load",e),o=s;break;case"details":In("toggle",e),o=s;break;case"input":bh(e,s),o=bp(e,s),In("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=Un({},s,{value:void 0}),In("invalid",e);break;case"textarea":kh(e,s),o=zp(e,s),In("invalid",e);break;default:o=s}_p(n,o),u=o;for(a in u)if(u.hasOwnProperty(a)){var d=u[a];a==="style"?Mg(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Ig(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ll(e,d):typeof d=="number"&&Ll(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Dl.hasOwnProperty(a)?d!=null&&a==="onScroll"&&In("scroll",e):d!=null&&wf(e,a,d,l))}switch(n){case"input":$c(e),wh(e,s,!1);break;case"textarea":$c(e),zh(e);break;case"option":s.value!=null&&e.setAttribute("value",""+so(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?ma(e,!!s.multiple,a,!1):s.defaultValue!=null&&ma(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ju)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zr(t),null;case 6:if(e&&t.stateNode!=null)ty(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=ko(Xl.current),ko(Qs.current),Bc(t)){if(s=t.stateNode,n=t.memoizedProps,s[Xs]=t,(a=s.nodeValue!==n)&&(e=Zr,e!==null))switch(e.tag){case 3:Fc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fc(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Xs]=t,t.stateNode=s}return zr(t),null;case 13:if(Tn(Ln),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pn&&Jr!==null&&t.mode&1&&!(t.flags&128))vx(),za(),t.flags|=98560,a=!1;else if(a=Bc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(Pe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Pe(317));a[Xs]=t}else za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zr(t),a=!1}else Rs!==null&&(af(Rs),Rs=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ln.current&1?or===0&&(or=3):r0())),t.updateQueue!==null&&(t.flags|=4),zr(t),null);case 4:return _a(),qp(e,t),e===null&&Vl(t.stateNode.containerInfo),zr(t),null;case 10:return Uf(t.type._context),zr(t),null;case 17:return Wr(t.type)&&_u(),zr(t),null;case 19:if(Tn(Ln),a=t.memoizedState,a===null)return zr(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)al(a,!1);else{if(or!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Mu(e),l!==null){for(t.flags|=128,al(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return jn(Ln,Ln.current&1|2),t.child}e=e.sibling}a.tail!==null&&Kn()>Sa&&(t.flags|=128,s=!0,al(a,!1),t.lanes=4194304)}else{if(!s)if(e=Mu(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),al(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Pn)return zr(t),null}else 2*Kn()-a.renderingStartTime>Sa&&n!==1073741824&&(t.flags|=128,s=!0,al(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Kn(),t.sibling=null,n=Ln.current,jn(Ln,s?n&1|2:n&1),t):(zr(t),null);case 22:case 23:return n0(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Gr&1073741824&&(zr(t),t.subtreeFlags&6&&(t.flags|=8192)):zr(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function dw(e,t){switch(Rf(t),t.tag){case 1:return Wr(t.type)&&_u(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _a(),Tn(Hr),Tn(_r),Vf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wf(t),null;case 13:if(Tn(Ln),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));za()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tn(Ln),null;case 4:return _a(),null;case 10:return Uf(t.type._context),null;case 22:case 23:return n0(),null;case 24:return null;default:return null}}var Vc=!1,jr=!1,pw=typeof WeakSet=="function"?WeakSet:Set,dt=null;function fa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Hn(e,t,s)}else n.current=null}function Qp(e,t,n){try{n()}catch(s){Hn(e,t,s)}}var pm=!1;function fw(e,t){if(Rp=wu,e=ox(),Af(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,u=-1,d=-1,g=0,j=0,w=e,k=null;t:for(;;){for(var v;w!==n||o!==0&&w.nodeType!==3||(u=l+o),w!==a||s!==0&&w.nodeType!==3||(d=l+s),w.nodeType===3&&(l+=w.nodeValue.length),(v=w.firstChild)!==null;)k=w,w=v;for(;;){if(w===e)break t;if(k===n&&++g===o&&(u=l),k===a&&++j===s&&(d=l),(v=w.nextSibling)!==null)break;w=k,k=w.parentNode}w=v}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dp={focusedElem:e,selectionRange:n},wu=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){t=dt;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var z=$.memoizedProps,P=$.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?z:As(t.type,z),P);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(L){Hn(t,t.return,L)}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}return $=pm,pm=!1,$}function Ml(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&Qp(t,n,a)}o=o.next}while(o!==s)}}function Qu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function ef(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ny(e){var t=e.alternate;t!==null&&(e.alternate=null,ny(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xs],delete t[Yl],delete t[Up],delete t[Xb],delete t[Jb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ry(e){return e.tag===5||e.tag===3||e.tag===4}function fm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ry(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tf(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ju));else if(s!==4&&(e=e.child,e!==null))for(tf(e,t,n),e=e.sibling;e!==null;)tf(e,t,n),e=e.sibling}function nf(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(nf(e,t,n),e=e.sibling;e!==null;)nf(e,t,n),e=e.sibling}var gr=null,Ps=!1;function Bi(e,t,n){for(n=n.child;n!==null;)sy(e,t,n),n=n.sibling}function sy(e,t,n){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(Vu,n)}catch{}switch(n.tag){case 5:jr||fa(n,t);case 6:var s=gr,o=Ps;gr=null,Bi(e,t,n),gr=s,Ps=o,gr!==null&&(Ps?(e=gr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gr.removeChild(n.stateNode));break;case 18:gr!==null&&(Ps?(e=gr,n=n.stateNode,e.nodeType===8?Vd(e.parentNode,n):e.nodeType===1&&Vd(e,n),Bl(e)):Vd(gr,n.stateNode));break;case 4:s=gr,o=Ps,gr=n.stateNode.containerInfo,Ps=!0,Bi(e,t,n),gr=s,Ps=o;break;case 0:case 11:case 14:case 15:if(!jr&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var a=o,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Qp(n,t,l),o=o.next}while(o!==s)}Bi(e,t,n);break;case 1:if(!jr&&(fa(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(u){Hn(n,t,u)}Bi(e,t,n);break;case 21:Bi(e,t,n);break;case 22:n.mode&1?(jr=(s=jr)||n.memoizedState!==null,Bi(e,t,n),jr=s):Bi(e,t,n);break;default:Bi(e,t,n)}}function hm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new pw),t.forEach(function(s){var o=kw.bind(null,e,s);n.has(s)||(n.add(s),s.then(o,o))})}}function Ts(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];try{var a=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:gr=u.stateNode,Ps=!1;break e;case 3:gr=u.stateNode.containerInfo,Ps=!0;break e;case 4:gr=u.stateNode.containerInfo,Ps=!0;break e}u=u.return}if(gr===null)throw Error(Pe(160));sy(a,l,o),gr=null,Ps=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(g){Hn(o,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)iy(t,e),t=t.sibling}function iy(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ts(t,e),Vs(e),s&4){try{Ml(3,e,e.return),Qu(3,e)}catch(z){Hn(e,e.return,z)}try{Ml(5,e,e.return)}catch(z){Hn(e,e.return,z)}}break;case 1:Ts(t,e),Vs(e),s&512&&n!==null&&fa(n,n.return);break;case 5:if(Ts(t,e),Vs(e),s&512&&n!==null&&fa(n,n.return),e.flags&32){var o=e.stateNode;try{Ll(o,"")}catch(z){Hn(e,e.return,z)}}if(s&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&Sg(o,a),Np(u,l);var g=Np(u,a);for(l=0;l<d.length;l+=2){var j=d[l],w=d[l+1];j==="style"?Mg(o,w):j==="dangerouslySetInnerHTML"?Ig(o,w):j==="children"?Ll(o,w):wf(o,j,w,g)}switch(u){case"input":wp(o,a);break;case"textarea":Cg(o,a);break;case"select":var k=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?ma(o,!!a.multiple,v,!1):k!==!!a.multiple&&(a.defaultValue!=null?ma(o,!!a.multiple,a.defaultValue,!0):ma(o,!!a.multiple,a.multiple?[]:"",!1))}o[Yl]=a}catch(z){Hn(e,e.return,z)}}break;case 6:if(Ts(t,e),Vs(e),s&4){if(e.stateNode===null)throw Error(Pe(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(z){Hn(e,e.return,z)}}break;case 3:if(Ts(t,e),Vs(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Bl(t.containerInfo)}catch(z){Hn(e,e.return,z)}break;case 4:Ts(t,e),Vs(e);break;case 13:Ts(t,e),Vs(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(e0=Kn())),s&4&&hm(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(jr=(g=jr)||j,Ts(t,e),jr=g):Ts(t,e),Vs(e),s&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!j&&e.mode&1)for(dt=e,j=e.child;j!==null;){for(w=dt=j;dt!==null;){switch(k=dt,v=k.child,k.tag){case 0:case 11:case 14:case 15:Ml(4,k,k.return);break;case 1:fa(k,k.return);var $=k.stateNode;if(typeof $.componentWillUnmount=="function"){s=k,n=k.return;try{t=s,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(z){Hn(s,n,z)}}break;case 5:fa(k,k.return);break;case 22:if(k.memoizedState!==null){gm(w);continue}}v!==null?(v.return=k,dt=v):gm(w)}j=j.sibling}e:for(j=null,w=e;;){if(w.tag===5){if(j===null){j=w;try{o=w.stateNode,g?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Tg("display",l))}catch(z){Hn(e,e.return,z)}}}else if(w.tag===6){if(j===null)try{w.stateNode.nodeValue=g?"":w.memoizedProps}catch(z){Hn(e,e.return,z)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;j===w&&(j=null),w=w.return}j===w&&(j=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Ts(t,e),Vs(e),s&4&&hm(e);break;case 21:break;default:Ts(t,e),Vs(e)}}function Vs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ry(n)){var s=n;break e}n=n.return}throw Error(Pe(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(Ll(o,""),s.flags&=-33);var a=fm(e);nf(e,a,o);break;case 3:case 4:var l=s.stateNode.containerInfo,u=fm(e);tf(e,u,l);break;default:throw Error(Pe(161))}}catch(d){Hn(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hw(e,t,n){dt=e,oy(e)}function oy(e,t,n){for(var s=(e.mode&1)!==0;dt!==null;){var o=dt,a=o.child;if(o.tag===22&&s){var l=o.memoizedState!==null||Vc;if(!l){var u=o.alternate,d=u!==null&&u.memoizedState!==null||jr;u=Vc;var g=jr;if(Vc=l,(jr=d)&&!g)for(dt=o;dt!==null;)l=dt,d=l.child,l.tag===22&&l.memoizedState!==null?xm(o):d!==null?(d.return=l,dt=d):xm(o);for(;a!==null;)dt=a,oy(a),a=a.sibling;dt=o,Vc=u,jr=g}mm(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,dt=a):mm(e)}}function mm(e){for(;dt!==null;){var t=dt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jr||Qu(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!jr)if(n===null)s.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:As(t.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Qh(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qh(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var j=g.memoizedState;if(j!==null){var w=j.dehydrated;w!==null&&Bl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}jr||t.flags&512&&ef(t)}catch(k){Hn(t,t.return,k)}}if(t===e){dt=null;break}if(n=t.sibling,n!==null){n.return=t.return,dt=n;break}dt=t.return}}function gm(e){for(;dt!==null;){var t=dt;if(t===e){dt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,dt=n;break}dt=t.return}}function xm(e){for(;dt!==null;){var t=dt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qu(4,t)}catch(d){Hn(t,n,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(d){Hn(t,o,d)}}var a=t.return;try{ef(t)}catch(d){Hn(t,a,d)}break;case 5:var l=t.return;try{ef(t)}catch(d){Hn(t,l,d)}}}catch(d){Hn(t,t.return,d)}if(t===e){dt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,dt=u;break}dt=t.return}}var mw=Math.ceil,Pu=Ci.ReactCurrentDispatcher,qf=Ci.ReactCurrentOwner,ys=Ci.ReactCurrentBatchConfig,rn=0,hr=null,Qn=null,xr=0,Gr=0,ha=ao(0),or=0,Ql=null,Co=0,ed=0,Qf=0,$l=null,Fr=null,e0=0,Sa=1/0,xi=null,Ru=!1,rf=null,to=null,Kc=!1,Xi=null,Du=0,Al=0,sf=null,du=-1,pu=0;function Mr(){return rn&6?Kn():du!==-1?du:du=Kn()}function no(e){return e.mode&1?rn&2&&xr!==0?xr&-xr:qb.transition!==null?(pu===0&&(pu=Wg()),pu):(e=mn,e!==0||(e=window.event,e=e===void 0?16:Zg(e.type)),e):1}function Ls(e,t,n,s){if(50<Al)throw Al=0,sf=null,Error(Pe(185));tc(e,n,s),(!(rn&2)||e!==hr)&&(e===hr&&(!(rn&2)&&(ed|=n),or===4&&Yi(e,xr)),Vr(e,s),n===1&&rn===0&&!(t.mode&1)&&(Sa=Kn()+500,Ju&&lo()))}function Vr(e,t){var n=e.callbackNode;qv(e,t);var s=bu(e,e===hr?xr:0);if(s===0)n!==null&&Nh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Nh(n),t===1)e.tag===0?Zb(ym.bind(null,e)):gx(ym.bind(null,e)),Yb(function(){!(rn&6)&&lo()}),n=null;else{switch(Vg(s)){case 1:n=Nf;break;case 4:n=Bg;break;case 16:n=vu;break;case 536870912:n=Hg;break;default:n=vu}n=hy(n,ay.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ay(e,t){if(du=-1,pu=0,rn&6)throw Error(Pe(327));var n=e.callbackNode;if(ba()&&e.callbackNode!==n)return null;var s=bu(e,e===hr?xr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Lu(e,s);else{t=s;var o=rn;rn|=2;var a=cy();(hr!==e||xr!==t)&&(xi=null,Sa=Kn()+500,zo(e,t));do try{yw();break}catch(u){ly(e,u)}while(!0);Of(),Pu.current=a,rn=o,Qn!==null?t=0:(hr=null,xr=0,t=or)}if(t!==0){if(t===2&&(o=Tp(e),o!==0&&(s=o,t=of(e,o))),t===1)throw n=Ql,zo(e,0),Yi(e,s),Vr(e,Kn()),n;if(t===6)Yi(e,s);else{if(o=e.current.alternate,!(s&30)&&!gw(o)&&(t=Lu(e,s),t===2&&(a=Tp(e),a!==0&&(s=a,t=of(e,a))),t===1))throw n=Ql,zo(e,0),Yi(e,s),Vr(e,Kn()),n;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(Pe(345));case 2:vo(e,Fr,xi);break;case 3:if(Yi(e,s),(s&130023424)===s&&(t=e0+500-Kn(),10<t)){if(bu(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){Mr(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Op(vo.bind(null,e,Fr,xi),t);break}vo(e,Fr,xi);break;case 4:if(Yi(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var l=31-Ds(s);a=1<<l,l=t[l],l>o&&(o=l),s&=~a}if(s=o,s=Kn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*mw(s/1960))-s,10<s){e.timeoutHandle=Op(vo.bind(null,e,Fr,xi),s);break}vo(e,Fr,xi);break;case 5:vo(e,Fr,xi);break;default:throw Error(Pe(329))}}}return Vr(e,Kn()),e.callbackNode===n?ay.bind(null,e):null}function of(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(zo(e,t).flags|=256),e=Lu(e,t),e!==2&&(t=Fr,Fr=n,t!==null&&af(t)),e}function af(e){Fr===null?Fr=e:Fr.push.apply(Fr,e)}function gw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var o=n[s],a=o.getSnapshot;o=o.value;try{if(!Os(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yi(e,t){for(t&=~Qf,t&=~ed,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ds(t),s=1<<n;e[n]=-1,t&=~s}}function ym(e){if(rn&6)throw Error(Pe(327));ba();var t=bu(e,0);if(!(t&1))return Vr(e,Kn()),null;var n=Lu(e,t);if(e.tag!==0&&n===2){var s=Tp(e);s!==0&&(t=s,n=of(e,s))}if(n===1)throw n=Ql,zo(e,0),Yi(e,t),Vr(e,Kn()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vo(e,Fr,xi),Vr(e,Kn()),null}function t0(e,t){var n=rn;rn|=1;try{return e(t)}finally{rn=n,rn===0&&(Sa=Kn()+500,Ju&&lo())}}function Eo(e){Xi!==null&&Xi.tag===0&&!(rn&6)&&ba();var t=rn;rn|=1;var n=ys.transition,s=mn;try{if(ys.transition=null,mn=1,e)return e()}finally{mn=s,ys.transition=n,rn=t,!(rn&6)&&lo()}}function n0(){Gr=ha.current,Tn(ha)}function zo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kb(n)),Qn!==null)for(n=Qn.return;n!==null;){var s=n;switch(Rf(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_u();break;case 3:_a(),Tn(Hr),Tn(_r),Vf();break;case 5:Wf(s);break;case 4:_a();break;case 13:Tn(Ln);break;case 19:Tn(Ln);break;case 10:Uf(s.type._context);break;case 22:case 23:n0()}n=n.return}if(hr=e,Qn=e=ro(e.current,null),xr=Gr=t,or=0,Ql=null,Qf=ed=Co=0,Fr=$l=null,wo!==null){for(t=0;t<wo.length;t++)if(n=wo[t],s=n.interleaved,s!==null){n.interleaved=null;var o=s.next,a=n.pending;if(a!==null){var l=a.next;a.next=o,s.next=l}n.pending=s}wo=null}return e}function ly(e,t){do{var n=Qn;try{if(Of(),lu.current=Au,$u){for(var s=On.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}$u=!1}if(So=0,fr=ir=On=null,Tl=!1,Jl=0,qf.current=null,n===null||n.return===null){or=1,Ql=t,Qn=null;break}e:{var a=e,l=n.return,u=n,d=t;if(t=xr,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var g=d,j=u,w=j.tag;if(!(j.mode&1)&&(w===0||w===11||w===15)){var k=j.alternate;k?(j.updateQueue=k.updateQueue,j.memoizedState=k.memoizedState,j.lanes=k.lanes):(j.updateQueue=null,j.memoizedState=null)}var v=im(l);if(v!==null){v.flags&=-257,om(v,l,u,a,t),v.mode&1&&sm(a,g,t),t=v,d=g;var $=t.updateQueue;if($===null){var z=new Set;z.add(d),t.updateQueue=z}else $.add(d);break e}else{if(!(t&1)){sm(a,g,t),r0();break e}d=Error(Pe(426))}}else if(Pn&&u.mode&1){var P=im(l);if(P!==null){!(P.flags&65536)&&(P.flags|=256),om(P,l,u,a,t),Df(Na(d,u));break e}}a=d=Na(d,u),or!==4&&(or=2),$l===null?$l=[a]:$l.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=Vx(a,d,t);qh(a,x);break e;case 1:u=d;var y=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(to===null||!to.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var L=Kx(a,u,t);qh(a,L);break e}}a=a.return}while(a!==null)}dy(n)}catch(W){t=W,Qn===n&&n!==null&&(Qn=n=n.return);continue}break}while(!0)}function cy(){var e=Pu.current;return Pu.current=Au,e===null?Au:e}function r0(){(or===0||or===3||or===2)&&(or=4),hr===null||!(Co&268435455)&&!(ed&268435455)||Yi(hr,xr)}function Lu(e,t){var n=rn;rn|=2;var s=cy();(hr!==e||xr!==t)&&(xi=null,zo(e,t));do try{xw();break}catch(o){ly(e,o)}while(!0);if(Of(),rn=n,Pu.current=s,Qn!==null)throw Error(Pe(261));return hr=null,xr=0,or}function xw(){for(;Qn!==null;)uy(Qn)}function yw(){for(;Qn!==null&&!Hv();)uy(Qn)}function uy(e){var t=fy(e.alternate,e,Gr);e.memoizedProps=e.pendingProps,t===null?dy(e):Qn=t,qf.current=null}function dy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dw(n,t),n!==null){n.flags&=32767,Qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{or=6,Qn=null;return}}else if(n=uw(n,t,Gr),n!==null){Qn=n;return}if(t=t.sibling,t!==null){Qn=t;return}Qn=t=e}while(t!==null);or===0&&(or=5)}function vo(e,t,n){var s=mn,o=ys.transition;try{ys.transition=null,mn=1,vw(e,t,n,s)}finally{ys.transition=o,mn=s}return null}function vw(e,t,n,s){do ba();while(Xi!==null);if(rn&6)throw Error(Pe(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Qv(e,a),e===hr&&(Qn=hr=null,xr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kc||(Kc=!0,hy(vu,function(){return ba(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ys.transition,ys.transition=null;var l=mn;mn=1;var u=rn;rn|=4,qf.current=null,fw(e,n),iy(n,e),Ob(Dp),wu=!!Rp,Dp=Rp=null,e.current=n,hw(n),Wv(),rn=u,mn=l,ys.transition=a}else e.current=n;if(Kc&&(Kc=!1,Xi=e,Du=o),a=e.pendingLanes,a===0&&(to=null),Yv(n.stateNode),Vr(e,Kn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(Ru)throw Ru=!1,e=rf,rf=null,e;return Du&1&&e.tag!==0&&ba(),a=e.pendingLanes,a&1?e===sf?Al++:(Al=0,sf=e):Al=0,lo(),null}function ba(){if(Xi!==null){var e=Vg(Du),t=ys.transition,n=mn;try{if(ys.transition=null,mn=16>e?16:e,Xi===null)var s=!1;else{if(e=Xi,Xi=null,Du=0,rn&6)throw Error(Pe(331));var o=rn;for(rn|=4,dt=e.current;dt!==null;){var a=dt,l=a.child;if(dt.flags&16){var u=a.deletions;if(u!==null){for(var d=0;d<u.length;d++){var g=u[d];for(dt=g;dt!==null;){var j=dt;switch(j.tag){case 0:case 11:case 15:Ml(8,j,a)}var w=j.child;if(w!==null)w.return=j,dt=w;else for(;dt!==null;){j=dt;var k=j.sibling,v=j.return;if(ny(j),j===g){dt=null;break}if(k!==null){k.return=v,dt=k;break}dt=v}}}var $=a.alternate;if($!==null){var z=$.child;if(z!==null){$.child=null;do{var P=z.sibling;z.sibling=null,z=P}while(z!==null)}}dt=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,dt=l;else e:for(;dt!==null;){if(a=dt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ml(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,dt=x;break e}dt=a.return}}var y=e.current;for(dt=y;dt!==null;){l=dt;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,dt=S;else e:for(l=y;dt!==null;){if(u=dt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Qu(9,u)}}catch(W){Hn(u,u.return,W)}if(u===l){dt=null;break e}var L=u.sibling;if(L!==null){L.return=u.return,dt=L;break e}dt=u.return}}if(rn=o,lo(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(Vu,e)}catch{}s=!0}return s}finally{mn=n,ys.transition=t}}return!1}function vm(e,t,n){t=Na(n,t),t=Vx(e,t,1),e=eo(e,t,1),t=Mr(),e!==null&&(tc(e,1,t),Vr(e,t))}function Hn(e,t,n){if(e.tag===3)vm(e,e,n);else for(;t!==null;){if(t.tag===3){vm(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(to===null||!to.has(s))){e=Na(n,e),e=Kx(t,e,1),t=eo(t,e,1),e=Mr(),t!==null&&(tc(t,1,e),Vr(t,e));break}}t=t.return}}function bw(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Mr(),e.pingedLanes|=e.suspendedLanes&n,hr===e&&(xr&n)===n&&(or===4||or===3&&(xr&130023424)===xr&&500>Kn()-e0?zo(e,0):Qf|=n),Vr(e,t)}function py(e,t){t===0&&(e.mode&1?(t=Rc,Rc<<=1,!(Rc&130023424)&&(Rc=4194304)):t=1);var n=Mr();e=Ni(e,t),e!==null&&(tc(e,t,n),Vr(e,n))}function ww(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),py(e,n)}function kw(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Pe(314))}s!==null&&s.delete(t),py(e,n)}var fy;fy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)Br=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Br=!1,cw(e,t,n);Br=!!(e.flags&131072)}else Br=!1,Pn&&t.flags&1048576&&xx(t,Cu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;uu(e,t),e=t.pendingProps;var o=ka(t,_r.current);va(t,n),o=Yf(null,t,s,e,o,n);var a=Gf();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wr(s)?(a=!0,Nu(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Bf(t),o.updater=qu,t.stateNode=o,o._reactInternals=t,Kp(t,s,e,n),t=Xp(null,t,s,!0,a,n)):(t.tag=0,Pn&&a&&Pf(t),Tr(null,t,o,n),t=t.child),t;case 16:s=t.elementType;e:{switch(uu(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=jw(s),e=As(s,e),o){case 0:t=Gp(null,t,s,e,n);break e;case 1:t=cm(null,t,s,e,n);break e;case 11:t=am(null,t,s,e,n);break e;case 14:t=lm(null,t,s,As(s.type,e),n);break e}throw Error(Pe(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:As(s,o),Gp(e,t,s,o,n);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:As(s,o),cm(e,t,s,o,n);case 3:e:{if(Jx(t),e===null)throw Error(Pe(387));s=t.pendingProps,a=t.memoizedState,o=a.element,zx(e,t),Tu(t,s,null,n);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Na(Error(Pe(423)),t),t=um(e,t,s,n,o);break e}else if(s!==o){o=Na(Error(Pe(424)),t),t=um(e,t,s,n,o);break e}else for(Jr=Qi(t.stateNode.containerInfo.firstChild),Zr=t,Pn=!0,Rs=null,n=wx(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(za(),s===o){t=Si(e,t,n);break e}Tr(e,t,s,n)}t=t.child}return t;case 5:return jx(t),e===null&&Hp(t),s=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,l=o.children,Lp(s,o)?l=null:a!==null&&Lp(s,a)&&(t.flags|=32),Xx(e,t),Tr(e,t,l,n),t.child;case 6:return e===null&&Hp(t),null;case 13:return Zx(e,t,n);case 4:return Hf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ja(t,null,s,n):Tr(e,t,s,n),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:As(s,o),am(e,t,s,o,n);case 7:return Tr(e,t,t.pendingProps,n),t.child;case 8:return Tr(e,t,t.pendingProps.children,n),t.child;case 12:return Tr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,a=t.memoizedProps,l=o.value,jn(Eu,s._currentValue),s._currentValue=l,a!==null)if(Os(a.value,l)){if(a.children===o.children&&!Hr.current){t=Si(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){l=a.child;for(var d=u.firstContext;d!==null;){if(d.context===s){if(a.tag===1){d=zi(-1,n&-n),d.tag=2;var g=a.updateQueue;if(g!==null){g=g.shared;var j=g.pending;j===null?d.next=d:(d.next=j.next,j.next=d),g.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Wp(a.return,n,t),u.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(Pe(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Wp(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Tr(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,va(t,n),o=vs(o),s=s(o),t.flags|=1,Tr(e,t,s,n),t.child;case 14:return s=t.type,o=As(s,t.pendingProps),o=As(s.type,o),lm(e,t,s,o,n);case 15:return Yx(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:As(s,o),uu(e,t),t.tag=1,Wr(s)?(e=!0,Nu(t)):e=!1,va(t,n),Wx(t,s,o),Kp(t,s,o,n),Xp(null,t,s,!0,e,n);case 19:return qx(e,t,n);case 22:return Gx(e,t,n)}throw Error(Pe(156,t.tag))};function hy(e,t){return Fg(e,t)}function zw(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(e,t,n,s){return new zw(e,t,n,s)}function s0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jw(e){if(typeof e=="function")return s0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zf)return 11;if(e===jf)return 14}return 2}function ro(e,t){var n=e.alternate;return n===null?(n=xs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fu(e,t,n,s,o,a){var l=2;if(s=e,typeof e=="function")s0(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case sa:return jo(n.children,o,a,t);case kf:l=8,o|=8;break;case gp:return e=xs(12,n,t,o|2),e.elementType=gp,e.lanes=a,e;case xp:return e=xs(13,n,t,o),e.elementType=xp,e.lanes=a,e;case yp:return e=xs(19,n,t,o),e.elementType=yp,e.lanes=a,e;case jg:return td(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kg:l=10;break e;case zg:l=9;break e;case zf:l=11;break e;case jf:l=14;break e;case Wi:l=16,s=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=xs(l,n,t,o),t.elementType=e,t.type=s,t.lanes=a,t}function jo(e,t,n,s){return e=xs(7,e,s,t),e.lanes=n,e}function td(e,t,n,s){return e=xs(22,e,s,t),e.elementType=jg,e.lanes=n,e.stateNode={isHidden:!1},e}function Qd(e,t,n){return e=xs(6,e,null,t),e.lanes=n,e}function ep(e,t,n){return t=xs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _w(e,t,n,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function i0(e,t,n,s,o,a,l,u,d){return e=new _w(e,t,n,u,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=xs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bf(a),e}function Nw(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ra,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function my(e){if(!e)return io;e=e._reactInternals;e:{if($o(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(Wr(n))return mx(e,n,t)}return t}function gy(e,t,n,s,o,a,l,u,d){return e=i0(n,s,!0,e,o,a,l,u,d),e.context=my(null),n=e.current,s=Mr(),o=no(n),a=zi(s,o),a.callback=t??null,eo(n,a,o),e.current.lanes=o,tc(e,o,s),Vr(e,s),e}function nd(e,t,n,s){var o=t.current,a=Mr(),l=no(o);return n=my(n),t.context===null?t.context=n:t.pendingContext=n,t=zi(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=eo(o,t,l),e!==null&&(Ls(e,o,l,a),au(e,o,l)),l}function Ou(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function o0(e,t){bm(e,t),(e=e.alternate)&&bm(e,t)}function Sw(){return null}var xy=typeof reportError=="function"?reportError:function(e){console.error(e)};function a0(e){this._internalRoot=e}rd.prototype.render=a0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));nd(e,t,null,null)};rd.prototype.unmount=a0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eo(function(){nd(null,e,null,null)}),t[_i]=null}};function rd(e){this._internalRoot=e}rd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ki.length&&t!==0&&t<Ki[n].priority;n++);Ki.splice(n,0,e),n===0&&Jg(e)}};function l0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wm(){}function Cw(e,t,n,s,o){if(o){if(typeof s=="function"){var a=s;s=function(){var g=Ou(l);a.call(g)}}var l=gy(t,s,e,0,null,!1,!1,"",wm);return e._reactRootContainer=l,e[_i]=l.current,Vl(e.nodeType===8?e.parentNode:e),Eo(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var u=s;s=function(){var g=Ou(d);u.call(g)}}var d=i0(e,0,!1,null,null,!1,!1,"",wm);return e._reactRootContainer=d,e[_i]=d.current,Vl(e.nodeType===8?e.parentNode:e),Eo(function(){nd(t,d,n,s)}),d}function id(e,t,n,s,o){var a=n._reactRootContainer;if(a){var l=a;if(typeof o=="function"){var u=o;o=function(){var d=Ou(l);u.call(d)}}nd(t,l,e,o)}else l=Cw(n,t,e,o,s);return Ou(l)}Kg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wl(t.pendingLanes);n!==0&&(Sf(t,n|1),Vr(t,Kn()),!(rn&6)&&(Sa=Kn()+500,lo()))}break;case 13:Eo(function(){var s=Ni(e,1);if(s!==null){var o=Mr();Ls(s,e,1,o)}}),o0(e,1)}};Cf=function(e){if(e.tag===13){var t=Ni(e,134217728);if(t!==null){var n=Mr();Ls(t,e,134217728,n)}o0(e,134217728)}};Yg=function(e){if(e.tag===13){var t=no(e),n=Ni(e,t);if(n!==null){var s=Mr();Ls(n,e,t,s)}o0(e,t)}};Gg=function(){return mn};Xg=function(e,t){var n=mn;try{return mn=e,t()}finally{mn=n}};Cp=function(e,t,n){switch(t){case"input":if(wp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var o=Xu(s);if(!o)throw Error(Pe(90));Ng(s),wp(s,o)}}}break;case"textarea":Cg(e,n);break;case"select":t=n.value,t!=null&&ma(e,!!n.multiple,t,!1)}};Pg=t0;Rg=Eo;var Ew={usingClientEntryPoint:!1,Events:[rc,la,Xu,$g,Ag,t0]},ll={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iw={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Og(e),e===null?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||Sw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Vu=Yc.inject(Iw),qs=Yc}catch{}}Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ew;Qr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l0(t))throw Error(Pe(200));return Nw(e,t,null,n)};Qr.createRoot=function(e,t){if(!l0(e))throw Error(Pe(299));var n=!1,s="",o=xy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=i0(e,1,!1,null,null,n,!1,s,o),e[_i]=t.current,Vl(e.nodeType===8?e.parentNode:e),new a0(t)};Qr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=Og(t),e=e===null?null:e.stateNode,e};Qr.flushSync=function(e){return Eo(e)};Qr.hydrate=function(e,t,n){if(!sd(t))throw Error(Pe(200));return id(null,e,t,!0,n)};Qr.hydrateRoot=function(e,t,n){if(!l0(e))throw Error(Pe(405));var s=n!=null&&n.hydratedSources||null,o=!1,a="",l=xy;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=gy(t,null,e,1,n??null,o,!1,a,l),e[_i]=t.current,Vl(e),s)for(e=0;e<s.length;e++)n=s[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new rd(t)};Qr.render=function(e,t,n){if(!sd(t))throw Error(Pe(200));return id(null,e,t,!1,n)};Qr.unmountComponentAtNode=function(e){if(!sd(e))throw Error(Pe(40));return e._reactRootContainer?(Eo(function(){id(null,null,e,!1,function(){e._reactRootContainer=null,e[_i]=null})}),!0):!1};Qr.unstable_batchedUpdates=t0;Qr.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!sd(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return id(e,t,n,!1,s)};Qr.version="18.3.1-next-f1338f8080-20240426";function yy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yy)}catch(e){console.error(e)}}yy(),yg.exports=Qr;var vy=yg.exports,km=vy;hp.createRoot=km.createRoot,hp.hydrateRoot=km.hydrateRoot;function c0(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ao=c0();function by(e){Ao=e}const wy=/[&<>"']/,Tw=new RegExp(wy.source,"g"),ky=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Mw=new RegExp(ky.source,"g"),$w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zm=e=>$w[e];function Xr(e,t){if(t){if(wy.test(e))return e.replace(Tw,zm)}else if(ky.test(e))return e.replace(Mw,zm);return e}const Aw=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Pw(e){return e.replace(Aw,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const Rw=/(^|[^\[])\^/g;function gn(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const s={replace:(o,a)=>{let l=typeof a=="string"?a:a.source;return l=l.replace(Rw,"$1"),n=n.replace(o,l),s},getRegex:()=>new RegExp(n,t)};return s}function jm(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Pl={exec:()=>null};function _m(e,t){const n=e.replace(/\|/g,(a,l,u)=>{let d=!1,g=l;for(;--g>=0&&u[g]==="\\";)d=!d;return d?"|":" |"}),s=n.split(/ \|/);let o=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;o<s.length;o++)s[o]=s[o].trim().replace(/\\\|/g,"|");return s}function Gc(e,t,n){const s=e.length;if(s===0)return"";let o=0;for(;o<s&&e.charAt(s-o-1)===t;)o++;return e.slice(0,s-o)}function Dw(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return-1}function Nm(e,t,n,s){const o=t.href,a=t.title?Xr(t.title):null,l=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){s.state.inLink=!0;const u={type:"link",raw:n,href:o,title:a,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,u}return{type:"image",raw:n,href:o,title:a,text:Xr(l)}}function Lw(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const s=n[1];return t.split(`
`).map(o=>{const a=o.match(/^\s+/);if(a===null)return o;const[l]=a;return l.length>=s.length?o.slice(s.length):o}).join(`
`)}class Uu{constructor(t){En(this,"options");En(this,"rules");En(this,"lexer");this.options=t||Ao}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const s=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Gc(s,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const s=n[0],o=Lw(s,n[3]||"");return{type:"code",raw:s,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let s=n[2].trim();if(/#$/.test(s)){const o=Gc(s,"#");(this.options.pedantic||!o||/ $/.test(o))&&(s=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let s=n[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);s=Gc(s.replace(/^ *>[ \t]?/gm,""),`
`);const o=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(s);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:a,text:s}}}list(t){let n=this.rules.block.list.exec(t);if(n){let s=n[1].trim();const o=s.length>1,a={type:"list",raw:"",ordered:o,start:o?+s.slice(0,-1):"",loose:!1,items:[]};s=o?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=o?s:"[*+-]");const l=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let u="",d="",g=!1;for(;t;){let j=!1;if(!(n=l.exec(t))||this.rules.block.hr.test(t))break;u=n[0],t=t.substring(u.length);let w=n[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),k=t.split(`
`,1)[0],v=0;this.options.pedantic?(v=2,d=w.trimStart()):(v=n[2].search(/[^ ]/),v=v>4?1:v,d=w.slice(v),v+=n[1].length);let $=!1;if(!w&&/^ *$/.test(k)&&(u+=k+`
`,t=t.substring(k.length+1),j=!0),!j){const x=new RegExp(`^ {0,${Math.min(3,v-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,v-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,v-1)}}(?:\`\`\`|~~~)`),L=new RegExp(`^ {0,${Math.min(3,v-1)}}#`);for(;t;){const W=t.split(`
`,1)[0];if(k=W,this.options.pedantic&&(k=k.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),S.test(k)||L.test(k)||x.test(k)||y.test(t))break;if(k.search(/[^ ]/)>=v||!k.trim())d+=`
`+k.slice(v);else{if($||w.search(/[^ ]/)>=4||S.test(w)||L.test(w)||y.test(w))break;d+=`
`+k}!$&&!k.trim()&&($=!0),u+=W+`
`,t=t.substring(W.length+1),w=k.slice(v)}}a.loose||(g?a.loose=!0:/\n *\n *$/.test(u)&&(g=!0));let z=null,P;this.options.gfm&&(z=/^\[[ xX]\] /.exec(d),z&&(P=z[0]!=="[ ] ",d=d.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:u,task:!!z,checked:P,loose:!1,text:d,tokens:[]}),a.raw+=u}a.items[a.items.length-1].raw=u.trimEnd(),a.items[a.items.length-1].text=d.trimEnd(),a.raw=a.raw.trimEnd();for(let j=0;j<a.items.length;j++)if(this.lexer.state.top=!1,a.items[j].tokens=this.lexer.blockTokens(a.items[j].text,[]),!a.loose){const w=a.items[j].tokens.filter(v=>v.type==="space"),k=w.length>0&&w.some(v=>/\n.*\n/.test(v.raw));a.loose=k}if(a.loose)for(let j=0;j<a.items.length;j++)a.items[j].loose=!0;return a}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const s=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:s,raw:n[0],href:o,title:a}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const s=_m(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),a=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],l={type:"table",raw:n[0],header:[],align:[],rows:[]};if(s.length===o.length){for(const u of o)/^ *-+: *$/.test(u)?l.align.push("right"):/^ *:-+: *$/.test(u)?l.align.push("center"):/^ *:-+ *$/.test(u)?l.align.push("left"):l.align.push(null);for(const u of s)l.header.push({text:u,tokens:this.lexer.inline(u)});for(const u of a)l.rows.push(_m(u,l.header.length).map(d=>({text:d,tokens:this.lexer.inline(d)})));return l}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const s=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Xr(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const s=n[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const l=Gc(s.slice(0,-1),"\\");if((s.length-l.length)%2===0)return}else{const l=Dw(n[2],"()");if(l>-1){const d=(n[0].indexOf("!")===0?5:4)+n[1].length+l;n[2]=n[2].substring(0,l),n[0]=n[0].substring(0,d).trim(),n[3]=""}}let o=n[2],a="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);l&&(o=l[1],a=l[3])}else a=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(s)?o=o.slice(1):o=o.slice(1,-1)),Nm(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){const o=(s[2]||s[1]).replace(/\s+/g," "),a=n[o.toLowerCase()];if(!a){const l=s[0].charAt(0);return{type:"text",raw:l,text:l}}return Nm(s,a,s[0],this.lexer)}}emStrong(t,n,s=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const l=[...o[0]].length-1;let u,d,g=l,j=0;const w=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(w.lastIndex=0,n=n.slice(-1*t.length+l);(o=w.exec(n))!=null;){if(u=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!u)continue;if(d=[...u].length,o[3]||o[4]){g+=d;continue}else if((o[5]||o[6])&&l%3&&!((l+d)%3)){j+=d;continue}if(g-=d,g>0)continue;d=Math.min(d,d+g+j);const k=[...o[0]][0].length,v=t.slice(0,l+o.index+k+d);if(Math.min(l,d)%2){const z=v.slice(1,-1);return{type:"em",raw:v,text:z,tokens:this.lexer.inlineTokens(z)}}const $=v.slice(2,-2);return{type:"strong",raw:v,text:$,tokens:this.lexer.inlineTokens($)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let s=n[2].replace(/\n/g," ");const o=/[^ ]/.test(s),a=/^ /.test(s)&&/ $/.test(s);return o&&a&&(s=s.substring(1,s.length-1)),s=Xr(s,!0),{type:"codespan",raw:n[0],text:s}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let s,o;return n[2]==="@"?(s=Xr(n[1]),o="mailto:"+s):(s=Xr(n[1]),o=s),{type:"link",raw:n[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}url(t){var s;let n;if(n=this.rules.inline.url.exec(t)){let o,a;if(n[2]==="@")o=Xr(n[0]),a="mailto:"+o;else{let l;do l=n[0],n[0]=((s=this.rules.inline._backpedal.exec(n[0]))==null?void 0:s[0])??"";while(l!==n[0]);o=Xr(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:o,href:a,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let s;return this.lexer.state.inRawBlock?s=n[0]:s=Xr(n[0]),{type:"text",raw:n[0],text:s}}}}const Ow=/^(?: *(?:\n|$))+/,Uw=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Fw=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ic=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Bw=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,zy=/(?:[*+-]|\d{1,9}[.)])/,jy=gn(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,zy).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),u0=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Hw=/^[^\n]+/,d0=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ww=gn(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",d0).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Vw=gn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,zy).getRegex(),od="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",p0=/\x3C!--(?:-?>|[\s\S]*?(?:-->|$))/,Kw=gn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",p0).replace("tag",od).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_y=gn(u0).replace("hr",ic).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",od).getRegex(),Yw=gn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",_y).getRegex(),f0={blockquote:Yw,code:Uw,def:Ww,fences:Fw,heading:Bw,hr:ic,html:Kw,lheading:jy,list:Vw,newline:Ow,paragraph:_y,table:Pl,text:Hw},Sm=gn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ic).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",od).getRegex(),Gw={...f0,table:Sm,paragraph:gn(u0).replace("hr",ic).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Sm).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",od).getRegex()},Xw={...f0,html:gn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",p0).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Pl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gn(u0).replace("hr",ic).replace("heading",` *#{1,6} *[^
]`).replace("lheading",jy).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ny=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Jw=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Sy=/^( {2,}|\\)\n(?!\s*$)/,Zw=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,oc="\\p{P}\\p{S}",qw=gn(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,oc).getRegex(),Qw=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,e2=gn(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,oc).getRegex(),t2=gn("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,oc).getRegex(),n2=gn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,oc).getRegex(),r2=gn(/\\([punct])/,"gu").replace(/punct/g,oc).getRegex(),s2=gn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),i2=gn(p0).replace("(?:-->|$)","-->").getRegex(),o2=gn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",i2).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Fu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,a2=gn(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Fu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Cy=gn(/^!?\[(label)\]\[(ref)\]/).replace("label",Fu).replace("ref",d0).getRegex(),Ey=gn(/^!?\[(ref)\](?:\[\])?/).replace("ref",d0).getRegex(),l2=gn("reflink|nolink(?!\\()","g").replace("reflink",Cy).replace("nolink",Ey).getRegex(),h0={_backpedal:Pl,anyPunctuation:r2,autolink:s2,blockSkip:Qw,br:Sy,code:Jw,del:Pl,emStrongLDelim:e2,emStrongRDelimAst:t2,emStrongRDelimUnd:n2,escape:Ny,link:a2,nolink:Ey,punctuation:qw,reflink:Cy,reflinkSearch:l2,tag:o2,text:Zw,url:Pl},c2={...h0,link:gn(/^!?\[(label)\]\((.*?)\)/).replace("label",Fu).getRegex(),reflink:gn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Fu).getRegex()},lf={...h0,escape:gn(Ny).replace("])","~|])").getRegex(),url:gn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},u2={...lf,br:gn(Sy).replace("{2,}","*").getRegex(),text:gn(lf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xc={normal:f0,gfm:Gw,pedantic:Xw},cl={normal:h0,gfm:lf,breaks:u2,pedantic:c2};class Js{constructor(t){En(this,"tokens");En(this,"options");En(this,"state");En(this,"tokenizer");En(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ao,this.options.tokenizer=this.options.tokenizer||new Uu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Xc.normal,inline:cl.normal};this.options.pedantic?(n.block=Xc.pedantic,n.inline=cl.pedantic):this.options.gfm&&(n.block=Xc.gfm,this.options.breaks?n.inline=cl.breaks:n.inline=cl.gfm),this.tokenizer.rules=n}static get rules(){return{block:Xc,inline:cl}}static lex(t,n){return new Js(n).lex(t)}static lexInline(t,n){return new Js(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(u,d,g)=>d+"    ".repeat(g.length));let s,o,a,l;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(u=>(s=u.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+s.raw,o.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(a=t,this.options.extensions&&this.options.extensions.startBlock){let u=1/0;const d=t.slice(1);let g;this.options.extensions.startBlock.forEach(j=>{g=j.call({lexer:this},d),typeof g=="number"&&g>=0&&(u=Math.min(u,g))}),u<1/0&&u>=0&&(a=t.substring(0,u+1))}if(this.state.top&&(s=this.tokenizer.paragraph(a))){o=n[n.length-1],l&&o.type==="paragraph"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(s),l=a.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(s);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let s,o,a,l=t,u,d,g;if(this.tokens.links){const j=Object.keys(this.tokens.links);if(j.length>0)for(;(u=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)j.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,u.index)+"["+"a".repeat(u[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(u=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,u.index)+"["+"a".repeat(u[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(u=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,u.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(d||(g=""),d=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(j=>(s=j.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&s.type==="text"&&o.type==="text"?(o.raw+=s.raw,o.text+=s.text):n.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),o=n[n.length-1],o&&s.type==="text"&&o.type==="text"?(o.raw+=s.raw,o.text+=s.text):n.push(s);continue}if(s=this.tokenizer.emStrong(t,l,g)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),n.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),n.push(s);continue}if(a=t,this.options.extensions&&this.options.extensions.startInline){let j=1/0;const w=t.slice(1);let k;this.options.extensions.startInline.forEach(v=>{k=v.call({lexer:this},w),typeof k=="number"&&k>=0&&(j=Math.min(j,k))}),j<1/0&&j>=0&&(a=t.substring(0,j+1))}if(s=this.tokenizer.inlineText(a)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(g=s.raw.slice(-1)),d=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=s.raw,o.text+=s.text):n.push(s);continue}if(t){const j="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(j);break}else throw new Error(j)}}return n}}class Bu{constructor(t){En(this,"options");this.options=t||Ao}code(t,n,s){var a;const o=(a=(n||"").match(/^\S*/))==null?void 0:a[0];return t=t.replace(/\n$/,"")+`
`,o?'<pre><code class="language-'+Xr(o)+'">'+(s?t:Xr(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:Xr(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,s){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,s){const o=n?"ol":"ul",a=n&&s!==1?' start="'+s+'"':"";return"<"+o+a+`>
`+t+"</"+o+`>
`}listitem(t,n,s){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const s=n.header?"th":"td";return(n.align?`<${s} align="${n.align}">`:`<${s}>`)+t+`</${s}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,s){const o=jm(t);if(o===null)return s;t=o;let a='<a href="'+t+'"';return n&&(a+=' title="'+n+'"'),a+=">"+s+"</a>",a}image(t,n,s){const o=jm(t);if(o===null)return s;t=o;let a=`<img src="${t}" alt="${s}"`;return n&&(a+=` title="${n}"`),a+=">",a}text(t){return t}}class m0{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,s){return""+s}image(t,n,s){return""+s}br(){return""}}class Zs{constructor(t){En(this,"options");En(this,"renderer");En(this,"textRenderer");this.options=t||Ao,this.options.renderer=this.options.renderer||new Bu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new m0}static parse(t,n){return new Zs(n).parse(t)}static parseInline(t,n){return new Zs(n).parseInline(t)}parse(t,n=!0){let s="";for(let o=0;o<t.length;o++){const a=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const l=a,u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){s+=u||"";continue}}switch(a.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const l=a;s+=this.renderer.heading(this.parseInline(l.tokens),l.depth,Pw(this.parseInline(l.tokens,this.textRenderer)));continue}case"code":{const l=a;s+=this.renderer.code(l.text,l.lang,!!l.escaped);continue}case"table":{const l=a;let u="",d="";for(let j=0;j<l.header.length;j++)d+=this.renderer.tablecell(this.parseInline(l.header[j].tokens),{header:!0,align:l.align[j]});u+=this.renderer.tablerow(d);let g="";for(let j=0;j<l.rows.length;j++){const w=l.rows[j];d="";for(let k=0;k<w.length;k++)d+=this.renderer.tablecell(this.parseInline(w[k].tokens),{header:!1,align:l.align[k]});g+=this.renderer.tablerow(d)}s+=this.renderer.table(u,g);continue}case"blockquote":{const l=a,u=this.parse(l.tokens);s+=this.renderer.blockquote(u);continue}case"list":{const l=a,u=l.ordered,d=l.start,g=l.loose;let j="";for(let w=0;w<l.items.length;w++){const k=l.items[w],v=k.checked,$=k.task;let z="";if(k.task){const P=this.renderer.checkbox(!!v);g?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=P+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=P+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:P+" "}):z+=P+" "}z+=this.parse(k.tokens,g),j+=this.renderer.listitem(z,$,!!v)}s+=this.renderer.list(j,u,d);continue}case"html":{const l=a;s+=this.renderer.html(l.text,l.block);continue}case"paragraph":{const l=a;s+=this.renderer.paragraph(this.parseInline(l.tokens));continue}case"text":{let l=a,u=l.tokens?this.parseInline(l.tokens):l.text;for(;o+1<t.length&&t[o+1].type==="text";)l=t[++o],u+=`
`+(l.tokens?this.parseInline(l.tokens):l.text);s+=n?this.renderer.paragraph(u):u;continue}default:{const l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(t,n){n=n||this.renderer;let s="";for(let o=0;o<t.length;o++){const a=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=l||"";continue}}switch(a.type){case"escape":{const l=a;s+=n.text(l.text);break}case"html":{const l=a;s+=n.html(l.text);break}case"link":{const l=a;s+=n.link(l.href,l.title,this.parseInline(l.tokens,n));break}case"image":{const l=a;s+=n.image(l.href,l.title,l.text);break}case"strong":{const l=a;s+=n.strong(this.parseInline(l.tokens,n));break}case"em":{const l=a;s+=n.em(this.parseInline(l.tokens,n));break}case"codespan":{const l=a;s+=n.codespan(l.text);break}case"br":{s+=n.br();break}case"del":{const l=a;s+=n.del(this.parseInline(l.tokens,n));break}case"text":{const l=a;s+=n.text(l.text);break}default:{const l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}}class Rl{constructor(t){En(this,"options");this.options=t||Ao}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}En(Rl,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var To,cf,Iy;class d2{constructor(...t){fh(this,To);En(this,"defaults",c0());En(this,"options",this.setOptions);En(this,"parse",Ic(this,To,cf).call(this,Js.lex,Zs.parse));En(this,"parseInline",Ic(this,To,cf).call(this,Js.lexInline,Zs.parseInline));En(this,"Parser",Zs);En(this,"Renderer",Bu);En(this,"TextRenderer",m0);En(this,"Lexer",Js);En(this,"Tokenizer",Uu);En(this,"Hooks",Rl);this.use(...t)}walkTokens(t,n){var o,a;let s=[];for(const l of t)switch(s=s.concat(n.call(this,l)),l.type){case"table":{const u=l;for(const d of u.header)s=s.concat(this.walkTokens(d.tokens,n));for(const d of u.rows)for(const g of d)s=s.concat(this.walkTokens(g.tokens,n));break}case"list":{const u=l;s=s.concat(this.walkTokens(u.items,n));break}default:{const u=l;(a=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&a[u.type]?this.defaults.extensions.childTokens[u.type].forEach(d=>{const g=u[d].flat(1/0);s=s.concat(this.walkTokens(g,n))}):u.tokens&&(s=s.concat(this.walkTokens(u.tokens,n)))}}return s}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(s=>{const o={...s};if(o.async=this.defaults.async||o.async||!1,s.extensions&&(s.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const l=n.renderers[a.name];l?n.renderers[a.name]=function(...u){let d=a.renderer.apply(this,u);return d===!1&&(d=l.apply(this,u)),d}:n.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const l=n[a.level];l?l.unshift(a.tokenizer):n[a.level]=[a.tokenizer],a.start&&(a.level==="block"?n.startBlock?n.startBlock.push(a.start):n.startBlock=[a.start]:a.level==="inline"&&(n.startInline?n.startInline.push(a.start):n.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(n.childTokens[a.name]=a.childTokens)}),o.extensions=n),s.renderer){const a=this.defaults.renderer||new Bu(this.defaults);for(const l in s.renderer){if(!(l in a))throw new Error(`renderer '${l}' does not exist`);if(l==="options")continue;const u=l,d=s.renderer[u],g=a[u];a[u]=(...j)=>{let w=d.apply(a,j);return w===!1&&(w=g.apply(a,j)),w||""}}o.renderer=a}if(s.tokenizer){const a=this.defaults.tokenizer||new Uu(this.defaults);for(const l in s.tokenizer){if(!(l in a))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;const u=l,d=s.tokenizer[u],g=a[u];a[u]=(...j)=>{let w=d.apply(a,j);return w===!1&&(w=g.apply(a,j)),w}}o.tokenizer=a}if(s.hooks){const a=this.defaults.hooks||new Rl;for(const l in s.hooks){if(!(l in a))throw new Error(`hook '${l}' does not exist`);if(l==="options")continue;const u=l,d=s.hooks[u],g=a[u];Rl.passThroughHooks.has(l)?a[u]=j=>{if(this.defaults.async)return Promise.resolve(d.call(a,j)).then(k=>g.call(a,k));const w=d.call(a,j);return g.call(a,w)}:a[u]=(...j)=>{let w=d.apply(a,j);return w===!1&&(w=g.apply(a,j)),w}}o.hooks=a}if(s.walkTokens){const a=this.defaults.walkTokens,l=s.walkTokens;o.walkTokens=function(u){let d=[];return d.push(l.call(this,u)),a&&(d=d.concat(a.call(this,u))),d}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Js.lex(t,n??this.defaults)}parser(t,n){return Zs.parse(t,n??this.defaults)}}To=new WeakSet,cf=function(t,n){return(s,o)=>{const a={...o},l={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(l.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),l.async=!0);const u=Ic(this,To,Iy).call(this,!!l.silent,!!l.async);if(typeof s>"u"||s===null)return u(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(l.hooks&&(l.hooks.options=l),l.async)return Promise.resolve(l.hooks?l.hooks.preprocess(s):s).then(d=>t(d,l)).then(d=>l.hooks?l.hooks.processAllTokens(d):d).then(d=>l.walkTokens?Promise.all(this.walkTokens(d,l.walkTokens)).then(()=>d):d).then(d=>n(d,l)).then(d=>l.hooks?l.hooks.postprocess(d):d).catch(u);try{l.hooks&&(s=l.hooks.preprocess(s));let d=t(s,l);l.hooks&&(d=l.hooks.processAllTokens(d)),l.walkTokens&&this.walkTokens(d,l.walkTokens);let g=n(d,l);return l.hooks&&(g=l.hooks.postprocess(g)),g}catch(d){return u(d)}}},Iy=function(t,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const o="<p>An error occurred:</p><pre>"+Xr(s.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(s);throw s}};const Io=new d2;function hn(e,t){return Io.parse(e,t)}hn.options=hn.setOptions=function(e){return Io.setOptions(e),hn.defaults=Io.defaults,by(hn.defaults),hn};hn.getDefaults=c0;hn.defaults=Ao;hn.use=function(...e){return Io.use(...e),hn.defaults=Io.defaults,by(hn.defaults),hn};hn.walkTokens=function(e,t){return Io.walkTokens(e,t)};hn.parseInline=Io.parseInline;hn.Parser=Zs;hn.parser=Zs.parse;hn.Renderer=Bu;hn.TextRenderer=m0;hn.Lexer=Js;hn.lexer=Js.lex;hn.Tokenizer=Uu;hn.Hooks=Rl;hn.parse=hn;hn.options;hn.setOptions;hn.use;hn.walkTokens;hn.parseInline;Zs.parse;Js.lex;/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Ty,setPrototypeOf:Cm,isFrozen:p2,getPrototypeOf:f2,getOwnPropertyDescriptor:h2}=Object;let{freeze:$r,seal:ws,create:uf}=Object,{apply:df,construct:pf}=typeof Reflect<"u"&&Reflect;$r||($r=function(t){return t});ws||(ws=function(t){return t});df||(df=function(t,n){for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];return t.apply(n,o)});pf||(pf=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return new t(...s)});const Jc=Ar(Array.prototype.forEach),m2=Ar(Array.prototype.lastIndexOf),Em=Ar(Array.prototype.pop),ul=Ar(Array.prototype.push),g2=Ar(Array.prototype.splice),hu=Ar(String.prototype.toLowerCase),tp=Ar(String.prototype.toString),np=Ar(String.prototype.match),dl=Ar(String.prototype.replace),x2=Ar(String.prototype.indexOf),y2=Ar(String.prototype.trim),$s=Ar(Object.prototype.hasOwnProperty),Er=Ar(RegExp.prototype.test),pl=v2(TypeError);function Ar(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return df(e,t,s)}}function v2(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return pf(e,n)}}function Gt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hu;Cm&&Cm(e,null);let s=t.length;for(;s--;){let o=t[s];if(typeof o=="string"){const a=n(o);a!==o&&(p2(t)||(t[s]=a),o=a)}e[o]=!0}return e}function b2(e){for(let t=0;t<e.length;t++)$s(e,t)||(e[t]=null);return e}function Ks(e){const t=uf(null);for(const[n,s]of Ty(e))$s(e,n)&&(Array.isArray(s)?t[n]=b2(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=Ks(s):t[n]=s);return t}function fl(e,t){for(;e!==null;){const s=h2(e,t);if(s){if(s.get)return Ar(s.get);if(typeof s.value=="function")return Ar(s.value)}e=f2(e)}function n(){return null}return n}const Im=$r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rp=$r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sp=$r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),w2=$r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ip=$r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),k2=$r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Tm=$r(["#text"]),Mm=$r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),op=$r(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$m=$r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zc=$r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z2=ws(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j2=ws(/<%[\w\W]*|[\w\W]*%>/gm),_2=ws(/\$\{[\w\W]*/gm),N2=ws(/^data-[\-\w.\u00B7-\uFFFF]+$/),S2=ws(/^aria-[\-\w]+$/),My=ws(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),C2=ws(/^(?:\w+script|data):/i),E2=ws(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$y=ws(/^html$/i),I2=ws(/^[a-z][.\w]*(-[.\w]+)+$/i);var Am=Object.freeze({__proto__:null,ARIA_ATTR:S2,ATTR_WHITESPACE:E2,CUSTOM_ELEMENT:I2,DATA_ATTR:N2,DOCTYPE_NAME:$y,ERB_EXPR:j2,IS_ALLOWED_URI:My,IS_SCRIPT_OR_DATA:C2,MUSTACHE_EXPR:z2,TMPLIT_EXPR:_2});const hl={element:1,text:3,progressingInstruction:7,comment:8,document:9},T2=function(){return typeof window>"u"?null:window},M2=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const a="dompurify"+(s?"#"+s:"");try{return t.createPolicy(a,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Pm=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ay(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T2();const t=zt=>Ay(zt);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==hl.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,o=s.currentScript,{DocumentFragment:a,HTMLTemplateElement:l,Node:u,Element:d,NodeFilter:g,NamedNodeMap:j=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:w,DOMParser:k,trustedTypes:v}=e,$=d.prototype,z=fl($,"cloneNode"),P=fl($,"remove"),x=fl($,"nextSibling"),y=fl($,"childNodes"),S=fl($,"parentNode");if(typeof l=="function"){const zt=n.createElement("template");zt.content&&zt.content.ownerDocument&&(n=zt.content.ownerDocument)}let L,W="";const{implementation:q,createNodeIterator:Q,createDocumentFragment:de,getElementsByTagName:ce}=n,{importNode:ye}=s;let He=Pm();t.isSupported=typeof Ty=="function"&&typeof S=="function"&&q&&q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:he,TMPLIT_EXPR:N,DATA_ATTR:ae,ARIA_ATTR:Ze,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:pe,CUSTOM_ELEMENT:ge}=Am;let{IS_ALLOWED_URI:Ae}=Am,X=null;const Z=Gt({},[...Im,...rp,...sp,...ip,...Tm]);let Te=null;const Ye=Gt({},[...Mm,...op,...$m,...Zc]);let Ne=Object.seal(uf(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),At=null,nn=null;const $t=Object.seal(uf(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Dt=!0,_n=!0,sn=!1,mr=!0,kn=!1,b=!0,ke=!1,xe=!1,H=!1,U=!1,ee=!1,Ee=!1,Me=!0,ue=!1;const Re="user-content-";let nt=!0,$e=!1,ft={},Wt=null;const Pt=Gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ar=null;const Kr=Gt({},["audio","video","img","source","image","track"]);let Yn=null;const er=Gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dn="http://www.w3.org/1998/Math/MathML",tr="http://www.w3.org/2000/svg",Nr="http://www.w3.org/1999/xhtml";let kt=Nr,St=!1,Us=null;const ei=Gt({},[dn,tr,Nr],tp);let Sr=Gt({},["mi","mo","mn","ms","mtext"]),zn=Gt({},["annotation-xml"]);const ts=Gt({},["title","style","font","a","script"]);let ks=null;const g0=["application/xhtml+xml","text/html"],x0="text/html";let Gn=null,Xn=null;const ti=n.createElement("form"),zs=function(Y){return Y instanceof RegExp||Y instanceof Function},ni=function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Xn&&Xn===Y)){if((!Y||typeof Y!="object")&&(Y={}),Y=Ks(Y),ks=g0.indexOf(Y.PARSER_MEDIA_TYPE)===-1?x0:Y.PARSER_MEDIA_TYPE,Gn=ks==="application/xhtml+xml"?tp:hu,X=$s(Y,"ALLOWED_TAGS")?Gt({},Y.ALLOWED_TAGS,Gn):Z,Te=$s(Y,"ALLOWED_ATTR")?Gt({},Y.ALLOWED_ATTR,Gn):Ye,Us=$s(Y,"ALLOWED_NAMESPACES")?Gt({},Y.ALLOWED_NAMESPACES,tp):ei,Yn=$s(Y,"ADD_URI_SAFE_ATTR")?Gt(Ks(er),Y.ADD_URI_SAFE_ATTR,Gn):er,ar=$s(Y,"ADD_DATA_URI_TAGS")?Gt(Ks(Kr),Y.ADD_DATA_URI_TAGS,Gn):Kr,Wt=$s(Y,"FORBID_CONTENTS")?Gt({},Y.FORBID_CONTENTS,Gn):Pt,At=$s(Y,"FORBID_TAGS")?Gt({},Y.FORBID_TAGS,Gn):Ks({}),nn=$s(Y,"FORBID_ATTR")?Gt({},Y.FORBID_ATTR,Gn):Ks({}),ft=$s(Y,"USE_PROFILES")?Y.USE_PROFILES:!1,Dt=Y.ALLOW_ARIA_ATTR!==!1,_n=Y.ALLOW_DATA_ATTR!==!1,sn=Y.ALLOW_UNKNOWN_PROTOCOLS||!1,mr=Y.ALLOW_SELF_CLOSE_IN_ATTR!==!1,kn=Y.SAFE_FOR_TEMPLATES||!1,b=Y.SAFE_FOR_XML!==!1,ke=Y.WHOLE_DOCUMENT||!1,U=Y.RETURN_DOM||!1,ee=Y.RETURN_DOM_FRAGMENT||!1,Ee=Y.RETURN_TRUSTED_TYPE||!1,H=Y.FORCE_BODY||!1,Me=Y.SANITIZE_DOM!==!1,ue=Y.SANITIZE_NAMED_PROPS||!1,nt=Y.KEEP_CONTENT!==!1,$e=Y.IN_PLACE||!1,Ae=Y.ALLOWED_URI_REGEXP||My,kt=Y.NAMESPACE||Nr,Sr=Y.MATHML_TEXT_INTEGRATION_POINTS||Sr,zn=Y.HTML_INTEGRATION_POINTS||zn,Ne=Y.CUSTOM_ELEMENT_HANDLING||{},Y.CUSTOM_ELEMENT_HANDLING&&zs(Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ne.tagNameCheck=Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&zs(Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ne.attributeNameCheck=Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&typeof Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ne.allowCustomizedBuiltInElements=Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),kn&&(_n=!1),ee&&(U=!0),ft&&(X=Gt({},Tm),Te=[],ft.html===!0&&(Gt(X,Im),Gt(Te,Mm)),ft.svg===!0&&(Gt(X,rp),Gt(Te,op),Gt(Te,Zc)),ft.svgFilters===!0&&(Gt(X,sp),Gt(Te,op),Gt(Te,Zc)),ft.mathMl===!0&&(Gt(X,ip),Gt(Te,$m),Gt(Te,Zc))),Y.ADD_TAGS&&(typeof Y.ADD_TAGS=="function"?$t.tagCheck=Y.ADD_TAGS:(X===Z&&(X=Ks(X)),Gt(X,Y.ADD_TAGS,Gn))),Y.ADD_ATTR&&(typeof Y.ADD_ATTR=="function"?$t.attributeCheck=Y.ADD_ATTR:(Te===Ye&&(Te=Ks(Te)),Gt(Te,Y.ADD_ATTR,Gn))),Y.ADD_URI_SAFE_ATTR&&Gt(Yn,Y.ADD_URI_SAFE_ATTR,Gn),Y.FORBID_CONTENTS&&(Wt===Pt&&(Wt=Ks(Wt)),Gt(Wt,Y.FORBID_CONTENTS,Gn)),Y.ADD_FORBID_CONTENTS&&(Wt===Pt&&(Wt=Ks(Wt)),Gt(Wt,Y.ADD_FORBID_CONTENTS,Gn)),nt&&(X["#text"]=!0),ke&&Gt(X,["html","head","body"]),X.table&&(Gt(X,["tbody"]),delete At.tbody),Y.TRUSTED_TYPES_POLICY){if(typeof Y.TRUSTED_TYPES_POLICY.createHTML!="function")throw pl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Y.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=Y.TRUSTED_TYPES_POLICY,W=L.createHTML("")}else L===void 0&&(L=M2(v,o)),L!==null&&typeof W=="string"&&(W=L.createHTML(""));$r&&$r(Y),Xn=Y}},ri=Gt({},[...rp,...sp,...w2]),Ta=Gt({},[...ip,...k2]),co=function(Y){let Se=S(Y);(!Se||!Se.tagName)&&(Se={namespaceURI:kt,tagName:"template"});const lt=hu(Y.tagName),cn=hu(Se.tagName);return Us[Y.namespaceURI]?Y.namespaceURI===tr?Se.namespaceURI===Nr?lt==="svg":Se.namespaceURI===dn?lt==="svg"&&(cn==="annotation-xml"||Sr[cn]):!!ri[lt]:Y.namespaceURI===dn?Se.namespaceURI===Nr?lt==="math":Se.namespaceURI===tr?lt==="math"&&zn[cn]:!!Ta[lt]:Y.namespaceURI===Nr?Se.namespaceURI===tr&&!zn[cn]||Se.namespaceURI===dn&&!Sr[cn]?!1:!Ta[lt]&&(ts[lt]||!ri[lt]):!!(ks==="application/xhtml+xml"&&Us[Y.namespaceURI]):!1},lr=function(Y){ul(t.removed,{element:Y});try{S(Y).removeChild(Y)}catch{P(Y)}},si=function(Y,Se){try{ul(t.removed,{attribute:Se.getAttributeNode(Y),from:Se})}catch{ul(t.removed,{attribute:null,from:Se})}if(Se.removeAttribute(Y),Y==="is")if(U||ee)try{lr(Se)}catch{}else try{Se.setAttribute(Y,"")}catch{}},ac=function(Y){let Se=null,lt=null;if(H)Y="<remove></remove>"+Y;else{const Nn=np(Y,/^[\r\n\t ]+/);lt=Nn&&Nn[0]}ks==="application/xhtml+xml"&&kt===Nr&&(Y='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Y+"</body></html>");const cn=L?L.createHTML(Y):Y;if(kt===Nr)try{Se=new k().parseFromString(cn,ks)}catch{}if(!Se||!Se.documentElement){Se=q.createDocument(kt,"template",null);try{Se.documentElement.innerHTML=St?W:cn}catch{}}const nr=Se.body||Se.documentElement;return Y&&lt&&nr.insertBefore(n.createTextNode(lt),nr.childNodes[0]||null),kt===Nr?ce.call(Se,ke?"html":"body")[0]:ke?Se.documentElement:nr},ii=function(Y){return Q.call(Y.ownerDocument||Y,Y,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT|g.SHOW_PROCESSING_INSTRUCTION|g.SHOW_CDATA_SECTION,null)},ns=function(Y){return Y instanceof w&&(typeof Y.nodeName!="string"||typeof Y.textContent!="string"||typeof Y.removeChild!="function"||!(Y.attributes instanceof j)||typeof Y.removeAttribute!="function"||typeof Y.setAttribute!="function"||typeof Y.namespaceURI!="string"||typeof Y.insertBefore!="function"||typeof Y.hasChildNodes!="function")},Cr=function(Y){return typeof u=="function"&&Y instanceof u};function js(zt,Y,Se){Jc(zt,lt=>{lt.call(t,Y,Se,Xn)})}const Po=function(Y){let Se=null;if(js(He.beforeSanitizeElements,Y,null),ns(Y))return lr(Y),!0;const lt=Gn(Y.nodeName);if(js(He.uponSanitizeElement,Y,{tagName:lt,allowedTags:X}),b&&Y.hasChildNodes()&&!Cr(Y.firstElementChild)&&Er(/<[/\w!]/g,Y.innerHTML)&&Er(/<[/\w!]/g,Y.textContent)||Y.nodeType===hl.progressingInstruction||b&&Y.nodeType===hl.comment&&Er(/<[/\w]/g,Y.data))return lr(Y),!0;if(!($t.tagCheck instanceof Function&&$t.tagCheck(lt))&&(!X[lt]||At[lt])){if(!At[lt]&&uo(lt)&&(Ne.tagNameCheck instanceof RegExp&&Er(Ne.tagNameCheck,lt)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(lt)))return!1;if(nt&&!Wt[lt]){const cn=S(Y)||Y.parentNode,nr=y(Y)||Y.childNodes;if(nr&&cn){const Nn=nr.length;for(let cr=Nn-1;cr>=0;--cr){const rs=z(nr[cr],!0);rs.__removalCount=(Y.__removalCount||0)+1,cn.insertBefore(rs,x(Y))}}}return lr(Y),!0}return Y instanceof d&&!co(Y)||(lt==="noscript"||lt==="noembed"||lt==="noframes")&&Er(/<\/no(script|embed|frames)/i,Y.innerHTML)?(lr(Y),!0):(kn&&Y.nodeType===hl.text&&(Se=Y.textContent,Jc([V,he,N],cn=>{Se=dl(Se,cn," ")}),Y.textContent!==Se&&(ul(t.removed,{element:Y.cloneNode()}),Y.textContent=Se)),js(He.afterSanitizeElements,Y,null),!1)},Ma=function(Y,Se,lt){if(Me&&(Se==="id"||Se==="name")&&(lt in n||lt in ti))return!1;if(!(_n&&!nn[Se]&&Er(ae,Se))){if(!(Dt&&Er(Ze,Se))){if(!($t.attributeCheck instanceof Function&&$t.attributeCheck(Se,Y))){if(!Te[Se]||nn[Se]){if(!(uo(Y)&&(Ne.tagNameCheck instanceof RegExp&&Er(Ne.tagNameCheck,Y)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(Y))&&(Ne.attributeNameCheck instanceof RegExp&&Er(Ne.attributeNameCheck,Se)||Ne.attributeNameCheck instanceof Function&&Ne.attributeNameCheck(Se,Y))||Se==="is"&&Ne.allowCustomizedBuiltInElements&&(Ne.tagNameCheck instanceof RegExp&&Er(Ne.tagNameCheck,lt)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(lt))))return!1}else if(!Yn[Se]){if(!Er(Ae,dl(lt,pe,""))){if(!((Se==="src"||Se==="xlink:href"||Se==="href")&&Y!=="script"&&x2(lt,"data:")===0&&ar[Y])){if(!(sn&&!Er(we,dl(lt,pe,"")))){if(lt)return!1}}}}}}}return!0},uo=function(Y){return Y!=="annotation-xml"&&np(Y,ge)},po=function(Y){js(He.beforeSanitizeAttributes,Y,null);const{attributes:Se}=Y;if(!Se||ns(Y))return;const lt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te,forceKeepAttr:void 0};let cn=Se.length;for(;cn--;){const nr=Se[cn],{name:Nn,namespaceURI:cr,value:rs}=nr,Ei=Gn(Nn),fo=rs;let rr=Nn==="value"?fo:y2(fo);if(lt.attrName=Ei,lt.attrValue=rr,lt.keepAttr=!0,lt.forceKeepAttr=void 0,js(He.uponSanitizeAttribute,Y,lt),rr=lt.attrValue,ue&&(Ei==="id"||Ei==="name")&&(si(Nn,Y),rr=Re+rr),b&&Er(/((--!?|])>)|<\/(style|title|textarea)/i,rr)){si(Nn,Y);continue}if(Ei==="attributename"&&np(rr,"href")){si(Nn,Y);continue}if(lt.forceKeepAttr)continue;if(!lt.keepAttr){si(Nn,Y);continue}if(!mr&&Er(/\/>/i,rr)){si(Nn,Y);continue}kn&&Jc([V,he,N],Ii=>{rr=dl(rr,Ii," ")});const oi=Gn(Y.nodeName);if(!Ma(oi,Ei,rr)){si(Nn,Y);continue}if(L&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!cr)switch(v.getAttributeType(oi,Ei)){case"TrustedHTML":{rr=L.createHTML(rr);break}case"TrustedScriptURL":{rr=L.createScriptURL(rr);break}}if(rr!==fo)try{cr?Y.setAttributeNS(cr,Nn,rr):Y.setAttribute(Nn,rr),ns(Y)?lr(Y):Em(t.removed)}catch{si(Nn,Y)}}js(He.afterSanitizeAttributes,Y,null)},Ro=function zt(Y){let Se=null;const lt=ii(Y);for(js(He.beforeSanitizeShadowDOM,Y,null);Se=lt.nextNode();)js(He.uponSanitizeShadowNode,Se,null),Po(Se),po(Se),Se.content instanceof a&&zt(Se.content);js(He.afterSanitizeShadowDOM,Y,null)};return t.sanitize=function(zt){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=null,lt=null,cn=null,nr=null;if(St=!zt,St&&(zt="\x3C!-->"),typeof zt!="string"&&!Cr(zt))if(typeof zt.toString=="function"){if(zt=zt.toString(),typeof zt!="string")throw pl("dirty is not a string, aborting")}else throw pl("toString is not a function");if(!t.isSupported)return zt;if(xe||ni(Y),t.removed=[],typeof zt=="string"&&($e=!1),$e){if(zt.nodeName){const rs=Gn(zt.nodeName);if(!X[rs]||At[rs])throw pl("root node is forbidden and cannot be sanitized in-place")}}else if(zt instanceof u)Se=ac("\x3C!---->"),lt=Se.ownerDocument.importNode(zt,!0),lt.nodeType===hl.element&&lt.nodeName==="BODY"||lt.nodeName==="HTML"?Se=lt:Se.appendChild(lt);else{if(!U&&!kn&&!ke&&zt.indexOf("<")===-1)return L&&Ee?L.createHTML(zt):zt;if(Se=ac(zt),!Se)return U?null:Ee?W:""}Se&&H&&lr(Se.firstChild);const Nn=ii($e?zt:Se);for(;cn=Nn.nextNode();)Po(cn),po(cn),cn.content instanceof a&&Ro(cn.content);if($e)return zt;if(U){if(ee)for(nr=de.call(Se.ownerDocument);Se.firstChild;)nr.appendChild(Se.firstChild);else nr=Se;return(Te.shadowroot||Te.shadowrootmode)&&(nr=ye.call(s,nr,!0)),nr}let cr=ke?Se.outerHTML:Se.innerHTML;return ke&&X["!doctype"]&&Se.ownerDocument&&Se.ownerDocument.doctype&&Se.ownerDocument.doctype.name&&Er($y,Se.ownerDocument.doctype.name)&&(cr="<!DOCTYPE "+Se.ownerDocument.doctype.name+`>
`+cr),kn&&Jc([V,he,N],rs=>{cr=dl(cr,rs," ")}),L&&Ee?L.createHTML(cr):cr},t.setConfig=function(){let zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ni(zt),xe=!0},t.clearConfig=function(){Xn=null,xe=!1},t.isValidAttribute=function(zt,Y,Se){Xn||ni({});const lt=Gn(zt),cn=Gn(Y);return Ma(lt,cn,Se)},t.addHook=function(zt,Y){typeof Y=="function"&&ul(He[zt],Y)},t.removeHook=function(zt,Y){if(Y!==void 0){const Se=m2(He[zt],Y);return Se===-1?void 0:g2(He[zt],Se,1)[0]}return Em(He[zt])},t.removeHooks=function(zt){He[zt]=[]},t.removeAllHooks=function(){He=Pm()},t}var $2=Ay();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),at=(e,t)=>{const n=F.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:d,...g},j)=>F.createElement("svg",{ref:j,...A2,width:o,height:o,stroke:s,strokeWidth:l?Number(a)*24/Number(o):a,className:["lucide",`lucide-${P2(e)}`,u].join(" "),...g},[...t.map(([w,k])=>F.createElement(w,k)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=at("ArrowRightSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=at("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=at("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=at("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=at("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=at("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=at("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=at("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=at("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=at("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=at("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=at("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=at("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=at("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=at("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=at("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=at("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=at("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=at("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=at("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=at("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=at("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=at("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=at("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"1vg67v"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=at("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=at("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=at("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=at("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=at("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=at("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=at("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=at("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=at("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=at("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=at("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=at("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=at("Mic2",[["path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12",key:"zoua8r"}],["circle",{cx:"17",cy:"7",r:"5",key:"1fomce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=at("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=at("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=at("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=at("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=at("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=at("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=at("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=at("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=at("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=at("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=at("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=at("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=at("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=at("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=at("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=at("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=at("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=at("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=at("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=at("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=at("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=at("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=at("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=at("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=at("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=at("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=at("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=at("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=at("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Qc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ry={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(s,o,a){function l(g,j){if(!o[g]){if(!s[g]){var w=typeof Qc=="function"&&Qc;if(!j&&w)return w(g,!0);if(u)return u(g,!0);var k=new Error("Cannot find module '"+g+"'");throw k.code="MODULE_NOT_FOUND",k}var v=o[g]={exports:{}};s[g][0].call(v.exports,function($){var z=s[g][1][$];return l(z||$)},v,v.exports,n,s,o,a)}return o[g].exports}for(var u=typeof Qc=="function"&&Qc,d=0;d<a.length;d++)l(a[d]);return l}({1:[function(n,s,o){var a=n("./utils"),l=n("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(d){for(var g,j,w,k,v,$,z,P=[],x=0,y=d.length,S=y,L=a.getTypeOf(d)!=="string";x<d.length;)S=y-x,w=L?(g=d[x++],j=x<y?d[x++]:0,x<y?d[x++]:0):(g=d.charCodeAt(x++),j=x<y?d.charCodeAt(x++):0,x<y?d.charCodeAt(x++):0),k=g>>2,v=(3&g)<<4|j>>4,$=1<S?(15&j)<<2|w>>6:64,z=2<S?63&w:64,P.push(u.charAt(k)+u.charAt(v)+u.charAt($)+u.charAt(z));return P.join("")},o.decode=function(d){var g,j,w,k,v,$,z=0,P=0,x="data:";if(d.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var y,S=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&S--,d.charAt(d.length-2)===u.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=l.uint8array?new Uint8Array(0|S):new Array(0|S);z<d.length;)g=u.indexOf(d.charAt(z++))<<2|(k=u.indexOf(d.charAt(z++)))>>4,j=(15&k)<<4|(v=u.indexOf(d.charAt(z++)))>>2,w=(3&v)<<6|($=u.indexOf(d.charAt(z++))),y[P++]=g,v!==64&&(y[P++]=j),$!==64&&(y[P++]=w);return y}},{"./support":30,"./utils":32}],2:[function(n,s,o){var a=n("./external"),l=n("./stream/DataWorker"),u=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function g(j,w,k,v,$){this.compressedSize=j,this.uncompressedSize=w,this.crc32=k,this.compression=v,this.compressedContent=$}g.prototype={getContentWorker:function(){var j=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),w=this;return j.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),j},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(j,w,k){return j.pipe(new u).pipe(new d("uncompressedSize")).pipe(w.compressWorker(k)).pipe(new d("compressedSize")).withStreamInfo("compression",w)},s.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,s,o){var a=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,s,o){var a=n("./utils"),l=function(){for(var u,d=[],g=0;g<256;g++){u=g;for(var j=0;j<8;j++)u=1&u?3988292384^u>>>1:u>>>1;d[g]=u}return d}();s.exports=function(u,d){return u!==void 0&&u.length?a.getTypeOf(u)!=="string"?function(g,j,w,k){var v=l,$=k+w;g^=-1;for(var z=k;z<$;z++)g=g>>>8^v[255&(g^j[z])];return-1^g}(0|d,u,u.length,0):function(g,j,w,k){var v=l,$=k+w;g^=-1;for(var z=k;z<$;z++)g=g>>>8^v[255&(g^j.charCodeAt(z))];return-1^g}(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(n,s,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,s,o){var a=null;a=typeof Promise<"u"?Promise:n("lie"),s.exports={Promise:a}},{lie:37}],7:[function(n,s,o){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),u=n("./utils"),d=n("./stream/GenericWorker"),g=a?"uint8array":"array";function j(w,k){d.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=k,this.meta={}}o.magic="\b\0",u.inherits(j,d),j.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(g,w.data),!1)},j.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},j.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},j.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(k){w.push({data:k,meta:w.meta})}},o.compressWorker=function(w){return new j("Deflate",w)},o.uncompressWorker=function(){return new j("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,s,o){function a(v,$){var z,P="";for(z=0;z<$;z++)P+=String.fromCharCode(255&v),v>>>=8;return P}function l(v,$,z,P,x,y){var S,L,W=v.file,q=v.compression,Q=y!==g.utf8encode,de=u.transformTo("string",y(W.name)),ce=u.transformTo("string",g.utf8encode(W.name)),ye=W.comment,He=u.transformTo("string",y(ye)),V=u.transformTo("string",g.utf8encode(ye)),he=ce.length!==W.name.length,N=V.length!==ye.length,ae="",Ze="",we="",pe=W.dir,ge=W.date,Ae={crc32:0,compressedSize:0,uncompressedSize:0};$&&!z||(Ae.crc32=v.crc32,Ae.compressedSize=v.compressedSize,Ae.uncompressedSize=v.uncompressedSize);var X=0;$&&(X|=8),Q||!he&&!N||(X|=2048);var Z=0,Te=0;pe&&(Z|=16),x==="UNIX"?(Te=798,Z|=function(Ne,At){var nn=Ne;return Ne||(nn=At?16893:33204),(65535&nn)<<16}(W.unixPermissions,pe)):(Te=20,Z|=function(Ne){return 63&(Ne||0)}(W.dosPermissions)),S=ge.getUTCHours(),S<<=6,S|=ge.getUTCMinutes(),S<<=5,S|=ge.getUTCSeconds()/2,L=ge.getUTCFullYear()-1980,L<<=4,L|=ge.getUTCMonth()+1,L<<=5,L|=ge.getUTCDate(),he&&(Ze=a(1,1)+a(j(de),4)+ce,ae+="up"+a(Ze.length,2)+Ze),N&&(we=a(1,1)+a(j(He),4)+V,ae+="uc"+a(we.length,2)+we);var Ye="";return Ye+=`
\0`,Ye+=a(X,2),Ye+=q.magic,Ye+=a(S,2),Ye+=a(L,2),Ye+=a(Ae.crc32,4),Ye+=a(Ae.compressedSize,4),Ye+=a(Ae.uncompressedSize,4),Ye+=a(de.length,2),Ye+=a(ae.length,2),{fileRecord:w.LOCAL_FILE_HEADER+Ye+de+ae,dirRecord:w.CENTRAL_FILE_HEADER+a(Te,2)+Ye+a(He.length,2)+"\0\0\0\0"+a(Z,4)+a(P,4)+de+ae+He}}var u=n("../utils"),d=n("../stream/GenericWorker"),g=n("../utf8"),j=n("../crc32"),w=n("../signature");function k(v,$,z,P){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=$,this.zipPlatform=z,this.encodeFileName=P,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(k,d),k.prototype.push=function(v){var $=v.meta.percent||0,z=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:z?($+100*(z-P-1))/z:100}}))},k.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var $=this.streamFiles&&!v.file.dir;if($){var z=l(v,$,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:z.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(v){this.accumulate=!1;var $=this.streamFiles&&!v.file.dir,z=l(v,$,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(z.dirRecord),$)this.push({data:function(P){return w.DATA_DESCRIPTOR+a(P.crc32,4)+a(P.compressedSize,4)+a(P.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:z.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var v=this.bytesWritten,$=0;$<this.dirRecords.length;$++)this.push({data:this.dirRecords[$],meta:{percent:100}});var z=this.bytesWritten-v,P=function(x,y,S,L,W){var q=u.transformTo("string",W(L));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(x,2)+a(x,2)+a(y,4)+a(S,4)+a(q.length,2)+q}(this.dirRecords.length,z,v,this.zipComment,this.encodeFileName);this.push({data:P,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(v){this._sources.push(v);var $=this;return v.on("data",function(z){$.processChunk(z)}),v.on("end",function(){$.closedSource($.previous.streamInfo),$._sources.length?$.prepareNextSource():$.end()}),v.on("error",function(z){$.error(z)}),this},k.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(v){var $=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var z=0;z<$.length;z++)try{$[z].error(v)}catch{}return!0},k.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,$=0;$<v.length;$++)v[$].lock()},s.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,s,o){var a=n("../compressions"),l=n("./ZipFileWorker");o.generateWorker=function(u,d,g){var j=new l(d.streamFiles,g,d.platform,d.encodeFileName),w=0;try{u.forEach(function(k,v){w++;var $=function(y,S){var L=y||S,W=a[L];if(!W)throw new Error(L+" is not a valid compression method !");return W}(v.options.compression,d.compression),z=v.options.compressionOptions||d.compressionOptions||{},P=v.dir,x=v.date;v._compressWorker($,z).withStreamInfo("file",{name:k,dir:P,date:x,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(j)}),j.entriesCount=w}catch(k){j.error(k)}return j}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,s,o){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var u in this)typeof this[u]!="function"&&(l[u]=this[u]);return l}}(a.prototype=n("./object")).loadAsync=n("./load"),a.support=n("./support"),a.defaults=n("./defaults"),a.version="3.10.1",a.loadAsync=function(l,u){return new a().loadAsync(l,u)},a.external=n("./external"),s.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,s,o){var a=n("./utils"),l=n("./external"),u=n("./utf8"),d=n("./zipEntries"),g=n("./stream/Crc32Probe"),j=n("./nodejsUtils");function w(k){return new l.Promise(function(v,$){var z=k.decompressed.getContentWorker().pipe(new g);z.on("error",function(P){$(P)}).on("end",function(){z.streamInfo.crc32!==k.decompressed.crc32?$(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}s.exports=function(k,v){var $=this;return v=a.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),j.isNode&&j.isStream(k)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",k,!0,v.optimizedBinaryString,v.base64).then(function(z){var P=new d(v);return P.load(z),P}).then(function(z){var P=[l.Promise.resolve(z)],x=z.files;if(v.checkCRC32)for(var y=0;y<x.length;y++)P.push(w(x[y]));return l.Promise.all(P)}).then(function(z){for(var P=z.shift(),x=P.files,y=0;y<x.length;y++){var S=x[y],L=S.fileNameStr,W=a.resolve(S.fileNameStr);$.file(W,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:v.createFolders}),S.dir||($.file(W).unsafeOriginalName=L)}return P.zipComment.length&&($.comment=P.zipComment),$})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,s,o){var a=n("../utils"),l=n("../stream/GenericWorker");function u(d,g){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(g)}a.inherits(u,l),u.prototype._bindStream=function(d){var g=this;(this._stream=d).pause(),d.on("data",function(j){g.push({data:j,meta:{percent:0}})}).on("error",function(j){g.isPaused?this.generatedError=j:g.error(j)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},u.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,s,o){var a=n("readable-stream").Readable;function l(u,d,g){a.call(this,d),this._helper=u;var j=this;u.on("data",function(w,k){j.push(w)||j._helper.pause(),g&&g(k)}).on("error",function(w){j.emit("error",w)}).on("end",function(){j.push(null)})}n("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},s.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,s,o){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(n,s,o){function a(W,q,Q){var de,ce=u.getTypeOf(q),ye=u.extend(Q||{},j);ye.date=ye.date||new Date,ye.compression!==null&&(ye.compression=ye.compression.toUpperCase()),typeof ye.unixPermissions=="string"&&(ye.unixPermissions=parseInt(ye.unixPermissions,8)),ye.unixPermissions&&16384&ye.unixPermissions&&(ye.dir=!0),ye.dosPermissions&&16&ye.dosPermissions&&(ye.dir=!0),ye.dir&&(W=x(W)),ye.createFolders&&(de=P(W))&&y.call(this,de,!0);var He=ce==="string"&&ye.binary===!1&&ye.base64===!1;Q&&Q.binary!==void 0||(ye.binary=!He),(q instanceof w&&q.uncompressedSize===0||ye.dir||!q||q.length===0)&&(ye.base64=!1,ye.binary=!0,q="",ye.compression="STORE",ce="string");var V=null;V=q instanceof w||q instanceof d?q:$.isNode&&$.isStream(q)?new z(W,q):u.prepareContent(W,q,ye.binary,ye.optimizedBinaryString,ye.base64);var he=new k(W,V,ye);this.files[W]=he}var l=n("./utf8"),u=n("./utils"),d=n("./stream/GenericWorker"),g=n("./stream/StreamHelper"),j=n("./defaults"),w=n("./compressedObject"),k=n("./zipObject"),v=n("./generate"),$=n("./nodejsUtils"),z=n("./nodejs/NodejsStreamInputAdapter"),P=function(W){W.slice(-1)==="/"&&(W=W.substring(0,W.length-1));var q=W.lastIndexOf("/");return 0<q?W.substring(0,q):""},x=function(W){return W.slice(-1)!=="/"&&(W+="/"),W},y=function(W,q){return q=q!==void 0?q:j.createFolders,W=x(W),this.files[W]||a.call(this,W,null,{dir:!0,createFolders:q}),this.files[W]};function S(W){return Object.prototype.toString.call(W)==="[object RegExp]"}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(W){var q,Q,de;for(q in this.files)de=this.files[q],(Q=q.slice(this.root.length,q.length))&&q.slice(0,this.root.length)===this.root&&W(Q,de)},filter:function(W){var q=[];return this.forEach(function(Q,de){W(Q,de)&&q.push(de)}),q},file:function(W,q,Q){if(arguments.length!==1)return W=this.root+W,a.call(this,W,q,Q),this;if(S(W)){var de=W;return this.filter(function(ye,He){return!He.dir&&de.test(ye)})}var ce=this.files[this.root+W];return ce&&!ce.dir?ce:null},folder:function(W){if(!W)return this;if(S(W))return this.filter(function(ce,ye){return ye.dir&&W.test(ce)});var q=this.root+W,Q=y.call(this,q),de=this.clone();return de.root=Q.name,de},remove:function(W){W=this.root+W;var q=this.files[W];if(q||(W.slice(-1)!=="/"&&(W+="/"),q=this.files[W]),q&&!q.dir)delete this.files[W];else for(var Q=this.filter(function(ce,ye){return ye.name.slice(0,W.length)===W}),de=0;de<Q.length;de++)delete this.files[Q[de].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(W){var q,Q={};try{if((Q=u.extend(W||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=Q.type.toLowerCase(),Q.compression=Q.compression.toUpperCase(),Q.type==="binarystring"&&(Q.type="string"),!Q.type)throw new Error("No output type specified.");u.checkSupport(Q.type),Q.platform!=="darwin"&&Q.platform!=="freebsd"&&Q.platform!=="linux"&&Q.platform!=="sunos"||(Q.platform="UNIX"),Q.platform==="win32"&&(Q.platform="DOS");var de=Q.comment||this.comment||"";q=v.generateWorker(this,Q,de)}catch(ce){(q=new d("error")).error(ce)}return new g(q,Q.type||"string",Q.mimeType)},generateAsync:function(W,q){return this.generateInternalStream(W).accumulate(q)},generateNodeStream:function(W,q){return(W=W||{}).type||(W.type="nodebuffer"),this.generateInternalStream(W).toNodejsStream(q)}};s.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,s,o){s.exports=n("stream")},{stream:void 0}],17:[function(n,s,o){var a=n("./DataReader");function l(u){a.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}n("../utils").inherits(l,a),l.prototype.byteAt=function(u){return this.data[this.zero+u]},l.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),g=u.charCodeAt(1),j=u.charCodeAt(2),w=u.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===d&&this.data[k+1]===g&&this.data[k+2]===j&&this.data[k+3]===w)return k-this.zero;return-1},l.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),g=u.charCodeAt(1),j=u.charCodeAt(2),w=u.charCodeAt(3),k=this.readData(4);return d===k[0]&&g===k[1]&&j===k[2]&&w===k[3]},l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},s.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,s,o){var a=n("../utils");function l(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,g=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)g=(g<<8)+this.byteAt(d);return this.index+=u,g},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},s.exports=l},{"../utils":32}],19:[function(n,s,o){var a=n("./Uint8ArrayReader");function l(u){a.call(this,u)}n("../utils").inherits(l,a),l.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},s.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,s,o){var a=n("./DataReader");function l(u){a.call(this,u)}n("../utils").inherits(l,a),l.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},l.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},l.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},l.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},s.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,s,o){var a=n("./ArrayReader");function l(u){a.call(this,u)}n("../utils").inherits(l,a),l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},s.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,s,o){var a=n("../utils"),l=n("../support"),u=n("./ArrayReader"),d=n("./StringReader"),g=n("./NodeBufferReader"),j=n("./Uint8ArrayReader");s.exports=function(w){var k=a.getTypeOf(w);return a.checkSupport(k),k!=="string"||l.uint8array?k==="nodebuffer"?new g(w):l.uint8array?new j(a.transformTo("uint8array",w)):new u(a.transformTo("array",w)):new d(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,s,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,s,o){var a=n("./GenericWorker"),l=n("../utils");function u(d){a.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(u,a),u.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},s.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(n,s,o){var a=n("./GenericWorker"),l=n("../crc32");function u(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(u,a),u.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},s.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,s,o){var a=n("../utils"),l=n("./GenericWorker");function u(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}a.inherits(u,l),u.prototype.processChunk=function(d){if(d){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+d.data.length}l.prototype.processChunk.call(this,d)},s.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(n,s,o){var a=n("../utils"),l=n("./GenericWorker");function u(d){l.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(j){g.dataIsReady=!0,g.data=j,g.max=j&&j.length||0,g.type=a.getTypeOf(j),g.isPaused||g._tickAndRepeat()},function(j){g.error(j)})}a.inherits(u,l),u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,g);break;case"uint8array":d=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":d=this.data.slice(this.index,g)}return this.index=g,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(n,s,o){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,u){return this._listeners[l].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,u){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,u)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var u=this;return l.on("data",function(d){u.processChunk(d)}),l.on("end",function(){u.end()}),l.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,u){return this.extraStreamInfo[l]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},s.exports=a},{}],29:[function(n,s,o){var a=n("../utils"),l=n("./ConvertWorker"),u=n("./GenericWorker"),d=n("../base64"),g=n("../support"),j=n("../external"),w=null;if(g.nodestream)try{w=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function k($,z){return new j.Promise(function(P,x){var y=[],S=$._internalType,L=$._outputType,W=$._mimeType;$.on("data",function(q,Q){y.push(q),z&&z(Q)}).on("error",function(q){y=[],x(q)}).on("end",function(){try{var q=function(Q,de,ce){switch(Q){case"blob":return a.newBlob(a.transformTo("arraybuffer",de),ce);case"base64":return d.encode(de);default:return a.transformTo(Q,de)}}(L,function(Q,de){var ce,ye=0,He=null,V=0;for(ce=0;ce<de.length;ce++)V+=de[ce].length;switch(Q){case"string":return de.join("");case"array":return Array.prototype.concat.apply([],de);case"uint8array":for(He=new Uint8Array(V),ce=0;ce<de.length;ce++)He.set(de[ce],ye),ye+=de[ce].length;return He;case"nodebuffer":return Buffer.concat(de);default:throw new Error("concat : unsupported type '"+Q+"'")}}(S,y),W);P(q)}catch(Q){x(Q)}y=[]}).resume()})}function v($,z,P){var x=z;switch(z){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=z,this._mimeType=P,a.checkSupport(x),this._worker=$.pipe(new l(x)),$.lock()}catch(y){this._worker=new u("error"),this._worker.error(y)}}v.prototype={accumulate:function($){return k(this,$)},on:function($,z){var P=this;return $==="data"?this._worker.on($,function(x){z.call(P,x.data,x.meta)}):this._worker.on($,function(){a.delay(z,arguments,P)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function($){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},$)}},s.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,s,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var a=new ArrayBuffer(0);try{o.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),o.blob=l.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,s,o){for(var a=n("./utils"),l=n("./support"),u=n("./nodejsUtils"),d=n("./stream/GenericWorker"),g=new Array(256),j=0;j<256;j++)g[j]=252<=j?6:248<=j?5:240<=j?4:224<=j?3:192<=j?2:1;g[254]=g[254]=1;function w(){d.call(this,"utf-8 decode"),this.leftOver=null}function k(){d.call(this,"utf-8 encode")}o.utf8encode=function(v){return l.nodebuffer?u.newBufferFrom(v,"utf-8"):function($){var z,P,x,y,S,L=$.length,W=0;for(y=0;y<L;y++)(64512&(P=$.charCodeAt(y)))==55296&&y+1<L&&(64512&(x=$.charCodeAt(y+1)))==56320&&(P=65536+(P-55296<<10)+(x-56320),y++),W+=P<128?1:P<2048?2:P<65536?3:4;for(z=l.uint8array?new Uint8Array(W):new Array(W),y=S=0;S<W;y++)(64512&(P=$.charCodeAt(y)))==55296&&y+1<L&&(64512&(x=$.charCodeAt(y+1)))==56320&&(P=65536+(P-55296<<10)+(x-56320),y++),P<128?z[S++]=P:(P<2048?z[S++]=192|P>>>6:(P<65536?z[S++]=224|P>>>12:(z[S++]=240|P>>>18,z[S++]=128|P>>>12&63),z[S++]=128|P>>>6&63),z[S++]=128|63&P);return z}(v)},o.utf8decode=function(v){return l.nodebuffer?a.transformTo("nodebuffer",v).toString("utf-8"):function($){var z,P,x,y,S=$.length,L=new Array(2*S);for(z=P=0;z<S;)if((x=$[z++])<128)L[P++]=x;else if(4<(y=g[x]))L[P++]=65533,z+=y-1;else{for(x&=y===2?31:y===3?15:7;1<y&&z<S;)x=x<<6|63&$[z++],y--;1<y?L[P++]=65533:x<65536?L[P++]=x:(x-=65536,L[P++]=55296|x>>10&1023,L[P++]=56320|1023&x)}return L.length!==P&&(L.subarray?L=L.subarray(0,P):L.length=P),a.applyFromCharCode(L)}(v=a.transformTo(l.uint8array?"uint8array":"array",v))},a.inherits(w,d),w.prototype.processChunk=function(v){var $=a.transformTo(l.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var z=$;($=new Uint8Array(z.length+this.leftOver.length)).set(this.leftOver,0),$.set(z,this.leftOver.length)}else $=this.leftOver.concat($);this.leftOver=null}var P=function(y,S){var L;for((S=S||y.length)>y.length&&(S=y.length),L=S-1;0<=L&&(192&y[L])==128;)L--;return L<0||L===0?S:L+g[y[L]]>S?L:S}($),x=$;P!==$.length&&(l.uint8array?(x=$.subarray(0,P),this.leftOver=$.subarray(P,$.length)):(x=$.slice(0,P),this.leftOver=$.slice(P,$.length))),this.push({data:o.utf8decode(x),meta:v.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=w,a.inherits(k,d),k.prototype.processChunk=function(v){this.push({data:o.utf8encode(v.data),meta:v.meta})},o.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,s,o){var a=n("./support"),l=n("./base64"),u=n("./nodejsUtils"),d=n("./external");function g(z){return z}function j(z,P){for(var x=0;x<z.length;++x)P[x]=255&z.charCodeAt(x);return P}n("setimmediate"),o.newBlob=function(z,P){o.checkSupport("blob");try{return new Blob([z],{type:P})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(z),x.getBlob(P)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(z,P,x){var y=[],S=0,L=z.length;if(L<=x)return String.fromCharCode.apply(null,z);for(;S<L;)P==="array"||P==="nodebuffer"?y.push(String.fromCharCode.apply(null,z.slice(S,Math.min(S+x,L)))):y.push(String.fromCharCode.apply(null,z.subarray(S,Math.min(S+x,L)))),S+=x;return y.join("")},stringifyByChar:function(z){for(var P="",x=0;x<z.length;x++)P+=String.fromCharCode(z[x]);return P},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}}()}};function k(z){var P=65536,x=o.getTypeOf(z),y=!0;if(x==="uint8array"?y=w.applyCanBeUsed.uint8array:x==="nodebuffer"&&(y=w.applyCanBeUsed.nodebuffer),y)for(;1<P;)try{return w.stringifyByChunk(z,x,P)}catch{P=Math.floor(P/2)}return w.stringifyByChar(z)}function v(z,P){for(var x=0;x<z.length;x++)P[x]=z[x];return P}o.applyFromCharCode=k;var $={};$.string={string:g,array:function(z){return j(z,new Array(z.length))},arraybuffer:function(z){return $.string.uint8array(z).buffer},uint8array:function(z){return j(z,new Uint8Array(z.length))},nodebuffer:function(z){return j(z,u.allocBuffer(z.length))}},$.array={string:k,array:g,arraybuffer:function(z){return new Uint8Array(z).buffer},uint8array:function(z){return new Uint8Array(z)},nodebuffer:function(z){return u.newBufferFrom(z)}},$.arraybuffer={string:function(z){return k(new Uint8Array(z))},array:function(z){return v(new Uint8Array(z),new Array(z.byteLength))},arraybuffer:g,uint8array:function(z){return new Uint8Array(z)},nodebuffer:function(z){return u.newBufferFrom(new Uint8Array(z))}},$.uint8array={string:k,array:function(z){return v(z,new Array(z.length))},arraybuffer:function(z){return z.buffer},uint8array:g,nodebuffer:function(z){return u.newBufferFrom(z)}},$.nodebuffer={string:k,array:function(z){return v(z,new Array(z.length))},arraybuffer:function(z){return $.nodebuffer.uint8array(z).buffer},uint8array:function(z){return v(z,new Uint8Array(z.length))},nodebuffer:g},o.transformTo=function(z,P){if(P=P||"",!z)return P;o.checkSupport(z);var x=o.getTypeOf(P);return $[x][z](P)},o.resolve=function(z){for(var P=z.split("/"),x=[],y=0;y<P.length;y++){var S=P[y];S==="."||S===""&&y!==0&&y!==P.length-1||(S===".."?x.pop():x.push(S))}return x.join("/")},o.getTypeOf=function(z){return typeof z=="string"?"string":Object.prototype.toString.call(z)==="[object Array]"?"array":a.nodebuffer&&u.isBuffer(z)?"nodebuffer":a.uint8array&&z instanceof Uint8Array?"uint8array":a.arraybuffer&&z instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(z){if(!a[z.toLowerCase()])throw new Error(z+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(z){var P,x,y="";for(x=0;x<(z||"").length;x++)y+="\\x"+((P=z.charCodeAt(x))<16?"0":"")+P.toString(16).toUpperCase();return y},o.delay=function(z,P,x){setImmediate(function(){z.apply(x||null,P||[])})},o.inherits=function(z,P){function x(){}x.prototype=P.prototype,z.prototype=new x},o.extend=function(){var z,P,x={};for(z=0;z<arguments.length;z++)for(P in arguments[z])Object.prototype.hasOwnProperty.call(arguments[z],P)&&x[P]===void 0&&(x[P]=arguments[z][P]);return x},o.prepareContent=function(z,P,x,y,S){return d.Promise.resolve(P).then(function(L){return a.blob&&(L instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L))!==-1)&&typeof FileReader<"u"?new d.Promise(function(W,q){var Q=new FileReader;Q.onload=function(de){W(de.target.result)},Q.onerror=function(de){q(de.target.error)},Q.readAsArrayBuffer(L)}):L}).then(function(L){var W=o.getTypeOf(L);return W?(W==="arraybuffer"?L=o.transformTo("uint8array",L):W==="string"&&(S?L=l.decode(L):x&&y!==!0&&(L=function(q){return j(q,a.uint8array?new Uint8Array(q.length):new Array(q.length))}(L))),L):d.Promise.reject(new Error("Can't read the data of '"+z+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,s,o){var a=n("./reader/readerFor"),l=n("./utils"),u=n("./signature"),d=n("./zipEntry"),g=n("./support");function j(w){this.files=[],this.loadOptions=w}j.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(k)+", expected "+l.pretty(w)+")")}},isSignature:function(w,k){var v=this.reader.index;this.reader.setIndex(w);var $=this.reader.readString(4)===k;return this.reader.setIndex(v),$},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),k=g.uint8array?"uint8array":"array",v=l.transformTo(k,w);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,k,v,$=this.zip64EndOfCentralSize-44;0<$;)w=this.reader.readInt(2),k=this.reader.readInt(4),v=this.reader.readData(k),this.zip64ExtensibleData[w]={id:w,length:k,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,k;for(w=0;w<this.files.length;w++)k=this.files[w],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(w=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var k=w;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var $=k-v;if(0<$)this.isSignature(k,u.CENTRAL_FILE_HEADER)||(this.reader.zero=$);else if($<0)throw new Error("Corrupted zip: missing "+Math.abs($)+" bytes.")},prepareReader:function(w){this.reader=a(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=j},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,s,o){var a=n("./reader/readerFor"),l=n("./utils"),u=n("./compressedObject"),d=n("./crc32"),g=n("./utf8"),j=n("./compressions"),w=n("./support");function k(v,$){this.options=v,this.loadOptions=$}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var $,z;if(v.skip(22),this.fileNameLength=v.readInt(2),z=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(z),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(($=function(P){for(var x in j)if(Object.prototype.hasOwnProperty.call(j,x)&&j[x].magic===P)return j[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,$,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var $=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip($),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var $,z,P,x=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<x;)$=v.readInt(2),z=v.readInt(2),P=v.readData(z),this.extraFields[$]={id:$,length:z,value:P};v.setIndex(x)},handleUTF8:function(){var v=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var $=this.findExtraFieldUnicodePath();if($!==null)this.fileNameStr=$;else{var z=l.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(z)}var P=this.findExtraFieldUnicodeComment();if(P!==null)this.fileCommentStr=P;else{var x=l.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var $=a(v.value);return $.readInt(1)!==1||d(this.fileName)!==$.readInt(4)?null:g.utf8decode($.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var $=a(v.value);return $.readInt(1)!==1||d(this.fileComment)!==$.readInt(4)?null:g.utf8decode($.readData(v.length-5))}return null}},s.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,s,o){function a($,z,P){this.name=$,this.dir=P.dir,this.date=P.date,this.comment=P.comment,this.unixPermissions=P.unixPermissions,this.dosPermissions=P.dosPermissions,this._data=z,this._dataBinary=P.binary,this.options={compression:P.compression,compressionOptions:P.compressionOptions}}var l=n("./stream/StreamHelper"),u=n("./stream/DataWorker"),d=n("./utf8"),g=n("./compressedObject"),j=n("./stream/GenericWorker");a.prototype={internalStream:function($){var z=null,P="string";try{if(!$)throw new Error("No output type specified.");var x=(P=$.toLowerCase())==="string"||P==="text";P!=="binarystring"&&P!=="text"||(P="string"),z=this._decompressWorker();var y=!this._dataBinary;y&&!x&&(z=z.pipe(new d.Utf8EncodeWorker)),!y&&x&&(z=z.pipe(new d.Utf8DecodeWorker))}catch(S){(z=new j("error")).error(S)}return new l(z,P,"")},async:function($,z){return this.internalStream($).accumulate(z)},nodeStream:function($,z){return this.internalStream($||"nodebuffer").toNodejsStream(z)},_compressWorker:function($,z){if(this._data instanceof g&&this._data.compression.magic===$.magic)return this._data.getCompressedWorker();var P=this._decompressWorker();return this._dataBinary||(P=P.pipe(new d.Utf8EncodeWorker)),g.createWorkerFrom(P,$,z)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof j?this._data:new u(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<w.length;v++)a.prototype[w[v]]=k;s.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,s,o){(function(a){var l,u,d=a.MutationObserver||a.WebKitMutationObserver;if(d){var g=0,j=new d($),w=a.document.createTextNode("");j.observe(w,{characterData:!0}),l=function(){w.data=g=++g%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var z=a.document.createElement("script");z.onreadystatechange=function(){$(),z.onreadystatechange=null,z.parentNode.removeChild(z),z=null},a.document.documentElement.appendChild(z)}:function(){setTimeout($,0)};else{var k=new a.MessageChannel;k.port1.onmessage=$,l=function(){k.port2.postMessage(0)}}var v=[];function $(){var z,P;u=!0;for(var x=v.length;x;){for(P=v,v=[],z=-1;++z<x;)P[z]();x=v.length}u=!1}s.exports=function(z){v.push(z)!==1||u||l()}}).call(this,typeof vi<"u"?vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,s,o){var a=n("immediate");function l(){}var u={},d=["REJECTED"],g=["FULFILLED"],j=["PENDING"];function w(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,x!==l&&z(this,x)}function k(x,y,S){this.promise=x,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function v(x,y,S){a(function(){var L;try{L=y(S)}catch(W){return u.reject(x,W)}L===x?u.reject(x,new TypeError("Cannot resolve promise with itself")):u.resolve(x,L)})}function $(x){var y=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof y=="function")return function(){y.apply(x,arguments)}}function z(x,y){var S=!1;function L(Q){S||(S=!0,u.reject(x,Q))}function W(Q){S||(S=!0,u.resolve(x,Q))}var q=P(function(){y(W,L)});q.status==="error"&&L(q.value)}function P(x,y){var S={};try{S.value=x(y),S.status="success"}catch(L){S.status="error",S.value=L}return S}(s.exports=w).prototype.finally=function(x){if(typeof x!="function")return this;var y=this.constructor;return this.then(function(S){return y.resolve(x()).then(function(){return S})},function(S){return y.resolve(x()).then(function(){throw S})})},w.prototype.catch=function(x){return this.then(null,x)},w.prototype.then=function(x,y){if(typeof x!="function"&&this.state===g||typeof y!="function"&&this.state===d)return this;var S=new this.constructor(l);return this.state!==j?v(S,this.state===g?x:y,this.outcome):this.queue.push(new k(S,x,y)),S},k.prototype.callFulfilled=function(x){u.resolve(this.promise,x)},k.prototype.otherCallFulfilled=function(x){v(this.promise,this.onFulfilled,x)},k.prototype.callRejected=function(x){u.reject(this.promise,x)},k.prototype.otherCallRejected=function(x){v(this.promise,this.onRejected,x)},u.resolve=function(x,y){var S=P($,y);if(S.status==="error")return u.reject(x,S.value);var L=S.value;if(L)z(x,L);else{x.state=g,x.outcome=y;for(var W=-1,q=x.queue.length;++W<q;)x.queue[W].callFulfilled(y)}return x},u.reject=function(x,y){x.state=d,x.outcome=y;for(var S=-1,L=x.queue.length;++S<L;)x.queue[S].callRejected(y);return x},w.resolve=function(x){return x instanceof this?x:u.resolve(new this(l),x)},w.reject=function(x){var y=new this(l);return u.reject(y,x)},w.all=function(x){var y=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,L=!1;if(!S)return this.resolve([]);for(var W=new Array(S),q=0,Q=-1,de=new this(l);++Q<S;)ce(x[Q],Q);return de;function ce(ye,He){y.resolve(ye).then(function(V){W[He]=V,++q!==S||L||(L=!0,u.resolve(de,W))},function(V){L||(L=!0,u.reject(de,V))})}},w.race=function(x){var y=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,L=!1;if(!S)return this.resolve([]);for(var W=-1,q=new this(l);++W<S;)Q=x[W],y.resolve(Q).then(function(de){L||(L=!0,u.resolve(q,de))},function(de){L||(L=!0,u.reject(q,de))});var Q;return q}},{immediate:36}],38:[function(n,s,o){var a={};(0,n("./lib/utils/common").assign)(a,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),s.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,s,o){var a=n("./zlib/deflate"),l=n("./utils/common"),u=n("./utils/strings"),d=n("./zlib/messages"),g=n("./zlib/zstream"),j=Object.prototype.toString,w=0,k=-1,v=0,$=8;function z(x){if(!(this instanceof z))return new z(x);this.options=l.assign({level:k,method:$,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},x||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var S=a.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(S!==w)throw new Error(d[S]);if(y.header&&a.deflateSetHeader(this.strm,y.header),y.dictionary){var L;if(L=typeof y.dictionary=="string"?u.string2buf(y.dictionary):j.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(S=a.deflateSetDictionary(this.strm,L))!==w)throw new Error(d[S]);this._dict_set=!0}}function P(x,y){var S=new z(y);if(S.push(x,!0),S.err)throw S.msg||d[S.err];return S.result}z.prototype.push=function(x,y){var S,L,W=this.strm,q=this.options.chunkSize;if(this.ended)return!1;L=y===~~y?y:y===!0?4:0,typeof x=="string"?W.input=u.string2buf(x):j.call(x)==="[object ArrayBuffer]"?W.input=new Uint8Array(x):W.input=x,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new l.Buf8(q),W.next_out=0,W.avail_out=q),(S=a.deflate(W,L))!==1&&S!==w)return this.onEnd(S),!(this.ended=!0);W.avail_out!==0&&(W.avail_in!==0||L!==4&&L!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(l.shrinkBuf(W.output,W.next_out))):this.onData(l.shrinkBuf(W.output,W.next_out)))}while((0<W.avail_in||W.avail_out===0)&&S!==1);return L===4?(S=a.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===w):L!==2||(this.onEnd(w),!(W.avail_out=0))},z.prototype.onData=function(x){this.chunks.push(x)},z.prototype.onEnd=function(x){x===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},o.Deflate=z,o.deflate=P,o.deflateRaw=function(x,y){return(y=y||{}).raw=!0,P(x,y)},o.gzip=function(x,y){return(y=y||{}).gzip=!0,P(x,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,s,o){var a=n("./zlib/inflate"),l=n("./utils/common"),u=n("./utils/strings"),d=n("./zlib/constants"),g=n("./zlib/messages"),j=n("./zlib/zstream"),w=n("./zlib/gzheader"),k=Object.prototype.toString;function v(z){if(!(this instanceof v))return new v(z);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},z||{});var P=this.options;P.raw&&0<=P.windowBits&&P.windowBits<16&&(P.windowBits=-P.windowBits,P.windowBits===0&&(P.windowBits=-15)),!(0<=P.windowBits&&P.windowBits<16)||z&&z.windowBits||(P.windowBits+=32),15<P.windowBits&&P.windowBits<48&&!(15&P.windowBits)&&(P.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var x=a.inflateInit2(this.strm,P.windowBits);if(x!==d.Z_OK)throw new Error(g[x]);this.header=new w,a.inflateGetHeader(this.strm,this.header)}function $(z,P){var x=new v(P);if(x.push(z,!0),x.err)throw x.msg||g[x.err];return x.result}v.prototype.push=function(z,P){var x,y,S,L,W,q,Q=this.strm,de=this.options.chunkSize,ce=this.options.dictionary,ye=!1;if(this.ended)return!1;y=P===~~P?P:P===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof z=="string"?Q.input=u.binstring2buf(z):k.call(z)==="[object ArrayBuffer]"?Q.input=new Uint8Array(z):Q.input=z,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new l.Buf8(de),Q.next_out=0,Q.avail_out=de),(x=a.inflate(Q,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&ce&&(q=typeof ce=="string"?u.string2buf(ce):k.call(ce)==="[object ArrayBuffer]"?new Uint8Array(ce):ce,x=a.inflateSetDictionary(this.strm,q)),x===d.Z_BUF_ERROR&&ye===!0&&(x=d.Z_OK,ye=!1),x!==d.Z_STREAM_END&&x!==d.Z_OK)return this.onEnd(x),!(this.ended=!0);Q.next_out&&(Q.avail_out!==0&&x!==d.Z_STREAM_END&&(Q.avail_in!==0||y!==d.Z_FINISH&&y!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=u.utf8border(Q.output,Q.next_out),L=Q.next_out-S,W=u.buf2string(Q.output,S),Q.next_out=L,Q.avail_out=de-L,L&&l.arraySet(Q.output,Q.output,S,L,0),this.onData(W)):this.onData(l.shrinkBuf(Q.output,Q.next_out)))),Q.avail_in===0&&Q.avail_out===0&&(ye=!0)}while((0<Q.avail_in||Q.avail_out===0)&&x!==d.Z_STREAM_END);return x===d.Z_STREAM_END&&(y=d.Z_FINISH),y===d.Z_FINISH?(x=a.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===d.Z_OK):y!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(Q.avail_out=0))},v.prototype.onData=function(z){this.chunks.push(z)},v.prototype.onEnd=function(z){z===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},o.Inflate=v,o.inflate=$,o.inflateRaw=function(z,P){return(P=P||{}).raw=!0,$(z,P)},o.ungzip=$},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,s,o){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var j=g.shift();if(j){if(typeof j!="object")throw new TypeError(j+"must be non-object");for(var w in j)j.hasOwnProperty(w)&&(d[w]=j[w])}}return d},o.shrinkBuf=function(d,g){return d.length===g?d:d.subarray?d.subarray(0,g):(d.length=g,d)};var l={arraySet:function(d,g,j,w,k){if(g.subarray&&d.subarray)d.set(g.subarray(j,j+w),k);else for(var v=0;v<w;v++)d[k+v]=g[j+v]},flattenChunks:function(d){var g,j,w,k,v,$;for(g=w=0,j=d.length;g<j;g++)w+=d[g].length;for($=new Uint8Array(w),g=k=0,j=d.length;g<j;g++)v=d[g],$.set(v,k),k+=v.length;return $}},u={arraySet:function(d,g,j,w,k){for(var v=0;v<w;v++)d[k+v]=g[j+v]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,l)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,u))},o.setTyped(a)},{}],42:[function(n,s,o){var a=n("./common"),l=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new a.Buf8(256),g=0;g<256;g++)d[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function j(w,k){if(k<65537&&(w.subarray&&u||!w.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(w,k));for(var v="",$=0;$<k;$++)v+=String.fromCharCode(w[$]);return v}d[254]=d[254]=1,o.string2buf=function(w){var k,v,$,z,P,x=w.length,y=0;for(z=0;z<x;z++)(64512&(v=w.charCodeAt(z)))==55296&&z+1<x&&(64512&($=w.charCodeAt(z+1)))==56320&&(v=65536+(v-55296<<10)+($-56320),z++),y+=v<128?1:v<2048?2:v<65536?3:4;for(k=new a.Buf8(y),z=P=0;P<y;z++)(64512&(v=w.charCodeAt(z)))==55296&&z+1<x&&(64512&($=w.charCodeAt(z+1)))==56320&&(v=65536+(v-55296<<10)+($-56320),z++),v<128?k[P++]=v:(v<2048?k[P++]=192|v>>>6:(v<65536?k[P++]=224|v>>>12:(k[P++]=240|v>>>18,k[P++]=128|v>>>12&63),k[P++]=128|v>>>6&63),k[P++]=128|63&v);return k},o.buf2binstring=function(w){return j(w,w.length)},o.binstring2buf=function(w){for(var k=new a.Buf8(w.length),v=0,$=k.length;v<$;v++)k[v]=w.charCodeAt(v);return k},o.buf2string=function(w,k){var v,$,z,P,x=k||w.length,y=new Array(2*x);for(v=$=0;v<x;)if((z=w[v++])<128)y[$++]=z;else if(4<(P=d[z]))y[$++]=65533,v+=P-1;else{for(z&=P===2?31:P===3?15:7;1<P&&v<x;)z=z<<6|63&w[v++],P--;1<P?y[$++]=65533:z<65536?y[$++]=z:(z-=65536,y[$++]=55296|z>>10&1023,y[$++]=56320|1023&z)}return j(y,$)},o.utf8border=function(w,k){var v;for((k=k||w.length)>w.length&&(k=w.length),v=k-1;0<=v&&(192&w[v])==128;)v--;return v<0||v===0?k:v+d[w[v]]>k?v:k}},{"./common":41}],43:[function(n,s,o){s.exports=function(a,l,u,d){for(var g=65535&a|0,j=a>>>16&65535|0,w=0;u!==0;){for(u-=w=2e3<u?2e3:u;j=j+(g=g+l[d++]|0)|0,--w;);g%=65521,j%=65521}return g|j<<16|0}},{}],44:[function(n,s,o){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,s,o){var a=function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var g=0;g<8;g++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u}();s.exports=function(l,u,d,g){var j=a,w=g+d;l^=-1;for(var k=g;k<w;k++)l=l>>>8^j[255&(l^u[k])];return-1^l}},{}],46:[function(n,s,o){var a,l=n("../utils/common"),u=n("./trees"),d=n("./adler32"),g=n("./crc32"),j=n("./messages"),w=0,k=4,v=0,$=-2,z=-1,P=4,x=2,y=8,S=9,L=286,W=30,q=19,Q=2*L+1,de=15,ce=3,ye=258,He=ye+ce+1,V=42,he=113,N=1,ae=2,Ze=3,we=4;function pe(b,ke){return b.msg=j[ke],ke}function ge(b){return(b<<1)-(4<b?9:0)}function Ae(b){for(var ke=b.length;0<=--ke;)b[ke]=0}function X(b){var ke=b.state,xe=ke.pending;xe>b.avail_out&&(xe=b.avail_out),xe!==0&&(l.arraySet(b.output,ke.pending_buf,ke.pending_out,xe,b.next_out),b.next_out+=xe,ke.pending_out+=xe,b.total_out+=xe,b.avail_out-=xe,ke.pending-=xe,ke.pending===0&&(ke.pending_out=0))}function Z(b,ke){u._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,ke),b.block_start=b.strstart,X(b.strm)}function Te(b,ke){b.pending_buf[b.pending++]=ke}function Ye(b,ke){b.pending_buf[b.pending++]=ke>>>8&255,b.pending_buf[b.pending++]=255&ke}function Ne(b,ke){var xe,H,U=b.max_chain_length,ee=b.strstart,Ee=b.prev_length,Me=b.nice_match,ue=b.strstart>b.w_size-He?b.strstart-(b.w_size-He):0,Re=b.window,nt=b.w_mask,$e=b.prev,ft=b.strstart+ye,Wt=Re[ee+Ee-1],Pt=Re[ee+Ee];b.prev_length>=b.good_match&&(U>>=2),Me>b.lookahead&&(Me=b.lookahead);do if(Re[(xe=ke)+Ee]===Pt&&Re[xe+Ee-1]===Wt&&Re[xe]===Re[ee]&&Re[++xe]===Re[ee+1]){ee+=2,xe++;do;while(Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&Re[++ee]===Re[++xe]&&ee<ft);if(H=ye-(ft-ee),ee=ft-ye,Ee<H){if(b.match_start=ke,Me<=(Ee=H))break;Wt=Re[ee+Ee-1],Pt=Re[ee+Ee]}}while((ke=$e[ke&nt])>ue&&--U!=0);return Ee<=b.lookahead?Ee:b.lookahead}function At(b){var ke,xe,H,U,ee,Ee,Me,ue,Re,nt,$e=b.w_size;do{if(U=b.window_size-b.lookahead-b.strstart,b.strstart>=$e+($e-He)){for(l.arraySet(b.window,b.window,$e,$e,0),b.match_start-=$e,b.strstart-=$e,b.block_start-=$e,ke=xe=b.hash_size;H=b.head[--ke],b.head[ke]=$e<=H?H-$e:0,--xe;);for(ke=xe=$e;H=b.prev[--ke],b.prev[ke]=$e<=H?H-$e:0,--xe;);U+=$e}if(b.strm.avail_in===0)break;if(Ee=b.strm,Me=b.window,ue=b.strstart+b.lookahead,Re=U,nt=void 0,nt=Ee.avail_in,Re<nt&&(nt=Re),xe=nt===0?0:(Ee.avail_in-=nt,l.arraySet(Me,Ee.input,Ee.next_in,nt,ue),Ee.state.wrap===1?Ee.adler=d(Ee.adler,Me,nt,ue):Ee.state.wrap===2&&(Ee.adler=g(Ee.adler,Me,nt,ue)),Ee.next_in+=nt,Ee.total_in+=nt,nt),b.lookahead+=xe,b.lookahead+b.insert>=ce)for(ee=b.strstart-b.insert,b.ins_h=b.window[ee],b.ins_h=(b.ins_h<<b.hash_shift^b.window[ee+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[ee+ce-1])&b.hash_mask,b.prev[ee&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=ee,ee++,b.insert--,!(b.lookahead+b.insert<ce)););}while(b.lookahead<He&&b.strm.avail_in!==0)}function nn(b,ke){for(var xe,H;;){if(b.lookahead<He){if(At(b),b.lookahead<He&&ke===w)return N;if(b.lookahead===0)break}if(xe=0,b.lookahead>=ce&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+ce-1])&b.hash_mask,xe=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),xe!==0&&b.strstart-xe<=b.w_size-He&&(b.match_length=Ne(b,xe)),b.match_length>=ce)if(H=u._tr_tally(b,b.strstart-b.match_start,b.match_length-ce),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=ce){for(b.match_length--;b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+ce-1])&b.hash_mask,xe=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart,--b.match_length!=0;);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else H=u._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(H&&(Z(b,!1),b.strm.avail_out===0))return N}return b.insert=b.strstart<ce-1?b.strstart:ce-1,ke===k?(Z(b,!0),b.strm.avail_out===0?Ze:we):b.last_lit&&(Z(b,!1),b.strm.avail_out===0)?N:ae}function $t(b,ke){for(var xe,H,U;;){if(b.lookahead<He){if(At(b),b.lookahead<He&&ke===w)return N;if(b.lookahead===0)break}if(xe=0,b.lookahead>=ce&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+ce-1])&b.hash_mask,xe=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=ce-1,xe!==0&&b.prev_length<b.max_lazy_match&&b.strstart-xe<=b.w_size-He&&(b.match_length=Ne(b,xe),b.match_length<=5&&(b.strategy===1||b.match_length===ce&&4096<b.strstart-b.match_start)&&(b.match_length=ce-1)),b.prev_length>=ce&&b.match_length<=b.prev_length){for(U=b.strstart+b.lookahead-ce,H=u._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-ce),b.lookahead-=b.prev_length-1,b.prev_length-=2;++b.strstart<=U&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+ce-1])&b.hash_mask,xe=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),--b.prev_length!=0;);if(b.match_available=0,b.match_length=ce-1,b.strstart++,H&&(Z(b,!1),b.strm.avail_out===0))return N}else if(b.match_available){if((H=u._tr_tally(b,0,b.window[b.strstart-1]))&&Z(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return N}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(H=u._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<ce-1?b.strstart:ce-1,ke===k?(Z(b,!0),b.strm.avail_out===0?Ze:we):b.last_lit&&(Z(b,!1),b.strm.avail_out===0)?N:ae}function Dt(b,ke,xe,H,U){this.good_length=b,this.max_lazy=ke,this.nice_length=xe,this.max_chain=H,this.func=U}function _n(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*Q),this.dyn_dtree=new l.Buf16(2*(2*W+1)),this.bl_tree=new l.Buf16(2*(2*q+1)),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(de+1),this.heap=new l.Buf16(2*L+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*L+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function sn(b){var ke;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=x,(ke=b.state).pending=0,ke.pending_out=0,ke.wrap<0&&(ke.wrap=-ke.wrap),ke.status=ke.wrap?V:he,b.adler=ke.wrap===2?0:1,ke.last_flush=w,u._tr_init(ke),v):pe(b,$)}function mr(b){var ke=sn(b);return ke===v&&function(xe){xe.window_size=2*xe.w_size,Ae(xe.head),xe.max_lazy_match=a[xe.level].max_lazy,xe.good_match=a[xe.level].good_length,xe.nice_match=a[xe.level].nice_length,xe.max_chain_length=a[xe.level].max_chain,xe.strstart=0,xe.block_start=0,xe.lookahead=0,xe.insert=0,xe.match_length=xe.prev_length=ce-1,xe.match_available=0,xe.ins_h=0}(b.state),ke}function kn(b,ke,xe,H,U,ee){if(!b)return $;var Ee=1;if(ke===z&&(ke=6),H<0?(Ee=0,H=-H):15<H&&(Ee=2,H-=16),U<1||S<U||xe!==y||H<8||15<H||ke<0||9<ke||ee<0||P<ee)return pe(b,$);H===8&&(H=9);var Me=new _n;return(b.state=Me).strm=b,Me.wrap=Ee,Me.gzhead=null,Me.w_bits=H,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=U+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+ce-1)/ce),Me.window=new l.Buf8(2*Me.w_size),Me.head=new l.Buf16(Me.hash_size),Me.prev=new l.Buf16(Me.w_size),Me.lit_bufsize=1<<U+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new l.Buf8(Me.pending_buf_size),Me.d_buf=1*Me.lit_bufsize,Me.l_buf=3*Me.lit_bufsize,Me.level=ke,Me.strategy=ee,Me.method=xe,mr(b)}a=[new Dt(0,0,0,0,function(b,ke){var xe=65535;for(xe>b.pending_buf_size-5&&(xe=b.pending_buf_size-5);;){if(b.lookahead<=1){if(At(b),b.lookahead===0&&ke===w)return N;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var H=b.block_start+xe;if((b.strstart===0||b.strstart>=H)&&(b.lookahead=b.strstart-H,b.strstart=H,Z(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-He&&(Z(b,!1),b.strm.avail_out===0))return N}return b.insert=0,ke===k?(Z(b,!0),b.strm.avail_out===0?Ze:we):(b.strstart>b.block_start&&(Z(b,!1),b.strm.avail_out),N)}),new Dt(4,4,8,4,nn),new Dt(4,5,16,8,nn),new Dt(4,6,32,32,nn),new Dt(4,4,16,16,$t),new Dt(8,16,32,32,$t),new Dt(8,16,128,128,$t),new Dt(8,32,128,256,$t),new Dt(32,128,258,1024,$t),new Dt(32,258,258,4096,$t)],o.deflateInit=function(b,ke){return kn(b,ke,y,15,8,0)},o.deflateInit2=kn,o.deflateReset=mr,o.deflateResetKeep=sn,o.deflateSetHeader=function(b,ke){return b&&b.state?b.state.wrap!==2?$:(b.state.gzhead=ke,v):$},o.deflate=function(b,ke){var xe,H,U,ee;if(!b||!b.state||5<ke||ke<0)return b?pe(b,$):$;if(H=b.state,!b.output||!b.input&&b.avail_in!==0||H.status===666&&ke!==k)return pe(b,b.avail_out===0?-5:$);if(H.strm=b,xe=H.last_flush,H.last_flush=ke,H.status===V)if(H.wrap===2)b.adler=0,Te(H,31),Te(H,139),Te(H,8),H.gzhead?(Te(H,(H.gzhead.text?1:0)+(H.gzhead.hcrc?2:0)+(H.gzhead.extra?4:0)+(H.gzhead.name?8:0)+(H.gzhead.comment?16:0)),Te(H,255&H.gzhead.time),Te(H,H.gzhead.time>>8&255),Te(H,H.gzhead.time>>16&255),Te(H,H.gzhead.time>>24&255),Te(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),Te(H,255&H.gzhead.os),H.gzhead.extra&&H.gzhead.extra.length&&(Te(H,255&H.gzhead.extra.length),Te(H,H.gzhead.extra.length>>8&255)),H.gzhead.hcrc&&(b.adler=g(b.adler,H.pending_buf,H.pending,0)),H.gzindex=0,H.status=69):(Te(H,0),Te(H,0),Te(H,0),Te(H,0),Te(H,0),Te(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),Te(H,3),H.status=he);else{var Ee=y+(H.w_bits-8<<4)<<8;Ee|=(2<=H.strategy||H.level<2?0:H.level<6?1:H.level===6?2:3)<<6,H.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,H.status=he,Ye(H,Ee),H.strstart!==0&&(Ye(H,b.adler>>>16),Ye(H,65535&b.adler)),b.adler=1}if(H.status===69)if(H.gzhead.extra){for(U=H.pending;H.gzindex<(65535&H.gzhead.extra.length)&&(H.pending!==H.pending_buf_size||(H.gzhead.hcrc&&H.pending>U&&(b.adler=g(b.adler,H.pending_buf,H.pending-U,U)),X(b),U=H.pending,H.pending!==H.pending_buf_size));)Te(H,255&H.gzhead.extra[H.gzindex]),H.gzindex++;H.gzhead.hcrc&&H.pending>U&&(b.adler=g(b.adler,H.pending_buf,H.pending-U,U)),H.gzindex===H.gzhead.extra.length&&(H.gzindex=0,H.status=73)}else H.status=73;if(H.status===73)if(H.gzhead.name){U=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>U&&(b.adler=g(b.adler,H.pending_buf,H.pending-U,U)),X(b),U=H.pending,H.pending===H.pending_buf_size)){ee=1;break}ee=H.gzindex<H.gzhead.name.length?255&H.gzhead.name.charCodeAt(H.gzindex++):0,Te(H,ee)}while(ee!==0);H.gzhead.hcrc&&H.pending>U&&(b.adler=g(b.adler,H.pending_buf,H.pending-U,U)),ee===0&&(H.gzindex=0,H.status=91)}else H.status=91;if(H.status===91)if(H.gzhead.comment){U=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>U&&(b.adler=g(b.adler,H.pending_buf,H.pending-U,U)),X(b),U=H.pending,H.pending===H.pending_buf_size)){ee=1;break}ee=H.gzindex<H.gzhead.comment.length?255&H.gzhead.comment.charCodeAt(H.gzindex++):0,Te(H,ee)}while(ee!==0);H.gzhead.hcrc&&H.pending>U&&(b.adler=g(b.adler,H.pending_buf,H.pending-U,U)),ee===0&&(H.status=103)}else H.status=103;if(H.status===103&&(H.gzhead.hcrc?(H.pending+2>H.pending_buf_size&&X(b),H.pending+2<=H.pending_buf_size&&(Te(H,255&b.adler),Te(H,b.adler>>8&255),b.adler=0,H.status=he)):H.status=he),H.pending!==0){if(X(b),b.avail_out===0)return H.last_flush=-1,v}else if(b.avail_in===0&&ge(ke)<=ge(xe)&&ke!==k)return pe(b,-5);if(H.status===666&&b.avail_in!==0)return pe(b,-5);if(b.avail_in!==0||H.lookahead!==0||ke!==w&&H.status!==666){var Me=H.strategy===2?function(ue,Re){for(var nt;;){if(ue.lookahead===0&&(At(ue),ue.lookahead===0)){if(Re===w)return N;break}if(ue.match_length=0,nt=u._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,nt&&(Z(ue,!1),ue.strm.avail_out===0))return N}return ue.insert=0,Re===k?(Z(ue,!0),ue.strm.avail_out===0?Ze:we):ue.last_lit&&(Z(ue,!1),ue.strm.avail_out===0)?N:ae}(H,ke):H.strategy===3?function(ue,Re){for(var nt,$e,ft,Wt,Pt=ue.window;;){if(ue.lookahead<=ye){if(At(ue),ue.lookahead<=ye&&Re===w)return N;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=ce&&0<ue.strstart&&($e=Pt[ft=ue.strstart-1])===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]){Wt=ue.strstart+ye;do;while($e===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]&&$e===Pt[++ft]&&ft<Wt);ue.match_length=ye-(Wt-ft),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=ce?(nt=u._tr_tally(ue,1,ue.match_length-ce),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(nt=u._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),nt&&(Z(ue,!1),ue.strm.avail_out===0))return N}return ue.insert=0,Re===k?(Z(ue,!0),ue.strm.avail_out===0?Ze:we):ue.last_lit&&(Z(ue,!1),ue.strm.avail_out===0)?N:ae}(H,ke):a[H.level].func(H,ke);if(Me!==Ze&&Me!==we||(H.status=666),Me===N||Me===Ze)return b.avail_out===0&&(H.last_flush=-1),v;if(Me===ae&&(ke===1?u._tr_align(H):ke!==5&&(u._tr_stored_block(H,0,0,!1),ke===3&&(Ae(H.head),H.lookahead===0&&(H.strstart=0,H.block_start=0,H.insert=0))),X(b),b.avail_out===0))return H.last_flush=-1,v}return ke!==k?v:H.wrap<=0?1:(H.wrap===2?(Te(H,255&b.adler),Te(H,b.adler>>8&255),Te(H,b.adler>>16&255),Te(H,b.adler>>24&255),Te(H,255&b.total_in),Te(H,b.total_in>>8&255),Te(H,b.total_in>>16&255),Te(H,b.total_in>>24&255)):(Ye(H,b.adler>>>16),Ye(H,65535&b.adler)),X(b),0<H.wrap&&(H.wrap=-H.wrap),H.pending!==0?v:1)},o.deflateEnd=function(b){var ke;return b&&b.state?(ke=b.state.status)!==V&&ke!==69&&ke!==73&&ke!==91&&ke!==103&&ke!==he&&ke!==666?pe(b,$):(b.state=null,ke===he?pe(b,-3):v):$},o.deflateSetDictionary=function(b,ke){var xe,H,U,ee,Ee,Me,ue,Re,nt=ke.length;if(!b||!b.state||(ee=(xe=b.state).wrap)===2||ee===1&&xe.status!==V||xe.lookahead)return $;for(ee===1&&(b.adler=d(b.adler,ke,nt,0)),xe.wrap=0,nt>=xe.w_size&&(ee===0&&(Ae(xe.head),xe.strstart=0,xe.block_start=0,xe.insert=0),Re=new l.Buf8(xe.w_size),l.arraySet(Re,ke,nt-xe.w_size,xe.w_size,0),ke=Re,nt=xe.w_size),Ee=b.avail_in,Me=b.next_in,ue=b.input,b.avail_in=nt,b.next_in=0,b.input=ke,At(xe);xe.lookahead>=ce;){for(H=xe.strstart,U=xe.lookahead-(ce-1);xe.ins_h=(xe.ins_h<<xe.hash_shift^xe.window[H+ce-1])&xe.hash_mask,xe.prev[H&xe.w_mask]=xe.head[xe.ins_h],xe.head[xe.ins_h]=H,H++,--U;);xe.strstart=H,xe.lookahead=ce-1,At(xe)}return xe.strstart+=xe.lookahead,xe.block_start=xe.strstart,xe.insert=xe.lookahead,xe.lookahead=0,xe.match_length=xe.prev_length=ce-1,xe.match_available=0,b.next_in=Me,b.input=ue,b.avail_in=Ee,xe.wrap=ee,v},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,s,o){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,s,o){s.exports=function(a,l){var u,d,g,j,w,k,v,$,z,P,x,y,S,L,W,q,Q,de,ce,ye,He,V,he,N,ae;u=a.state,d=a.next_in,N=a.input,g=d+(a.avail_in-5),j=a.next_out,ae=a.output,w=j-(l-a.avail_out),k=j+(a.avail_out-257),v=u.dmax,$=u.wsize,z=u.whave,P=u.wnext,x=u.window,y=u.hold,S=u.bits,L=u.lencode,W=u.distcode,q=(1<<u.lenbits)-1,Q=(1<<u.distbits)-1;e:do{S<15&&(y+=N[d++]<<S,S+=8,y+=N[d++]<<S,S+=8),de=L[y&q];t:for(;;){if(y>>>=ce=de>>>24,S-=ce,(ce=de>>>16&255)===0)ae[j++]=65535&de;else{if(!(16&ce)){if(!(64&ce)){de=L[(65535&de)+(y&(1<<ce)-1)];continue t}if(32&ce){u.mode=12;break e}a.msg="invalid literal/length code",u.mode=30;break e}ye=65535&de,(ce&=15)&&(S<ce&&(y+=N[d++]<<S,S+=8),ye+=y&(1<<ce)-1,y>>>=ce,S-=ce),S<15&&(y+=N[d++]<<S,S+=8,y+=N[d++]<<S,S+=8),de=W[y&Q];n:for(;;){if(y>>>=ce=de>>>24,S-=ce,!(16&(ce=de>>>16&255))){if(!(64&ce)){de=W[(65535&de)+(y&(1<<ce)-1)];continue n}a.msg="invalid distance code",u.mode=30;break e}if(He=65535&de,S<(ce&=15)&&(y+=N[d++]<<S,(S+=8)<ce&&(y+=N[d++]<<S,S+=8)),v<(He+=y&(1<<ce)-1)){a.msg="invalid distance too far back",u.mode=30;break e}if(y>>>=ce,S-=ce,(ce=j-w)<He){if(z<(ce=He-ce)&&u.sane){a.msg="invalid distance too far back",u.mode=30;break e}if(he=x,(V=0)===P){if(V+=$-ce,ce<ye){for(ye-=ce;ae[j++]=x[V++],--ce;);V=j-He,he=ae}}else if(P<ce){if(V+=$+P-ce,(ce-=P)<ye){for(ye-=ce;ae[j++]=x[V++],--ce;);if(V=0,P<ye){for(ye-=ce=P;ae[j++]=x[V++],--ce;);V=j-He,he=ae}}}else if(V+=P-ce,ce<ye){for(ye-=ce;ae[j++]=x[V++],--ce;);V=j-He,he=ae}for(;2<ye;)ae[j++]=he[V++],ae[j++]=he[V++],ae[j++]=he[V++],ye-=3;ye&&(ae[j++]=he[V++],1<ye&&(ae[j++]=he[V++]))}else{for(V=j-He;ae[j++]=ae[V++],ae[j++]=ae[V++],ae[j++]=ae[V++],2<(ye-=3););ye&&(ae[j++]=ae[V++],1<ye&&(ae[j++]=ae[V++]))}break}}break}}while(d<g&&j<k);d-=ye=S>>3,y&=(1<<(S-=ye<<3))-1,a.next_in=d,a.next_out=j,a.avail_in=d<g?g-d+5:5-(d-g),a.avail_out=j<k?k-j+257:257-(j-k),u.hold=y,u.bits=S}},{}],49:[function(n,s,o){var a=n("../utils/common"),l=n("./adler32"),u=n("./crc32"),d=n("./inffast"),g=n("./inftrees"),j=1,w=2,k=0,v=-2,$=1,z=852,P=592;function x(V){return(V>>>24&255)+(V>>>8&65280)+((65280&V)<<8)+((255&V)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(V){var he;return V&&V.state?(he=V.state,V.total_in=V.total_out=he.total=0,V.msg="",he.wrap&&(V.adler=1&he.wrap),he.mode=$,he.last=0,he.havedict=0,he.dmax=32768,he.head=null,he.hold=0,he.bits=0,he.lencode=he.lendyn=new a.Buf32(z),he.distcode=he.distdyn=new a.Buf32(P),he.sane=1,he.back=-1,k):v}function L(V){var he;return V&&V.state?((he=V.state).wsize=0,he.whave=0,he.wnext=0,S(V)):v}function W(V,he){var N,ae;return V&&V.state?(ae=V.state,he<0?(N=0,he=-he):(N=1+(he>>4),he<48&&(he&=15)),he&&(he<8||15<he)?v:(ae.window!==null&&ae.wbits!==he&&(ae.window=null),ae.wrap=N,ae.wbits=he,L(V))):v}function q(V,he){var N,ae;return V?(ae=new y,(V.state=ae).window=null,(N=W(V,he))!==k&&(V.state=null),N):v}var Q,de,ce=!0;function ye(V){if(ce){var he;for(Q=new a.Buf32(512),de=new a.Buf32(32),he=0;he<144;)V.lens[he++]=8;for(;he<256;)V.lens[he++]=9;for(;he<280;)V.lens[he++]=7;for(;he<288;)V.lens[he++]=8;for(g(j,V.lens,0,288,Q,0,V.work,{bits:9}),he=0;he<32;)V.lens[he++]=5;g(w,V.lens,0,32,de,0,V.work,{bits:5}),ce=!1}V.lencode=Q,V.lenbits=9,V.distcode=de,V.distbits=5}function He(V,he,N,ae){var Ze,we=V.state;return we.window===null&&(we.wsize=1<<we.wbits,we.wnext=0,we.whave=0,we.window=new a.Buf8(we.wsize)),ae>=we.wsize?(a.arraySet(we.window,he,N-we.wsize,we.wsize,0),we.wnext=0,we.whave=we.wsize):(ae<(Ze=we.wsize-we.wnext)&&(Ze=ae),a.arraySet(we.window,he,N-ae,Ze,we.wnext),(ae-=Ze)?(a.arraySet(we.window,he,N-ae,ae,0),we.wnext=ae,we.whave=we.wsize):(we.wnext+=Ze,we.wnext===we.wsize&&(we.wnext=0),we.whave<we.wsize&&(we.whave+=Ze))),0}o.inflateReset=L,o.inflateReset2=W,o.inflateResetKeep=S,o.inflateInit=function(V){return q(V,15)},o.inflateInit2=q,o.inflate=function(V,he){var N,ae,Ze,we,pe,ge,Ae,X,Z,Te,Ye,Ne,At,nn,$t,Dt,_n,sn,mr,kn,b,ke,xe,H,U=0,ee=new a.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return v;(N=V.state).mode===12&&(N.mode=13),pe=V.next_out,Ze=V.output,Ae=V.avail_out,we=V.next_in,ae=V.input,ge=V.avail_in,X=N.hold,Z=N.bits,Te=ge,Ye=Ae,ke=k;e:for(;;)switch(N.mode){case $:if(N.wrap===0){N.mode=13;break}for(;Z<16;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(2&N.wrap&&X===35615){ee[N.check=0]=255&X,ee[1]=X>>>8&255,N.check=u(N.check,ee,2,0),Z=X=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&X)<<8)+(X>>8))%31){V.msg="incorrect header check",N.mode=30;break}if((15&X)!=8){V.msg="unknown compression method",N.mode=30;break}if(Z-=4,b=8+(15&(X>>>=4)),N.wbits===0)N.wbits=b;else if(b>N.wbits){V.msg="invalid window size",N.mode=30;break}N.dmax=1<<b,V.adler=N.check=1,N.mode=512&X?10:12,Z=X=0;break;case 2:for(;Z<16;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(N.flags=X,(255&N.flags)!=8){V.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){V.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=X>>8&1),512&N.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,N.check=u(N.check,ee,2,0)),Z=X=0,N.mode=3;case 3:for(;Z<32;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}N.head&&(N.head.time=X),512&N.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,ee[2]=X>>>16&255,ee[3]=X>>>24&255,N.check=u(N.check,ee,4,0)),Z=X=0,N.mode=4;case 4:for(;Z<16;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}N.head&&(N.head.xflags=255&X,N.head.os=X>>8),512&N.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,N.check=u(N.check,ee,2,0)),Z=X=0,N.mode=5;case 5:if(1024&N.flags){for(;Z<16;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}N.length=X,N.head&&(N.head.extra_len=X),512&N.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,N.check=u(N.check,ee,2,0)),Z=X=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(ge<(Ne=N.length)&&(Ne=ge),Ne&&(N.head&&(b=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),a.arraySet(N.head.extra,ae,we,Ne,b)),512&N.flags&&(N.check=u(N.check,ae,Ne,we)),ge-=Ne,we+=Ne,N.length-=Ne),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(ge===0)break e;for(Ne=0;b=ae[we+Ne++],N.head&&b&&N.length<65536&&(N.head.name+=String.fromCharCode(b)),b&&Ne<ge;);if(512&N.flags&&(N.check=u(N.check,ae,Ne,we)),ge-=Ne,we+=Ne,b)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(ge===0)break e;for(Ne=0;b=ae[we+Ne++],N.head&&b&&N.length<65536&&(N.head.comment+=String.fromCharCode(b)),b&&Ne<ge;);if(512&N.flags&&(N.check=u(N.check,ae,Ne,we)),ge-=Ne,we+=Ne,b)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;Z<16;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(X!==(65535&N.check)){V.msg="header crc mismatch",N.mode=30;break}Z=X=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),V.adler=N.check=0,N.mode=12;break;case 10:for(;Z<32;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}V.adler=N.check=x(X),Z=X=0,N.mode=11;case 11:if(N.havedict===0)return V.next_out=pe,V.avail_out=Ae,V.next_in=we,V.avail_in=ge,N.hold=X,N.bits=Z,2;V.adler=N.check=1,N.mode=12;case 12:if(he===5||he===6)break e;case 13:if(N.last){X>>>=7&Z,Z-=7&Z,N.mode=27;break}for(;Z<3;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}switch(N.last=1&X,Z-=1,3&(X>>>=1)){case 0:N.mode=14;break;case 1:if(ye(N),N.mode=20,he!==6)break;X>>>=2,Z-=2;break e;case 2:N.mode=17;break;case 3:V.msg="invalid block type",N.mode=30}X>>>=2,Z-=2;break;case 14:for(X>>>=7&Z,Z-=7&Z;Z<32;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if((65535&X)!=(X>>>16^65535)){V.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&X,Z=X=0,N.mode=15,he===6)break e;case 15:N.mode=16;case 16:if(Ne=N.length){if(ge<Ne&&(Ne=ge),Ae<Ne&&(Ne=Ae),Ne===0)break e;a.arraySet(Ze,ae,we,Ne,pe),ge-=Ne,we+=Ne,Ae-=Ne,pe+=Ne,N.length-=Ne;break}N.mode=12;break;case 17:for(;Z<14;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(N.nlen=257+(31&X),X>>>=5,Z-=5,N.ndist=1+(31&X),X>>>=5,Z-=5,N.ncode=4+(15&X),X>>>=4,Z-=4,286<N.nlen||30<N.ndist){V.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;Z<3;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}N.lens[Ee[N.have++]]=7&X,X>>>=3,Z-=3}for(;N.have<19;)N.lens[Ee[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,xe={bits:N.lenbits},ke=g(0,N.lens,0,19,N.lencode,0,N.work,xe),N.lenbits=xe.bits,ke){V.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;Dt=(U=N.lencode[X&(1<<N.lenbits)-1])>>>16&255,_n=65535&U,!(($t=U>>>24)<=Z);){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(_n<16)X>>>=$t,Z-=$t,N.lens[N.have++]=_n;else{if(_n===16){for(H=$t+2;Z<H;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(X>>>=$t,Z-=$t,N.have===0){V.msg="invalid bit length repeat",N.mode=30;break}b=N.lens[N.have-1],Ne=3+(3&X),X>>>=2,Z-=2}else if(_n===17){for(H=$t+3;Z<H;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}Z-=$t,b=0,Ne=3+(7&(X>>>=$t)),X>>>=3,Z-=3}else{for(H=$t+7;Z<H;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}Z-=$t,b=0,Ne=11+(127&(X>>>=$t)),X>>>=7,Z-=7}if(N.have+Ne>N.nlen+N.ndist){V.msg="invalid bit length repeat",N.mode=30;break}for(;Ne--;)N.lens[N.have++]=b}}if(N.mode===30)break;if(N.lens[256]===0){V.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,xe={bits:N.lenbits},ke=g(j,N.lens,0,N.nlen,N.lencode,0,N.work,xe),N.lenbits=xe.bits,ke){V.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,xe={bits:N.distbits},ke=g(w,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,xe),N.distbits=xe.bits,ke){V.msg="invalid distances set",N.mode=30;break}if(N.mode=20,he===6)break e;case 20:N.mode=21;case 21:if(6<=ge&&258<=Ae){V.next_out=pe,V.avail_out=Ae,V.next_in=we,V.avail_in=ge,N.hold=X,N.bits=Z,d(V,Ye),pe=V.next_out,Ze=V.output,Ae=V.avail_out,we=V.next_in,ae=V.input,ge=V.avail_in,X=N.hold,Z=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;Dt=(U=N.lencode[X&(1<<N.lenbits)-1])>>>16&255,_n=65535&U,!(($t=U>>>24)<=Z);){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(Dt&&!(240&Dt)){for(sn=$t,mr=Dt,kn=_n;Dt=(U=N.lencode[kn+((X&(1<<sn+mr)-1)>>sn)])>>>16&255,_n=65535&U,!(sn+($t=U>>>24)<=Z);){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}X>>>=sn,Z-=sn,N.back+=sn}if(X>>>=$t,Z-=$t,N.back+=$t,N.length=_n,Dt===0){N.mode=26;break}if(32&Dt){N.back=-1,N.mode=12;break}if(64&Dt){V.msg="invalid literal/length code",N.mode=30;break}N.extra=15&Dt,N.mode=22;case 22:if(N.extra){for(H=N.extra;Z<H;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}N.length+=X&(1<<N.extra)-1,X>>>=N.extra,Z-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;Dt=(U=N.distcode[X&(1<<N.distbits)-1])>>>16&255,_n=65535&U,!(($t=U>>>24)<=Z);){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(!(240&Dt)){for(sn=$t,mr=Dt,kn=_n;Dt=(U=N.distcode[kn+((X&(1<<sn+mr)-1)>>sn)])>>>16&255,_n=65535&U,!(sn+($t=U>>>24)<=Z);){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}X>>>=sn,Z-=sn,N.back+=sn}if(X>>>=$t,Z-=$t,N.back+=$t,64&Dt){V.msg="invalid distance code",N.mode=30;break}N.offset=_n,N.extra=15&Dt,N.mode=24;case 24:if(N.extra){for(H=N.extra;Z<H;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}N.offset+=X&(1<<N.extra)-1,X>>>=N.extra,Z-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){V.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(Ae===0)break e;if(Ne=Ye-Ae,N.offset>Ne){if((Ne=N.offset-Ne)>N.whave&&N.sane){V.msg="invalid distance too far back",N.mode=30;break}At=Ne>N.wnext?(Ne-=N.wnext,N.wsize-Ne):N.wnext-Ne,Ne>N.length&&(Ne=N.length),nn=N.window}else nn=Ze,At=pe-N.offset,Ne=N.length;for(Ae<Ne&&(Ne=Ae),Ae-=Ne,N.length-=Ne;Ze[pe++]=nn[At++],--Ne;);N.length===0&&(N.mode=21);break;case 26:if(Ae===0)break e;Ze[pe++]=N.length,Ae--,N.mode=21;break;case 27:if(N.wrap){for(;Z<32;){if(ge===0)break e;ge--,X|=ae[we++]<<Z,Z+=8}if(Ye-=Ae,V.total_out+=Ye,N.total+=Ye,Ye&&(V.adler=N.check=N.flags?u(N.check,Ze,Ye,pe-Ye):l(N.check,Ze,Ye,pe-Ye)),Ye=Ae,(N.flags?X:x(X))!==N.check){V.msg="incorrect data check",N.mode=30;break}Z=X=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;Z<32;){if(ge===0)break e;ge--,X+=ae[we++]<<Z,Z+=8}if(X!==(4294967295&N.total)){V.msg="incorrect length check",N.mode=30;break}Z=X=0}N.mode=29;case 29:ke=1;break e;case 30:ke=-3;break e;case 31:return-4;case 32:default:return v}return V.next_out=pe,V.avail_out=Ae,V.next_in=we,V.avail_in=ge,N.hold=X,N.bits=Z,(N.wsize||Ye!==V.avail_out&&N.mode<30&&(N.mode<27||he!==4))&&He(V,V.output,V.next_out,Ye-V.avail_out)?(N.mode=31,-4):(Te-=V.avail_in,Ye-=V.avail_out,V.total_in+=Te,V.total_out+=Ye,N.total+=Ye,N.wrap&&Ye&&(V.adler=N.check=N.flags?u(N.check,Ze,Ye,V.next_out-Ye):l(N.check,Ze,Ye,V.next_out-Ye)),V.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(Te==0&&Ye===0||he===4)&&ke===k&&(ke=-5),ke)},o.inflateEnd=function(V){if(!V||!V.state)return v;var he=V.state;return he.window&&(he.window=null),V.state=null,k},o.inflateGetHeader=function(V,he){var N;return V&&V.state&&2&(N=V.state).wrap?((N.head=he).done=!1,k):v},o.inflateSetDictionary=function(V,he){var N,ae=he.length;return V&&V.state?(N=V.state).wrap!==0&&N.mode!==11?v:N.mode===11&&l(1,he,ae,0)!==N.check?-3:He(V,he,ae,ae)?(N.mode=31,-4):(N.havedict=1,k):v},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,s,o){var a=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(j,w,k,v,$,z,P,x){var y,S,L,W,q,Q,de,ce,ye,He=x.bits,V=0,he=0,N=0,ae=0,Ze=0,we=0,pe=0,ge=0,Ae=0,X=0,Z=null,Te=0,Ye=new a.Buf16(16),Ne=new a.Buf16(16),At=null,nn=0;for(V=0;V<=15;V++)Ye[V]=0;for(he=0;he<v;he++)Ye[w[k+he]]++;for(Ze=He,ae=15;1<=ae&&Ye[ae]===0;ae--);if(ae<Ze&&(Ze=ae),ae===0)return $[z++]=20971520,$[z++]=20971520,x.bits=1,0;for(N=1;N<ae&&Ye[N]===0;N++);for(Ze<N&&(Ze=N),V=ge=1;V<=15;V++)if(ge<<=1,(ge-=Ye[V])<0)return-1;if(0<ge&&(j===0||ae!==1))return-1;for(Ne[1]=0,V=1;V<15;V++)Ne[V+1]=Ne[V]+Ye[V];for(he=0;he<v;he++)w[k+he]!==0&&(P[Ne[w[k+he]]++]=he);if(Q=j===0?(Z=At=P,19):j===1?(Z=l,Te-=257,At=u,nn-=257,256):(Z=d,At=g,-1),V=N,q=z,pe=he=X=0,L=-1,W=(Ae=1<<(we=Ze))-1,j===1&&852<Ae||j===2&&592<Ae)return 1;for(;;){for(de=V-pe,ye=P[he]<Q?(ce=0,P[he]):P[he]>Q?(ce=At[nn+P[he]],Z[Te+P[he]]):(ce=96,0),y=1<<V-pe,N=S=1<<we;$[q+(X>>pe)+(S-=y)]=de<<24|ce<<16|ye|0,S!==0;);for(y=1<<V-1;X&y;)y>>=1;if(y!==0?(X&=y-1,X+=y):X=0,he++,--Ye[V]==0){if(V===ae)break;V=w[k+P[he]]}if(Ze<V&&(X&W)!==L){for(pe===0&&(pe=Ze),q+=N,ge=1<<(we=V-pe);we+pe<ae&&!((ge-=Ye[we+pe])<=0);)we++,ge<<=1;if(Ae+=1<<we,j===1&&852<Ae||j===2&&592<Ae)return 1;$[L=X&W]=Ze<<24|we<<16|q-z|0}}return X!==0&&($[q+X]=V-pe<<24|64<<16|0),x.bits=Ze,0}},{"../utils/common":41}],51:[function(n,s,o){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,s,o){var a=n("../utils/common"),l=0,u=1;function d(U){for(var ee=U.length;0<=--ee;)U[ee]=0}var g=0,j=29,w=256,k=w+1+j,v=30,$=19,z=2*k+1,P=15,x=16,y=7,S=256,L=16,W=17,q=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],de=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],He=new Array(2*(k+2));d(He);var V=new Array(2*v);d(V);var he=new Array(512);d(he);var N=new Array(256);d(N);var ae=new Array(j);d(ae);var Ze,we,pe,ge=new Array(v);function Ae(U,ee,Ee,Me,ue){this.static_tree=U,this.extra_bits=ee,this.extra_base=Ee,this.elems=Me,this.max_length=ue,this.has_stree=U&&U.length}function X(U,ee){this.dyn_tree=U,this.max_code=0,this.stat_desc=ee}function Z(U){return U<256?he[U]:he[256+(U>>>7)]}function Te(U,ee){U.pending_buf[U.pending++]=255&ee,U.pending_buf[U.pending++]=ee>>>8&255}function Ye(U,ee,Ee){U.bi_valid>x-Ee?(U.bi_buf|=ee<<U.bi_valid&65535,Te(U,U.bi_buf),U.bi_buf=ee>>x-U.bi_valid,U.bi_valid+=Ee-x):(U.bi_buf|=ee<<U.bi_valid&65535,U.bi_valid+=Ee)}function Ne(U,ee,Ee){Ye(U,Ee[2*ee],Ee[2*ee+1])}function At(U,ee){for(var Ee=0;Ee|=1&U,U>>>=1,Ee<<=1,0<--ee;);return Ee>>>1}function nn(U,ee,Ee){var Me,ue,Re=new Array(P+1),nt=0;for(Me=1;Me<=P;Me++)Re[Me]=nt=nt+Ee[Me-1]<<1;for(ue=0;ue<=ee;ue++){var $e=U[2*ue+1];$e!==0&&(U[2*ue]=At(Re[$e]++,$e))}}function $t(U){var ee;for(ee=0;ee<k;ee++)U.dyn_ltree[2*ee]=0;for(ee=0;ee<v;ee++)U.dyn_dtree[2*ee]=0;for(ee=0;ee<$;ee++)U.bl_tree[2*ee]=0;U.dyn_ltree[2*S]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function Dt(U){8<U.bi_valid?Te(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function _n(U,ee,Ee,Me){var ue=2*ee,Re=2*Ee;return U[ue]<U[Re]||U[ue]===U[Re]&&Me[ee]<=Me[Ee]}function sn(U,ee,Ee){for(var Me=U.heap[Ee],ue=Ee<<1;ue<=U.heap_len&&(ue<U.heap_len&&_n(ee,U.heap[ue+1],U.heap[ue],U.depth)&&ue++,!_n(ee,Me,U.heap[ue],U.depth));)U.heap[Ee]=U.heap[ue],Ee=ue,ue<<=1;U.heap[Ee]=Me}function mr(U,ee,Ee){var Me,ue,Re,nt,$e=0;if(U.last_lit!==0)for(;Me=U.pending_buf[U.d_buf+2*$e]<<8|U.pending_buf[U.d_buf+2*$e+1],ue=U.pending_buf[U.l_buf+$e],$e++,Me===0?Ne(U,ue,ee):(Ne(U,(Re=N[ue])+w+1,ee),(nt=Q[Re])!==0&&Ye(U,ue-=ae[Re],nt),Ne(U,Re=Z(--Me),Ee),(nt=de[Re])!==0&&Ye(U,Me-=ge[Re],nt)),$e<U.last_lit;);Ne(U,S,ee)}function kn(U,ee){var Ee,Me,ue,Re=ee.dyn_tree,nt=ee.stat_desc.static_tree,$e=ee.stat_desc.has_stree,ft=ee.stat_desc.elems,Wt=-1;for(U.heap_len=0,U.heap_max=z,Ee=0;Ee<ft;Ee++)Re[2*Ee]!==0?(U.heap[++U.heap_len]=Wt=Ee,U.depth[Ee]=0):Re[2*Ee+1]=0;for(;U.heap_len<2;)Re[2*(ue=U.heap[++U.heap_len]=Wt<2?++Wt:0)]=1,U.depth[ue]=0,U.opt_len--,$e&&(U.static_len-=nt[2*ue+1]);for(ee.max_code=Wt,Ee=U.heap_len>>1;1<=Ee;Ee--)sn(U,Re,Ee);for(ue=ft;Ee=U.heap[1],U.heap[1]=U.heap[U.heap_len--],sn(U,Re,1),Me=U.heap[1],U.heap[--U.heap_max]=Ee,U.heap[--U.heap_max]=Me,Re[2*ue]=Re[2*Ee]+Re[2*Me],U.depth[ue]=(U.depth[Ee]>=U.depth[Me]?U.depth[Ee]:U.depth[Me])+1,Re[2*Ee+1]=Re[2*Me+1]=ue,U.heap[1]=ue++,sn(U,Re,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],function(Pt,ar){var Kr,Yn,er,dn,tr,Nr,kt=ar.dyn_tree,St=ar.max_code,Us=ar.stat_desc.static_tree,ei=ar.stat_desc.has_stree,Sr=ar.stat_desc.extra_bits,zn=ar.stat_desc.extra_base,ts=ar.stat_desc.max_length,ks=0;for(dn=0;dn<=P;dn++)Pt.bl_count[dn]=0;for(kt[2*Pt.heap[Pt.heap_max]+1]=0,Kr=Pt.heap_max+1;Kr<z;Kr++)ts<(dn=kt[2*kt[2*(Yn=Pt.heap[Kr])+1]+1]+1)&&(dn=ts,ks++),kt[2*Yn+1]=dn,St<Yn||(Pt.bl_count[dn]++,tr=0,zn<=Yn&&(tr=Sr[Yn-zn]),Nr=kt[2*Yn],Pt.opt_len+=Nr*(dn+tr),ei&&(Pt.static_len+=Nr*(Us[2*Yn+1]+tr)));if(ks!==0){do{for(dn=ts-1;Pt.bl_count[dn]===0;)dn--;Pt.bl_count[dn]--,Pt.bl_count[dn+1]+=2,Pt.bl_count[ts]--,ks-=2}while(0<ks);for(dn=ts;dn!==0;dn--)for(Yn=Pt.bl_count[dn];Yn!==0;)St<(er=Pt.heap[--Kr])||(kt[2*er+1]!==dn&&(Pt.opt_len+=(dn-kt[2*er+1])*kt[2*er],kt[2*er+1]=dn),Yn--)}}(U,ee),nn(Re,Wt,U.bl_count)}function b(U,ee,Ee){var Me,ue,Re=-1,nt=ee[1],$e=0,ft=7,Wt=4;for(nt===0&&(ft=138,Wt=3),ee[2*(Ee+1)+1]=65535,Me=0;Me<=Ee;Me++)ue=nt,nt=ee[2*(Me+1)+1],++$e<ft&&ue===nt||($e<Wt?U.bl_tree[2*ue]+=$e:ue!==0?(ue!==Re&&U.bl_tree[2*ue]++,U.bl_tree[2*L]++):$e<=10?U.bl_tree[2*W]++:U.bl_tree[2*q]++,Re=ue,Wt=($e=0)===nt?(ft=138,3):ue===nt?(ft=6,3):(ft=7,4))}function ke(U,ee,Ee){var Me,ue,Re=-1,nt=ee[1],$e=0,ft=7,Wt=4;for(nt===0&&(ft=138,Wt=3),Me=0;Me<=Ee;Me++)if(ue=nt,nt=ee[2*(Me+1)+1],!(++$e<ft&&ue===nt)){if($e<Wt)for(;Ne(U,ue,U.bl_tree),--$e!=0;);else ue!==0?(ue!==Re&&(Ne(U,ue,U.bl_tree),$e--),Ne(U,L,U.bl_tree),Ye(U,$e-3,2)):$e<=10?(Ne(U,W,U.bl_tree),Ye(U,$e-3,3)):(Ne(U,q,U.bl_tree),Ye(U,$e-11,7));Re=ue,Wt=($e=0)===nt?(ft=138,3):ue===nt?(ft=6,3):(ft=7,4)}}d(ge);var xe=!1;function H(U,ee,Ee,Me){Ye(U,(g<<1)+(Me?1:0),3),function(ue,Re,nt,$e){Dt(ue),Te(ue,nt),Te(ue,~nt),a.arraySet(ue.pending_buf,ue.window,Re,nt,ue.pending),ue.pending+=nt}(U,ee,Ee)}o._tr_init=function(U){xe||(function(){var ee,Ee,Me,ue,Re,nt=new Array(P+1);for(ue=Me=0;ue<j-1;ue++)for(ae[ue]=Me,ee=0;ee<1<<Q[ue];ee++)N[Me++]=ue;for(N[Me-1]=ue,ue=Re=0;ue<16;ue++)for(ge[ue]=Re,ee=0;ee<1<<de[ue];ee++)he[Re++]=ue;for(Re>>=7;ue<v;ue++)for(ge[ue]=Re<<7,ee=0;ee<1<<de[ue]-7;ee++)he[256+Re++]=ue;for(Ee=0;Ee<=P;Ee++)nt[Ee]=0;for(ee=0;ee<=143;)He[2*ee+1]=8,ee++,nt[8]++;for(;ee<=255;)He[2*ee+1]=9,ee++,nt[9]++;for(;ee<=279;)He[2*ee+1]=7,ee++,nt[7]++;for(;ee<=287;)He[2*ee+1]=8,ee++,nt[8]++;for(nn(He,k+1,nt),ee=0;ee<v;ee++)V[2*ee+1]=5,V[2*ee]=At(ee,5);Ze=new Ae(He,Q,w+1,k,P),we=new Ae(V,de,0,v,P),pe=new Ae(new Array(0),ce,0,$,y)}(),xe=!0),U.l_desc=new X(U.dyn_ltree,Ze),U.d_desc=new X(U.dyn_dtree,we),U.bl_desc=new X(U.bl_tree,pe),U.bi_buf=0,U.bi_valid=0,$t(U)},o._tr_stored_block=H,o._tr_flush_block=function(U,ee,Ee,Me){var ue,Re,nt=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=function($e){var ft,Wt=4093624447;for(ft=0;ft<=31;ft++,Wt>>>=1)if(1&Wt&&$e.dyn_ltree[2*ft]!==0)return l;if($e.dyn_ltree[18]!==0||$e.dyn_ltree[20]!==0||$e.dyn_ltree[26]!==0)return u;for(ft=32;ft<w;ft++)if($e.dyn_ltree[2*ft]!==0)return u;return l}(U)),kn(U,U.l_desc),kn(U,U.d_desc),nt=function($e){var ft;for(b($e,$e.dyn_ltree,$e.l_desc.max_code),b($e,$e.dyn_dtree,$e.d_desc.max_code),kn($e,$e.bl_desc),ft=$-1;3<=ft&&$e.bl_tree[2*ye[ft]+1]===0;ft--);return $e.opt_len+=3*(ft+1)+5+5+4,ft}(U),ue=U.opt_len+3+7>>>3,(Re=U.static_len+3+7>>>3)<=ue&&(ue=Re)):ue=Re=Ee+5,Ee+4<=ue&&ee!==-1?H(U,ee,Ee,Me):U.strategy===4||Re===ue?(Ye(U,2+(Me?1:0),3),mr(U,He,V)):(Ye(U,4+(Me?1:0),3),function($e,ft,Wt,Pt){var ar;for(Ye($e,ft-257,5),Ye($e,Wt-1,5),Ye($e,Pt-4,4),ar=0;ar<Pt;ar++)Ye($e,$e.bl_tree[2*ye[ar]+1],3);ke($e,$e.dyn_ltree,ft-1),ke($e,$e.dyn_dtree,Wt-1)}(U,U.l_desc.max_code+1,U.d_desc.max_code+1,nt+1),mr(U,U.dyn_ltree,U.dyn_dtree)),$t(U),Me&&Dt(U)},o._tr_tally=function(U,ee,Ee){return U.pending_buf[U.d_buf+2*U.last_lit]=ee>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&ee,U.pending_buf[U.l_buf+U.last_lit]=255&Ee,U.last_lit++,ee===0?U.dyn_ltree[2*Ee]++:(U.matches++,ee--,U.dyn_ltree[2*(N[Ee]+w+1)]++,U.dyn_dtree[2*Z(ee)]++),U.last_lit===U.lit_bufsize-1},o._tr_align=function(U){Ye(U,2,3),Ne(U,S,He),function(ee){ee.bi_valid===16?(Te(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(U)}},{"../utils/common":41}],53:[function(n,s,o){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,s,o){(function(a){(function(l,u){if(!l.setImmediate){var d,g,j,w,k=1,v={},$=!1,z=l.document,P=Object.getPrototypeOf&&Object.getPrototypeOf(l);P=P&&P.setTimeout?P:l,d={}.toString.call(l.process)==="[object process]"?function(L){process.nextTick(function(){y(L)})}:function(){if(l.postMessage&&!l.importScripts){var L=!0,W=l.onmessage;return l.onmessage=function(){L=!1},l.postMessage("","*"),l.onmessage=W,L}}()?(w="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",S,!1):l.attachEvent("onmessage",S),function(L){l.postMessage(w+L,"*")}):l.MessageChannel?((j=new MessageChannel).port1.onmessage=function(L){y(L.data)},function(L){j.port2.postMessage(L)}):z&&"onreadystatechange"in z.createElement("script")?(g=z.documentElement,function(L){var W=z.createElement("script");W.onreadystatechange=function(){y(L),W.onreadystatechange=null,g.removeChild(W),W=null},g.appendChild(W)}):function(L){setTimeout(y,0,L)},P.setImmediate=function(L){typeof L!="function"&&(L=new Function(""+L));for(var W=new Array(arguments.length-1),q=0;q<W.length;q++)W[q]=arguments[q+1];var Q={callback:L,args:W};return v[k]=Q,d(k),k++},P.clearImmediate=x}function x(L){delete v[L]}function y(L){if($)setTimeout(y,0,L);else{var W=v[L];if(W){$=!0;try{(function(q){var Q=q.callback,de=q.args;switch(de.length){case 0:Q();break;case 1:Q(de[0]);break;case 2:Q(de[0],de[1]);break;case 3:Q(de[0],de[1],de[2]);break;default:Q.apply(u,de)}})(W)}finally{x(L),$=!1}}}}function S(L){L.source===l&&typeof L.data=="string"&&L.data.indexOf(w)===0&&y(+L.data.slice(w.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof vi<"u"?vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ry);var uk=Ry.exports;const dk=og(uk);var Dy={exports:{}};(function(e,t){(function(n,s){s()})(vi,function(){function n(g,j){return typeof j>"u"?j={autoBom:!1}:typeof j!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),j={autoBom:!j}),j.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function s(g,j,w){var k=new XMLHttpRequest;k.open("GET",g),k.responseType="blob",k.onload=function(){d(k.response,j,w)},k.onerror=function(){console.error("could not download file")},k.send()}function o(g){var j=new XMLHttpRequest;j.open("HEAD",g,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function a(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(j)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof vi=="object"&&vi.global===vi?vi:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(g,j,w){var k=l.URL||l.webkitURL,v=document.createElement("a");j=j||g.name||"download",v.download=j,v.rel="noopener",typeof g=="string"?(v.href=g,v.origin===location.origin?a(v):o(v.href)?s(g,j,w):a(v,v.target="_blank")):(v.href=k.createObjectURL(g),setTimeout(function(){k.revokeObjectURL(v.href)},4e4),setTimeout(function(){a(v)},0))}:"msSaveOrOpenBlob"in navigator?function(g,j,w){if(j=j||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(n(g,w),j);else if(o(g))s(g,j,w);else{var k=document.createElement("a");k.href=g,k.target="_blank",setTimeout(function(){a(k)})}}:function(g,j,w,k){if(k=k||open("","_blank"),k&&(k.document.title=k.document.body.innerText="downloading..."),typeof g=="string")return s(g,j,w);var v=g.type==="application/octet-stream",$=/constructor/i.test(l.HTMLElement)||l.safari,z=/CriOS\/[\d]+/.test(navigator.userAgent);if((z||v&&$||u)&&typeof FileReader<"u"){var P=new FileReader;P.onloadend=function(){var S=P.result;S=z?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=S:location=S,k=null},P.readAsDataURL(g)}else{var x=l.URL||l.webkitURL,y=x.createObjectURL(g);k?k.location=y:location.href=y,k=null,setTimeout(function(){x.revokeObjectURL(y)},4e4)}});l.saveAs=d.saveAs=d,e.exports=d})})(Dy);var pk=Dy.exports;(function(){const e=console.error,t=console.warn,n=console.log,s=o=>{for(let a of o){let l="";if(typeof a=="string"?l=a:a&&typeof a=="object"?a.message?l=a.message:a.toString?l=a.toString():l=JSON.stringify(a):a!=null&&(l=String(a)),l.includes("Unable to preventDefault inside passive event listener")||l.includes("passive event listener invocation")||l.includes("preventDefault")&&l.includes("passive"))return!0}return!1};console.error=function(...o){s(o)||e.apply(console,o)},console.warn=function(...o){s(o)||t.apply(console,o)},console.log=function(...o){s(o)||n.apply(console,o)}})();const fk=({canvasRef:e,isDrawing:t})=>{const[n,s]=F.useState(""),o=F.useRef(null),a=F.useCallback(()=>{e.current&&s(e.current.toDataURL())},[e]);return F.useEffect(()=>{e.current&&a()},[e,a]),F.useEffect(()=>{if(!t){a();return}const l=()=>{a(),t&&(o.current=requestAnimationFrame(l))};return o.current=requestAnimationFrame(l),()=>{o.current&&cancelAnimationFrame(o.current)}},[t,a]),n?i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(255, 0, 0, 0.3)",mixBlendMode:"multiply",WebkitMaskImage:`url(${n})`,maskImage:`url(${n})`,WebkitMaskSize:"100% 100%",maskSize:"100% 100%",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}}):null},bi=(()=>{const e="tapnow_images_db",n="images";let s=null,o=null;const a=new Map,l=()=>o||(o=new Promise((v,$)=>{if(!window.indexedDB){console.warn("[LocalImageManager] IndexedDB not supported, falling back to memory"),v(null);return}const z=indexedDB.open(e,1);z.onerror=P=>{console.error("[LocalImageManager] IndexedDB init failed:",P.target.error),v(null)},z.onsuccess=P=>{s=P.target.result,console.log("[LocalImageManager] IndexedDB initialized"),v(s)},z.onupgradeneeded=P=>{const x=P.target.result;x.objectStoreNames.contains(n)||(x.createObjectStore(n,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("[LocalImageManager] Object store created"))}}),o),u=()=>`img_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;return{saveImage:async(v,$=null)=>{const z=await l();if(!z)return null;const P=$||u();return new Promise((x,y)=>{var S;try{let L;if(typeof v=="string"&&v.startsWith("data:")){const ce=v.split(","),ye=((S=ce[0].match(/:(.*?);/))==null?void 0:S[1])||"image/png",He=atob(ce[1]),V=new Uint8Array(He.length);for(let he=0;he<He.length;he++)V[he]=He.charCodeAt(he);L=new Blob([V],{type:ye})}else if(v instanceof Blob)L=v;else{console.warn("[LocalImageManager] Invalid data type for saveImage"),x(null);return}const q=z.transaction([n],"readwrite").objectStore(n),Q={id:P,blob:L,timestamp:Date.now(),size:L.size},de=q.put(Q);de.onsuccess=()=>{console.log(`[LocalImageManager] Saved image: ${P} (${(L.size/1024).toFixed(1)}KB)`),x(P)},de.onerror=ce=>{console.error("[LocalImageManager] Save failed:",ce.target.error),x(null)}}catch(L){console.error("[LocalImageManager] Save error:",L),x(null)}})},getImage:async v=>{if(a.has(v))return a.get(v);const $=await l();return $?new Promise(z=>{try{const y=$.transaction([n],"readonly").objectStore(n).get(v);y.onsuccess=()=>{const S=y.result;if(S&&S.blob){const L=URL.createObjectURL(S.blob);a.set(v,L),z(L)}else z(null)},y.onerror=()=>z(null)}catch(P){console.error("[LocalImageManager] Get error:",P),z(null)}}):null},deleteImage:async v=>{const $=await l();return $?(a.has(v)&&(URL.revokeObjectURL(a.get(v)),a.delete(v)),new Promise(z=>{const y=$.transaction([n],"readwrite").objectStore(n).delete(v);y.onsuccess=()=>z(!0),y.onerror=()=>z(!1)})):!1},getStats:async()=>{const v=await l();return v?new Promise($=>{const x=v.transaction([n],"readonly").objectStore(n).getAll();x.onsuccess=()=>{const y=x.result||[],S=y.reduce((L,W)=>L+(W.size||0),0);$({count:y.length,totalSize:S})},x.onerror=()=>$({count:0,totalSize:0})}):{count:0,totalSize:0}},isImageId:v=>typeof v=="string"&&v.startsWith("img_"),initDB:l}})();window.LocalImageManager=bi;const sr=({src:e,className:t,alt:n,onError:s,onLoad:o,...a})=>{const[l,u]=F.useState(null),[d,g]=F.useState(!1),[j,w]=F.useState(!1),k=F.useRef(null);return F.useEffect(()=>{if(!e||e.startsWith("blob:")||e.startsWith("http://")||e.startsWith("https://")){u(e),w(!1);return}if(bi.isImageId(e)){w(!0),(async()=>{try{const $=await bi.getImage(e);$?(k.current=$,u($)):(console.warn(`[LazyBase64Image] Image not found in IDB: ${e}`),g(!0))}catch($){console.error("[LazyBase64Image] IDB resolve failed:",$),g(!0)}w(!1)})();return}return e.startsWith("data:")?(async()=>{try{const z=await(await fetch(e)).blob(),P=URL.createObjectURL(z);k.current=P,u(P)}catch($){console.error("Base64Blob",$),g(!0),u(e)}})():u(e),()=>{k.current&&k.current.startsWith("blob:")&&(URL.revokeObjectURL(k.current),k.current=null)}},[e]),j||d&&!l||!l||bi.isImageId(l)?null:i.jsx("img",{src:l,className:t,alt:n,onError:s,onLoad:o,...a})},hk=({visible:e,progress:t,status:n,type:s})=>e?i.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-300 pointer-events-none select-none",children:i.jsxs("div",{className:"relative bg-[#09090b]/90 border border-white/10 rounded-2xl p-8 shadow-2xl flex flex-col items-center min-w-[300px] backdrop-blur-xl",children:[i.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 w-20 h-20 bg-blue-500/20 blur-[50px] rounded-full pointer-events-none"}),i.jsxs("div",{className:"flex flex-col items-center gap-1 mb-6 z-10",children:[i.jsx("span",{className:"font-mono text-[10px] tracking-[0.3em] uppercase text-zinc-500",children:s==="import"?"DATA INGESTION":"SYSTEM ARCHIVING"}),i.jsxs("div",{className:"text-4xl font-bold text-zinc-200 tracking-tighter font-sans",children:[t.toFixed(0),i.jsx("span",{className:"text-sm text-zinc-500 ml-1",children:"%"})]})]}),i.jsx("div",{className:"relative w-full h-[2px] bg-zinc-800 rounded-full overflow-hidden mb-4",children:i.jsx("div",{className:"absolute top-0 left-0 h-full bg-white shadow-[0_0_10px_rgba(255,255,255,0.5)] transition-all duration-100 ease-linear",style:{width:`${t}%`}})}),i.jsx("span",{className:"text-[10px] font-mono text-zinc-400 tracking-widest uppercase animate-pulse",children:n})]})}):null,Gm=F.memo(({item:e,theme:t,lightboxItem:n,onDelete:s,onClick:o,onContextMenu:a,onImageClick:l,onImageContextMenu:u,onRefresh:d,performanceMode:g,localServerUrl:j,isSelected:w,onSelect:k,providers:v,defaultProviders:$})=>{var z,P;return i.jsxs("div",{className:`group rounded-lg overflow-hidden border relative cursor-pointer transition-colors ${w?"border-blue-500 ring-2 ring-blue-500/30":t==="dark"?"bg-zinc-900 border-zinc-800 hover:border-blue-500/50":"bg-white border-zinc-200 hover:border-blue-500/50"}`,style:{contentVisibility:"auto",containIntrinsicSize:"1px 300px"},onClick:o,onContextMenu:a,children:[k&&i.jsx("button",{onClick:x=>{x.stopPropagation(),x.preventDefault(),console.log("[V3.5.1 Debug] Selection button clicked for:",e.id,"current isSelected:",w),k(e.id)},className:`absolute bottom-2 right-2 z-20 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${w?"bg-green-500 border-green-400 opacity-100":"border-white/60 bg-black/50 opacity-100 hover:bg-black/70"}`,title:w?"":"",children:w&&i.jsx(zl,{size:16,className:"text-white"})}),i.jsxs("div",{className:`bg-black relative ${e.mjImages&&(e.mjImages.length===4||e.mjImages.length>1)||e.mjNeedsSplit&&((P=(z=e.apiConfig)==null?void 0:z.modelId)!=null&&P.includes("mj"))?(()=>{const x=e.mjRatio||"1:1";return x==="16:9"?"aspect-video":x==="9:16"?"aspect-[9/16]":x==="4:3"?"aspect-[4/3]":x==="3:4"?"aspect-[3/4]":x==="21:9"?"aspect-[21/9]":"aspect-square"})():"aspect-video"}`,children:[e.status==="completed"?e.mjImages&&(e.mjImages.length===4||e.mjImages.length>1)?i.jsx("div",{className:`w-full h-full grid gap-0.5 p-0.5 ${e.mjImages.length===4?"grid-cols-2 grid-rows-2":"grid-cols-2"}`,children:e.mjImages.map((x,y)=>(e.mjImageInfo&&e.mjImageInfo[y],i.jsxs("div",{onClick:S=>l&&l(S,e,x,y),onContextMenu:S=>u&&u(S,e,x,y),className:`relative w-full h-full cursor-pointer border-2 transition-all overflow-hidden ${e.selectedMjImageIndex===y&&n&&n.id===e.id?"border-blue-500 scale-95":"border-transparent hover:border-blue-500/50"}`,children:[i.jsx(sr,{src:x,loading:"lazy",className:"w-full h-full object-contain",alt:` ${y+1}`,onError:S=>{console.error(` ${y+1} `),S.target.style.display="none"}}),e.selectedMjImageIndex===y&&n&&n.id===e.id&&i.jsx("div",{className:"absolute top-1 right-1 w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center z-10",children:i.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},y)))}):e.type==="image"?i.jsx(sr,{src:e.url||e.mjOriginalUrl,loading:"lazy",className:"w-full h-full object-cover",alt:e.prompt||"",onError:x=>{console.error(":",e.url||e.mjOriginalUrl),x.target.style.display="none"}}):i.jsx("video",{src:e.url,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,preload:"metadata",onError:x=>{console.error(":",e.url)}}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx(gi,{className:"animate-spin text-zinc-600"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-zinc-800",children:i.jsx("div",{className:"h-full bg-blue-500 transition-all",style:{width:`${e.progress}%`}})})]}),i.jsxs("div",{className:"px-3 py-2 text-[11px]",children:[i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:`line-clamp-2 ${t==="dark"?"text-zinc-300":"text-zinc-700"}`,children:e.prompt||"Untitled"}),i.jsxs("div",{className:"flex items-center gap-1 shrink-0 ml-1",children:[e.type==="video"&&(e.status==="generating"||e.status==="failed")&&i.jsx("button",{onClick:x=>{x.stopPropagation(),d&&d(e)},className:`shrink-0 p-0.5 ${t==="dark"?"text-zinc-500 hover:text-white":"text-zinc-400 hover:text-zinc-900"}`,title:"",children:i.jsx(mu,{size:12})}),i.jsx("button",{onClick:x=>{x.stopPropagation(),s&&s(e.id)},className:`shrink-0 p-0.5 ${t==="dark"?"text-zinc-500 hover:text-red-500":"text-zinc-400 hover:text-red-500"}`,title:"",children:i.jsx(Ys,{size:12})})]})]}),e.status==="failed"&&e.errorMsg&&i.jsx("p",{className:"text-[9px] text-red-500 mt-1 break-words whitespace-pre-wrap",children:e.errorMsg.split(`
`).map((x,y)=>i.jsxs("span",{children:[x,y<e.errorMsg.split(`
`).length-1&&i.jsx("br",{})]},y))}),e.status==="generating"&&i.jsx("p",{className:"text-[9px] text-blue-500 mt-1",children:e.errorMsg||"..."}),i.jsx("div",{className:"h-1.5"}),i.jsxs("div",{className:"flex flex-col w-full",children:[i.jsx("span",{className:t==="dark"?"text-zinc-500":"text-zinc-400",children:(()=>{const x=e.hasInputImages===!0,y=e.type==="video",S=y?x?"":"":x?"":"",L=e.resolution||(e.width&&e.height?`${e.width}x${e.height}`:null);return[S,e.ratio||e.mjRatio,L,y&&e.duration?`${e.duration}s`:null].filter(Boolean).join("  ")})()}),i.jsxs("span",{className:t==="dark"?"text-zinc-500":"text-zinc-400",children:[e.time,"  ",i.jsx("span",{title:e.provider,children:e.modelName}),typeof e.durationMs=="number"&&e.durationMs>0&&i.jsxs(i.Fragment,{children:["   ",(e.durationMs/1e3).toFixed(1),"s"]})]})]})]})]})},(e,t)=>{var n,s;return e.item===t.item&&e.theme===t.theme&&((n=e.lightboxItem)==null?void 0:n.id)===((s=t.lightboxItem)==null?void 0:s.id)&&e.isSelected===t.isSelected}),mk=({nodeId:e,imageUrl:t,imageDimensions:n,isActive:s,onClose:o,onSave:a,theme:l,view:u,maskContent:d,onUpdateNode:g})=>{const j=F.useRef(null),w=F.useRef(null),k=F.useRef(null),[v,$]=F.useState(30),[z,P]=F.useState(!1),[x,y]=F.useState([]),[S,L]=F.useState(-1),W=10;F.useEffect(()=>{if(!s||!j.current||!n)return;const ae=j.current,Ze=ae.getContext("2d");if(w.current=Ze,ae.width=n.w,ae.height=n.h,Ze.clearRect(0,0,ae.width,ae.height),d){const we=new Image;we.onload=()=>{Ze.drawImage(we,0,0),q()},we.src=d}else q()},[s,n,e,d]);const q=()=>{if(!j.current||!w.current)return;const ae=j.current,we=w.current.getImageData(0,0,ae.width,ae.height),pe=x.slice(0,S+1);pe.push(we),pe.length>W&&pe.shift(),y(pe),L(pe.length-1)},Q=ae=>{if(!j.current)return null;const Ze=j.current,we=Ze.getBoundingClientRect(),pe=ae.clientX-we.left,ge=ae.clientY-we.top,Ae=Ze.width/we.width,X=Ze.height/we.height;return{x:Math.round(pe*Ae),y:Math.round(ge*X)}},de=ae=>{if(!z||!j.current||!w.current)return;const Ze=Q(ae);if(!Ze)return;const we=w.current;we.globalCompositeOperation="source-over",we.strokeStyle="#FFFFFF",we.fillStyle="#FFFFFF",we.lineWidth=v,we.lineCap="round",we.lineJoin="round",k.current?(we.beginPath(),we.moveTo(k.current.x,k.current.y),we.lineTo(Ze.x,Ze.y),we.stroke()):(we.beginPath(),we.arc(Ze.x,Ze.y,v/2,0,Math.PI*2),we.fill()),k.current=Ze},ce=ae=>{ae.button===0&&(ae.preventDefault(),ae.stopPropagation(),k.current=null,P(!0),q(),de(ae))},ye=ae=>{z&&(ae.preventDefault(),ae.stopPropagation(),de(ae))},He=ae=>{z&&(ae.preventDefault(),ae.stopPropagation(),P(!1),k.current=null,q())},V=()=>{if(S<=0||!j.current||!w.current)return;const ae=S-1;L(ae),w.current.putImageData(x[ae],0,0)},he=()=>{if(!j.current||!w.current)return;w.current.clearRect(0,0,j.current.width,j.current.height),q()},N=()=>{if(!j.current)return;const Ze=j.current.toDataURL("image/png");g&&g(e,{maskContent:Ze,isMasking:!1}),a&&a(Ze),o&&o()};return F.useEffect(()=>{if(!s)return;const ae=Ze=>{(Ze.ctrlKey||Ze.metaKey)&&Ze.key==="z"&&!Ze.shiftKey&&(Ze.preventDefault(),V())};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[s,S,x]),!s||!t||!n?null:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"absolute inset-0 z-50 pointer-events-auto",style:{mixBlendMode:"normal"},onMouseDown:ae=>ae.stopPropagation(),onMouseMove:ae=>ae.stopPropagation(),onMouseUp:ae=>ae.stopPropagation(),children:[i.jsx("canvas",{ref:j,className:"absolute inset-0 w-full h-full",style:{opacity:.5,mixBlendMode:"multiply",cursor:"crosshair",pointerEvents:"auto",imageRendering:"pixelated"},onMouseDown:ce,onMouseMove:ye,onMouseUp:He,onMouseLeave:He}),i.jsx(fk,{canvasRef:j,isDrawing:z})]}),vy.createPortal(i.jsxs("div",{className:`fixed bottom-4 left-1/2 -translate-x-1/2 flex flex-row items-center gap-4 p-2 rounded-full border backdrop-blur-md shadow-xl z-[9999] ${l==="dark"?"bg-zinc-900/90 border-zinc-700 text-zinc-200":"bg-white/90 border-zinc-300 text-zinc-800"}`,onMouseDown:ae=>ae.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:""}),i.jsx("input",{type:"range",min:"10",max:"150",value:v,onChange:ae=>$(Number(ae.target.value)),className:"w-20",onMouseDown:ae=>ae.stopPropagation()}),i.jsxs("span",{className:"text-[10px] w-8 text-right whitespace-nowrap",children:[v,"px"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:V,disabled:S<=0,className:`p-1.5 rounded-full transition-colors ${l==="dark"?"hover:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed":"hover:bg-zinc-100 disabled:opacity-50 disabled:cursor-not-allowed"}`,title:" (Ctrl+Z)",children:i.jsx(ok,{size:14})}),i.jsx("button",{onClick:he,className:`p-1.5 rounded-full transition-colors ${l==="dark"?"hover:bg-zinc-800":"hover:bg-zinc-100"}`,title:"",children:i.jsx(Py,{size:14})}),i.jsx("button",{onClick:N,className:"p-1.5 rounded-full bg-blue-600 hover:bg-blue-500 text-white transition-colors",title:"/",children:i.jsx(jl,{size:14})})]})]}),document.body)]})},gk=`
        /*  */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        /*  */
        #canvas-bg {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }
        
        /*  */
        #canvas-bg > div[style*="transform"] {
            transform: translateZ(0);
            will-change: transform;
        }
        
        /*  */
        .node-wrapper {
            transform: translateZ(0);
            backface-visibility: hidden;
            contain: layout style;
            will-change: transform, left, top;
        }
        
        /*  -  */
        .node-wrapper img,
        .node-wrapper video {
            image-rendering: auto;
            image-rendering: -webkit-optimize-contrast;
            transform: translateZ(0);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            pointer-events: none;
        }
        
        /*  */
        svg {
            shape-rendering: geometricPrecision;
            text-rendering: optimizeLegibility;
        }
        
        /*  */
        .perf-mode .node-wrapper {
            box-shadow: none !important;
            backdrop-filter: none !important;
            border-radius: 0 !important;
            transition: none !important;
        }
        .perf-mode .connection-group {
            opacity: 1 !important;
        }
        
        /*  */
        .interacting .node-wrapper img {
            image-rendering: pixelated;
        }
        .interacting .connection-group {
            display: none;
            pointer-events: none;
        }
        
        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 2px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #52525b; }
        .resize-handle { cursor: nwse-resize; opacity: 0; transition: opacity 0.2s; }
        .node-wrapper:hover .resize-handle { opacity: 1; }
        
        /*  */
        .connector { position: absolute; top: 50%; transform: translateY(-50%); width: 0.9rem; height: 0.9rem; background-color: #27272a; border: 1px solid #71717a; color: #a1a1aa; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: crosshair; transition: all 0.2s; z-index: 30; opacity: 0; pointer-events: auto; }
        .node-wrapper:hover .connector { opacity: 1; }
        .connector:hover, .connector.active { background-color: #d4d4d8; border-color: #fff; transform: translateY(-50%) scale(1.2); opacity: 1; color: #000; }
        .connector-right { right: -0.45rem; }
        
        /*  */
        .input-point { position: absolute; top: 50%; transform: translateY(-50%); left: -0.25rem; width: 0.5rem; height: 0.5rem; background-color: #52525b; border-radius: 50%; border: 1px solid #18181b; transition: all 0.2s; z-index: 20; cursor: crosshair; }
        .node-wrapper:hover .input-point { background-color: #a1a1aa; }
        .input-point.connected { background-color: #60a5fa; box-shadow: 0 0 6px #60a5fa; }
        .input-point.active { background-color: #60a5fa; border-color: #fff; transform: translateY(-50%) scale(1.3); box-shadow: 0 0 8px #60a5fa; }

        /* Lightbox & Overlay */
        .lightbox-overlay { background-color: rgba(0, 0, 0, 0.95); backdrop-filter: blur(5px); }
        
        /* Stack Items */
        .thumb-stack-item {
             transition: transform 0.2s, z-index 0.2s;
        }
        .thumb-stack-item:hover {
            transform: scale(1.1) translateY(-2px);
            z-index: 10 !important;
            border-color: #60a5fa;
        }

        /*  */
        .connection-delete {
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: auto; /*  */
        }
        /*  */
        .connection-group:hover .connection-delete {
            opacity: 1;
        }

        /*  */
        .drop-zone {
            border: 2px dashed transparent;
            transition: all 0.3s;
        }
        .drop-zone.drag-over {
            border-color: #60a5fa;
            background-color: rgba(96, 165, 250, 0.1);
        }

        /* Markdown Styles for Chat */
        .markdown-body { font-size: 13px; line-height: 1.5; color: #e4e4e7; word-wrap: break-word; user-select: text !important; cursor: text; }
        .markdown-body * { user-select: text !important; cursor: text; }
        .markdown-body pre { background: #27272a; padding: 10px; border-radius: 6px; overflow-x: auto; margin: 8px 0; white-space: pre-wrap; word-wrap: break-word; user-select: text !important; cursor: text; }
        .markdown-body code { font-family: monospace; background: #3f3f46; padding: 2px 4px; border-radius: 4px; font-size: 12px; user-select: text !important; cursor: text; }
        .markdown-body pre code { background: transparent; padding: 0; color: #a1a1aa; user-select: text !important; cursor: text; }
        .markdown-body p { margin-bottom: 8px; user-select: text !important; cursor: text; }
        .markdown-body ul, .markdown-body ol { margin-left: 20px; margin-bottom: 8px; list-style: disc; user-select: text !important; cursor: text; }
        .markdown-body li { user-select: text !important; cursor: text; }
        .markdown-body video { max-width: 100%; border-radius: 0.5rem; margin-top: 0.5rem; }
        .markdown-body table { border-collapse: collapse; width: 100%; margin: 12px 0; }
        .markdown-body table th, .markdown-body table td { border: 1px solid #3f3f46; padding: 8px 12px; text-align: left; }
        .markdown-body table th { background-color: #3f3f46; font-weight: 600; }
        .markdown-body table tr:nth-child(even) { background-color: #27272a; }
        .theme-light .markdown-body table th, .theme-light .markdown-body table td { border-color: #d4d4d8; }
        .theme-light .markdown-body table th { background-color: #e4e4e7; }
        .theme-light .markdown-body table tr:nth-child(even) { background-color: #f4f4f5; }
        .theme-light .markdown-body { color: #18181b; }
        .theme-light .markdown-body pre { background: #f4f4f5; color: #18181b; }
        .theme-light .markdown-body code { background: #e4e4e7; color: #18181b; }
        .theme-light .markdown-body pre code { color: #18181b; }
        `,xk=4e3,yk=4e3,Ir="https://ai.comfly.chat",vk="http://localhost:5100",dp={openai:{key:"",url:Ir},google:{key:"",url:Ir},deepseek:{key:"",url:Ir},flux:{key:"",url:Ir},midjourney:{key:"",url:"https://api.midjourney.com"},jimeng:{key:"",url:vk},grok:{key:"",url:"https://ai.t8star.cn"}},Xm=[{id:"gpt-5.1",provider:"openai",type:"Chat"},{id:"gpt-5.2",provider:"openai",type:"Chat"},{id:"gpt-4o",provider:"openai",type:"Chat"},{id:"deepseek-v3-1-250821",provider:"deepseek",type:"Chat"},{id:"gemini-3-pro-preview",provider:"google",type:"Chat"},{id:"MJ V6",provider:"midjourney",type:"Image"},{id:"flux-kontext-pro",provider:"flux",type:"Image"},{id:"gpt-4o-image",provider:"openai",type:"Image"},{id:"jimeng-4.5",provider:"jimeng",type:"Image"},{id:"jimeng-4.1",provider:"jimeng",type:"Image"},{id:"jimeng-4.0",provider:"jimeng",type:"Image"},{id:"jimeng-3.1",provider:"jimeng",type:"Image"},{id:"jimeng-3.0",provider:"jimeng",type:"Image"},{id:"jimeng-2.1",provider:"jimeng",type:"Image"},{id:"jimeng-xl-pro",provider:"jimeng",type:"Image"},{id:"nanobananapro",provider:"jimeng",type:"Image"},{id:"nanobanana",provider:"jimeng",type:"Image"},{id:"sora-2",provider:"openai",type:"Video",durations:["5s","10s"]},{id:"sora-2-pro",provider:"openai",type:"Video",durations:["15s","25s"]},{id:"jimeng-video-3.5-pro",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-veo3",provider:"jimeng",type:"Video",durations:["8s"]},{id:"jimeng-video-veo3.1",provider:"jimeng",type:"Video",durations:["8s"]},{id:"jimeng-video-sora2",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-3.0-pro",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-3.0",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-3.0-fast",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-2.0-pro",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-2.0",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"grok-video-3",provider:"grok",type:"Video",durations:["8s","5s"]}],hf=["Auto","1:1","16:9","9:16","4:3","3:4","21:9","3:2","2:3"],bk=["3:2","2:3","1:1"],wk=["1080P","720P"],Jm="tapnow_prompt_library",Zm="3x3 gridKeep character strictly consistent9Character Sheet",qm="UpscaleSharpeningDenoisingBest quality, 8k, masterpiece, highres, ultra detailed, sharp focus, image restoration, upscale, faithful to original.",Qm=`you are a veteran Hollywood storyboard artist with years of experience. You have the ability to accurately analyze character features and scene characteristics based on images. Provide me with the most suitable camera angles and storyboards. Strictly base this on the uploaded character and scene images, while maintaining a consistent visual style.

MANDATORY LAYOUT: Create a precise 3x3 GRID containing exactly 9 distinct panels.

- The output image MUST be a single image divided into a 3 (rows) by 3 (columns) matrix.
- There must be EXACTLY 3 horizontal rows and 3 vertical columns.
- Each panel must be completely separated by a thin, distinct, solid black line.
- DO NOT create a collage. DO NOT overlap images. DO NOT create random sizes. 
- The grid structure must be perfectly aligned for slicing.

Subject Content: "[]"

Styling Instructions:
- Each panel shows the SAME subject/scene from a DIFFERENT angle (e.g., Front, Side, Back, Action, Close-up).
- Maintain perfect consistency of the character/object across all panels.
- Cinematic lighting, high fidelity, 8k resolution.

Negative Constraints:
- No text, no captions, no UI elements.
- No watermarks.
- No broken grid lines.`,eg=`(strictly mimic source image art style:1.5), (same visual style:1.4),
score_9, score_8_up, masterpiece, best quality, (character sheet:1.4), (reference sheet:1.3), (consistent art style:1.3), matching visual style, 

[Structure & General Annotations]:
multiple views, full body central figure, clean background, 
(heavy annotation:1.4), (text labels with arrows:1.3), handwriting, data readout,

[SPECIAL CHARACTER DESCRIPTION AREA]:
(prominent character profile text box:1.6), (dedicated biography section:1.5), large descriptive text block,
[],

[Clothing Breakdown]:
(clothing breakdown:1.5), (outfit decomposition:1.4), garment analysis, (floating apparel:1.3), 
displaying outerwear, displaying upper body garment, displaying lower body garment, 

[Footwear Focus]:
(detailed footwear display:1.5), (floating shoes:1.4), shoe design breakdown, focus on shoes, 

[Inventory & Details]:
(inventory knolling:1.2), open container, personal accessories, organized items display, expression panels`,tg=`# Directive: Create a "Rich Narrative Mood Board" (8-Grid Layout)

## 1. PROJECT INPUT 

**A. [Story & Concept / ]**
> []

**B. [Key Symbols /  (Optional)]**
> []

**C. [Color Preferences /  (Optional)]**
> []

**D. [Reference Images / ]**
> (See attached images / )

---

## 2. Role Definition
Act as a **Senior Art Director**. Synthesize the Input above into a single, cohesive, high-density **Visual Mood Board** using a complex **8-Panel Asymmetrical Grid Layout**.

## 3. Layout Mapping (Strict Adherence)
You must design a visual composition that tells the story through **8 distinct panels** within one image. **Do not** generate random grids. Map the content exactly as follows:

* **Panel 1 (The World):** A wide, cinematic establishing shot of the environment (based on Input A).
* **Panel 2 (The Protagonist):** A portrait close-up (based on reference images), focusing on micro-expressions.
* **Panel 3 (The Metaphor):** An **abstract symbolic object** representing the core theme (based on Input B).
* **Panel 4 (The Palette):** A graphical **Color Palette Strip** showcasing 5 specific colors extracted from the scene.
* **Panel 5 (The Texture):** Extreme macro close-up of a material surface (e.g., rust, skin, fabric) to add tactile richness.
* **Panel 6 (The Motion):** A motion-blurred or long-exposure shot representing time/chaos.
* **Panel 7 (The Detail):** A focused shot of a specific prop or accessory relevant to the plot.
* **Panel 8 (The AI Art Interpretation - CRITICAL):** This is your **free creative space**. Generate an artistic, surreal, or abstract re-interpretation of the story's emotion. **Do not just copy the inputs.** Create a "Vibe Image" (e.g., Double Exposure, Oil Painting style, or abstract geometry) that captures the *soul* of the narrative.

## 4. Execution Requirements
* **Composition Style:** High-end Editorial / Magazine Layout. Clean, thin white borders.
* **Visual Unity:** All panels must share the same lighting conditions and color grading logic (Unified Aesthetic).
* **Task:** Provide the **Final English Image Prompt** that explicitly describes this 8-grid layout, ensuring Panel 8 stands out as an artistic variation.`,ng=["gemini-image","qwen-image","doubao-seedream","jimeng","hailuo-02","kling-v1-6","wan-2.5"],rg=e=>e&&e.includes("grok")?bk:hf,sg=["Auto","1K","2K","4K"],pp=e=>e&&e.includes("jimeng-4.5")?["2K","4K"]:sg,fp=[{label:"MJ V7",value:"--v 7"},{label:"MJ V6.1",value:"--v 6.1"},{label:"MJ V6",value:"--v 6"},{label:"MJ V5.2",value:"--v 5.2"},{label:"MJ V5.1",value:"--v 5.1"},{label:"Niji V6",value:"--niji 6"},{label:"Niji V5",value:"--niji 5"},{label:"Niji V4",value:"--niji 4"}],Ly=(e,t)=>{let n=1024,s=1024;if(t==="1080P"?(n=1920,s=1080):t==="720P"?(n=1280,s=720):t==="2K"?(n=2048,s=2048):t==="4K"&&(n=3840,s=2160),e==="Auto")return{str:`${n}x${s}`,w:n,h:s};const[o,a]=e.split(":").map(Number);if(!o||!a)return{str:"1024x1024",w:1024,h:1024};let l,u;return Math.abs(o-a)<.1?(l=n,u=s):o>a?(l=t==="Auto"||t==="1K"?1280:n,u=Math.round(l*(a/o))):(u=t==="Auto"||t==="1K"?1280:n,l=Math.round(u*(o/a))),l=Math.round(l/16)*16,u=Math.round(u/16)*16,{str:`${l}x${u}`,w:l,h:u}},kk=(e,t,n)=>{const{str:s,w:o,h:a}=Ly(t,n);return e.includes("minimax")?{sizeStr:n==="4K"?"1080p":"720p",w:o,h:a}:e.includes("jimeng")||e.includes("veo")?{sizeStr:t,w:o,h:a}:e.includes("grok")?{sizeStr:t,w:o,h:a}:{sizeStr:s,w:o,h:a}},Ur=e=>new Promise((t,n)=>{const s=new Image;s.onload=()=>t({w:s.naturalWidth,h:s.naturalHeight}),s.onerror=()=>n(new Error("Failed to load image")),s.src=e}),pr=e=>{if(!e)return!1;if(e.startsWith("data:video")||e.includes("force_video_display=true"))return!0;const t=e.split(".").pop().split("?")[0].toLowerCase();return["mp4","webm","ogg","mov"].includes(t)},ig=e=>new Promise((t,n)=>{const s=document.createElement("video");s.preload="metadata",s.muted=!0,s.playsInline=!0,s.onloadedmetadata=()=>{t({duration:Number(s.duration)||0,w:s.videoWidth||0,h:s.videoHeight||0})},s.onerror=()=>n(new Error("")),s.src=e}),zk=(e,{fps:t=2}={})=>new Promise((n,s)=>{const o=document.createElement("video"),a=document.createElement("canvas"),l=a.getContext("2d");o.muted=!0,o.playsInline=!0,o.crossOrigin="anonymous",o.src=e;const u=[],d=()=>s(new Error(""));o.onerror=d,o.onloadedmetadata=()=>{const g=Number(o.duration)||0;if(!g||!isFinite(g)){s(new Error(""));return}a.width=o.videoWidth||1280,a.height=o.videoHeight||720;const j=1/Math.max(.1,t);let w=0;const k=()=>{l.drawImage(o,0,0,a.width,a.height),u.push({time:Number(w.toFixed(2)),url:a.toDataURL("image/jpeg",.82)}),w+=j,w<=g?o.currentTime=Math.min(w,g):n(u)};o.onseeked=k,o.currentTime=0}}),jk=Wu.memo(({img1:e,img2:t})=>{const[n,s]=F.useState(50),o=F.useRef(null),[a,l]=F.useState(!1),u=F.useRef(),d=F.useCallback(w=>{o.current&&(u.current||(u.current=requestAnimationFrame(()=>{if(!o.current)return;const k=o.current.getBoundingClientRect(),v=w.touches?w.touches[0].clientX:w.clientX,$=Math.max(0,Math.min(v-k.left,k.width));s($/k.width*100),u.current=null})))},[]);F.useEffect(()=>()=>{u.current&&cancelAnimationFrame(u.current)},[]);const g=e,j=t||e;return g?i.jsxs("div",{ref:o,className:"relative w-full h-full cursor-col-resize overflow-hidden group rounded-lg select-none shadow-2xl border border-zinc-800 bg-[#09090b]",onMouseMove:d,onTouchMove:d,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[i.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:"conic-gradient(#333 90deg, transparent 90deg), conic-gradient(transparent 90deg, #333 90deg)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 10px 10px"}}),i.jsx("img",{src:g,loading:"lazy",decoding:"async",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),i.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden pointer-events-none select-none",style:{clipPath:`inset(0 0 0 ${n}%)`},children:i.jsx("img",{src:j,loading:"lazy",decoding:"async",className:"absolute inset-0 w-full h-full object-contain",draggable:!1})}),i.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/80 shadow-[0_0_10px_rgba(0,0,0,0.5)] pointer-events-none",style:{left:`${n}%`},children:i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-white rounded-full shadow-lg flex items-center justify-center text-black",children:i.jsx(ff,{size:12,className:"rotate-90"})})}),i.jsx("div",{className:`absolute bottom-2 left-2 bg-black/70 text-white text-[10px] font-medium px-2 py-0.5 rounded border border-white/10 transition-opacity duration-200 pointer-events-none ${a?"opacity-100":"opacity-60"}`,children:""}),i.jsx("div",{className:`absolute bottom-2 right-2 bg-blue-600/80 text-white text-[10px] font-medium px-2 py-0.5 rounded border border-white/10 transition-opacity duration-200 pointer-events-none ${a?"opacity-100":"opacity-60"}`,children:""})]}):i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-zinc-500 bg-zinc-900/50 rounded-lg border border-zinc-800 border-dashed pointer-events-none",children:[i.jsx(ff,{size:24,className:"mb-2 opacity-50"}),i.jsx("span",{className:"text-xs font-medium",children:""})]})}),eu=Wu.memo(({children:e,onClick:t,className:n="",variant:s="primary",icon:o,disabled:a=!1,title:l=""})=>{const u="flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 font-medium text-xs select-none disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 active:scale-95",secondary:"bg-zinc-800 hover:bg-zinc-700 text-zinc-300 border border-zinc-700 active:scale-95",ghost:"bg-transparent hover:bg-zinc-800 text-zinc-400 hover:text-white",danger:"bg-red-900/30 hover:bg-red-800 text-red-200 border border-red-800 active:scale-95"};return i.jsxs("button",{onClick:t,disabled:a,className:`${u} ${d[s]} ${n}`,title:l,children:[o&&i.jsx(o,{size:14,className:e?"mr-1.5":""}),e]})}),tu=(e,t)=>{let n;return function(...o){const a=()=>{clearTimeout(n),e(...o)};clearTimeout(n),n=setTimeout(a,t)}},_k=({isOpen:e,onClose:t,title:n,children:s,theme:o="dark"})=>{if(!e)return null;const a=o==="dark";return i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm",onMouseDown:t,children:i.jsxs("div",{className:`rounded-xl shadow-2xl w-[680px] max-w-[90vw] overflow-hidden animate-in fade-in zoom-in-95 duration-200 flex flex-col max-h-[85vh] border ${a?"bg-[#09090b] border-zinc-800":"bg-white border-zinc-200"}`,onMouseDown:l=>l.stopPropagation(),onClick:l=>l.stopPropagation(),children:[i.jsxs("div",{className:`flex items-center justify-between p-5 border-b shrink-0 ${a?"border-zinc-800/50":"border-zinc-200"}`,children:[i.jsx("h3",{className:`font-bold text-lg ${a?"text-white":"text-zinc-900"}`,children:n}),i.jsx("button",{onClick:t,className:a?"text-zinc-500 hover:text-white":"text-zinc-500 hover:text-zinc-900",children:i.jsx(hs,{size:20})})]}),i.jsx("div",{className:`p-0 overflow-y-auto custom-scrollbar flex-1 ${a?"bg-[#09090b]":"bg-white"}`,children:s})]})})},Nk=({item:e,onClose:t,onNavigate:n,onShotNavigate:s,onHistoryNavigate:o})=>{var l;if(!e)return null;const a=F.useRef(e);return F.useEffect(()=>{a.current=e},[e]),F.useEffect(()=>{if(!e)return;const u=d=>{const g=a.current;if(g&&!(d.target.tagName==="INPUT"||d.target.tagName==="TEXTAREA"))if(d.key==="ArrowLeft"||d.key==="Left"){if(!g.mjImages||g.mjImages.length<=1)return;d.preventDefault(),d.stopPropagation();const j=g.selectedMjImageIndex!==void 0?g.selectedMjImageIndex:0,w=j>0?j-1:g.mjImages.length-1;console.log("[Lightbox Debug] ArrowLeft:",{currentIndex:j,prevIndex:w,mjImagesLength:g.mjImages.length,hasStoryboard:!!g.storyboardContext}),w>=0&&w<g.mjImages.length&&n&&(a.current={...g,selectedMjImageIndex:w,url:g.mjImages[w]},n(w))}else if(d.key==="ArrowRight"||d.key==="Right"){if(!g.mjImages||g.mjImages.length<=1)return;d.preventDefault(),d.stopPropagation();const j=g.selectedMjImageIndex!==void 0?g.selectedMjImageIndex:0,w=j<g.mjImages.length-1?j+1:0;console.log("[Lightbox Debug] ArrowRight:",{currentIndex:j,nextIndex:w,mjImagesLength:g.mjImages.length,hasStoryboard:!!g.storyboardContext}),w>=0&&w<g.mjImages.length&&n&&(a.current={...g,selectedMjImageIndex:w,url:g.mjImages[w]},n(w))}else if(d.key==="ArrowUp"||d.key==="Up")if(d.preventDefault(),d.stopPropagation(),g.storyboardContext&&s){const{shotIndex:j,allShots:w}=g.storyboardContext;j>0&&s(j-1,w)}else o&&o(-1);else if(d.key==="ArrowDown"||d.key==="Down")if(d.preventDefault(),d.stopPropagation(),g.storyboardContext&&s){const{shotIndex:j,allShots:w}=g.storyboardContext;j<w.length-1&&s(j+1,w)}else o&&o(1);else(d.key==="Escape"||d.key==="Esc")&&(d.preventDefault(),d.stopPropagation(),t&&t())};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[e,n,s,o]),i.jsxs("div",{className:"fixed inset-0 z-[200] lightbox-overlay flex flex-col items-center justify-center animate-in fade-in duration-200",onClick:t,children:[i.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white p-2 bg-black/50 rounded-full transition-colors",onClick:t,children:i.jsx(hs,{size:24})}),i.jsxs("div",{className:"max-w-[90vw] max-h-[85vh] relative",onClick:u=>u.stopPropagation(),children:[e.type==="image"?i.jsx(sr,{src:e.url,alt:e.prompt,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl object-contain"}):i.jsx("video",{src:e.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl"}),i.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/60 backdrop-blur-md px-6 py-3 rounded-full text-white text-sm font-medium border border-white/10 text-center shadow-2xl",children:[i.jsx("div",{className:"line-clamp-1 max-w-xl",children:e.prompt}),i.jsxs("div",{className:"text-[10px] text-zinc-400 mt-1",children:[e.width,"x",e.height,"  ",e.id,e.mjImages&&e.mjImages.length>1&&i.jsxs("span",{className:"ml-2",children:["(",(e.selectedMjImageIndex!==void 0?e.selectedMjImageIndex:0)+1,"/",e.mjImages.length,")"]}),e.storyboardContext&&i.jsxs("span",{className:"ml-2 text-blue-400",children:["Shot ",e.storyboardContext.shotIndex+1,"/",((l=e.storyboardContext.allShots)==null?void 0:l.length)||1]})]})]}),e.mjImages&&e.mjImages.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-3 bg-black/50 rounded-full transition-colors",onClick:u=>{u.stopPropagation();const d=e.selectedMjImageIndex!==void 0?e.selectedMjImageIndex:0,g=d>0?d-1:e.mjImages.length-1;n&&n(g)},title:" ()",children:i.jsx(O2,{size:24})}),i.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-3 bg-black/50 rounded-full transition-colors",onClick:u=>{u.stopPropagation();const d=e.selectedMjImageIndex!==void 0?e.selectedMjImageIndex:0,g=d<e.mjImages.length-1?d+1:0;n&&n(g)},title:" ()",children:i.jsx(_l,{size:24})})]})]})]})};function Sk(){var ch,uh;const[e,t]=F.useState(()=>{try{return localStorage.getItem("tapnow_theme")||"dark"}catch{return"dark"}}),[n,s]=F.useState([]),o=F.useCallback((r,c="info",f=3e3)=>{const h=Date.now();s(p=>[...p,{id:h,message:r,type:c}]),setTimeout(()=>{s(p=>p.filter(m=>m.id!==h))},f)},[]);F.useEffect(()=>{const r=document.createElement("style");return r.innerText=gk,document.head.appendChild(r),()=>{document.head.removeChild(r)}},[]),F.useEffect(()=>{try{localStorage.setItem("tapnow_theme",e)}catch{}const r=document.documentElement;e==="dark"?(r.classList.add("theme-dark"),r.classList.remove("theme-light"),document.body.style.backgroundColor="#09090b"):(r.classList.add("theme-light"),r.classList.remove("theme-dark"),document.body.style.backgroundColor="#f4f4f5")},[e]),F.useEffect(()=>{const r=setInterval(()=>{try{const c={nodes:ls.current,connections:Ha.current,timestamp:Date.now()};localStorage.setItem("tapnow_autosave",JSON.stringify(c)),console.log("[AutoSave] ",new Date().toLocaleTimeString())}catch(c){console.warn("[AutoSave] :",c.message)}},6e4);return()=>clearInterval(r)},[]),F.useEffect(()=>{const r=c=>{if(ls.current&&ls.current.length>0)return c.preventDefault(),c.returnValue="",c.returnValue};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[]);const[a,l]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_autosave");if(r)return JSON.parse(r).nodes||[];const c=localStorage.getItem("tapnow_nodes");return c?JSON.parse(c):[]}catch{return[]}}),[u,d]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_autosave");if(r)return JSON.parse(r).connections||[];const c=localStorage.getItem("tapnow_connections");return c?JSON.parse(c):[]}catch{return[]}}),[g,j]=F.useState(()=>{const r=localStorage.getItem("tapnow_max_undo_steps");return r?Math.min(30,Math.max(1,parseInt(r)||5)):5}),[w,k]=F.useState([]),[v,$]=F.useState([]),z=F.useRef(!1),[P,x]=F.useState(null),[y,S]=F.useState(null),[L,W]=F.useState(null),[q,Q]=F.useState([]),[de,ce]=F.useState(0),[ye,He]=F.useState(()=>parseInt(localStorage.getItem("tapnow_batch_concurrency")||"1")),V=F.useRef(new Set),he=F.useRef("idle");F.useEffect(()=>{localStorage.setItem("tapnow_batch_concurrency",ye)},[ye]);const N=F.useCallback(()=>{z.current||(k(r=>[...r,{nodes:JSON.parse(JSON.stringify(a)),connections:JSON.parse(JSON.stringify(u))}].slice(-g)),$([]))},[a,u]),ae=F.useRef(N);F.useEffect(()=>{ae.current=N},[N]),F.useEffect(()=>{if(console.log(`[Batch] State check - Queue: ${q.length}, State: ${he.current}, Tick: ${de}`),q.length===0){he.current="idle",V.current.clear();return}let r=0;const c=[],f=Date.now(),h=6e4;if(a.forEach(C=>{var T;(T=C.settings)!=null&&T.shots&&C.settings.shots.forEach(I=>{I.status==="generating"&&(r++,I.generationStartTime&&f-I.generationStartTime>h&&c.push({nodeId:C.id,shotId:I.id}));const D=`${C.id}:${I.id}`;V.current.has(D)&&(I.status==="generating"||I.status==="done"||I.status==="failed")&&V.current.delete(D)})}),c.length>0&&(console.warn(`[Batch] ${c.length} tasks timed out (>${h/1e3}s). Auto-marking as failed.`),c.forEach(({nodeId:C,shotId:T})=>{Vt(C,T,{status:"failed",errorMsg:"60s"},{onlyIfStatus:"generating"})}),r-=c.length),r+V.current.size>0){he.current="running";return}if(he.current==="running"){he.current="cooling",console.log("[Batch] Batch finished. Cooling down 1s..."),setTimeout(()=>{he.current="idle",ce(C=>C+1)},1e3);return}if(he.current==="cooling")return;const m=ye===0?q.length:ye,_=q.slice(0,m),M=q.slice(m);_.length>0&&(console.log(`[Batch] Starting new batch of ${_.length} shots. Concurrency: ${ye}`),Q(M),he.current="running",_.forEach(C=>{var D,R;V.current.add(`${C.nodeId}:${C.shotId}`);const T=a.find(B=>B.id===C.nodeId),I=(R=(D=T==null?void 0:T.settings)==null?void 0:D.shots)==null?void 0:R.find(B=>B.id===C.shotId);I&&(C.mode==="image"?nh(C.nodeId,I):th(C.nodeId,I))}))},[q,a,ye,de]),F.useEffect(()=>{if(q.length===0)return;const r=setInterval(()=>{console.log("[Batch] Periodic check triggered"),ce(c=>c+1)},5e3);return()=>clearInterval(r)},[q.length>0]);const Ze=F.useCallback(()=>{if(w.length===0)return;z.current=!0;const r=w[w.length-1];$(c=>[...c,{nodes:JSON.parse(JSON.stringify(a)),connections:JSON.parse(JSON.stringify(u))}]),l(r.nodes),d(r.connections),k(c=>c.slice(0,-1)),setTimeout(()=>{z.current=!1},100)},[w,a,u]),we=F.useCallback(()=>{if(v.length===0)return;z.current=!0;const r=v[v.length-1];k(c=>[...c,{nodes:JSON.parse(JSON.stringify(a)),connections:JSON.parse(JSON.stringify(u))}]),l(r.nodes),d(r.connections),$(c=>c.slice(0,-1)),setTimeout(()=>{z.current=!1},100)},[v,a,u]);F.useEffect(()=>{const r=c=>{(c.ctrlKey||c.metaKey)&&c.key==="z"&&(c.shiftKey?(c.preventDefault(),we()):(c.preventDefault(),Ze()))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[Ze,we]);const[pe,ge]=F.useState({x:0,y:0,zoom:1}),Ae=F.useRef({x:0,y:0,zoom:1});F.useRef(null),F.useRef(new Map),F.useRef(new Map);const[X,Z]=F.useState(null),[Te,Ye]=F.useState(()=>{const r=localStorage.getItem("tapnow_api_configs");if(r)try{let c=JSON.parse(r);c=c.map(p=>{if(p.modelName&&p.modelName!==p.id)return{id:p.modelName,provider:p.provider,type:p.type,...p.durations?{durations:p.durations}:{}};const{displayName:m,modelName:_,isCustom:M,...C}=p;return C}),c=c.filter(p=>!ng.includes(p.id));const f=new Map;return c.forEach(p=>{p.id&&f.set(p.id,p)}),Xm.filter(p=>p.type==="Chat").forEach(p=>{f.has(p.id)||f.set(p.id,p)}),c=Array.from(f.values()),c}catch(c){console.error("[V3.6.0]  apiConfigs :",c)}return[...Xm]}),[Ne,At]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_providers");if(r)return JSON.parse(r)}catch(r){console.error(" providers :",r)}return{...dp}});F.useEffect(()=>{try{localStorage.setItem("tapnow_providers",JSON.stringify(Ne))}catch(r){console.error(" providers :",r)}},[Ne]),F.useCallback(r=>{const c=Te.find(h=>h.id===r);if(!c)return{key:"",url:Ir,id:r};const f=Ne[c.provider]||{};return{...c,modelName:c.id,key:f.key||"",url:f.url||Ir}},[Te,Ne]);const[nn,$t]=F.useState(()=>localStorage.getItem("tapnow_global_key")||""),[Dt,_n]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_api_blacklist");if(!r)return{};const c=JSON.parse(r),f=new Date().toDateString();return c.date!==f?{}:c.blacklist||{}}catch{return{}}});F.useEffect(()=>{try{localStorage.setItem("tapnow_api_blacklist",JSON.stringify({date:new Date().toDateString(),blacklist:Dt}))}catch{}},[Dt]);const sn=F.useRef(Dt);F.useEffect(()=>{sn.current=Dt},[Dt]);const mr=(r,c)=>{if(!r)return;const f={date:new Date().toDateString(),reason:c,timestamp:Date.now()},h=sn.current||{};sn.current={...h,[r]:f},console.log("[V3.5.1 Debug] addToBlacklist called:"),console.log("  - Key ending:","..."+r.slice(-6)),console.log("  - Reason:",c),console.log("  - Old blacklist size:",Object.keys(h).length),console.log("  - New blacklist size:",Object.keys(sn.current).length),_n(p=>({...p,[r]:f})),console.log(` API Key "...${r.slice(-4)}" : ${c}`)},[kn,b]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_api_suspend");if(!r)return{};const c=JSON.parse(r),f=Date.now();return Object.fromEntries(Object.entries(c).filter(([,h])=>f-h.timestamp<60*60*1e3))}catch{return{}}});F.useEffect(()=>{try{localStorage.setItem("tapnow_api_suspend",JSON.stringify(kn))}catch{}},[kn]);const ke=F.useRef(kn);F.useEffect(()=>{ke.current=kn},[kn]);const xe=(r,c,f=60*60*1e3)=>{if(!r)return;const h={reason:c,timestamp:Date.now(),ttl:f};ke.current={...ke.current,[r]:h},b(p=>({...p,[r]:h})),console.log(` API Key "...${r.slice(-4)}"  ${f/6e4} : ${c}`)},H=r=>{var f;const c=(f=ke.current)==null?void 0:f[r];return c?Date.now()-c.timestamp<(c.ttl||60*60*1e3):!1},U=F.useRef([]),ee=2*60*1e3,Ee=10,Me=()=>{const r=Date.now(),c=U.current.filter(f=>r-f<ee);return U.current=c,c.length>=Ee},ue=()=>{U.current.push(Date.now())},[Re,nt]=F.useState(()=>{const r=localStorage.getItem("tapnow_jimeng_use_local_file");return r!==null?r==="true":!0}),[$e,ft]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_nodes");return!r||JSON.parse(r).length===0?(localStorage.removeItem("tapnow_project_name"),""):localStorage.getItem("tapnow_project_name")||""}catch{return""}}),[Wt,Pt]=F.useState(!1),ar=F.useRef(null),[Kr,Yn]=F.useState({visible:!1,progress:0,status:"",type:"import"}),[er,dn]=F.useState(()=>localStorage.getItem("tapnow_performance_mode")||"off"),[tr,Nr]=F.useState(()=>localStorage.getItem("tapnow_local_server_url")||"http://127.0.0.1:9527");F.useEffect(()=>{localStorage.setItem("tapnow_performance_mode",er)},[er]),F.useEffect(()=>{localStorage.setItem("tapnow_local_server_url",tr)},[tr]);const[kt,St]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_history");return r?JSON.parse(r).map(f=>{var h,p;return f.mjNeedsSplit&&f.mjOriginalUrl&&((p=(h=f.apiConfig)==null?void 0:h.modelId)!=null&&p.includes("mj"))?{...f,url:f.mjOriginalUrl,mjImages:null,mjNeedsSplit:!0}:f}):[]}catch(r){return console.error(":",r),[]}}),[Us]=F.useState(()=>Date.now()),[ei,Sr]=F.useState({active:!1,current:0,total:0,filename:""}),[zn,ts]=F.useState(new Set),[ks,g0]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_auto_save_config");return r?JSON.parse(r):{enabled:!1,interval:5,folderPath:""}}catch{return{enabled:!1,interval:5,folderPath:""}}}),[x0,Gn]=F.useState(!1),[Xn,ti]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_chat_sessions");return r?JSON.parse(r):[{id:"default",title:"",messages:[]}]}catch{return[{id:"default",title:"",messages:[]}]}}),[zs,ni]=F.useState("default"),[ri,Ta]=F.useState(""),[co,lr]=F.useState(!1),[si,ac]=F.useState(400),[ii,ns]=F.useState([]),[Cr,js]=F.useState(()=>{try{return localStorage.getItem("tapnow_chat_model")||"gemini-3-pro"}catch{return"gemini-3-pro"}}),[Po,Ma]=F.useState(!1),[uo,po]=F.useState(null),[Ro,zt]=F.useState(!1);F.useEffect(()=>{try{localStorage.setItem("tapnow_chat_model",Cr)}catch{}},[Cr]);const[Y,Se]=F.useState(null),lt=F.useRef(Y);F.useEffect(()=>{lt.current=Y},[Y]);const[cn,nr]=F.useState(()=>{try{const r=localStorage.getItem(Jm),c=r?JSON.parse(r):[],f=[{id:"grid-default",name:"",prompt:Zm},{id:"upscale-default",name:"",prompt:qm},{id:"moodboard-default",name:"",prompt:tg},{id:"storyboard-default",name:"",prompt:Qm},{id:"character-sheet-default",name:"",prompt:eg}],h=new Set((c||[]).map(m=>m.id)),p=[...c];return f.forEach(m=>{const _=p.some(M=>M.name===m.name);!h.has(m.id)&&!_&&p.unshift(m)}),p}catch{return[{id:"grid-default",name:"",prompt:Zm},{id:"upscale-default",name:"",prompt:qm},{id:"moodboard-default",name:"",prompt:tg},{id:"storyboard-default",name:"",prompt:Qm},{id:"character-sheet-default",name:"",prompt:eg}]}}),[Nn,cr]=F.useState({name:"",prompt:""}),[rs,Ei]=F.useState(!1),[fo,rr]=F.useState(!1);F.useEffect(()=>{try{localStorage.setItem(Jm,JSON.stringify(cn))}catch{}},[cn]);const[oi,Ii]=F.useState(!1),[ad,$a]=F.useState(!1),[Dr,Aa]=F.useState(null),[Do,lc]=F.useState(null),[Mn,Lo]=F.useState(null),[un,ss]=F.useState(null),[is,os]=F.useState(null),[ld,_s]=F.useState({x:0,y:0}),[Oo,Ti]=F.useState(null),[Ck,y0]=F.useState(!1),[Mi,cd]=F.useState(!1),[Ns,ud]=F.useState(null),[Wn,Lr]=F.useState(new Set),ai=F.useRef(!1),[$i,Uo]=F.useState({x:0,y:0,worldX:0,worldY:0,visible:!1}),[vr,Ss]=F.useState({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null}),[Yr,Pa]=F.useState({nodeId:null,shotId:null}),[Ai,dd]=F.useState({visible:!1,x:0,y:0,nodeId:null,frame:null}),[Pi,v0]=F.useState({visible:!1,x:0,y:0,item:null}),[Ra,b0]=F.useState({visible:!1,x:0,y:0,nodeId:null}),[Oy,li]=F.useState(!1),[cc,uc]=F.useState(!1),[Ek,pd]=F.useState(-1),[w0,Fo]=F.useState(!1),[Fn,fd]=F.useState(()=>{try{const r=localStorage.getItem("tapnow_characters");return r?JSON.parse(r):[]}catch(r){return console.error(":",r),[]}}),[Uy,Da]=F.useState(!1),[ci,dc]=F.useState("url"),[Bo,pc]=F.useState(""),[Ho,fc]=F.useState(""),[Wo,k0]=F.useState(1),[Vo,z0]=F.useState(3),[j0,La]=F.useState(""),[hd,Ko]=F.useState(!1),[_0,Oa]=F.useState(null),[N0,hc]=F.useState({}),[Fy,mc]=F.useState(!1),[Or,ho]=F.useState(new Set),[S0,md]=F.useState(!1),[By,Hy]=F.useState("select"),[qe,Sn]=F.useState(null),[br,as]=F.useState(null),[Ua,gd]=F.useState({}),[Yo,gc]=F.useState(null),[Wy,xd]=F.useState(null),[C0,yd]=F.useState(null),[vd,Fa]=F.useState({}),[Vy,Ky]=F.useState({}),[Yy,E0]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_image_model")||"nano-banana"}catch{return"nano-banana"}}),[I0,T0]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_video_model")||"sora-2"}catch{return"sora-2"}}),[M0,Gy]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_ratio")||"1:1"}catch{return"1:1"}}),[Xy,Jy]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_image_res")||"Auto"}catch{return"Auto"}}),[Zy,qy]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_video_res")||"720P"}catch{return"720P"}}),[Qy,e1]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_segment_duration")||"3"}catch{return"3"}}),[t1,n1]=F.useState(()=>{try{return localStorage.getItem("tapnow_last_analyze_model")||"gemini-3-pro"}catch{return"gemini-3-pro"}}),ui=F.useRef(null),Ba=F.useRef({x:0,y:0}),$0=F.useRef(null),ls=F.useRef(a),Ri=F.useRef(X),Fs=F.useRef(Wn),Ha=F.useRef(u),xc=F.useRef({}),di=F.useRef(null),Go=F.useRef(!1),pi=F.useRef(null),Bs=F.useRef(null),Di=F.useRef(null),Wa=F.useRef(null);F.useEffect(()=>{localStorage.setItem("tapnow_api_configs",JSON.stringify(Te))},[Te]);const bd=F.useCallback(r=>{N(),l(c=>c.filter(f=>f.id!==r)),d(c=>c.filter(f=>f.from!==r&&f.to!==r)),X===r&&Z(null)},[X,N]),pt=F.useCallback((r,c)=>{l(f=>f.map(h=>h.id===r?{...h,settings:{...h.settings,...c}}:h))},[]),Va=(r,c)=>{if(!c)return;const f=new FileReader;f.onload=async h=>{const p=h.target.result;let m={duration:0,w:0,h:0};try{m=await ig(p)}catch(_){console.warn("",_)}l(_=>_.map(M=>M.id===r?{...M,content:p,videoMeta:m,frames:[],selectedKeyframes:[],extractingFrames:!1,videoFileName:c.name}:M))},f.readAsDataURL(c)};F.useEffect(()=>{const r=c=>{if(!(c.target.tagName==="INPUT"||c.target.tagName==="TEXTAREA"||c.target.isContentEditable)&&(c.key==="Delete"||c.key==="Del")){c.preventDefault(),c.stopPropagation();const f=Ri.current,h=Fs.current;if(f)bd(f),Z(null);else if(h&&h.size>0){ae.current&&ae.current();const p=new Set(h);l(m=>m.filter(_=>!p.has(_.id))),d(m=>m.filter(_=>!p.has(_.from)&&!p.has(_.to))),Lr(new Set)}}};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[]);const A0=F.useMemo(()=>tu(r=>{try{localStorage.setItem("tapnow_characters",JSON.stringify(r))}catch(c){console.error(":",c)}},500),[]);F.useEffect(()=>{A0(Fn)},[Fn,A0]),F.useEffect(()=>{Oa(null)},[Bo,Ho,ci]),F.useEffect(()=>{if(!cc){pd(-1);return}const r=c=>{c.target.tagName==="INPUT"||c.target.tagName==="TEXTAREA"||Y||(c.key==="ArrowUp"||c.key==="Up"?(c.preventDefault(),c.stopPropagation(),pd(f=>{var p;const h=f<=0?kt.length-1:f-1;return(p=kt[h])!=null&&p.url&&Se({...kt[h],storyboardContext:null}),h})):c.key==="ArrowDown"||c.key==="Down"?(c.preventDefault(),c.stopPropagation(),pd(f=>{var p;const h=f>=kt.length-1?0:f+1;return(p=kt[h])!=null&&p.url&&Se({...kt[h],storyboardContext:null}),h})):(c.key==="Escape"||c.key==="Esc")&&(c.preventDefault(),c.stopPropagation(),uc(!1)))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[cc,kt,Y]);const Ka=F.useMemo(()=>tu(r=>{try{localStorage.setItem("tapnow_history",JSON.stringify(r))}catch(c){console.error(":",c);try{const f=r.map(h=>{var p;return{id:h.id,type:h.type,url:h.url,prompt:((p=h.prompt)==null?void 0:p.substring(0,200))||"",time:h.time,status:h.status,modelName:h.modelName,width:h.width,height:h.height,ratio:h.ratio,mjImages:h.mjImages,selectedMjImageIndex:h.selectedMjImageIndex,mjRatio:h.mjRatio,mjNeedsSplit:h.mjNeedsSplit,mjImageInfo:h.mjImageInfo}});localStorage.setItem("tapnow_history",JSON.stringify(f))}catch(f){console.error(":",f);try{const h=r.map(p=>{var m;return{id:p.id,type:p.type,url:p.url,prompt:((m=p.prompt)==null?void 0:m.substring(0,100))||"",time:p.time,status:p.status,modelName:p.modelName}});Ka(h)}catch(h){console.error(":",h)}}}},1e3),[]),P0=F.useMemo(()=>tu(r=>{localStorage.setItem("tapnow_global_key",r)},1e3),[]);F.useEffect(()=>{P0(nn)},[nn,P0]),F.useEffect(()=>{try{const r=kt.map(c=>{var p,m,_,M;const f={...c},h=((m=(p=c.apiConfig)==null?void 0:p.modelId)==null?void 0:m.includes("mj"))||((M=(_=c.modelName)==null?void 0:_.toLowerCase())==null?void 0:M.includes("midjourney"));return c.mjImages&&c.mjImages.length===4&&h&&(f.mjImages=null,f.mjNeedsSplit=!0,f.mjOriginalUrl=c.mjOriginalUrl||c.url),c.url&&c.url.startsWith("data:")&&c.url.length>5e3&&(f.url=c.url.substring(0,100)+"..."),delete f.mjImageInfo,f});Ka(r)}catch(r){console.error(":",r);try{const c=kt.slice(0,20).map(f=>{const h={...f};return h.url&&h.url.startsWith("data:")&&(h.url=h.url.substring(0,100)+"..."),h.mjImages&&(h.mjImages=null),h.mjImageInfo&&delete h.mjImageInfo,h});Ka(c)}catch(c){console.error(":",c);try{const f=kt.slice(0,10).map(h=>{var p;return{id:h.id,type:h.type,prompt:(p=h.prompt)==null?void 0:p.substring(0,100),time:h.time,status:h.status,modelName:h.modelName}});Ka(f)}catch(f){console.error(":",f)}}}},[kt,Ka]);const R0=F.useMemo(()=>tu(r=>{try{localStorage.setItem("tapnow_chat_sessions",JSON.stringify(r))}catch{}},1e3),[]);F.useEffect(()=>{R0(Xn)},[Xn,R0]),F.useEffect(()=>{ls.current=a,Ri.current=X,Fs.current=Wn,Ha.current=u,ai.current=Mi},[a,X,Wn,u,Mi]);const Xt=F.useMemo(()=>{const r=new Map;return a.forEach(c=>{r.set(c.id,c)}),r},[a]),pn=F.useMemo(()=>{const r=new Map;return Te.forEach(c=>{r.set(c.id,c)}),r},[Te]),Hs=F.useCallback(r=>{const c=pn.get(r);if(!c)return{key:nn,url:Ir.replace(/\/+$/,""),modelName:r,displayName:r};const f=Ne[c.provider],h=(f==null?void 0:f.key)||nn,p=((f==null?void 0:f.url)||Ir).replace(/\/+$/,"");return{key:h,url:p,modelName:c.modelName,displayName:c.displayName,provider:c.provider,type:c.type}},[pn,Ne,nn]),cs=F.useMemo(()=>{const r={};return Object.entries(Ne).forEach(([c])=>{r[c]={name:c,models:[]}}),Te.forEach(c=>{if(ng.includes(c.id))return;const f=c.provider||"Other";r[f]||(r[f]={name:f,models:[]}),r[f].models.push(c)}),r},[Te,Ne]),Ya=F.useMemo(()=>{const r=new Map;return kt.forEach(c=>{r.set(c.id,c)}),r},[kt]),yc=F.useMemo(()=>{if(!ui.current)return a;const r=ui.current.getBoundingClientRect(),c=200,f=Ae.current,h=(-f.x-c)/f.zoom,p=(r.width-f.x+c)/f.zoom,m=(-f.y-c)/f.zoom,_=(r.height-f.y+c)/f.zoom;return a.filter(M=>{const C=M.x+(M.width||0),T=M.y+(M.height||0);return M.x<p&&C>h&&M.y<_&&T>m})},[a,pe.x,pe.y,pe.zoom]);F.useCallback(r=>r>=.8?"high":r>=.4?"medium":"low",[]),F.useEffect(()=>{Ae.current=pe},[pe]);const Xo=F.useMemo(()=>{const r={to:new Map,from:new Map};return u.forEach(c=>{r.to.has(c.to)||r.to.set(c.to,[]),r.to.get(c.to).push(c),r.from.has(c.from)||r.from.set(c.from,[]),r.from.get(c.from).push(c)}),r},[u]);F.useEffect(()=>{const r=setInterval(()=>{const c=Date.now(),f=kt.filter(p=>p.sourceNodeId&&p.status==="generating"&&p.startTime),h={};f.forEach(p=>{const m=Math.floor((c-p.startTime)/100);h[p.sourceNodeId]=m/10}),Ky(h)},500);return()=>clearInterval(r)},[kt]);const vc=F.useRef(new Set);F.useEffect(()=>{kt.forEach(r=>{var c,f;if(r.mjNeedsSplit&&r.mjOriginalUrl&&((f=(c=r.apiConfig)==null?void 0:c.modelId)!=null&&f.includes("mj"))&&r.status==="completed"){if(vc.current.has(r.id))return;vc.current.add(r.id),setTimeout(()=>{let h=r.mjRatio||"1:1";if(r.prompt&&r.prompt.includes("--ar ")){const p=r.prompt.match(/--ar\s+([\d:]+)/);p&&p[1]&&(h=p[1])}console.log(`Midjourney: ID: ${r.id}, : ${h}`),Z0(r.mjOriginalUrl,h).then(p=>{const m=p.map(C=>typeof C=="string"?C:C.url),_=p[0],M=typeof _=="string"?_:_.url;St(C=>C.map(T=>T.id===r.id?{...T,mjImages:m,url:M,selectedMjImageIndex:0,mjRatio:h,mjNeedsSplit:!1,mjImageInfo:p.map(I=>typeof I=="string"?null:{width:I.width,height:I.height,ratio:I.ratio})}:T)),vc.current.delete(r.id),console.log(`Midjourney: ID: ${r.id}`)}).catch(p=>{console.error("Midjourney: :",p),vc.current.delete(r.id),St(m=>m.map(_=>_.id===r.id?{..._,mjNeedsSplit:!0}:_))})},500)}})},[kt]);const wd=F.useRef(new Set);F.useEffect(()=>{const r=a.filter(c=>{var f,h;return c.type==="local-save"&&((f=c.settings)==null?void 0:f.autoSave)&&((h=c.settings)==null?void 0:h.serverStatus)==="connected"});r.length!==0&&r.forEach(async c=>{var _;const f=zd(c.id);if(f.length===0)return;const h=((_=c.settings)==null?void 0:_.lastSavedUrls)||[],p=f.filter(M=>!h.includes(M));if(p.length===0)return;const m=`${c.id}-${p.join(",")}`;wd.current.has(m)||(wd.current.add(m),setTimeout(async()=>{var M,C,T;try{const I={images:p,path:((M=c.settings)==null?void 0:M.savePath)||"",subfolder:((C=c.settings)==null?void 0:C.subfolder)||"",format:"jpg"},D=await fetch(`${tr}/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(D.ok){const R=await D.json(),B=[...h,...p];pt(c.id,{lastSavedUrls:B,lastSaved:new Date().toLocaleString(),savedFiles:[...((T=c.settings)==null?void 0:T.savedFiles)||[],...R.files]})}}catch(I){console.error(":",I)}finally{wd.current.delete(m)}},1e3))})},[a,kt,tr]);const r1=r=>{r.preventDefault(),D0(!0)},[bc,D0]=F.useState(!1),wc=F.useCallback(r=>{if(!bc)return;const c=window.innerWidth-r.clientX;ac(Math.max(300,Math.min(c,800)))},[bc]),kc=F.useCallback(()=>{D0(!1)},[]);F.useEffect(()=>{const r=console.error,c=console.warn,f=h=>{const p=h.map(m=>typeof m=="string"?m:m&&m.toString?m.toString():"").join(" ");return p.includes("Unable to preventDefault")||p.includes("passive event listener")||p.includes("preventDefault")&&p.includes("passive")};return console.error=function(...h){f(h)||r.apply(console,h)},console.warn=function(...h){f(h)||c.apply(console,h)},()=>{console.error=r,console.warn=c}},[]),F.useEffect(()=>{const r=f=>{if(f.ctrlKey)try{f.cancelable&&(f.preventDefault(),f.stopPropagation())}catch{}},c={passive:!1,capture:!0};return window.addEventListener("wheel",r,c),document.addEventListener("wheel",r,c),window.addEventListener("mousewheel",r,c),document.addEventListener("mousewheel",r,c),()=>{window.removeEventListener("wheel",r,c),document.removeEventListener("wheel",r,c),window.removeEventListener("mousewheel",r,c),document.removeEventListener("mousewheel",r,c)}},[]),F.useEffect(()=>{const r=ui.current;if(!r)return;const c=f=>{if(f.ctrlKey){try{f.cancelable&&(f.preventDefault(),f.stopPropagation())}catch{}return}const h=f.target;let p=!1,m=null;if(h.tagName==="TEXTAREA"&&h.scrollHeight>h.clientHeight){try{f.cancelable&&f.preventDefault()}catch{}const I=h.scrollHeight-h.clientHeight,D=h.scrollTop,R=Math.max(0,Math.min(I,D+f.deltaY));h.scrollTop=R;return}let _=h;for(;_&&_!==r;){if(_.classList){const I=_.classList.contains("flex")&&_.classList.contains("flex-col")&&_.classList.contains("h-full")&&_.classList.contains("rounded-xl")&&_.classList.contains("overflow-hidden");if(_.classList.contains("video-input-container")||_.classList.contains("video-analyze-container")||I){if(p=!0,I)m=_.querySelector(".flex-1.overflow-y-auto.custom-scrollbar"),m||(m=_.querySelector(".flex-1.overflow-y-auto"));else if(m=_.querySelector('.overflow-y-auto, .custom-scrollbar, [class*="overflow-y"]'),!m){const B=window.getComputedStyle(_);(B.overflowY==="auto"||B.overflowY==="scroll"||_.classList.contains("custom-scrollbar"))&&(m=_)}break}const D=_.closest(".video-input-container, .video-analyze-container");if(D){if(p=!0,m=D.querySelector('.overflow-y-auto, .custom-scrollbar, [class*="overflow-y"]'),!m){const B=window.getComputedStyle(D);(B.overflowY==="auto"||B.overflowY==="scroll")&&(m=D)}break}const R=_.closest(".flex.flex-col.h-full.rounded-xl.overflow-hidden");if(R){p=!0,m=R.querySelector(".flex-1.overflow-y-auto.custom-scrollbar"),m||(m=R.querySelector(".flex-1.overflow-y-auto"));break}}_=_.parentElement}if(p&&m){try{f.cancelable&&(f.preventDefault(),f.stopPropagation())}catch{}const I=m.scrollHeight-m.clientHeight,D=m.scrollTop,R=Math.max(0,Math.min(I,D+f.deltaY));m.scrollTop=R;return}try{f.cancelable&&f.preventDefault()}catch{}const M=r.getBoundingClientRect(),C=f.clientX-M.left,T=f.clientY-M.top;ge(I=>{const D=f.deltaY>0?.9:1.1;let R=Math.min(Math.max(I.zoom*D,.2),3);const B=R/I.zoom;return{zoom:R,x:C-(C-I.x)*B,y:T-(T-I.y)*B}})};return r.addEventListener("wheel",c,{passive:!1}),()=>{r.removeEventListener("wheel",c)}},[pe]),F.useEffect(()=>(bc?(window.addEventListener("mousemove",wc),window.addEventListener("mouseup",kc)):(window.removeEventListener("mousemove",wc),window.removeEventListener("mouseup",kc)),()=>{window.removeEventListener("mousemove",wc),window.removeEventListener("mouseup",kc)}),[bc,wc,kc]);const xn=F.useCallback((r,c)=>{var m;const f=(m=ui.current)==null?void 0:m.getBoundingClientRect(),h=f?r-f.left:r,p=f?c-f.top:c;return{x:(h-pe.x)/pe.zoom,y:(p-pe.y)/pe.zoom}},[pe]),s1=r=>{var c;if((r.button===0||r.button===1)&&r.currentTarget.id==="canvas-bg"){const f=r.target;if(f&&(f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.tagName==="SELECT"||f.tagName==="BUTTON"||f.isContentEditable||f.closest('input, textarea, select, button, [contenteditable="true"]')))return;const h=window.getSelection();if(h&&h.toString().length>0&&h.removeAllRanges(),r.button===0&&(r.ctrlKey||r.metaKey)){r.preventDefault(),cd(!0),ai.current=!0,Ii(!1);const p=(c=ui.current)==null?void 0:c.getBoundingClientRect(),m=r.clientX-((p==null?void 0:p.left)||0),_=r.clientY-((p==null?void 0:p.top)||0);ud({startX:m,startY:_,endX:m,endY:_}),Lr(new Set),Z(null);return}ai.current||(Ii(!0),Go.current=!0,$a(!1),Ba.current={x:r.clientX,y:r.clientY})}},zc=F.useRef(null),us=F.useRef(null),Li=F.useRef(null),Ga=F.useCallback(()=>{if(Li.current){const f=Li.current,h=new Map(f.map(({nodeId:p})=>[p,!0]));l(p=>{if(p.length>50&&f.length>10){const m=new Map;p.forEach((C,T)=>{h.has(C.id)&&m.set(C.id,T)});const _=[...p];let M=!1;return f.forEach(({nodeId:C,updater:T})=>{const I=m.get(C);if(I!==void 0){const D=T(_[I]);D!==_[I]&&(_[I]=D,M=!0)}}),M?_:p}else{const m=[...p];let _=!1;return f.forEach(({nodeId:M,updater:C})=>{const T=m.findIndex(I=>I.id===M);if(T!==-1){const I=C(m[T]);I!==m[T]&&(m[T]=I,_=!0)}}),_?m:p}}),Li.current=null,us.current=null;return}if(!zc.current){us.current=null;return}const{nodeId:r,updater:c}=zc.current;l(f=>{const h=f.findIndex(_=>_.id===r);if(h===-1)return f;const p=c(f[h]);if(p===f[h])return f;const m=[...f];return m[h]=p,m}),zc.current=null,us.current=null},[]),kd=F.useCallback((r,c)=>{zc.current={nodeId:r,updater:c},us.current||(us.current=requestAnimationFrame(Ga))},[Ga]),L0=F.useCallback(r=>{if(Li.current&&us.current){const c=Li.current,f=new Map;c.forEach(({nodeId:h,updater:p})=>{f.set(h,p)}),r.forEach(({nodeId:h,updater:p})=>{f.set(h,p)}),Li.current=Array.from(f.entries()).map(([h,p])=>({nodeId:h,updater:p}))}else Li.current=r;us.current||(us.current=requestAnimationFrame(Ga))},[Ga]);F.useEffect(()=>()=>{us.current&&cancelAnimationFrame(us.current),pi.current&&cancelAnimationFrame(pi.current)},[]);const Xa=F.useRef(null),jc=F.useRef(null),O0=F.useCallback(r=>{var p;const{clientX:c,clientY:f}=r,h=xn(c,f);if(_s(h),Mi||ai.current){Mi||cd(!0);const m=(p=ui.current)==null?void 0:p.getBoundingClientRect(),_=c-((m==null?void 0:m.left)||0),M=f-((m==null?void 0:m.top)||0);ud(C=>C?{...C,endX:_,endY:M}:null),jc.current={endX:_,endY:M,rect:m},Xa.current||(Xa.current=requestAnimationFrame(()=>{if(!jc.current){Xa.current=null;return}const{endX:C,endY:T,rect:I}=jc.current,D=Ns;if(!D){Xa.current=null;return}const R=Math.min(D.startX,C),B=Math.min(D.startY,T),E=Math.max(D.startX,C),K=Math.max(D.startY,T),J=xn(R+((I==null?void 0:I.left)||0),B+((I==null?void 0:I.top)||0)),te=xn(E+((I==null?void 0:I.left)||0),K+((I==null?void 0:I.top)||0)),ne=ls.current,re=new Set;ne.forEach(be=>{const Ce=be.x+(be.width||260),We=be.y+(be.height||200);be.x<te.x&&Ce>J.x&&be.y<te.y&&We>J.y&&re.add(be.id)}),Lr(re),jc.current=null,Xa.current=null}));return}if((oi||Go.current)&&!ai.current){$a(!0);const m=c-Ba.current.x,_=f-Ba.current.y;if(Math.abs(m)<1&&Math.abs(_)<1)return;Bs.current?(Bs.current.dx+=m,Bs.current.dy+=_):Bs.current={dx:m,dy:_},pi.current||(pi.current=requestAnimationFrame(()=>{if(!Bs.current){pi.current=null;return}const{dx:M,dy:C}=Bs.current;ge(T=>{const I=Math.max(.2,Math.min(3,T.zoom)),D=I<.5||I>2.5?1e3:100;return{...T,zoom:I,x:Math.round((T.x+M)*D)/D,y:Math.round((T.y+C)*D)/D}}),Bs.current=null,pi.current=null})),Ba.current={x:c,y:f};return}if(Do)kd(Do,m=>({...m,width:Math.max(250,h.x-m.x),height:Math.max(250,h.y-m.y)}));else if(Dr){const m=Math.max(.2,Math.min(3,pe.zoom)),_=r.movementX/m,M=r.movementY/m,C=m<.5||m>2.5?.5:1;if(Math.abs(_)<C&&Math.abs(M)<C)return;const T=Fs.current;if(T&&T.size>1&&T.has(Dr)){const I=ls.current,D=Math.max(.2,Math.min(3,pe.zoom));(!Di.current||Wa.current!==null&&Math.abs(Wa.current-D)>.01)&&(Di.current={mouseX:c,mouseY:f,nodes:new Map(Array.from(T).map(K=>{const J=I.find(te=>te.id===K);return J?[K,{x:J.x,y:J.y}]:null}).filter(Boolean))}),Wa.current=D;const R=(c-Di.current.mouseX)/D,B=(f-Di.current.mouseY)/D,E=Array.from(Di.current.nodes.entries()).map(([K,J])=>({nodeId:K,updater:te=>({...te,x:J.x+R,y:J.y+B})}));L0(E)}else Di.current=null,kd(Dr,I=>({...I,x:I.x+_,y:I.y+M}))}},[oi,Mi,Ns,Dr,Do,xn,pe.zoom,kd,L0]),U0=()=>{if(pi.current&&(cancelAnimationFrame(pi.current),pi.current=null),Bs.current){const{dx:r,dy:c}=Bs.current;ge(f=>{const h=Math.max(.2,Math.min(3,f.zoom)),p=h<.5||h>2.5?1e3:100;return{...f,zoom:h,x:Math.round((f.x+r)*p)/p,y:Math.round((f.y+c)*p)/p}}),Bs.current=null}if(Li.current&&us.current&&(cancelAnimationFrame(us.current),Ga()),Mi||ai.current){if(cd(!1),ai.current=!1,ud(null),Wn.size===1){const r=Array.from(Wn)[0];Z(r)}else Wn.size===0&&Z(null);$a(!1),Ii(!1),Go.current=!1,Di.current=null,Wa.current=null;return}(oi||Go.current)&&(Ii(!1),Go.current=!1,$a(!1),!Mn&&!un&&!Dr&&!Do&&(Z(null),Lr(new Set),Uo(r=>({...r,visible:!1})),Sn(null),Ss(r=>({...r,visible:!1})))),!Mn&&!un&&(Aa(null),lc(null),Di.current=null,Wa.current=null),$a(!1),ai.current=!1,Ba.current={x:0,y:0}};F.useEffect(()=>{if(!(oi||Go.current||ad||Dr||Do||Mi||ai.current||Mn||un))return;const c=h=>{h.movementX===void 0&&(h.movementX=0),h.movementY===void 0&&(h.movementY=0),O0(h)},f=()=>{U0()};return window.addEventListener("pointermove",c,{passive:!1}),window.addEventListener("pointerup",f,{passive:!1}),()=>{window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",f)}},[oi,ad,Dr,Do,Mi,Mn,un,O0,U0]);const Cs=F.useCallback((r,c,f="default")=>{if(c.stopPropagation(),Mn&&Mn!==r)u.some(p=>p.from===Mn&&p.to===r&&(p.inputType||"default")===f)||(f!=="default"&&d(p=>p.filter(m=>!(m.to===r&&(m.inputType||"default")===f))),d(p=>[...p,{id:`conn-${Date.now()}`,from:Mn,to:r,inputType:f!=="default"?f:void 0}]));else if(un&&un!==r){const h=is||f;u.some(m=>m.from===r&&m.to===un&&(m.inputType||"default")===h)||(h!=="default"&&d(m=>m.filter(_=>!(_.to===un&&(_.inputType||"default")===h))),d(m=>[...m,{id:`conn-${Date.now()}`,from:r,to:un,inputType:h!=="default"?h:void 0}]))}Lo(null),ss(null),os(null),Ti(null),Ii(!1),Aa(null),lc(null)},[Mn,un,is,u]),i1=r=>{if(Mn){const c=xn(r.clientX,r.clientY);Uo({visible:!0,x:r.clientX,y:r.clientY,worldX:c.x,worldY:c.y,sourceNodeId:Mn}),Lo(null)}else if(un){const c=xn(r.clientX,r.clientY);Uo({visible:!0,x:r.clientX,y:r.clientY,worldX:c.x,worldY:c.y,targetNodeId:un,inputType:is}),ss(null),os(null)}},o1=r=>{if(r.currentTarget.id==="canvas-bg"){const c=xn(r.clientX,r.clientY);Uo({visible:!0,x:r.clientX,y:r.clientY,worldX:c.x,worldY:c.y,sourceNodeId:void 0})}},F0=F.useMemo(()=>{const r=new Map;return u.forEach(c=>{var m,_;const f=c.inputType||"default";r.has(c.to)||r.set(c.to,new Map);const h=r.get(c.to);h.has(f)||h.set(f,[]);const p=Xt.get(c.from);if(p){let M=[];if(p.type==="video-input"){const C=p.selectedKeyframes&&p.selectedKeyframes.length>0?p.selectedKeyframes.map(T=>T.url):[];C.length>0?M=C:p.frames&&p.frames.length>0&&(M=[p.frames[0].url])}else if(p.type==="input-image"||p.type==="gen-image"||p.type==="preview")p.content&&M.push(p.content),p.previewMjImages&&M.push(...p.previewMjImages);else if(p.type==="storyboard-node"){const C=((m=p.settings)==null?void 0:m.shots)||[],T=((_=p.settings)==null?void 0:_.mode)||"video";console.log(`[connectedImagesCache] storyboard-node ${p.id}: ${C.length} shots, mode=${T}`),C.forEach(I=>{if(!I.outputEnabled){console.log(`[connectedImagesCache] Shot ${I.id} skipped: outputEnabled=false`);return}if(T==="image"){const D=I.selectedImageIndex??-1;D>=0&&I.output_images&&I.output_images.length>0&&I.output_images[D]?(M.push(I.output_images[D]),console.log(`[connectedImagesCache] Shot ${I.id} provides output_images[${D}]`)):console.log(`[connectedImagesCache] Shot ${I.id} skipped: selectedImageIndex=${D} (no selection or no image)`)}else I.output_url?M.push(I.output_url):I.image_url&&M.push(I.image_url)}),console.log(`[connectedImagesCache] Storyboard provides ${M.length} enabled images`)}M.length>0&&h.get(f).push(...M)}}),r},[u,Xt,a,Yr]),zd=F.useCallback((r,c="default")=>{const f=F0.get(r);return f?f.get(c)||[]:[]},[F0]),B0=F.useMemo(()=>{const r=new Map;return u.forEach(c=>{var f,h,p;if(!r.has(c.to)){const m=Xt.get(c.from);if(m){if(m.type==="video-input")r.set(c.to,m);else if(m.type==="input-image"){const _={...m,type:"input-image-as-video",videoFileName:"",videoMeta:{duration:0},frames:m.content?[{time:0,url:m.content}]:[],selectedKeyframes:m.content?[{time:0,url:m.content}]:[],isImageInput:!0};r.set(c.to,_)}else if(m.type==="storyboard-node"){const _=((f=m.settings)==null?void 0:f.shots)||[],M=((h=m.settings)==null?void 0:h.mode)||"video",C=((p=m.settings)==null?void 0:p.projectTitle)||"",T=[];_.forEach((D,R)=>{if(!D.outputEnabled)return;let B=null,E=D.image_filename||`${R+1}`;if(M==="image"){const K=D.selectedImageIndex??-1;K>=0&&D.output_images&&D.output_images[K]&&(B=D.output_images[K])}else B=D.output_url||D.image_url;B&&T.push({time:R,url:B,filename:E})});const I={...m,type:"storyboard-as-video",videoFileName:C,videoMeta:{duration:_.length},frames:T,selectedKeyframes:T,isStoryboardInput:!0};r.set(c.to,I),console.log(`[connectedVideoInputCache] storyboard-node ${m.id} provides ${T.length} keyframes to downstream`)}}}}),r},[u,Xt]),Ja=F.useCallback(r=>B0.get(r)||null,[B0]),a1=F.useCallback(r=>{for(const c of u)if(c.to===r){const f=Xt.get(c.from);if(f&&f.type==="video-analyze")return f}return null},[u,Xt]),Za=F.useCallback(r=>{const c=[];return u.forEach(f=>{var h;if(f.to===r){const p=Xt.get(f.from);if(p&&p.type==="text-node"){const m=((h=p.settings)==null?void 0:h.text)||"";m&&c.push(m)}}}),c},[u,Xt]),H0=F.useMemo(()=>{const r=new Map;return u.forEach(c=>{const f=c.inputType||"default",h=`${c.to}:${f}`;if(!r.has(h)){const p=Xt.get(c.from);if(p){let m=null;if(p.type==="video-input"){const _=p.selectedKeyframes&&p.selectedKeyframes.length>0?p.selectedKeyframes[0].url:null;_?m=_:p.frames&&p.frames[0]&&(m=p.frames[0].url)}else p.type==="input-image"&&p.content&&(m=p.content);m&&r.set(h,m)}}}),r},[u,Xt,a]),_c=F.useCallback((r,c)=>{const f=`${r}:${c||"default"}`;return H0.get(f)||null},[H0]),Ws=(r,c,f="image",h=null,p=null,m=null)=>{if(!c&&(!p||p.length===0))return;let _=h;if(!_){const C=Ya.get(r);_=C==null?void 0:C.sourceNodeId}if(!_){console.warn("[Tapnow] updatePreviewFromTask:  sourceNodeId for taskId:",r);return}setTimeout(()=>{var T;const C=Xt.get(_);if(C&&(C.type==="gen-image"||C.type==="gen-video")){const I=u.filter(D=>D.to===_);for(const D of I){const R=Xt.get(D.from),B=R&&R.type==="storyboard-node"?R:null;if(B&&((T=B.settings)!=null&&T.shots)){const E=B.settings.shots.find(K=>K.status==="generating");if(E){const K=c||(p&&p.length>0?p[0]:null);if(K){Vt(B.id,E.id,{image_url:K,image_filename:m||E.image_filename,status:"done"});break}}}}}},0);const M=Ha.current;console.log("[Tapnow] updatePreviewFromTask: ",{taskId:r,url:c,contentType:f,sourceNodeId:_,mjImages:p,filename:m}),l(C=>{const T=M.filter(I=>I.from===_).map(I=>I.to);return T.length?C.map(I=>T.includes(I.id)&&I.type==="preview"?{...I,content:c||(p&&p.length>0?p[0]:c),previewType:f,previewMjImages:p,previewFilename:m||I.previewFilename||""}:I):C})},W0=r=>{St(c=>{const f=c.filter(h=>h.id!==r);try{localStorage.setItem("tapnow_history",JSON.stringify(f))}catch(h){console.error(":",h)}return f}),vr.item&&vr.item.id===r&&Ss({visible:!1,x:0,y:0,item:null})},V0=(r,c)=>Ye(f=>f.map(h=>h.id===r?{...h,...c}:h)),l1=r=>Ye(c=>c.filter(f=>f.id!==r)),c1=async r=>{yd(r),Fa(h=>({...h,[r]:"idle"}));const{key:c,url:f}=Hs(r);if(!c){Fa(h=>({...h,[r]:"error"})),yd(null);return}try{(await fetch(`${f}/v1/models`,{method:"GET",headers:{Authorization:`Bearer ${c}`}})).ok?Fa(p=>({...p,[r]:"success"})):Fa(p=>({...p,[r]:"error"}))}catch{Fa(h=>({...h,[r]:"error"}))}yd(null)},Oi=r=>{if(!r)return"bg-zinc-600";const c=vd[r];if(c==="success")return"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.8)]";if(c==="error")return"bg-red-500";const{key:f}=Hs(r);return f?"bg-zinc-400":"bg-zinc-700"},Jo=F.useMemo(()=>Xn.find(r=>r.id===zs)||Xn[0],[Xn,zs]),u1=()=>{var r;(r=$0.current)==null||r.scrollIntoView({behavior:"smooth"})};F.useEffect(()=>{u1()},[Jo==null?void 0:Jo.messages,co]);const d1=()=>{const r=`chat-${Date.now()}`,c={id:r,title:"",messages:[]};ti(f=>[c,...f]),ni(r)},p1=(r,c)=>{r.stopPropagation();const f=Xn.filter(h=>h.id!==c);f.length===0?(ti([{id:"default",title:"",messages:[]}]),ni("default")):(ti(f),zs===c&&ni(f[0].id))},f1=r=>{Array.from(r.target.files).forEach(f=>{const h=new FileReader;h.onload=p=>{var E;const m=p.target.result,_=((E=f.name.split(".").pop())==null?void 0:E.toLowerCase())||"",M=f.type.startsWith("image/"),C=f.type.startsWith("video/"),T=f.type.startsWith("audio/"),I=f.type==="application/pdf"||_==="pdf",D=["doc","docx"].includes(_)||f.type.includes("word"),R=["xls","xlsx"].includes(_)||f.type.includes("excel")||f.type.includes("spreadsheet"),B=["js","jsx","ts","tsx","py","java","cpp","c","html","css","json","xml","yaml","yml","md","txt","sh","bash"].includes(_);ns(K=>[...K,{name:f.name,type:f.type,content:m,isImage:M,isVideo:C,isAudio:T,isPDF:I,isDoc:D,isExcel:R,isCode:B,fileExt:_}])},f.type.startsWith("image/")||f.type.startsWith("video/")||f.type.startsWith("audio/")||f.type==="application/pdf"?h.readAsDataURL(f):f.name.match(/\.(txt|md|js|jsx|ts|tsx|py|html|css|json|csv|xml|yaml|yml|sh|bash|java|cpp|c)$/i)?h.readAsText(f):h.readAsDataURL(f)}),r.target.value=""},h1=r=>{ns(c=>c.filter((f,h)=>h!==r))},K0=async()=>{var B,E,K,J,te,ne,re,be,Ce,We,et;if(!ri.trim()&&ii.length===0||Ro)return;const r=pn.get(Cr),{key:c,url:f,modelName:h}=Hs(Cr);if(!c){alert(" API  Key"),li(!0);return}const p=zs||((B=Xn[0])==null?void 0:B.id),m=Xn.find(G=>G.id===p)||Xn[0],_=(m==null?void 0:m.messages)||[];m&&m.id!==zs&&ni(m.id),zt(!0);const M={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"user",content:ri,files:[...ii],timestamp:Date.now(),modelId:Cr};ti(G=>G.map(fe=>fe.id===p?{...fe,messages:[...fe.messages,M],title:fe.messages.length===0?ri.slice(0,20):fe.title}:fe)),Ta(""),ns([]);const C=[..._,M],T=20,I=C.length>T?C.slice(-T):C;let D=[{role:"system",content:"AI"},...I.map(G=>({role:G.role,content:G.content}))];const R=[];M.content&&R.push({type:"text",text:M.content}),M.files.forEach(G=>{const fe=((r==null?void 0:r.modelName)??"").toLowerCase().includes("gemini");G.isImage?R.push({type:"image_url",image_url:{url:G.content}}):G.isVideo?fe?R.push({type:"image_url",image_url:{url:G.content}}):R.push({type:"text",text:`
[User attached video: ${G.name}]
`}):G.isAudio?R.push({type:"text",text:`
[User attached audio: ${G.name}]
`}):G.isPDF||G.isDoc||G.isExcel?R.push({type:"text",text:`
[User attached document: ${G.name} (${G.isPDF?"PDF":G.isDoc?"Word":"Excel"})]
`}):G.isCode||G.content&&typeof G.content=="string"&&G.content.length<5e4?R.push({type:"text",text:`
[File: ${G.name}]
\`\`\`${G.fileExt||"text"}
${G.content}
\`\`\`
`}):R.push({type:"text",text:`
[User attached file: ${G.name}]
`})}),D.push({role:"user",content:R});try{const G=await fetch(`${f}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({model:h||Cr,messages:D,stream:!1})});if(!G.ok){const st=await G.text();throw new Error(st||`API Error: ${G.status}`)}const fe=await G.json();let Ue=null;fe.choices&&fe.choices.length>0?Ue=(K=(E=fe.choices[0])==null?void 0:E.message)==null?void 0:K.content:fe.content?Ue=fe.content:fe.text?Ue=fe.text:fe.message?Ue=typeof fe.message=="string"?fe.message:fe.message.content:fe.result?Ue=typeof fe.result=="string"?fe.result:fe.result.content:(re=(ne=(te=(J=fe.data)==null?void 0:J.choices)==null?void 0:te[0])==null?void 0:ne.message)!=null&&re.content?Ue=fe.data.choices[0].message.content:(be=fe.data)!=null&&be.content?Ue=fe.data.content:(Ce=fe.data)!=null&&Ce.text?Ue=fe.data.text:(We=fe.data)!=null&&We.message?Ue=typeof fe.data.message=="string"?fe.data.message:fe.data.message.content:(et=fe.data)!=null&&et.result&&(Ue=typeof fe.data.result=="string"?fe.data.result:fe.data.result.content),(!Ue||Ue.trim()==="")&&(console.error("[] API :",fe),Ue="No response");const vt={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:Ue,timestamp:Date.now(),modelId:Cr};ti(st=>st.map(gt=>gt.id===zs?{...gt,messages:[...gt.messages,vt]}:gt))}catch(G){console.error("Chat Error",G);const fe={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:`Error: ${G.message}`,isError:!0,timestamp:Date.now()};ti(Ue=>Ue.map(vt=>vt.id===zs?{...vt,messages:[...vt.messages,fe]}:vt))}finally{zt(!1)}},fi=async r=>await(await fetch(r)).blob(),ur=async r=>{if(r.startsWith("data:"))return r.split(",")[1];const c=await fi(r);return new Promise((f,h)=>{const p=new FileReader;p.onloadend=()=>{const m=p.result;f(m.split(",")[1])},p.onerror=h,p.readAsDataURL(c)})},Y0=r=>new Promise((c,f)=>{const h=new FileReader;h.onloadend=()=>c(h.result),h.onerror=f,h.readAsDataURL(r)}),G0=async(r,c=2048,f=8)=>new Promise((h,p)=>{const m=new Image;m.crossOrigin="anonymous",m.onload=()=>{var J,te;const _=m.width,M=m.height;let C=_,T=M;if(_>c||M>c){const ne=c/Math.max(_,M);C=Math.floor(_*ne),T=Math.floor(M*ne),console.log(`Midjourney:  ${_}x${M} -> ${C}x${T}`)}const I=document.createElement("canvas");I.width=C,I.height=T;const D=I.getContext("2d");D.imageSmoothingEnabled=!0,D.imageSmoothingQuality="high",D.drawImage(m,0,0,C,T);let R=.92,B=I.toDataURL("image/jpeg",R);const K=(((J=B.split(",")[1])==null?void 0:J.length)||0)*3/4/(1024*1024);if(K>f){console.log(`Midjourney:  ${K.toFixed(2)}MB ...`),R=.75,B=I.toDataURL("image/jpeg",R);const re=(((te=B.split(",")[1])==null?void 0:te.length)||0)*3/4/(1024*1024);console.log(`Midjourney:  ${re.toFixed(2)}MB`)}h(B)},m.onerror=_=>{console.error("Midjourney: ",_),h(r)},m.src=r}),m1=async(r,c,f)=>{var h,p;try{console.log(`Midjourney:  ${r.length} /...`);const _=(await Promise.all(r.map(async(R,B)=>{if(R.startsWith("data:"))try{const E=await G0(R,2048,8);return console.log(`Midjourney: [${B}]`),E}catch(E){return console.error(`Midjourney: [${B}]`,E),R}else try{const E=await fi(R),K=await Y0(E),J=await G0(K,2048,8);return console.log(`Midjourney: [${B}]URL`),J}catch(E){throw console.error(`Midjourney: [${B}]URL`,E),E}}))).map((R,B)=>{let E=R;if(typeof E!="string")throw new Error(`base64[${B}]`);E.includes(",")?E=E.split(",")[1]:E.startsWith("data:")&&(E=E.replace(/^data:[^;]*;base64,?/i,""));const K=E.length;E=E.replace(/[^A-Za-z0-9+/=]/g,"");const J=E.length;if(K!==J&&console.log(`Midjourney: base64[${B}] ${K-J} `),!E||E.length<100)throw new Error(`base64[${B}]: ${(E==null?void 0:E.length)||0}`);const te=/^[A-Za-z0-9+/]+={0,2}$/;if(!te.test(E))throw console.error(`Midjourney: base64[${B}]: ${E.length}, 50: ${E.substring(0,50)}`),new Error(`invalid_base64_format: base64[${B}]`);const ne=E.length%4;if(ne!==0&&(E=E.replace(/=+$/,""),E+="=".repeat(4-ne),!te.test(E)))throw console.error(`Midjourney: base64[${B}]: ${E.length}`),new Error(`invalid_base64_format: base64[${B}]`);try{const be=atob(E);if(!be||be.length===0)throw new Error("base64");console.log(`Midjourney: base64[${B}]: ${be.length}`)}catch(be){throw console.error(`Midjourney: base64[${B}]:`,be),new Error(`invalid_base64_format: base64[${B}]`)}const re=`data:image/jpeg;base64,${E}`;return console.log(`Midjourney: base64[${B}]: ${E.length}, 20: ${E.substring(0,20)}`),re}),M=`${c}/mj/submit/upload-discord-images`;console.log("Midjourney: base64:",_.length,"data URL:",(h=_[0])==null?void 0:h.length,"50:",(p=_[0])==null?void 0:p.substring(0,50)),_.forEach((R,B)=>{if(!R||typeof R!="string")throw new Error(`base64[${B}]`);if(!R.startsWith("data:image/"))throw new Error(`base64[${B}]data URL`);let E="";if(R.includes(","))E=R.split(",")[1];else throw new Error(`base64[${B}]data URL`);if(!E||E.length<100)throw new Error(`base64[${B}]`);if(!/^[A-Za-z0-9+/]+={0,2}$/.test(E))throw console.error(`Midjourney: base64[${B}]`),new Error(`base64[${B}]`);if(E.length%4!==0)throw new Error(`base64[${B}]4: ${E.length}`);try{atob(E)}catch(J){throw new Error(`base64[${B}]: ${J.message}`)}});const T=JSON.stringify({base64Array:_});console.log("Midjourney: JSON:",T.length,"base64:",_.length);const I=await fetch(M,{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:T});if(!I.ok){let R="";try{R=await I.text();try{const B=JSON.parse(R);throw new Error(`: ${I.status} - ${B.description||B.message||R}`)}catch{throw new Error(`: ${I.status} - ${R}`)}}catch(B){throw new Error(`: ${I.status} - ${B.message||R}`)}}const D=await I.json();if(console.log("Midjourney: :",D),D.code===1&&D.result&&Array.isArray(D.result))return console.log("Midjourney: URLs:",D.result),D.result;{const R=D.description||D.message||"";throw console.error("Midjourney: :",D),new Error(R)}}catch(m){throw console.error("Midjourney: :",m),m}},jd=async(r,c=1920,f=1920)=>new Promise((h,p)=>{const m=new Image;m.crossOrigin="anonymous",m.onload=()=>{const _=m.width,M=m.height;if(_<=c&&M<=f){console.log(`Veo:  ${_}x${M} `),r.startsWith("data:")?h(r):ur(r).then(B=>{h(`data:image/png;base64,${B}`)}).catch(p);return}let C=_,T=M;if(_>c||M>f){const B=Math.min(c/_,f/M);C=Math.round(_*B),T=Math.round(M*B),C=C%2===0?C:C-1,T=T%2===0?T:T-1}console.log(`Veo:  ${_}x${M} -> ${C}x${T}`);const I=document.createElement("canvas");I.width=C,I.height=T;const D=I.getContext("2d");D.imageSmoothingEnabled=!0,D.imageSmoothingQuality="high",D.drawImage(m,0,0,C,T);const R=I.toDataURL("image/png",.95);h(R)},m.onerror=_=>{console.error("Veo: ",_),p(new Error(""))},r.startsWith("data:")||r.startsWith("blob:")?m.src=r:fi(r).then(_=>{const M=URL.createObjectURL(_);m.src=M}).catch(p)}),_d=F.useCallback(r=>{d(c=>c.filter(h=>h.id!==r))},[]),g1=(r,c)=>{c.preventDefault(),c.stopPropagation(),c.currentTarget.classList.remove("drag-over");const h=Array.from(c.dataTransfer.files).filter(p=>p.type.startsWith("image/"));if(h.length>0){const p=h[0],m=new FileReader;m.onload=async _=>{const M=_.target.result;let C={w:0,h:0};try{C=await Ur(M)}catch{}N(),l(T=>T.map(I=>I.id===r?{...I,content:M,dimensions:C}:I))},m.readAsDataURL(p)}},X0=r=>{r.preventDefault(),r.stopPropagation(),r.currentTarget.classList.add("drag-over")},J0=r=>{r.preventDefault(),r.stopPropagation(),r.currentTarget.classList.remove("drag-over")};F.useEffect(()=>{const r=async h=>{const p=h.target;if(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable){const T=window.getSelection();if(T&&T.toString().trim())return;h.preventDefault();return}const _=Ri.current,M=Fs.current,C=_?[_]:M&&M.size>0?Array.from(M):[];if(C.length>0){h.preventDefault(),h.stopPropagation();const T=ls.current.filter(R=>C.includes(R.id)),D=Ha.current.filter(R=>C.includes(R.from)||C.includes(R.to)).filter(R=>C.includes(R.from)&&C.includes(R.to));di.current={nodes:T.map(R=>({...R})),connections:D.map(R=>({...R})),timestamp:Date.now()},console.log(` ${T.length} `)}},c=async h=>{const p=h.target;if(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable)return;const _=Ri.current;let M=null;if(_&&(M=ls.current.find(C=>C.id===_)),M&&(M.type==="input-image"||M.type==="video-input")){const C=Array.from(h.clipboardData.items),T=C.find(D=>D.type.startsWith("image/")),I=C.find(D=>D.type.startsWith("video/"));if(T&&M.type==="input-image"){h.preventDefault();const D=T.getAsFile();if(D){const R=new FileReader;R.onload=async B=>{const E=B.target.result;let K={w:0,h:0};try{K=await Ur(E)}catch{}N(),l(J=>J.map(te=>te.id===M.id?{...te,content:E,dimensions:K}:te))},R.readAsDataURL(D)}return}else if(I&&M.type==="video-input"){h.preventDefault();const D=I.getAsFile();D&&Va(M.id,D);return}}if(di.current&&di.current.nodes&&di.current.nodes.length>0){h.preventDefault(),h.stopPropagation();const C=di.current,T=ui.current;let I=0,D=0;if(T){const fe=T.getBoundingClientRect(),Ue=(fe.left+fe.width/2-pe.x)/pe.zoom,vt=(fe.top+fe.height/2-pe.y)/pe.zoom;I=Ue,D=vt}const R=C.nodes;if(R.length===0)return;const B=Math.min(...R.map(fe=>fe.x||0)),E=Math.min(...R.map(fe=>fe.y||0)),K=Math.max(...R.map(fe=>(fe.x||0)+(fe.width||0))),J=Math.max(...R.map(fe=>(fe.y||0)+(fe.height||0))),te=(B+K)/2,ne=(E+J)/2,re=I-te,be=D-ne,Ce=new Map,We=Date.now();C.nodes.forEach((fe,Ue)=>{const vt=`node-${We}-${Ue}-${Math.random().toString(36).substr(2,9)}`;Ce.set(fe.id,vt)});const et=C.nodes.map(fe=>({...fe,id:Ce.get(fe.id),x:fe.x+re,y:fe.y+be})),G=(C.connections||[]).filter(fe=>fe&&Ce.has(fe.from)&&Ce.has(fe.to)).map((fe,Ue)=>({...fe,id:`conn-${We}-${Ue}-${Math.random().toString(36).substr(2,9)}`,from:Ce.get(fe.from),to:Ce.get(fe.to)}));N(),l(fe=>[...fe,...et]),d(fe=>[...fe,...G]),et.length===1?(Z(et[0].id),Lr(new Set([et[0].id]))):et.length>1&&(Z(null),Lr(new Set(et.map(fe=>fe.id)))),console.log(` ${et.length} `)}},f=h=>{const p=h.target;if(!(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable)&&(h.ctrlKey||h.metaKey)&&h.key==="v"){const _=Ri.current;if(_){const M=ls.current.find(C=>C.id===_);if(M&&(M.type==="input-image"||M.type==="video-input"))return}if(di.current&&di.current.nodes&&di.current.nodes.length>0){h.preventDefault(),h.stopPropagation();const M=di.current,C=ui.current;let T=0,I=0;if(C){const G=C.getBoundingClientRect(),fe=(G.left+G.width/2-pe.x)/pe.zoom,Ue=(G.top+G.height/2-pe.y)/pe.zoom;T=fe,I=Ue}const D=M.nodes;if(D.length===0)return;const R=Math.min(...D.map(G=>G.x||0)),B=Math.min(...D.map(G=>G.y||0)),E=Math.max(...D.map(G=>(G.x||0)+(G.width||0))),K=Math.max(...D.map(G=>(G.y||0)+(G.height||0))),J=(R+E)/2,te=(B+K)/2,ne=T-J,re=I-te,be=new Map,Ce=Date.now();M.nodes.forEach((G,fe)=>{const Ue=`node-${Ce}-${fe}-${Math.random().toString(36).substr(2,9)}`;be.set(G.id,Ue)});const We=M.nodes.map(G=>({...G,id:be.get(G.id),x:G.x+ne,y:G.y+re})),et=(M.connections||[]).filter(G=>G&&be.has(G.from)&&be.has(G.to)).map((G,fe)=>({...G,id:`conn-${Ce}-${fe}-${Math.random().toString(36).substr(2,9)}`,from:be.get(G.from),to:be.get(G.to)}));N(),l(G=>[...G,...We]),d(G=>[...G,...et]),We.length===1?(Z(We[0].id),Lr(new Set([We[0].id]))):We.length>1&&(Z(null),Lr(new Set(We.map(G=>G.id)))),console.log(` ${We.length} `)}}};return window.addEventListener("copy",r),window.addEventListener("paste",c),window.addEventListener("keydown",f),()=>{window.removeEventListener("copy",r),window.removeEventListener("paste",c),window.removeEventListener("keydown",f)}},[pt,Va,l,d,Z,Lr,pe]);const Ui=async(r,c,f,h,p,m,_=0)=>{if(_>90){St(I=>I.map(D=>D.id===c?{...D,status:"failed",errorMsg:"Veo "}:D));const T=Rn.current.get(c);T&&(console.log("[] Veo:",{taskId:c,nodeId:T.nodeId,shotId:T.shotId}),Vt(T.nodeId,T.shotId,{status:"draft"}),Rn.current.delete(c));return}fetch(`${f}/v2/videos/generations/${r}`,{method:"GET",headers:{Authorization:`Bearer ${h}`}}).then(async T=>{var J,te,ne,re,be,Ce,We,et;const I=await T.text();let D;try{D=JSON.parse(I)}catch{setTimeout(()=>Ui(r,c,f,h,p,m,_+1),4e3);return}console.log("[Tapnow] Veo Poll:",D);const R=((J=D==null?void 0:D.data)==null?void 0:J.status)||(D==null?void 0:D.status)||((te=D==null?void 0:D.data)==null?void 0:te.task_status),B=((ne=D==null?void 0:D.data)==null?void 0:ne.progress)||(D==null?void 0:D.progress)||"0%",E=((re=D==null?void 0:D.data)==null?void 0:re.fail_reason)||(D==null?void 0:D.fail_reason)||"";if(R==="SUCCESS"||R==="succeeded"||R==="FINISHED"||R==="completed"){const G=((be=D==null?void 0:D.data)==null?void 0:be.output)||(D==null?void 0:D.output)||((Ce=D==null?void 0:D.data)==null?void 0:Ce.video_url)||(D==null?void 0:D.video_url)||((et=(We=D==null?void 0:D.data)==null?void 0:We.data)==null?void 0:et.output);if(!G){console.warn("[Tapnow] Veo: URL",D),St(Ue=>Ue.map(vt=>vt.id===c?{...vt,status:"failed",errorMsg:"URL"}:vt));return}console.log("[Tapnow] Veo: URL:",G);const fe=Date.now();St(Ue=>{const vt=Ue.find(ht=>ht.id===c),st=vt==null?void 0:vt.sourceNodeId,gt=vt==null?void 0:vt.ratio,Xe=fe-((vt==null?void 0:vt.startTime)||fe);console.log("[Tapnow] Veo: ",{taskId:c,originalRatio:gt,sourceNodeId:st,historyItem:vt});let ct=p,Nt=m;return(async()=>{try{const ht=await ig(G);if(ht&&ht.w>0&&ht.h>0){console.log("[Tapnow] Veo: ",{w:ht.w,h:ht.h,requestedRatio:gt});const Lt=ht.w,Kt=ht.h;if(gt==="16:9"){const Bt=Lt/Kt,Ot=16/9;Math.abs(Bt-Ot)>.1?(console.warn(`[Tapnow] Veo:  ${Bt.toFixed(2)}  16:9 (${Ot.toFixed(2)})`),console.warn(`[Tapnow] Veo: : ${Lt}x${Kt}, : 16:9`),console.warn(`[Tapnow] Veo:  16:9 : ${p}x${Math.round(p/(16/9))}`),ct=p,Nt=Math.round(p/(16/9))):(console.log("[Tapnow] Veo:  16:9"),ct=Lt,Nt=Kt)}else if(gt==="9:16"){const Bt=Lt/Kt,Ot=9/16;Math.abs(Bt-Ot)>.1?(console.warn(`[Tapnow] Veo:  ${Bt.toFixed(2)}  9:16 (${Ot.toFixed(2)})`),console.warn(`[Tapnow] Veo: : ${Lt}x${Kt}, : 9:16`),console.warn(`[Tapnow] Veo:  9:16 : ${Math.round(m*(9/16))}x${m}`),ct=Math.round(m*(9/16)),Nt=m):(console.log("[Tapnow] Veo:  9:16"),ct=Lt,Nt=Kt)}else ct=Lt,Nt=Kt;St(Bt=>Bt.map(Ot=>Ot.id===c?{...Ot,status:"completed",progress:100,url:G,width:ct,height:Nt,durationMs:Xe,ratio:gt||Ot.ratio}:Ot));const Et=Rn.current.get(c);Et?(console.log("[] Veo:",{taskId:c,nodeId:Et.nodeId,shotId:Et.shotId,videoUrl:G}),Vt(Et.nodeId,Et.shotId,{video_url:G,status:"done"}),Rn.current.delete(c)):st&&setTimeout(()=>{console.log("[Tapnow] Veo: ",{taskId:c,videoUrl:G,sourceNodeId:st}),Ws(c,G,"video",st)},0)}}catch(ht){console.warn("[Tapnow] Veo: ",ht);let Lt=p,Kt=m;if(gt==="16:9"){const Bt=Lt/Kt;Math.abs(Bt-16/9)>.1&&(Kt=Math.round(Lt/(16/9)))}else if(gt==="9:16"){const Bt=Lt/Kt;Math.abs(Bt-9/16)>.1&&(Lt=Math.round(Kt*(9/16)))}St(Bt=>Bt.map(Ot=>Ot.id===c?{...Ot,status:"completed",progress:100,url:G,width:Lt,height:Kt,durationMs:Xe,ratio:gt||Ot.ratio}:Ot));const Et=Rn.current.get(c);Et?(console.log("[] Veofallback:",{taskId:c,nodeId:Et.nodeId,shotId:Et.shotId,videoUrl:G}),Vt(Et.nodeId,Et.shotId,{video_url:G,status:"done"}),Rn.current.delete(c)):st&&setTimeout(()=>{console.log("[Tapnow] Veo: ",{taskId:c,videoUrl:G,sourceNodeId:st}),Ws(c,G,"video",st)},0)}})(),Ue});return}if(R==="FAILED"||R==="ERROR"||R==="CANCELLED"){let G=`: ${R}`;if(E)try{const fe=typeof E=="string"?JSON.parse(E):E;G=(fe==null?void 0:fe.message)||(fe==null?void 0:fe.code)||E}catch{G=E||G}console.error("[Tapnow] Veo: ",{status:R,failReason:E,errorMsg:G}),St(fe=>fe.map(Ue=>Ue.id===c?{...Ue,status:"failed",errorMsg:G}:Ue));return}if(R==="NOT_START"||R==="PENDING"||R==="QUEUED"){console.log(`[Tapnow] Veo:  ${R} ${B}...`);const G=parseInt(B)||0;St(fe=>fe.map(Ue=>Ue.id===c?{...Ue,status:"generating",progress:Math.max(5,G),errorMsg:R==="NOT_START"?"...":void 0}:Ue)),setTimeout(()=>Ui(r,c,f,h,p,m,_+1),4e3);return}const K=parseInt(B)||Math.min(95,_*2+10);console.log(`[Tapnow] Veo:  ${R} ${B}...`),St(G=>G.map(fe=>fe.id===c?{...fe,status:"generating",progress:K}:fe)),setTimeout(()=>Ui(r,c,f,h,p,m,_+1),4e3)}).catch(T=>setTimeout(()=>Ui(r,c,f,h,p,m,_+1),4e3))},mo=(r,c,f,h,p,m,_="",M=0)=>{if(!r||r==="null"||r==="undefined"){console.error(`[Poll Error] Invalid JobId: ${r} for task ${c}`),St(D=>D.map(R=>R.id===c?{...R,status:"failed",errorMsg:"Task failed: No Job ID returned",durationMs:Date.now()-(R.startTime||Date.now())}:R));return}const C=_==="sora-2-pro"?360:80,T=5e3;if(M>C){St(R=>R.map(B=>B.id===c?{...B,status:"failed",errorMsg:"Sora "}:B));const D=Rn.current.get(c);D&&(console.log("[] Sora:",{taskId:c,nodeId:D.nodeId,shotId:D.shotId}),Vt(D.nodeId,D.shotId,{status:"draft"}),Rn.current.delete(c));return}const I=_!=null&&_.includes("grok")?`${f}/v2/videos/generations/${encodeURIComponent(r)}`:`${f}/v1/videos/${encodeURIComponent(r)}`;fetch(I,{method:"GET",headers:{Authorization:`Bearer ${h}`}}).then(D=>{if(!D.ok)throw new Error(`HTTP ${D.status}: ${D.statusText}`);return D.text()}).then(D=>{var E,K,J,te,ne;let R;try{R=JSON.parse(D)}catch(re){console.error("[Tapnow] Sora/Grok Poll JSON :",re,D),setTimeout(()=>mo(r,c,f,h,p,m,_,M+1),T);return}console.log("[Tapnow] Sora/Grok Poll:",R);const B=((E=R==null?void 0:R.data)==null?void 0:E.status)||(R==null?void 0:R.status)||((K=R==null?void 0:R.data)==null?void 0:K.task_status)||(R==null?void 0:R.task_status);if(B==="SUCCESS"||B==="succeeded"||B==="FINISHED"||B==="completed"){const re=((J=R==null?void 0:R.data)==null?void 0:J.output)||(R==null?void 0:R.output)||((te=R==null?void 0:R.data)==null?void 0:te.video_url)||((ne=R==null?void 0:R.data)==null?void 0:ne.url)||(R==null?void 0:R.video_url)||(R==null?void 0:R.url);if(!re){St(et=>et.map(G=>G.id===c?{...G,status:"failed",errorMsg:"URL"}:G));return}const be=Date.now(),Ce=Ya.get(c);Ce==null||Ce.sourceNodeId;const We=be-((Ce==null?void 0:Ce.startTime)||be);St(et=>{const G=et.map(Ue=>Ue.id===c?{...Ue,status:"completed",progress:100,url:re,width:p,height:m,durationMs:We}:Ue),fe=Rn.current.get(c);if(fe)console.log("[] Sora:",{taskId:c,nodeId:fe.nodeId,shotId:fe.shotId,videoUrl:re}),Vt(fe.nodeId,fe.shotId,{video_url:re,status:"done"}),Rn.current.delete(c);else{const Ue=G.find(vt=>vt.id===c);Ue!=null&&Ue.sourceNodeId?setTimeout(()=>{console.log("[Tapnow] Sora: ",{taskId:c,videoUrl:re,sourceNodeId:Ue.sourceNodeId}),Ws(c,re,"video",Ue.sourceNodeId)},0):console.warn("[Tapnow] Sora:  sourceNodeId",{taskId:c,updatedItem:Ue})}return G});return}if(B==="FAILED"||B==="ERROR"||B==="CANCELLED"){St(re=>re.map(be=>be.id===c?{...be,status:"failed",errorMsg:`: ${B}`}:be));return}St(re=>re.map(be=>be.id===c?{...be,status:"generating",progress:Math.min(95,(be.progress||10)+2)}:be)),setTimeout(()=>mo(r,c,f,h,p,m,_,M+1),T)}).catch(D=>{console.error("[Tapnow] Sora/Grok Poll :",D),M<C-5?setTimeout(()=>mo(r,c,f,h,p,m,_,M+1),T):St(R=>R.map(B=>B.id===c?{...B,status:"failed",errorMsg:`: ${D.message||""}`}:B))})},Z0=async(r,c="1:1")=>new Promise((f,h)=>{const p=new Image;p.crossOrigin="anonymous";const m=setTimeout(()=>{h(new Error(""))},3e4);p.onload=()=>{clearTimeout(m);try{const _=document.createElement("canvas"),M=_.getContext("2d"),C=Math.floor(p.width/2),T=Math.floor(p.height/2),I=C/T,D=[];for(let R=0;R<2;R++)for(let B=0;B<2;B++){const E=Math.max(0,Math.min(B*C,p.width-C)),K=Math.max(0,Math.min(R*T,p.height-T)),J=Math.min(C,p.width-E),te=Math.min(T,p.height-K);_.width=J,_.height=te,M.fillStyle="#ffffff",M.fillRect(0,0,J,te),M.drawImage(p,E,K,J,te,0,0,J,te);const ne=_.toDataURL("image/png");D.push({url:ne,width:J,height:te,ratio:I})}console.log(`Midjourney:  ${p.width}x${p.height} ${C}x${T} ${I.toFixed(2)}`),f(D)}catch(_){console.error("Midjourney: :",_),h(_)}},p.onerror=_=>{clearTimeout(m),console.error("Midjourney: Failed to load image for splitting:",_),h(new Error(""))},p.src=r}),Nc=(r,c,f,h,p,m,_,M=0,C=!1)=>{const T=C?160:300,I=5e3;if(M>T){const B=C?800:1500;St(E=>E.map(K=>K.id===r?{...K,status:"failed",errorMsg:`${B}`}:K));return}const R=`${f.replace(/\/+$/,"")}/v1/images/tasks/${c}`;fetch(R,{method:"GET",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}}).then(B=>B.text()).then(B=>{var Ce,We,et,G,fe,Ue,vt,st,gt;let E;try{E=JSON.parse(B)}catch(Xe){console.error("[Async Image] Failed to parse response:",Xe),setTimeout(()=>Nc(r,c,f,h,p,m,_,M+1,C),delayMs);return}console.log("[Async Image] Poll:",E);const K=(((Ce=E==null?void 0:E.data)==null?void 0:Ce.status)||(E==null?void 0:E.status)||"").toUpperCase();console.log("[Async Image] :",K,":",{hasData:!!(E!=null&&E.data),hasDataData:!!((We=E==null?void 0:E.data)!=null&&We.data),hasDataStatus:!!((et=E==null?void 0:E.data)!=null&&et.status),hasStatus:!!(E!=null&&E.status),dataKeys:E?Object.keys(E):[]});let J=[];if((G=E==null?void 0:E.data)!=null&&G.data&&Array.isArray(E.data.data)&&E.data.data.length>0?(J=E.data.data,console.log("[Async Image]  data.data.data :",J.length,"")):(fe=E==null?void 0:E.data)!=null&&fe.images&&Array.isArray(E.data.images)&&E.data.images.length>0?(J=E.data.images,console.log("[Async Image]  data.data.images :",J.length,"")):E!=null&&E.images&&Array.isArray(E.images)&&E.images.length>0?(J=E.images,console.log("[Async Image]  data.images :",J.length,"")):E!=null&&E.data&&Array.isArray(E.data)&&E.data.length>0&&(J=E.data,console.log("[Async Image]  data.data :",J.length,"")),J.length===0){if((Ue=E==null?void 0:E.data)!=null&&Ue.data&&Array.isArray(E.data.data)&&E.data.data.length>0){const Xe=E.data.data[0];if(Xe!=null&&Xe.revised_prompt){const ct=Xe.revised_prompt.match(/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/);ct&&ct[1]&&(J=[{url:ct[1]}],console.log("[Async Image]  revised_prompt URL:",ct[1]))}}if(J.length===0&&((vt=E==null?void 0:E.data)!=null&&vt.revised_prompt)){const Xe=E.data.revised_prompt.match(/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/);Xe&&Xe[1]&&(J=[{url:Xe[1]}],console.log("[Async Image]  data.data.revised_prompt URL:",Xe[1]))}if(J.length===0&&((st=E==null?void 0:E.data)!=null&&st.data)&&Array.isArray(E.data.data)&&E.data.data.length>0){const Xe=E.data.data.filter(ct=>(ct==null?void 0:ct.url)||(ct==null?void 0:ct.image_url)||(ct==null?void 0:ct.imageUrl));Xe.length>0&&(J=Xe,console.log("[Async Image]  data.data.data :",J.length,""))}if(J.length===0&&(K==="COMPLETED"||K==="SUCCESS"||K==="FINISHED"||K==="DONE")){console.log("[Async Image] 0");const Xe=(Nt,ht=0,Lt=new WeakSet)=>{if(ht>5||!Nt||typeof Nt!="object"||Lt.has(Nt))return null;Lt.add(Nt);const Kt=["url","image_url","imageUrl","image","src","link","href"];for(const Et of Kt)if(Nt[Et]&&typeof Nt[Et]=="string"&&Nt[Et].startsWith("http"))return Nt[Et];if(Array.isArray(Nt)&&Nt.length>0){const Et=Xe(Nt[0],ht+1,Lt);if(Et)return Et}for(const Et in Nt)if(Nt.hasOwnProperty(Et)&&!Kt.includes(Et)){const Bt=Xe(Nt[Et],ht+1,Lt);if(Bt)return Bt}return null},ct=Xe(E);ct?(J=[{url:ct}],console.log("[Async Image] URL:",ct)):console.warn("[Async Image] URL:",JSON.stringify(E,null,2).substring(0,500))}}const te=(E==null?void 0:E.message)||(E==null?void 0:E.error)||(E==null?void 0:E.fail_reason)||"";St(Xe=>{const ct=Xe.map(ht=>{var Lt,Kt,Et,Bt,Ot,It,on,yn,vn,ds,Cn,Vn;if(ht.id===r)if(K==="COMPLETED"||K==="SUCCESS"||K==="FINISHED"||K==="DONE"){console.log("[Async Image] :",K,":",J.length);const ln=ht.sourceNodeId||_;if(J&&J.length>0){const an=J.map(fn=>typeof fn=="string"?fn:(fn==null?void 0:fn.url)||(fn==null?void 0:fn.image_url)||(fn==null?void 0:fn.imageUrl)||"").filter(Boolean);if(console.log("[Async Image] URLs:",an),an.length>0){const fn=an[0];console.log("[V3.7.30 Async Debug] :",{taskId:r,mapSize:Rn.current.size,hasTask:Rn.current.has(r),allTaskIds:Array.from(Rn.current.keys())});const Ut=Rn.current.get(r);console.log("[V3.7.30 Async Debug] :",{storyboardTask:Ut,isImageMode:Ut==null?void 0:Ut.isImageMode}),Ut&&Ut.isImageMode?(console.log("[] :",{taskId:r,nodeId:Ut.nodeId,shotId:Ut.shotId,imageCount:an.length}),Vt(Ut.nodeId,Ut.shotId,{output_images:an,output_url:fn,selectedImageIndex:0,outputEnabled:!1,status:"done"}),Rn.current.delete(r)):console.warn("[V3.7.30 Async Debug] ");let bn=null;const Bn=((Lt=E==null?void 0:E.data)==null?void 0:Lt.duration)||((Kt=E==null?void 0:E.data)==null?void 0:Kt.cost_time)||((Et=E==null?void 0:E.data)==null?void 0:Et.elapsed_time)||((Bt=E==null?void 0:E.data)==null?void 0:Bt.time_cost)||((Ot=E==null?void 0:E.data)==null?void 0:Ot.spent_time)||(E==null?void 0:E.duration)||(E==null?void 0:E.cost_time)||(E==null?void 0:E.elapsed_time)||(E==null?void 0:E.time_cost)||(E==null?void 0:E.spent_time);if(Bn!=null){if(typeof Bn=="number")bn=Bn<1e4?Bn*1e3:Bn;else if(typeof Bn=="string"){const O=Bn.match(/(\d+\.?\d*)\s*(s|ms||)/i);if(O){const je=parseFloat(O[1]),xt=O[2].toLowerCase();bn=xt==="s"||xt===""?je*1e3:je}else{const je=parseFloat(Bn);isNaN(je)||(bn=je<1e4?je*1e3:je)}}}if(bn===null){const O=Date.now();bn=O-(ht.startTime||O)}console.log("[Async Image] UI:",{taskId:r,url:fn,sourceNodeId:ln,imageCount:an.length,durationMs:bn,backendDuration:Bn,frontendCalculated:bn===null?null:Date.now()-(ht.startTime||Date.now())});const dr=ln||ht.sourceNodeId;return console.log("[Async Image] ",{taskId:r,url:fn,sourceNodeId:dr,savedSourceNodeId:ln,hItemSourceNodeId:ht.sourceNodeId,imageCount:an.length}),requestAnimationFrame(()=>{Ws(r,fn,"image",dr,an.length>1?an:null)}),{...ht,status:"completed",progress:100,url:fn,width:p,height:m,durationMs:bn,errorMsg:null,sourceNodeId:ln||ht.sourceNodeId,...an.length>1?{mjImages:an,selectedMjImageIndex:0}:{}}}else console.error("[Async Image] URL:",J)}else{console.error("[Async Image] :",{status:K,hasData:!!(E!=null&&E.data),hasDataData:!!((It=E==null?void 0:E.data)!=null&&It.data),fullData:JSON.stringify(E,null,2).substring(0,1e3)});const an=(Ut,bn=0)=>{if(bn>5||!Ut||typeof Ut!="object")return null;if(Ut.url&&typeof Ut.url=="string"&&Ut.url.startsWith("http"))return Ut.url;if(Ut.image_url&&typeof Ut.image_url=="string"&&Ut.image_url.startsWith("http"))return Ut.image_url;if(Ut.imageUrl&&typeof Ut.imageUrl=="string"&&Ut.imageUrl.startsWith("http"))return Ut.imageUrl;for(const Bn in Ut)if(Ut.hasOwnProperty(Bn)){const dr=an(Ut[Bn],bn+1);if(dr)return dr}return null},fn=an(E);if(fn){console.log("[Async Image] URL:",fn);let Ut=null;const bn=((on=E==null?void 0:E.data)==null?void 0:on.duration)||((yn=E==null?void 0:E.data)==null?void 0:yn.cost_time)||((vn=E==null?void 0:E.data)==null?void 0:vn.elapsed_time)||((ds=E==null?void 0:E.data)==null?void 0:ds.time_cost)||((Cn=E==null?void 0:E.data)==null?void 0:Cn.spent_time)||(E==null?void 0:E.duration)||(E==null?void 0:E.cost_time)||(E==null?void 0:E.elapsed_time)||(E==null?void 0:E.time_cost)||(E==null?void 0:E.spent_time);if(bn!=null){if(typeof bn=="number")Ut=bn<1e4?bn*1e3:bn;else if(typeof bn=="string"){const dr=bn.match(/(\d+\.?\d*)\s*(s|ms||)/i);if(dr){const O=parseFloat(dr[1]),je=dr[2].toLowerCase();Ut=je==="s"||je===""?O*1e3:O}else{const O=parseFloat(bn);isNaN(O)||(Ut=O<1e4?O*1e3:O)}}}if(Ut===null){const dr=Date.now();Ut=dr-(ht.startTime||dr)}const Bn=ln||ht.sourceNodeId;return console.log("[Async Image] ",{taskId:r,url:fn,sourceNodeId:Bn,savedSourceNodeId:ln,hItemSourceNodeId:ht.sourceNodeId}),requestAnimationFrame(()=>{Ws(r,fn,"image",Bn,null)}),{...ht,status:"completed",progress:100,url:fn,width:p,height:m,durationMs:Ut,errorMsg:null,sourceNodeId:ln||ht.sourceNodeId}}}return{...ht,status:"failed",errorMsg:te||""}}else{if(K==="FAILED"||K==="ERROR"||K==="CANCELLED"||K==="FAILURE")return{...ht,status:"failed",errorMsg:te||`: ${K}`};if(K==="PENDING"||K==="PROCESSING"||K==="GENERATING"||K==="IN_PROGRESS"||K==="RUNNING"){let ln=10+M*2;if((Vn=E==null?void 0:E.data)!=null&&Vn.progress){const an=String(E.data.progress);an.includes("%")?ln=parseInt(an.replace("%",""),10)||ln:typeof E.data.progress=="number"&&(ln=E.data.progress)}else if(E!=null&&E.progress){const an=String(E.progress);an.includes("%")?ln=parseInt(an.replace("%",""),10)||ln:typeof E.progress=="number"&&(ln=E.progress)}return ln=Math.min(95,Math.max(10,ln)),{...ht,status:"generating",progress:ln,errorMsg:null}}else{const ln=Math.min(90,10+M*1.5);return{...ht,status:"generating",progress:ln,errorMsg:null}}}return ht}),Nt=ct.find(ht=>ht.id===r);return Nt!=null&&Nt.progress,ct});const ne=(((gt=E==null?void 0:E.data)==null?void 0:gt.status)||(E==null?void 0:E.status)||"").toUpperCase();!(ne==="COMPLETED"||ne==="SUCCESS"||ne==="FINISHED"||ne==="DONE")&&!(ne==="FAILED"||ne==="ERROR"||ne==="CANCELLED"||ne==="FAILURE")&&St(Xe=>{const ct=Xe.find(Lt=>Lt.id===r),Nt=(ct==null?void 0:ct.progress)||10;let ht=I;return Nt>=90?ht=1e3:Nt>=70?ht=2e3:Nt>=50?ht=3e3:M>50&&!C&&(ht=1e4),setTimeout(()=>{Nc(r,c,f,h,p,m,_,M+1,C)},ht),Xe})}).catch(B=>{console.error("[Async Image] Poll error:",B),setTimeout(()=>Nc(r,c,f,h,p,m,_,M+1,C),I)})},Sc=(r,c,f,h,p="fast",m,_,M=0)=>{if(M>120){St(I=>I.map(D=>D.id===c?{...D,status:"failed",errorMsg:"Midjourney "}:D));return}fetch(`${f}/${p}/mj/task/${r}/fetch`,{method:"GET",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}}).then(I=>I.text()).then(I=>{let D;try{D=JSON.parse(I)}catch(ne){console.error("Midjourney: Failed to parse response:",ne),setTimeout(()=>Sc(r,c,f,h,p,m,_,M+1),5e3);return}console.log("[Tapnow] Midjourney Poll:",D);const R=(D==null?void 0:D.status)||"",B=(D==null?void 0:D.progress)||"0%",E=(D==null?void 0:D.imageUrl)||"",K=(D==null?void 0:D.failReason)||"",J=(D==null?void 0:D.buttons)||[];let te=0;typeof B=="string"&&B.includes("%")?te=parseInt(B.replace("%",""),10)||0:typeof B=="number"&&(te=B),St(ne=>ne.map(re=>{var be,Ce,We,et,G,fe,Ue,vt;if(re.id===c){let st=re.status,gt=re.errorMsg,Xe=te;if(R==="SUCCESS"||R==="FINISHED"){if(st="completed",Xe=100,gt=null,E&&((Ce=(be=re.apiConfig)==null?void 0:be.modelId)!=null&&Ce.includes("mj"))&&((We=re.apiConfig)==null?void 0:We.modelId)!=="mj-zoom"){let Nt="1:1";if(re.prompt&&re.prompt.includes("--ar ")){const Et=re.prompt.match(/--ar\s+([\d:]+)/);Et&&Et[1]&&(Nt=Et[1])}St(Et=>Et.map(Bt=>Bt.id===c?{...Bt,url:E,mjRatio:Nt,mjOriginalUrl:E,mjNeedsSplit:!0}:Bt));const ht=re.sourceNodeId;ht?setTimeout(()=>{console.log("[Tapnow] Midjourney: ",{taskId:c,imageUrl:E,sourceNodeId:ht}),Ws(c,E,"image",ht)},0):console.warn("[Tapnow] Midjourney:  sourceNodeId",{taskId:c,hItem:re}),setTimeout(()=>{Z0(E,Nt).then(Et=>{const Bt=Et.map(on=>typeof on=="string"?on:on.url),Ot=Et[0],It=typeof Ot=="string"?Ot:Ot.url;St(on=>on.map(yn=>yn.id===c?{...yn,mjImages:Bt,url:It,selectedMjImageIndex:0,mjRatio:Nt,mjOriginalUrl:E,mjNeedsSplit:!1,mjImageInfo:Et.map(vn=>typeof vn=="string"?null:{width:vn.width,height:vn.height,ratio:vn.ratio})}:yn))}).catch(Et=>{console.error("Midjourney: Failed to split image:",Et),St(Bt=>Bt.map(Ot=>Ot.id===c?{...Ot,url:E,mjRatio:Nt,mjOriginalUrl:E,mjNeedsSplit:!0}:Ot))})},300);const Lt=Date.now(),Kt=Lt-(re.startTime||Lt);return{...re,status:st,progress:Xe,errorMsg:gt,url:E,width:m,height:_,mjButtons:J,mjOriginalUrl:E,durationMs:Kt}}}else R==="FAILURE"||R==="ERROR"||R==="CANCELLED"?(st="failed",gt=K||`: ${R}`):R==="NOT_START"||R==="SUBMITTED"||R==="IN_PROGRESS"||R==="MODAL"?(st="generating",gt=null,Xe===0&&(Xe=5)):(st="generating",gt=null,Xe=Math.min(95,(re.progress||5)+2));console.log(`[Tapnow] Midjourney Poll Status Update: Task ${c}, Status: ${st}, Progress: ${Xe}%, ImageUrl: ${E?"Yes":"No"}`);const ct={...re,status:st,progress:Xe,errorMsg:gt,url:E||re.url,width:m,height:_,mjButtons:J};if((R==="SUCCESS"||R==="FINISHED")&&E&&(!((G=(et=re.apiConfig)==null?void 0:et.modelId)!=null&&G.includes("mj"))||((fe=re.apiConfig)==null?void 0:fe.modelId)==="mj-zoom")){re.sourceNodeId?(console.log("[Tapnow] : ",{taskId:c,imageUrl:E,sourceNodeId:re.sourceNodeId,modelId:(Ue=re.apiConfig)==null?void 0:Ue.modelId}),((vt=re.apiConfig)==null?void 0:vt.modelId)==="mj-zoom"?l(Lt=>Lt.map(Kt=>Kt.id===re.sourceNodeId&&Kt.type==="expand-image"?{...Kt,content:E}:Kt)):Ws(c,E,"image",re.sourceNodeId)):console.warn("[Tapnow] :  sourceNodeId",{taskId:c,hItem:re});const Nt=Date.now(),ht=Nt-(re.startTime||Nt);ct.durationMs=ht}return ct}return re})),!(R==="SUCCESS"||R==="FINISHED")&&(R==="FAILURE"||R==="ERROR"||R==="CANCELLED"||setTimeout(()=>Sc(r,c,f,h,p,m,_,M+1),5e3))}).catch(I=>{console.error(`[Tapnow] Midjourney Poll Fetch Error for task ${c}:`,I),St(D=>D.map(R=>R.id===c?{...R,status:"failed",errorMsg:`: ${I.message}`}:R)),M<3&&setTimeout(()=>Sc(r,c,f,h,p,m,_,M+1),5e3)})},x1=async r=>{if(!r)return null;try{const c=new Image;c.crossOrigin="anonymous",await new Promise((p,m)=>{c.onload=p,c.onerror=m,c.src=r});const f=document.createElement("canvas");f.width=c.width,f.height=c.height;const h=f.getContext("2d");return h.fillStyle="#000000",h.fillRect(0,0,f.width,f.height),h.globalCompositeOperation="destination-out",h.drawImage(c,0,0),new Promise((p,m)=>{f.toBlob(_=>{_?p(_):m(new Error(""))},"image/png")})}catch(c){return console.error("[Inpainting] :",c),null}},qa=async(r,c,f,h,p={})=>{var st,gt,Xe,ct,Nt,ht,Lt,Kt,Et,Bt,Ot,It,on,yn,vn,ds,Cn,Vn,ln,an,fn,Ut,bn,Bn,dr,O,je,xt,$n;let m=[];const _=Array.isArray(f)?f:f?[f]:[];if(_.length>0)try{m=await Promise.all(_.map(async ve=>{if(bi.isImageId(ve)){console.log(`[startGeneration] Resolving IDB image: ${ve}`);const rt=await bi.getImage(ve);return rt||(console.warn(`[startGeneration] Failed to resolve IDB image: ${ve}`),ve)}return ve}))}catch(ve){console.error("[startGeneration] Error resolving images:",ve),m=_}const M=m,C=M.length>0?M[0]:void 0;if(console.log("[startGeneration] Images prepared:",M),!r&&!C){alert("");return}let T=null;h&&h.startsWith("storyboard-")&&h.includes("-shot-")?T=null:T=a.find(ve=>ve.id===h);let I=null,D=T==null?void 0:T.maskContent;if(D)console.log("[Inpainting] :",h);else{let ve=u.find(rt=>rt.to===h&&(!rt.inputType||rt.inputType==="default"));if(ve||(ve=u.find(rt=>rt.to===h)),ve){const rt=Xt.get(ve.from);rt&&rt.maskContent&&(D=rt.maskContent,console.log("[Inpainting] :",rt.id))}}D&&(I=await x1(D),I?console.log("[Inpainting] "):console.warn("[Inpainting] "));const R=p.model||((st=T==null?void 0:T.settings)==null?void 0:st.model)||(c==="image"?"nano-banana":"sora-2"),B=Hs(R);let E=B.key,K=E;if(E&&E.includes(",")){const ve=E.split(",").map(Ve=>Ve.trim()).filter(Ve=>Ve),rt=sn.current||{};console.log("[V3.5.1 Debug] Multi-account rotation check:"),console.log("  - Total keys:",ve.length),console.log("  - Blacklist:",JSON.stringify(rt));const bt=ve.filter(Ve=>!rt[Ve]);console.log("  - Available keys:",bt.length),bt.length>0?(K=bt[Math.floor(Math.random()*bt.length)],console.log(`[Load Balancing] Selected API Key from ${bt.length}/${ve.length} available options`)):ve.length>0&&(K=ve[Math.floor(Math.random()*ve.length)],console.warn(` [Load Balancing] All ${ve.length} keys are blacklisted, using random selection`))}let J=B.url,te=J;if(J.includes(",")){const ve=J.split(",").map(rt=>rt.trim()).filter(rt=>rt);ve.length>0&&(te=ve[Math.floor(Math.random()*ve.length)],console.log(`[Load Balancing] Selected API URL from ${ve.length} options: ${te}`))}if(!K){alert(" API Key"),li(!0);return}r&&(R.includes("sora")||R==="sora-2"||R==="sora-2-pro")&&(r=r.replace(/@([a-zA-Z0-9_\.]+)(?![a-zA-Z0-9_\.])/g,(ve,rt)=>`@{${rt}}`),r=r.replace(/@\{([^\}]+)\}/g,(ve,rt)=>` @{${rt}} `).replace(/\s{2,}/g," ").trim(),console.log("[Sora 2] Normalized prompt:",r));let ne=p.ratio||((gt=T==null?void 0:T.settings)==null?void 0:gt.ratio)||(R.includes("grok")?"3:2":"1:1"),re=((Xe=T==null?void 0:T.settings)==null?void 0:Xe.resolution)||(R.includes("grok")?"1080P":"Auto"),{sizeStr:be,w:Ce,h:We}=kk(R,ne,re);if(re==="Auto"&&ne==="Auto"&&C)try{const ve=await Ur(C),rt=Math.round(ve.w/64)*64,bt=Math.round(ve.h/64)*64;Ce=rt,We=bt,be=`${rt}x${bt}`,console.log(`[Auto Res] Using Source Dimensions: ${be}`)}catch(ve){console.error("Auto Res Error",ve)}else if(!Ce||!We){const ve=Ly(ne,re);Ce=ve.w,We=ve.h,be=ve.str}if(C&&ne==="Auto"&&["1K","2K","4K"].includes(re))try{const ve=await Ur(C),rt=re==="4K"?4096:re==="2K"?2048:1024,bt=Math.max(ve.w,ve.h)||1,Ve=rt/bt;let yt=Math.round(ve.w*Ve/16)*16,_t=Math.round(ve.h*Ve/16)*16;yt=Math.max(16,yt),_t=Math.max(16,_t),Ce=yt,We=_t,be=`${yt}x${_t}`,console.log(`[Auto+${re}] Upscale from ${ve.w}x${ve.h} -> ${be}`)}catch(ve){console.error("Auto+K Upscale Error",ve)}let et=p.duration?String(p.duration).replace("s",""):((Nt=(ct=T==null?void 0:T.settings)==null?void 0:ct.duration)==null?void 0:Nt.replace("s",""))||"5";console.log("[V3.5.2 Debug] Duration processing: options.duration=",p.duration,"final duration=",et),R.includes("veo")&&(et="8"),p.resolution?re=p.resolution:(ht=T==null?void 0:T.settings)!=null&&ht.resolution&&(re=T.settings.resolution);const G=p._existingTaskId||`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fe=()=>{const ve=pn.get(R);return R.includes("jimeng")?R:(ve==null?void 0:ve.displayName)||B.provider||R},Ue=Date.now(),vt=(T==null?void 0:T.id)||h||null;if(p._isRetry||St(ve=>[{id:G,type:c,url:"",prompt:r||(C?`Img2${c==="image"?"Img":"Vid"}`:"Untitled"),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"generating",progress:5,modelName:fe(),width:Ce,height:We,remoteTaskId:null,apiConfig:{modelId:R,baseUrl:te,apiKey:K},provider:B.provider,sourceNodeId:vt,startTime:Ue,durationMs:null,ratio:ne,resolution:re,hasInputImages:M.length>0},...ve]),vt&&vt.startsWith("storyboard-")&&vt.includes("-shot-")){const ve=vt.split("-shot-");if(ve.length===2){const rt=ve[1],bt=ve[0].startsWith("storyboard-img-"),Ve=bt?ve[0].replace("storyboard-img-",""):ve[0].replace("storyboard-","");Rn.current.set(G,{nodeId:Ve,shotId:rt,isImageMode:bt}),console.log("[] :",{taskId:G,nodeId:Ve,shotId:rt,isImageMode:bt})}}p._isRetry||requestAnimationFrame(()=>{setTimeout(()=>{uc(!0)},0)});try{if(c==="image"){let ve=`${te}/v1/images/generations`,rt,bt=!1;const Ve=pn.get(R),yt=(R.includes("banana")||R.includes("edit")||R.includes("qwen"))&&!(R.includes("nano-banana-2")||((Ve==null?void 0:Ve.modelName)??"").includes("nano-banana-2")),_t=R.includes("gpt")||((Ve==null?void 0:Ve.modelName)??"").includes("gpt-image")||((Ve==null?void 0:Ve.provider)??"").toLowerCase().includes("gpt-4o image"),Qt=R.includes("flux")||((Ve==null?void 0:Ve.modelName)??"").includes("flux-kontext"),Qe=((Ve==null?void 0:Ve.modelName)??"").includes("nano-banana-2")||R.includes("nano-banana-2"),Dn=R.includes("mj")||((Ve==null?void 0:Ve.provider)??"").toLowerCase().includes("midjourney"),wn=R.includes("jimeng")||((Ve==null?void 0:Ve.modelName)??"").includes("jimeng")||(Ve==null?void 0:Ve.provider)==="jimeng",Jn=()=>{var le;return R.includes("jimeng-4.5")?"jimeng-4.5":R.includes("jimeng-4.1")?"jimeng-4.1":R.includes("jimeng-4.0")?"jimeng-4.0":R.includes("jimeng-3.1")?"jimeng-3.1":R.includes("jimeng-3.0")?"jimeng-3.0":(le=Ve==null?void 0:Ve.modelName)!=null&&le.includes("jimeng")?Ve.modelName:"jimeng-4.5"},wr=(()=>{if(Qe)return re==="4K"?"4K":re==="2K"?"2K":"1K"})(),Zn=ne==="Auto"?void 0:ne;if(M.length>0&&yt){ve=`${te}/v1/images/edits`,bt=!0;const le=new FormData;le.append("model",(Ve==null?void 0:Ve.modelName)||"nano-banana"),le.append("prompt",r||"enhance"),le.append("n","1"),le.append("size",be),Zn&&le.append("aspect_ratio",Zn),wr&&le.append("image_size",wr);const ze=M.map(Ie=>fi(Ie));(await Promise.all(ze)).forEach((Ie,Ke)=>{le.append("image",Ie,`input_${Ke}.png`)}),I&&le.append("mask",I,"mask.png"),rt=le}else if(Qt){ve=`${te}/v1/images/edits`,bt=!0;const le=new FormData;le.append("model",(Ve==null?void 0:Ve.modelName)||"flux-kontext-pro"),le.append("prompt",r||""),Zn&&le.append("aspect_ratio",Zn),be&&le.append("size",be);const ze=M.length>0?M:C?[C]:[];if(ze.length>0){const _e=ze.map(Ke=>fi(Ke));(await Promise.all(_e)).forEach((Ke,ot)=>le.append("image",Ke,`flux_ref_${ot}.png`))}I&&le.append("mask",I,"mask.png"),rt=le}else if(_t){let le=r||"";const ze={model:(Ve==null?void 0:Ve.modelName)||"gpt-4o-image",prompt:le,n:1,size:be,aspect_ratio:ne,response_format:"url"};if(M.length>0){const _e=M.map(Ke=>ur(Ke)),Ie=await Promise.all(_e);ze.image=Ie.map(Ke=>`data:image/png;base64,${Ke}`)}rt=ze}else if(Qe)if(M.length>0){ve=`${te}/v1/images/edits?async=true`,bt=!0;const ze=new FormData;ze.append("model",(Ve==null?void 0:Ve.modelName)||"nano-banana-2"),ze.append("prompt",r||""),ze.append("response_format","url"),Zn&&ze.append("aspect_ratio",Zn),wr&&ze.append("image_size",wr);const _e=M.map(Ke=>fi(Ke));(await Promise.all(_e)).forEach((Ke,ot)=>{ze.append("image",Ke,`input_${ot}.png`)}),I&&ze.append("mask",I,"mask.png"),rt=ze}else{ve=`${te}/v1/images/generations?async=true`;const ze={model:(Ve==null?void 0:Ve.modelName)||"nano-banana-2",prompt:r||"",response_format:"url",...Zn?{aspect_ratio:Zn}:{},...wr?{image_size:wr}:{}};if(C){const _e=C.trim();if(_e.startsWith("http"))ze.image=[_e];else if(_e.startsWith("data:"))ze.image=[_e];else{const Ie=await ur(_e);ze.image=[`data:image/png;base64,${Ie}`]}}rt=ze}else if(Dn){const le=((Lt=T==null?void 0:T.settings)==null?void 0:Lt.mjMode)||"fast",ze=((Kt=T==null?void 0:T.settings)==null?void 0:Kt.mjVersion)||"--v 7";let _e=r||"";ne&&ne!=="Auto"&&(_e.includes("--ar ")||(_e=`${_e} --ar ${ne}`.trim()));const Ie=_c(h,"oref"),Ke=_c(h,"sref"),ot=[],oe=new Map;let Oe=null,wt=null,Ge=[];const jt=Ie||((Et=T==null?void 0:T.settings)==null?void 0:Et.mjOref)&&T.settings.mjOref.trim();if(jt&&jt.trim()){let Je=jt.trim();Je.startsWith("http")?Oe=Je:Je.startsWith("data:")?(ot.push(Je),oe.set("oref",ot.length-1)):Oe=Je}const Ft=Ke||((Bt=T==null?void 0:T.settings)==null?void 0:Bt.mjSref)&&T.settings.mjSref.trim();if(Ft&&Ft.trim()){let Je=Ft.trim();Je.startsWith("http")?wt=Je:Je.startsWith("data:")?(ot.push(Je),oe.set("sref",ot.length-1)):wt=Je}if(M.length>0)for(const Je of M)!(Ie&&Je===Ie)&&!(Ke&&Je===Ke)&&(Je.startsWith("http")?Ge.push(Je):Je.startsWith("data:")?(ot.push(Je),oe.set(`default_${Ge.length}`,ot.length-1),Ge.push(null)):Ge.push(Je));if(ot.length>0)try{const Je=await m1(ot,te,K);oe.has("oref")&&(Oe=Je[oe.get("oref")]),oe.has("sref")&&(wt=Je[oe.get("sref")]);for(let Tt=0;Tt<Ge.length;Tt++)if(Ge[Tt]===null){const Zt=`default_${Tt}`;oe.has(Zt)&&(Ge[Tt]=Je[oe.get(Zt)])}}catch(Je){St(Tt=>Tt.map(Zt=>Zt.id===G?{...Zt,status:"failed",progress:0,errorMsg:`: ${Je.message}`}:Zt));return}Ge=Ge.filter(Je=>Je!==null);let ut="";Ge.length>0&&(ut=Ge.join(" ")+" "),ut+=_e.trim(),!ut.includes("--v ")&&!ut.includes("--niji ")&&(ut=`${ut} ${ze}`.trim()),ne&&ne!=="Auto"&&!ut.includes("--ar ")&&(ut=`${ut} --ar ${ne}`.trim()),Oe&&!ut.includes("--oref ")&&(ut=`${ut} --oref ${Oe}`.trim()),(Ot=T==null?void 0:T.settings)!=null&&Ot.mjOw&&T.settings.mjOw>0&&!ut.includes("--ow ")&&(ut=`${ut} --ow ${Math.min(1e3,Math.max(1,T.settings.mjOw))}`.trim()),wt&&!ut.includes("--sref ")&&(ut=`${ut} --sref ${wt}`.trim()),ve=`${te}/${le}/mj/submit/imagine`,rt={prompt:ut,base64Array:[]};const An=await fetch(ve,{method:"POST",headers:{Authorization:`Bearer ${K}`,"Content-Type":"application/json"},body:JSON.stringify(rt)}),tn=await An.text();if(!An.ok)throw new Error(tn||`Midjourney API error: ${An.status}`);let Rt=JSON.parse(tn);if(Rt.code!==1&&Rt.code!==22)throw new Error(Rt.description||`Midjourney: code ${Rt.code}`);const Mt=Rt.result;if(!Mt)throw new Error("ID");St(Je=>Je.map(Tt=>Tt.id===G?{...Tt,remoteTaskId:Mt,status:"generating",progress:5}:Tt)),Sc(Mt,G,te,K,le,Ce,We);return}else if(wn)if(M.length>0){if(ve=`${te}/v1/images/compositions`,!r||r.trim()==="")throw new Error("");let le=ne,ze="2k";if(ne==="Auto"&&C)try{const ot=await Ur(C),oe=[{name:"1:1",value:1},{name:"4:3",value:4/3},{name:"3:4",value:3/4},{name:"16:9",value:16/9},{name:"9:16",value:9/16},{name:"3:2",value:3/2},{name:"2:3",value:2/3},{name:"21:9",value:21/9}],Oe=ot.w/ot.h;let wt=oe[0],Ge=Math.abs(Oe-wt.value);for(const jt of oe){const Ft=Math.abs(Oe-jt.value);Ft<Ge&&(Ge=Ft,wt=jt)}if(le=wt.name,console.log(`[Jimeng] Auto ratio: ${ot.w}x${ot.h} -> ${Oe.toFixed(2)} -> ${le}`),re==="Auto"){const jt=Math.max(ot.w,ot.h);ze=jt<=1024?"1k":jt<=2048?"2k":"4k"}}catch{le="1:1"}else le=ne==="Auto"?"1:1":ne;re!=="Auto"&&(ze=re==="1K"?"1k":re==="2K"?"2k":"4k");const _e=M.map(async ot=>{if(ot.startsWith("blob:"))try{console.log("  Blob URL...");const oe=await fetch(ot);if(oe.ok){const Oe=await oe.blob();return await new Promise(wt=>{const Ge=new FileReader;Ge.onloadend=()=>{console.log(" Blob URL "),wt(Ge.result)},Ge.readAsDataURL(Oe)})}else throw new Error("Blob ")}catch(oe){throw console.error(" Blob URL :",oe),new Error("Blob URL")}if(ot.startsWith("http"))try{const oe=await fetch(ot);if(!oe.ok)throw new Error(`HTTP ${oe.status}: URL`);const Oe=await oe.blob();return await new Promise(wt=>{const Ge=new FileReader;Ge.onloadend=()=>wt(Ge.result),Ge.readAsDataURL(Oe)})}catch(oe){throw new Error(`: ${oe.message}`)}return ot}),Ie=await Promise.all(_e);rt={model:Jn(),prompt:r.trim(),images:Ie,ratio:le,resolution:ze,response_format:"url"}}else{ve=`${te}/v1/images/generations`;const le=ne==="Auto"?"1:1":ne;let ze="2k";if(re==="1K"?ze="1k":re==="2K"?ze="2k":re==="4K"&&(ze="4k"),!r||r.trim()==="")throw new Error("");rt={model:Jn(),prompt:r.trim(),ratio:le,resolution:ze,response_format:"url"}}else rt={model:(Ve==null?void 0:Ve.modelName)||R,prompt:r,n:1,size:be,response_format:"url"};const me=async(le,ze)=>{const _e=bt?{Authorization:`Bearer ${le} `}:{Authorization:`Bearer ${le} `,"Content-Type":"application/json"};let Ie;ve.startsWith("http")?ze!==te&&ve.includes(te)?Ie=ve.replace(te,ze):Ie=ve:Ie=`${ze.replace(/\/+$/,"")}${ve.startsWith("/")?ve:"/"+ve} `;const Ke=bt?rt:JSON.stringify(rt);return console.log(`[API Request] Attempting with Key: ...${le.slice(-4)} | URL: ${Ie} `),await fetch(Ie,{method:"POST",headers:_e,body:Ke})},it=E&&E.includes(",")?E.split(",").map(le=>le.trim()).filter(le=>le):[E||nn],Ct=J.includes(",")?J.split(",").map(le=>le.trim()).filter(le=>le):[(J||Ir).replace(/\/+$/,"")],Jt=le=>{for(let ze=le.length-1;ze>0;ze--){const _e=Math.floor(Math.random()*(ze+1));[le[ze],le[_e]]=[le[_e],le[ze]]}return le};it.length>1&&Jt(it),Ct.length>1&&Jt(Ct);let ie,se,Ht,en,Yt=!1;const mt=sn.current||{},tt=[];for(const le of it){if(mt[le]){console.log(` [Blacklist] Skipping Key "...${le.slice(-4)}" - Reason: ${mt[le].reason}`);continue}if(H(le)){console.log(` [Suspend] Skipping Key "...${le.slice(-4)}" - `);continue}for(const ze of Ct)tt.push({key:le,url:ze})}if(tt.length===0&&it.length>0){console.warn("[Blacklist] All specified keys are blacklisted. Trying anyway with all available keys to avoid total failure.");for(const le of it)for(const ze of Ct)tt.push({key:le,url:ze})}tt.length>1&&Jt(tt);for(const le of tt)try{if(ie=await me(le.key,le.url),ie.status===401||ie.status===402||ie.status===403){const _e=ie.status===402?" (402)":ie.status===401?" (401)":" (403)";console.warn(`[API Failover] Key ending in ...${le.key.slice(-4)} failed with status ${ie.status}. Trying next...`),mr(le.key,_e),en=new Error(`API returned ${ie.status}: ${_e}`);continue}Ht=await ie.text();try{se=JSON.parse(Ht)}catch{}wn&&se&&console.log(`[DEBUG] Jimeng Response: code=${se.code} (type: ${typeof se.code}), message=${se.message}`);let ze=se==null?void 0:se.code;if(se!=null&&se.message&&typeof se.message=="string"){const _e=se.message.match(/:\s*(\d+)/);_e&&(ze=parseInt(_e[1],10),console.log(`[DEBUG] Extracted real error code from message: ${ze}`))}if(wn&&se&&(se.code!==0||ze)&&console.log(`[API Error Log] rawMessage: ${se.message}, realErrorCode: ${ze}, originalCode: ${se.code}`),wn&&(ze===1e3||se!=null&&se.message&&se.message.toLowerCase().includes("invalid parameter")))throw console.error(` [API Fatal]  (1000): ${se.message}`),new Error(`: ${se.message||"Invalid parameter"} ( 1000)`);if(wn&&(ze===34010105||se!=null&&se.message&&se.message.includes("34010105"))){console.warn(` [API Suspend] Key ending in ...${le.key.slice(-4)}  (34010105) 60 `),xe(le.key," (34010105)",60*60*1e3),en=new Error(":  session ( 34010105)");continue}if(wn&&ze===1006){if(ue(),Me())throw new Error(" : ");const _e=" (1006)";console.warn(` [API Blacklist] Key ending in ...${le.key.slice(-4)}  (1006)`),mr(le.key,_e),en=new Error(`Jimeng Error: ${se.message||"Not enough credits"}`);continue}Yt=!0;break}catch(ze){if(ze.message.includes("")||ze.message.includes(""))throw ze;console.warn(`[API Failover] Network/Parse request failed for ...${le.key.slice(-4)}. Error: ${ze.message}`),en=ze}if(!Yt||!ie&&!Ht){const le=en?en.message:"All API combinations failed.";throw new Error(le)}if(!se&&Ht)try{se=JSON.parse(Ht)}catch{throw new Error(`: ${Ht.substring(0,100)}`)}if(!ie.ok){let le=(se==null?void 0:se.message)||((It=se==null?void 0:se.error)==null?void 0:It.message)||Ht;throw _t&&ie.status===500&&(le=`GPT - 4o (500): ${((on=se==null?void 0:se.error)==null?void 0:on.message)||(se==null?void 0:se.error)||(se==null?void 0:se.message)||Ht} 


1.API Key 
2.(${(Ve==null?void 0:Ve.modelName)||"gpt-4o-image"}) 
3.
4.`,St(_e=>_e.map(Ie=>Ie.id===G?{...Ie,status:"failed",progress:0,errorMsg:le}:Ie))),new Error(le)}if(wn&&(se==null?void 0:se.code)!==void 0&&se.code!==0&&se.code!==1&&se.code!==200)throw new Error(se.message||`API: ${se.code} `);if(Qe&&(se!=null&&se.task_id||typeof(se==null?void 0:se.data)=="string"&&se.data.startsWith("task-"))){const le=se.task_id||se.data;St(ze=>ze.map(_e=>_e.id===G?{..._e,status:"generating",progress:10,remoteTaskId:le}:_e)),Nc(G,le,te,K,Ce,We,vt,0,!0);return}let A=[];if(se!=null&&se.data&&Array.isArray(se.data)?A=se.data.map(le=>le.url||le.image_url||le).filter(le=>typeof le=="string"):(yn=se==null?void 0:se.data)!=null&&yn.data&&Array.isArray(se.data.data)&&(A=se.data.data.map(le=>le.url).filter(Boolean)),A.length===0)throw new Error("URL");const Le=A[0],Fe=Date.now()-Ue;console.log("[V3.7.30 Debug] :",{taskId:G,mapSize:Rn.current.size,hasTask:Rn.current.has(G),allTaskIds:Array.from(Rn.current.keys())});const Be=Rn.current.get(G);console.log("[V3.7.30 Debug] :",{storyboardTask:Be,isImageMode:Be==null?void 0:Be.isImageMode}),Be&&Be.isImageMode?(console.log("[] :",{taskId:G,nodeId:Be.nodeId,shotId:Be.shotId,imageCount:A.length}),Vt(Be.nodeId,Be.shotId,{output_images:A,output_url:A[0],selectedImageIndex:0,outputEnabled:!1,status:"done"}),Rn.current.delete(G)):console.warn("[V3.7.30 Debug] "),St(le=>le.map(_e=>{if(_e.id===G){const Ie={..._e,status:"completed",progress:100,url:Le,width:Ce,height:We,durationMs:Fe,mjImages:A.length>1?A:null,selectedMjImageIndex:0};return Ie.sourceNodeId&&!Be&&setTimeout(()=>{Ws(G,Le,"image",Ie.sourceNodeId,Ie.mjImages)},0),Ie}return _e}));return}if(c==="video"){const ve=pn.get(R);if(R.includes("veo")){const ie=`${te} /v2/videos / generations`;let se=[];if(M&&M.length>0)se=await Promise.all(M.filter(mt=>mt&&typeof mt=="string"&&mt.trim().length>0).map(async mt=>{const tt=mt.trim();if(tt.startsWith("http://")||tt.startsWith("https://")){console.log("Veo: Processing HTTP URL for image");try{const A=await Ur(tt);return A.w>1920||A.h>1920?(console.log(`Veo:  ${A.w}x${A.h} `),await jd(tt,1920,1920)):tt}catch(A){return console.warn("Veo: URL",A),tt}}console.log("Veo: Processing image (data/blob/other format)");try{const A=await Ur(tt);return A.w>1920||A.h>1920?(console.log(`Veo:  ${A.w}x${A.h} `),await jd(tt,1920,1920)):tt.startsWith("data:")?tt:tt.startsWith("blob:")?`data: image / png; base64, ${await ur(tt)} `:tt.length>100&&!tt.includes("://")&&!tt.startsWith("data:")?`data: image / png; base64, ${tt} `:`data: image / png; base64, ${await ur(tt)} `}catch(A){throw console.error("Veo: Failed to process image:",A),new Error(`: ${tt.substring(0,50)}...`)}}));else if(C){const mt=C.trim();try{const tt=await Ur(mt);console.log(`Veo:  ${tt.w}x${tt.h} `),tt.w>1920||tt.h>1920?(console.log(`Veo:  ${tt.w}x${tt.h} ...`),se=[await jd(mt,1920,1920)]):mt.startsWith("http://")||mt.startsWith("https://")?(console.log("Veo: Using HTTP URL for source image ()"),se=[mt]):mt.startsWith("data:")?(console.log("Veo: Using data URL for source image ()"),se=[mt]):mt.startsWith("blob:")?(console.log("Veo: Converting blob URL to base64 for source image"),se=[`data: image / png; base64, ${await ur(mt)} `]):mt.length>100&&!mt.includes("://")&&!mt.startsWith("data:")?se=[`data: image / png; base64, ${mt} `]:se=[`data: image / png; base64, ${await ur(mt)} `]}catch(tt){throw console.error("Veo: Failed to process source image:",tt),new Error(`: ${tt.message} `)}}if(se.length===0&&((M==null?void 0:M.length)>0||C))throw console.error("Veo: images ",{connectedImages:M,sourceImage:C}),new Error("");const Ht=se.filter((mt,tt)=>!mt||typeof mt!="string"?(console.warn(`Veo:  ${tt}: `),!1):mt==="base64_data"||mt.trim()==="base64_data"?(console.warn(`Veo:  ${tt}: base64_data`),!1):!0);if(Ht.length===0&&((M==null?void 0:M.length)>0||C))throw console.error("Veo: ",{images:se,connectedImages:M,sourceImage:C}),new Error("");let en=null;if(ne&&ne!=="Auto")if(ne==="16:9"||ne==="9:16")en=ne;else{const mt=Ce/We;Math.abs(mt-16/9)<Math.abs(mt-9/16)?en="16:9":en="9:16"}const Yt={model:(ve==null?void 0:ve.modelName)||"veo3.1",prompt:r,enhance_prompt:!1,images:Ht.length>0?Ht:[],...en?{aspect_ratio:en}:{}};console.log("Veo: ",{endpoint:ie,model:Yt.model,prompt:((vn=Yt.prompt)==null?void 0:vn.substring(0,50))+"...",imagesCount:Yt.images.length,firstImageType:Yt.images[0]?Yt.images[0].startsWith("http")?"HTTP URL":Yt.images[0].startsWith("data:")?"Data URL":"Unknown":"empty",firstImagePreview:Yt.images[0]?Yt.images[0].startsWith("http")?Yt.images[0].substring(0,80):Yt.images[0].substring(0,100):"empty",aspect_ratio:Yt.aspect_ratio,payloadSize:JSON.stringify(Yt).length});try{console.log("Veo: ",ie);const mt=await fetch(ie,{method:"POST",headers:{Authorization:`Bearer ${K} `,"Content-Type":"application/json"},body:JSON.stringify(Yt)});console.log("Veo: ",{status:mt.status,statusText:mt.statusText});const tt=await mt.text();if(console.log("Veo: ",tt.substring(0,500)),!mt.ok)throw console.error("Veo: ",{status:mt.status,text:tt}),new Error(tt||`Veo error: ${mt.status} `);const A=JSON.parse(tt);console.log("Veo: ",A);const Le=((ds=A==null?void 0:A.data)==null?void 0:ds.id)||(A==null?void 0:A.id)||(A==null?void 0:A.task_id)||((Cn=A==null?void 0:A.data)==null?void 0:Cn.task_id);if(!Le)throw console.error("Veo:  JobId",A),new Error("Veo No JobId");console.log("Veo:  JobId",Le),St(De=>De.map(Fe=>Fe.id===G?{...Fe,status:"generating",progress:10}:Fe)),Ui(Le,G,te,K,Ce,We);return}catch(mt){throw console.error("Veo: ",mt),St(tt=>tt.map(A=>A.id===G?{...A,status:"failed",errorMsg:mt.message||""}:A)),mt}}let rt="",bt;const Ve={Authorization:`Bearer ${K} `},yt=(()=>{if(et==null)return 8;const ie=String(et).trim().replace(/[^\d]/g,""),se=parseInt(ie,10);return Number.isFinite(se)&&se>0?se:8})();if(R.includes("grok")){const ie=`${te} /v2/videos / generations`,se=parseInt(et,10),Ht=ne&&ne!=="Auto"?ne:"3:2",en=re&&re!=="Auto"?re:"1080P";console.log(`[Grok] Starting generation(JSON Mode).Duration: ${se||"N/A"} (type: ${typeof se}), ratio: ${Ht}, resolution: ${en} `);const Yt={model:(ve==null?void 0:ve.modelName)||"grok-video-3",prompt:r,ratio:Ht,resolution:en};if(Number.isFinite(se)&&se>0&&(Yt.duration=se),C)try{console.log("[Grok] Converting image to Base64...");let De="";if(C.startsWith("data:"))De=C;else{const Fe=await fi(C);De=await new Promise((Be,le)=>{const ze=new FileReader;ze.onloadend=()=>Be(ze.result),ze.onerror=le,ze.readAsDataURL(Fe)})}Yt.images=[De]}catch(De){console.error("Grok Image Conversion Failed:",De),alert("");return}const mt=await fetch(ie,{method:"POST",headers:{Authorization:`Bearer ${K} `,"Content-Type":"application/json"},body:JSON.stringify(Yt)}),tt=await mt.text();if(!mt.ok)throw console.error("[Grok API Error]",tt),new Error(tt||`Grok API error: ${mt.status} `);let A;try{A=JSON.parse(tt)}catch{throw new Error("API  JSON ")}const Le=((Vn=A==null?void 0:A.data)==null?void 0:Vn.id)||(A==null?void 0:A.id)||(A==null?void 0:A.task_id);if(!Le)throw console.error("Grok No Task ID:",A),new Error("API  Task ID");St(De=>De.map(Fe=>Fe.id===G?{...Fe,status:"generating",progress:10,remoteTaskId:Le}:Fe)),mo(Le,G,te,K,Ce,We,R);return}if(C){const ie=new FormData,se=await fi(C);if(R.includes("sora")){rt=`${te} /v1/videos`;let Ht=r.replace(/@\{([^\}]+)\}/g,(en,Yt)=>`@${Yt} `);console.log("[Sora 2] Sending prompt with character references:",Ht),ie.append("model",(ve==null?void 0:ve.modelName)||"sora-2"),ie.append("prompt",Ht),ie.append("seconds",et),ie.append("size",be),R==="sora-2"&&(p.isHD||(ln=T==null?void 0:T.settings)!=null&&ln.isHD)&&ie.append("quality","hd"),ie.append("input_reference",se,"ref.png"),ie.append("image",se,"ref.png")}else R.includes("jimeng")?(rt=`${te}/v1/videos/generations`,ie.append("model",(ve==null?void 0:ve.modelName)||"jimeng-video-3.0"),ie.append("prompt",r),ie.append("duration",parseInt(et)),ie.append("ratio",ne),ie.append("image",se,"input.png"),re&&re!=="Auto"&&ie.append("resolution",re)):R.includes("grok")?(rt=`${te} /v1/videos`,ie.append("model",(ve==null?void 0:ve.modelName)||"grok-video-3"),ie.append("prompt",r),ie.append("aspect_ratio",ne),ie.append("duration",yt),ie.append("image",se,"input.png")):(rt=`${te} /v1/videos`,ie.append("model",ve==null?void 0:ve.modelName),ie.append("prompt",r),ie.append("image",se,"input.png"),ie.append("size",be));bt=ie}else if(Ve["Content-Type"]="application/json",R.includes("sora")){delete Ve["Content-Type"],rt=`${te} /v1/videos`;const ie=new FormData;let se=r.replace(/@\{([^\}]+)\}/g,(Ht,en)=>`@${en} `);console.log("[Sora 2] Sending prompt with character references:",se),ie.append("model",(ve==null?void 0:ve.modelName)||"sora-2"),ie.append("prompt",se),ie.append("seconds",et),ie.append("size",be),R==="sora-2"&&(p.isHD||(an=T==null?void 0:T.settings)!=null&&an.isHD)&&ie.append("quality","hd"),bt=ie}else R.includes("jimeng")?(rt=`${te}/v1/videos/generations`,bt=JSON.stringify({model:(ve==null?void 0:ve.modelName)||"jimeng-video-3.0",prompt:r,duration:parseInt(et),ratio:ne,resolution:re==="Auto"?void 0:re})):R.includes("grok")?(rt=`${te} /v1/videos`,bt=JSON.stringify({model:(ve==null?void 0:ve.modelName)||"grok-video-3",prompt:r,aspect_ratio:ne,duration:yt})):(rt=`${te} /minimax/v1 / video_generation`,bt=JSON.stringify({model:ve==null?void 0:ve.modelName,prompt:r,resolution:be}));const _t=await fetch(rt,{method:"POST",headers:bt instanceof FormData?{Authorization:Ve.Authorization}:Ve,body:bt}),Qt=await _t.text();if(!_t.ok)throw new Error(Qt||`Video API error: ${_t.status} `);const Qe=JSON.parse(Qt),Dn=(Qe==null?void 0:Qe.code)||((fn=Qe==null?void 0:Qe.data)==null?void 0:fn.code),wn=(Qe==null?void 0:Qe.message)||((Ut=Qe==null?void 0:Qe.data)==null?void 0:Ut.message)||"";let Jn=Dn;const ps=wn.match(/[:]\s*(\d+)/);if(ps&&(Jn=parseInt(ps[1],10)),Jn===1e3)throw console.error(` [Video API]  (1000): ${wn}`),new Error(`: ${wn||"Invalid parameter"} ( 1000)`);const Zn=Jn===1006,me=Dn===-2001&&wn.includes("34010105");if(Dn===-2008||wn.includes("2060")){let ie=" ";throw wn.includes(": 30")&&(ie+="\\n\\n \\n \\n \\n \\n "),wn.includes("2060")&&(ie+="\\n\\n: 2060 ()"),new Error(ie)}if(Zn||me){const ie=Zn?" (1006)":" (34010105)";console.warn(` [Video API] Key ending in ...${K.slice(-4)} failed: ${ie}. Adding to blacklist.`),mr(K,ie);const se=new Error(`RETRY_WITH_NEW_KEY: ${wn}`);throw se.shouldRetry=!0,se}const Ct=(Qe==null?void 0:Qe.video_url)||(Qe==null?void 0:Qe.url)||((bn=Qe==null?void 0:Qe.data)==null?void 0:bn.video_url)||((Bn=Qe==null?void 0:Qe.data)==null?void 0:Bn.url)||Array.isArray(Qe==null?void 0:Qe.data)&&((dr=Qe.data[0])==null?void 0:dr.url);if(Ct){const ie=Date.now(),se=Ya.get(G),Ht=se==null?void 0:se.sourceNodeId,en=ie-((se==null?void 0:se.startTime)||ie);St(Yt=>{const mt=Yt.map(A=>A.id===G?{...A,status:"completed",progress:100,url:Ct,width:Ce,height:We,durationMs:en}:A),tt=Rn.current.get(G);if(tt)console.log("[] :",{taskId:G,nodeId:tt.nodeId,shotId:tt.shotId,immediateUrl:Ct}),Vt(tt.nodeId,tt.shotId,{video_url:Ct,status:"done"}),Rn.current.delete(G);else{const A=mt.find(Le=>Le.id===G);A!=null&&A.sourceNodeId?setTimeout(()=>{console.log("[Tapnow] : ",{taskId:G,immediateUrl:Ct,sourceNodeId:A.sourceNodeId}),Ws(G,Ct,"video",A.sourceNodeId)},0):console.warn("[Tapnow] :  sourceNodeId",{taskId:G,updatedItem:A})}return mt});return}const Jt=((O=Qe==null?void 0:Qe.data)==null?void 0:O.id)||(Qe==null?void 0:Qe.id)||(Qe==null?void 0:Qe.task_id)||((je=Qe==null?void 0:Qe.data)==null?void 0:je.task_id)||(Qe==null?void 0:Qe.job_id)||((xt=Qe==null?void 0:Qe.data)==null?void 0:xt.job_id);if(!Jt)throw new Error(`No Task/Job ID returned. Response: ${JSON.stringify(Qe).substring(0,200)}`);St(ie=>ie.map(se=>se.id===G?{...se,status:"generating",progress:10,remoteTaskId:Jt}:se)),R.includes("veo")?Ui(Jt,G,te,K,Ce,We):mo(Jt,G,te,K,Ce,We,R)}}catch(ve){if(ve.shouldRetry)return console.log("[Video API] Retrying with new key after blacklist..."),qa(r,c,f,h,{...p,_isRetry:!0,_existingTaskId:G});console.error("[CONSOLE_ERROR]",ve);const rt=Date.now(),bt=kt.find(_t=>_t.id===G),Ve=bt!=null&&bt.startTime?rt-bt.startTime:0;let yt=(ve==null?void 0:ve.message)||"";try{if(typeof yt=="string"&&yt.trim().startsWith("{")){const _t=JSON.parse(yt);($n=_t==null?void 0:_t.error)!=null&&$n.message?yt=_t.error.message:_t!=null&&_t.error?yt=typeof _t.error=="string"?_t.error:JSON.stringify(_t.error):_t!=null&&_t.message&&(yt=_t.message)}(yt.includes("Cannot find module")||yt.includes("octetstream")||yt.includes("MODULE_NOT_FOUND"))&&(!yt.includes("API")&&!yt.includes("")?yt=` API

${yt.replace(/[:].*?[:]/g,"").trim()} 

 
1.jimeng - api.exe
2.Dockerdocker pull ghcr.io / iptag / jimeng - api: latest`:yt.includes("")||(yt=yt+`

 
1. jimeng-api.exe
2. Dockerdocker pull ghcr.io/iptag/jimeng-api:latest`))}catch{(yt.includes("Cannot find module")||yt.includes("octetstream")||yt.includes("MODULE_NOT_FOUND"))&&!yt.includes("API")&&!yt.includes("")&&(yt=` API

 
1.jimeng - api.exe
2.Dockerdocker pull ghcr.io / iptag / jimeng - api: latest`)}St(_t=>_t.map(Qt=>Qt.id===G?{...Qt,status:"failed",errorMsg:yt,durationMs:Ve}:Qt))}},y1=()=>{t(r=>r==="dark"?"light":"dark")},v1=async()=>{const r=ls.current,c=Ri.current,f=Fs.current,h=r.filter(p=>(c===p.id||f&&f.has(p.id))&&(p.type==="input-image"||p.type==="video-input"||p.type==="preview")&&p.content);if(h.length===0){alert("");return}for(const p of h)try{const m=p.content;if(!m||typeof m!="string"&&!m.startsWith("data:")){console.warn(` ${p.id} URL: `,m);continue}const _=await fetch(m);if(!_.ok)throw new Error(`HTTP ${_.status}: ${_.statusText} `);const M=await _.blob(),C=URL.createObjectURL(M),T=document.createElement("a");T.href=C;let I=".png";p.type==="preview"?p.previewType==="video"?I=".mp4":I=pr(m)?".mp4":".png":p.type==="video-input"?I=".mp4":I=pr(m)?".mp4":".png";const D=`${p.id}${I} `;T.download=D,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(C),await new Promise(R=>setTimeout(R,100))}catch(m){console.error(` ${p.id} : `,m)}},q0=()=>{const r=new Date;return new Date(r.getTime()+8*60*60*1e3).toISOString()},Q0=()=>{const r=new Date,c=new Date(r.getTime()+8*60*60*1e3),f=c.getUTCFullYear(),h=String(c.getUTCMonth()+1).padStart(2,"0"),p=String(c.getUTCDate()).padStart(2,"0"),m=String(c.getUTCHours()).padStart(2,"0"),_=String(c.getUTCMinutes()).padStart(2,"0"),M=String(c.getUTCSeconds()).padStart(2,"0");return`${f} -${h} -${p}T${m} -${_} -${M} `},b1=async()=>{try{if(!window.showSaveFilePicker){if(!confirm(`

/>500MB Chrome  Edge 

`))return;const C=(Ce,We)=>We===void 0?null:We,T=JSON.parse(JSON.stringify(a,C)),I=async Ce=>{if(Ce==null)return Ce;if(typeof Ce=="string"&&Ce.startsWith("blob:"))try{const We=await fi(Ce);return await Y0(We)}catch(We){return console.error(" Blob URL :",We),Ce}if(Array.isArray(Ce))return await Promise.all(Ce.map(We=>I(We)));if(typeof Ce=="object"){const We={};for(const et in Ce)Ce.hasOwnProperty(et)&&(We[et]=await I(Ce[et]));return We}return Ce},D=await I(T),R=JSON.parse(JSON.stringify(Fn,C)),B=await I(R),E={version:"2.5.7",projectName:$e,nodes:D,connections:u,view:pe,history:kt,chatSessions:Xn,characterLibrary:B,timestamp:q0()},K=JSON.stringify(E,C,2),J=new Blob([K],{type:"application/json"}),te=URL.createObjectURL(J),ne=document.createElement("a");ne.href=te;const re=Q0(),be=`${$e||""}_${re}.json`;ne.download=be,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(te),alert("");return}const r=Q0(),f=await(await window.showSaveFilePicker({suggestedName:`${$e||""}_${r}.json`,types:[{description:"JSON File",accept:{"application/json":[".json"]}}]})).createWritable(),h=(M,C)=>C===void 0?null:C,p=async M=>{const C={...M};if(C.content&&typeof C.content=="string"&&C.content.startsWith("blob:"))try{const T=await ur(C.content),I=pr(C.content)?"video/mp4":"image/png";C.content=`data:${I}; base64, ${T} `}catch(T){console.error(" content :",T)}if(C.maskContent&&typeof C.maskContent=="string"&&C.maskContent.startsWith("blob:"))try{const T=await ur(C.maskContent);C.maskContent=`data: image / png; base64, ${T} `}catch(T){console.error(" maskContent :",T)}if(Array.isArray(C.selectedKeyframes))for(let T=0;T<C.selectedKeyframes.length;T++){const I=C.selectedKeyframes[T];if(I&&I.url&&typeof I.url=="string"&&I.url.startsWith("blob:"))try{const D=await ur(I.url);I.url=`data: image / png; base64, ${D} `}catch(D){console.error(":",D)}}if(Array.isArray(C.frames))for(let T=0;T<C.frames.length;T++){const I=C.frames[T];if(I&&I.url&&typeof I.url=="string"&&I.url.startsWith("blob:"))try{const D=await ur(I.url);I.url=`data: image / png; base64, ${D} `}catch(D){console.error(":",D)}}if(Array.isArray(C.previewMjImages))for(let T=0;T<C.previewMjImages.length;T++){const I=C.previewMjImages[T];if(I&&typeof I=="string"&&I.startsWith("blob:"))try{const D=await ur(I);C.previewMjImages[T]=`data:image/png;base64,${D}`}catch(D){console.error(" previewMjImages :",D)}}return C},m=async M=>{const C={...M};if(C.url&&typeof C.url=="string"&&C.url.startsWith("blob:"))try{const T=await ur(C.url),I=C.type==="video"?"video/mp4":"image/png";C.url=`data:${I}; base64, ${T} `}catch(T){console.error(" url :",T)}if(C.mjOriginalUrl&&typeof C.mjOriginalUrl=="string"&&C.mjOriginalUrl.startsWith("blob:"))try{const T=await ur(C.mjOriginalUrl);C.mjOriginalUrl=`data: image / png; base64, ${T} `}catch(T){console.error(" mjOriginalUrl :",T)}if(Array.isArray(C.mjImages))for(let T=0;T<C.mjImages.length;T++){const I=C.mjImages[T];if(I&&typeof I=="string"&&I.startsWith("blob:"))try{const D=await ur(I);C.mjImages[T]=`data: image / png; base64, ${D} `}catch(D){console.error(" mjImages :",D)}}return C},_=async M=>{const C={...M};if(C.avatar&&typeof C.avatar=="string"&&C.avatar.startsWith("blob:"))try{const T=await ur(C.avatar);C.avatar=`data: image / png; base64, ${T} `}catch(T){console.error(" avatar :",T)}if(C.profile_picture_url&&typeof C.profile_picture_url=="string"&&C.profile_picture_url.startsWith("blob:"))try{const T=await ur(C.profile_picture_url);C.profile_picture_url=`data: image / png; base64, ${T} `}catch(T){console.error(" profile_picture_url :",T)}return C};await f.write(`{
    
  "version": "2.5.7", 
  "projectName": ${JSON.stringify($e||"")}, 
  "nodes": [
`);for(let M=0;M<a.length;M++){const C=a[M],T=await p(C),I=JSON.stringify(T,h,2),D=M===0?I.split(`
`).join(`
    `):"    "+I.split(`
`).join(`
    `);await f.write(D),M<a.length-1?await f.write(`,
`):await f.write(`
`)}await f.write(`  ], 
  "connections": ${JSON.stringify(u,h,2)}, 
  "view": ${JSON.stringify(pe,h,2)}, 
  "history": [
`);for(let M=0;M<kt.length;M++){const C=kt[M],T=await m(C),I=JSON.stringify(T,h,2),D=M===0?I.split(`
`).join(`
    `):"    "+I.split(`
`).join(`
    `);await f.write(D),M<kt.length-1?await f.write(`,
`):await f.write(`
`)}await f.write(`  ], 
  "chatSessions": ${JSON.stringify(Xn,h,2)}, 
  "characterLibrary": [
`);for(let M=0;M<Fn.length;M++){const C=Fn[M],T=await _(C),I=JSON.stringify(T,h,2),D=M===0?I.split(`
`).join(`
    `):"    "+I.split(`
`).join(`
    `);await f.write(D),M<Fn.length-1?await f.write(`,
`):await f.write(`
`)}await f.write(`  ], 
  "timestamp": ${JSON.stringify(q0())} 

} `),await f.close(),alert("")}catch(r){if(console.error(":",r),r.name==="AbortError")return;alert(": "+(r.message||""))}},w1=()=>{const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=async c=>{const f=c.target.files[0];if(!f)return;Yn({visible:!0,progress:0,status:"INITIALIZING...",type:"import"});const h={nodes:[],history:[],connections:[],chatSessions:[],characterLibrary:[],projectName:"",view:null};let p=null,m="",_="",M=0,C=!1,T=0;const I=f.size,D=async R=>{const B=[R];for(;B.length>0;){const E=B.pop();if(!(!E||typeof E!="object"))for(const K in E){const J=E[K];if(typeof J=="string"&&J.startsWith("data:image/"))try{const ne=await(await fetch(J)).blob();E[K]=URL.createObjectURL(ne)}catch{}else typeof J=="object"&&J!==null&&B.push(J)}}return R};try{const B=f.stream().pipeThrough(new TextDecoderStream).getReader();for(;;){const{value:E,done:K}=await B.read();if(K)break;if(T+=E.length,Math.random()>.95){const J=Math.min(99,T/I*100);Yn(te=>({...te,progress:J,status:`PROCESSING ${(T/1024/1024).toFixed(0)} MB`}))}for(m+=E;;){const J=m.indexOf(`
`);if(J===-1)break;const te=m.substring(0,J);m=m.substring(J+1);const ne=te.trim();if(ne){if(ne.includes('"nodes": [')){p="nodes";continue}if(ne.includes('"history": [')){p="history";continue}if(ne.includes('"connections": [')){p="connections";continue}if(ne.includes('"chatSessions": [')){p="chatSessions";continue}if(ne.includes('"characterLibrary": [')){p="characterLibrary";continue}if((ne==="],"||ne==="]")&&M===0){p=null,_="",C=!1;continue}if(!p){if(ne.startsWith('"projectName":'))try{const re=ne.match(/"projectName":\s*(.+)/);re&&(h.projectName=JSON.parse(re[1].replace(/,$/,"")))}catch{}if(ne.startsWith('"view":'))try{const re=ne.match(/"view":\s*(.+)/);re&&re[1].endsWith("}")&&(h.view=JSON.parse(re[1].replace(/,$/,"")))}catch{}continue}if(p){for(let re of te)re==="{"&&(M++,C=!0),re==="}"&&M--;if(_+=te+`
`,C&&M===0){let re=_.trim();re.endsWith(",")&&(re=re.slice(0,-1));try{const be=JSON.parse(re);(p==="nodes"||p==="history"||p==="characterLibrary")&&await D(be),p==="nodes"&&be.id?(be.settings||(be.settings={}),h.nodes.push(be)):p==="history"?h.history.push(be):p==="connections"?h.connections.push(be):p==="chatSessions"?h.chatSessions.push(be):p==="characterLibrary"&&h.characterLibrary.push(be)}catch{}_="",C=!1}}}}}Yn(E=>({...E,progress:100,status:"FINALIZING..."})),setTimeout(()=>{ft(h.projectName||""),h.view&&ge(h.view),h.connections.length>0&&d(h.connections),h.chatSessions.length>0&&ti(h.chatSessions),h.characterLibrary.length>0&&fd(h.characterLibrary),h.nodes.length>0&&l(h.nodes),h.history.length>0&&St(h.history),Yn(E=>({...E,visible:!1})),alert(`
${h.nodes.length} `)},200)}catch(R){console.error(":",R),Yn(B=>({...B,visible:!1})),alert(`: ${R.message} `)}},r.click()},Es=(r,c,f,h,p=void 0,m=void 0,_=void 0,M=void 0)=>{N();const C=r==="gen-video"?{w:380,h:420}:r==="gen-image"?{w:440,h:340}:r==="video-input"?{w:580,h:460}:r==="video-analyze"?{w:480,h:500}:r==="storyboard-node"?{w:720,h:500}:r==="image-compare"?{w:400,h:300}:r==="preview"?{w:320,h:260}:r==="text-node"?{w:280,h:200}:{w:260,h:260},T={id:`node - ${Date.now()} `,type:r,x:c-C.w/2,y:f-C.h/2,width:C.w,height:C.h,content:p,...m?{dimensions:m}:{},settings:r==="gen-image"?{model:Yy,ratio:M0,resolution:Xy,prompt:""}:r==="gen-video"?{model:I0,duration:"5s",ratio:M0,resolution:Zy,videoPrompt:""}:r==="video-analyze"?{model:t1,segmentDuration:parseInt(Qy),analysisMode:"manual",voiceoverResults:[],analysisResults:[]}:r==="storyboard-node"?{projectTitle:"",shots:[]}:r==="text-node"?{text:p||""}:{}};l(I=>[...I,T]),h&&d(I=>[...I,{id:`conn - ${Date.now()} `,from:h,to:T.id}]),_&&d(I=>M&&M!=="default"?[...I.filter(R=>!(R.to===_&&(R.inputType||"default")===M)),{id:`conn - ${Date.now()} `,from:T.id,to:_,inputType:M!=="default"?M:void 0}]:[...I,{id:`conn - ${Date.now()} `,from:T.id,to:_}]),Uo(I=>({...I,visible:!1})),Lo(null),ss(null),os(null)},k1=F.useCallback(r=>{const c=[];for(const f of u)if(f.from===r){const h=Xt.get(f.to);h&&(h.type==="gen-image"||h.type==="gen-video")&&c.push(h)}return c},[u,Xt]),go=r=>r?r==="sora-2-pro"||r.includes("sora-2")||r==="sora-2"?"15s":r.includes("veo")||r==="google-veo3"||r.includes("grok")||r==="grok-3"?"8s":"5s":"5s",Nd=r=>r?r==="sora-2-pro"?["15s","25s"]:r.includes("sora-2")||r==="sora-2"?["5s","10s","15s"]:r.includes("veo")||r==="google-veo3"?["8s"]:r.includes("grok")||r==="grok-3"?["8s","5s"]:r.includes("jimeng")?["5s","10s"]:["5s","10s"]:["5s","10s"],z1=r=>{var M,C,T,I,D,R;const c=Xt.get(r);if(!c||c.type!=="storyboard-node")return;const f=((M=c.settings)==null?void 0:M.mode)||"video";let h,p,m;f==="image"?(h=localStorage.getItem("tapnow_last_image_model")||((C=Te.find(B=>B.type==="Image"))==null?void 0:C.id)||"",p="1:1",m=void 0):(h=I0||localStorage.getItem("tapnow_last_video_model")||((T=Te.find(B=>B.type==="Video"))==null?void 0:T.id)||"",p="16:9",m=go(h));const _={id:`shot-${Date.now()}`,scene_index:(((D=(I=c.settings)==null?void 0:I.shots)==null?void 0:D.length)||0)+1,time_range:"",image_url:"",description:"",prompt:"",camera:"",tags:[],status:"draft",model:h,ratio:p,duration:m,outputEnabled:!1,selectedImageIndex:-1};pt(r,{shots:[...((R=c.settings)==null?void 0:R.shots)||[],_]})},j1=(r,c)=>{var p;const f=Xt.get(r);if(!f||f.type!=="storyboard-node")return;const h=(((p=f.settings)==null?void 0:p.shots)||[]).filter(m=>m.id!==c);h.forEach((m,_)=>{m.scene_index=_+1}),pt(r,{shots:h})},Vt=(r,c,f,h={})=>{if(console.log("[updateShot] :",{nodeId:r,shotId:c,updates:f,options:h}),l(p=>{var M,C,T,I,D,R;const m=p.find(B=>B.id===r);if(!m||m.type!=="storyboard-node")return console.warn("[updateShot] :",{nodeId:r,found:!!m,type:m==null?void 0:m.type}),p;if(h.onlyIfStatus){const B=(((M=m.settings)==null?void 0:M.shots)||[]).find(E=>E.id===c);if(B&&B.status!==h.onlyIfStatus)return console.warn(`[updateShot] : ${c},  ${B.status} !==  ${h.onlyIfStatus}`),p}const _=(((C=m.settings)==null?void 0:C.shots)||[]).map(B=>B.id===c?{...B,...f}:B);return console.log(`[updateShot]   ${c}:`,{updatedStatus:f.status,hasImages:!!((T=f.output_images)!=null&&T.length),imageCount:((I=f.output_images)==null?void 0:I.length)||0,firstImageUrl:((R=(D=f.output_images)==null?void 0:D[0])==null?void 0:R.substring(0,50))+"..."||"none"}),p.map(B=>B.id===r?{...B,settings:{...B.settings,shots:_}}:B)}),f.video_url||f.output_url||f.output_images||f.image_url||f.lastFrame){const p=f.video_url||f.output_url||f.output_images&&f.output_images[0]||f.image_url||f.lastFrame,m=f.video_url?"video":"image",_=f.image_filename||"";console.log(`[] : nodeId=${r}, shotId=${c}, type=${m}`),setTimeout(()=>{Ws(`temp-${Date.now()}`,p,m,r,null,_)},50)}},_1=(r,c)=>{const f=Xt.get(r);if(!f||!c||c.length===0){console.warn("[] ");return}const h=c.map((C,T)=>{var J,te,ne,re,be,Ce,We,et,G,fe;const I=((J=C.keyframes)==null?void 0:J.find(Ue=>Ue.type==="current"))||((te=C.keyframes)==null?void 0:te[0]),D=(I==null?void 0:I.mj_prompt)||"",R=(I==null?void 0:I.jimeng_prompt)||"",B=(I==null?void 0:I.description)||((re=(ne=C.keyframes)==null?void 0:ne[0])==null?void 0:re.description)||"",E=[];(Ce=(be=C.global_tags)==null?void 0:be.style)!=null&&Ce[0]&&E.push(C.global_tags.style[0]),(et=(We=C.global_tags)==null?void 0:We.camera)!=null&&et[0]&&E.push(C.global_tags.camera[0]),I!=null&&I.description&&["","","","","","","","Dolly","Pan","Tilt","Zoom"].forEach(vt=>{B.includes(vt)&&E.push(vt)});const K=((fe=(G=C.global_tags)==null?void 0:G.camera)==null?void 0:fe[0])||E.find(Ue=>["","","","","","Dolly","Pan","Tilt","Zoom"].some(vt=>Ue.includes(vt)))||"";return{id:`shot - ${Date.now()} -${T} `,scene_index:T+1,time_range:C.time_range||"",image_url:"",description:B,prompt:D||R,camera:K,tags:E,status:"draft"}}),p=f.x+f.width+100,m=f.y,_=`node - storyboard - ${Date.now()} `,M={id:_,type:"storyboard-node",x:p,y:m,width:600,height:500,settings:{projectTitle:"AI ",shots:h}};l(C=>[...C,M]),d(C=>[...C,{id:`conn - ${Date.now()} `,from:r,to:_}]),console.log("[] ",h.length,"")},Rn=F.useRef(new Map);F.useRef(null);const eh=async(r,c,f,h=null,p=null)=>{var m;try{const _=Te.find(E=>E.type==="Video"&&(E.id==="sora-2"||E.id==="sora-2-pro"));if(!_){alert(" Sora 2  Sora 2  Sora 2 Pro"),Ko(!1);return}const C=Hs(_.id).key;if(!C){alert(" API Key"),Ko(!1);return}if(f-c<1||f-c>3){alert(" 1-3 "),Ko(!1);return}const T=`${c},${f} `;let I;p&&p.trim()?I=p.trim():I=`${(_.url||Ir).replace(/\/+$/,"")} /sora/v1 / characters`;const D=h?{from_task:h,timestamps:T}:{url:r,timestamps:T};console.log("[Create Character] Request Details:",{endpoint:I,apiKey:C?`${C.substring(0,8)}...${C.substring(C.length-4)} `:"EMPTY",payload:D,fromTaskId:h,videoUrl:h?"N/A (using from_task)":r,customEndpoint:p||"N/A (using default)"});const R=await fetch(I,{method:"POST",headers:{Authorization:`Bearer ${C} `,"Content-Type":"application/json"},body:JSON.stringify(D)});if(!R.ok){const E=await R.text();console.error("[Create Character] API Error:",{status:R.status,statusText:R.statusText,errorText:E,endpoint:I});let K=null;try{K=JSON.parse(E)}catch{}throw R.status===500||K&&(K.code==="get_origin_task_failed"||(m=K.message)!=null&&m.includes("get_origin_task_failed"))?new Error("TASK_NOT_FOUND"):new Error(`API(${R.status}): ${E||R.statusText} `)}const B=await R.json();if(console.log("[Create Character] Success:",B),B.id&&B.username){const E={id:B.id,username:B.username,profile_picture_url:B.profile_picture_url||"",permalink:B.permalink||""},K=[...Fn,E];fd(K),alert(` "${B.username}" `),Da(!1),dc("url"),pc(""),fc(""),k0(1),z0(3),La("")}else throw new Error(" id  username")}catch(_){console.error("[Create Character] Failed:",_);let M=_.message;if(M==="TASK_NOT_FOUND"){alert(`

" URL"`);return}(M.includes("Failed to fetch")||_.name==="TypeError"||_.message.includes("NetworkError"))&&(M=`

1. API 
   -  API  "/sora" 
   -  Sora 

2.  (CORS)
   -  Allow CORS 

3. 
   - `),alert(`: ${M} `)}finally{Ko(!1)}},th=(r,c)=>{var D,R;let f=c.prompt||"";if(!f&&c.description&&(f=c.description),c.tags&&c.tags.length>0){const B=c.tags.join(", ");f+=`, ${B} `}if(c.camera&&(f+=`, ${c.camera} camera movement`),!f){alert("");return}const h=c.model||((D=Te.find(B=>B.type==="Video"&&B.id==="sora-2"))==null?void 0:D.id)||((R=Te.find(B=>B.type==="Video"))==null?void 0:R.id)||"",p=pn.get(h);if(!p||p.type!=="Video"){alert("");return}const m=[];c.image_url&&m.push(c.image_url),c.lastFrame&&m.push(c.lastFrame),Vt(r,c.id,{status:"generating",generationStartTime:Date.now()});let _=c.duration||go(h);const M=Nd(h);M.includes(_)||(console.warn(`[V3.5.5] Duration "${_}" not valid for model "${h}", using "${M[0]}"`),_=M[0]);const C=String(_).endsWith("s")?_:`${_}s`,T={model:h,ratio:c.ratio||"16:9",duration:C,resolution:c.resolution||"720p"};console.log("[V3.5.5 Debug] generateSingleShot overrideOptions:",T);const I=`storyboard-${r}-shot-${c.id}`;qa(f,"video",m,I,T)},nh=(r,c)=>{var T;let f=c.prompt||"";if(!f&&c.description&&(f=c.description),c.tags&&c.tags.length>0){const I=c.tags.join(", ");f+=`, ${I} `}if(!f){alert("");return}const h=c.model||localStorage.getItem("tapnow_last_image_model")||((T=Te.find(I=>I.type==="Image"))==null?void 0:T.id)||"",p=pn.get(h);if(!p||p.type!=="Image"){alert("");return}if(!Hs(h).key){alert(` "${h}"  API Key `),Vt(r,c.id,{status:"failed",errorMsg:"API Key "}),li(!0);return}const _=[];c.image_url&&_.push(c.image_url),c.referenceImages&&c.referenceImages.length>0&&_.push(...c.referenceImages),Vt(r,c.id,{status:"generating",generationStartTime:Date.now()});const M={model:h,ratio:c.ratio||"1:1",resolution:c.resolution||"Auto"};console.log("[V3.6.1] generateSingleImage overrideOptions:",M);const C=`storyboard-img-${r}-shot-${c.id}`;qa(f,"image",_,C,M)},N1=async r=>{var C,T,I,D,R,B;const c=Xt.get(r);if(!c)return;let f=((C=c.settings)==null?void 0:C.content)||"";if(!f){const E=u.find(K=>K.to===r);if(E){const K=Xt.get(E.from);K&&(K.type==="novel-input"||K.type==="text-node")&&(f=((T=K.settings)==null?void 0:T.content)||K.content||"")}}if(!f||f.trim().length===0){alert("");return}const h=(I=c.settings)==null?void 0:I.model;if(!h){alert("");return}const p=pn.get(h);if(!p){alert("");return}const _=Hs(h).key;if(!_){alert(" API Key"),li(!0);return}pt(r,{isAnalyzing:!0});const M=`


${f.substring(0,15e3)} ... ()

 JSON 
{
    "characters": [
        { "name": "", "description": "", "appearance": "" }
    ],
    "scenes": [
        { "location": "", "description": "", "mood": "" }
    ]
}
 JSONmarkdown`;try{const E=((p==null?void 0:p.url)||Ir).replace(/\/+$/,""),K=await fetch(`${E}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({model:p.modelName||"gemini-1.5-pro-latest",messages:[{role:"system",content:"You are a helpful assistant that analyzes novels."},{role:"user",content:M}],temperature:.7})});if(!K.ok)throw new Error(`API Error: ${K.status}`);const J=await K.json(),te=((B=(R=(D=J.choices)==null?void 0:D[0])==null?void 0:R.message)==null?void 0:B.content)||J.content||"";let ne=null;try{const Ce=te.replace(/```json/g,"").replace(/```/g,"").trim();ne=JSON.parse(Ce)}catch(Ce){console.warn("JSON Parse Error, using raw text",Ce)}const re=c.x+c.width+50;let be=c.y;if(ne){if(ne.characters&&ne.characters.length>0){const Ce=ne.characters.map(We=>`**${We.name}**
${We.description}
Appearance: ${We.appearance}`).join(`

`);Es("text-node",re,be,null,Ce),be+=200}if(ne.scenes&&ne.scenes.length>0){const Ce=ne.scenes.map(We=>`**${We.location}**
${We.description}
Mood: ${We.mood}`).join(`

`);Es("text-node",re,be,null,Ce)}}else Es("text-node",re,be,null,te)}catch(E){console.error("Extraction Failed",E),alert(`: ${E.message}`)}finally{pt(r,{isAnalyzing:!1})}},rh=(r,c)=>{var h;const f=(h=c.target.files)==null?void 0:h[0];if(f){const p=new FileReader;p.onload=async m=>{const _=m.target.result;let M={w:0,h:0};try{M=await Ur(_)}catch{}N(),l(C=>C.map(T=>T.id===r?{...T,content:_,dimensions:M}:T))},p.readAsDataURL(f)}},S1=(r,c)=>{if(!r||r.length===0)return[];const f=[...r].sort((_,M)=>_.time-M.time),h=[];let p=[],m=f[0].time;return f.forEach((_,M)=>{_.time-m>=c&&p.length>0?(h.push([...p]),p=[_],m=_.time):p.push(_)}),p.length>0&&h.push(p),h},C1=async r=>{var B,E,K,J,te,ne,re,be,Ce,We,et,G,fe,Ue,vt;const c=Xt.get(r);if(!c||c.type!=="video-analyze")return;const f=Ja(r);if(!f){alert("");return}const h=f.selectedKeyframes||[];if(h.length===0){alert("");return}const p=((B=c.settings)==null?void 0:B.model)||"gemini-3-pro",{key:m,url:_}=Hs(p),M=Te.find(st=>st.id===p);if(!m){alert(" API  Key"),li(!0);return}const C=((E=c.settings)==null?void 0:E.segmentDuration)||3,T=S1(h,C);if(T.length===0){alert("");return}l(st=>st.map(gt=>gt.id===r?{...gt,isGenerating:!0,analysisResults:[]}:gt));const I=[],D=f.videoFileName||"video.mp4";(K=f.videoMeta)!=null&&K.duration;const R=((J=c.settings)==null?void 0:J.analysisMode)||"manual";try{for(let st=0;st<T.length;st++){const gt=T[st],Xe=`${gt[0].time.toFixed(1)}s-${gt[gt.length-1].time.toFixed(1)}s`,ct=`AI

 JSON 
{
  "video_id": "${D}",
  "scene_index": ${st+1},
  "time_range": "${Xe}",
  "keyframes": [
    {
      "type": "prev",
      "time": 5.2,
      "description": "",
      "mj_prompt": "Midjourney ",
      "jimeng_prompt": ""
    },
    {
      "type": "current",
      "time": 6.8,
      "description": "",
      "mj_prompt": "Midjourney ",
      "jimeng_prompt": ""
    },
    {
      "type": "next",
      "time": 8.7,
      "description": "",
      "mj_prompt": "Midjourney ",
      "jimeng_prompt": ""
    }
  ],
  "global_tags": {
    "style": ["", ""],
    "camera": ["", ""],
    "color": [""]
  }
}


1.  prev/current/next 
2. mj_prompt  Midjourney
3. jimeng_prompt AI
4. global_tags `,Nt=[{type:"text",text:` ${st+1}${Xe}`}],ht=15,Lt=gt.length>ht?gt.slice(0,ht):gt;Lt.forEach((Cn,Vn)=>{Nt.push({type:"image_url",image_url:{url:Cn.url}}),Vn<Lt.length-1&&Nt.push({type:"text",text:` ${Vn+1}${Cn.time.toFixed(2)}s`})}),gt.length>ht&&Nt.push({type:"text",text:` ${gt.length} API ${ht} `});const Kt=[{role:"system",content:ct},{role:"user",content:Nt}],Et=new AbortController,Bt=setTimeout(()=>Et.abort(),6e4);let Ot;try{Ot=await fetch(`${_}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({model:(M==null?void 0:M.id)||"gemini-3-pro",messages:Kt,stream:!1}),signal:Et.signal})}catch(Cn){throw clearTimeout(Bt),Cn.name==="AbortError"?new Error(""):Cn.message&&Cn.message.includes("Failed to fetch")?new Error(` API  (${_})
1. API 
2. 
3. API `):new Error(`: ${Cn.message}`)}finally{clearTimeout(Bt)}if(!Ot.ok){let Cn="";try{Cn=await Ot.text()}catch{Cn=`HTTP ${Ot.status}: ${Ot.statusText}`}throw new Error(Cn||`API Error: ${Ot.status}`)}const It=await Ot.json();console.log("[] API :",{hasData:!!It,hasChoices:!!It.choices,choicesLength:(te=It.choices)==null?void 0:te.length,dataKeys:Object.keys(It||{}),model:(M==null?void 0:M.modelName)||(M==null?void 0:M.id)});let on=null;if(It.choices&&It.choices.length>0?on=(re=(ne=It.choices[0])==null?void 0:ne.message)==null?void 0:re.content:(be=It.data)!=null&&be.choices&&It.data.choices.length>0?on=(We=(Ce=It.data.choices[0])==null?void 0:Ce.message)==null?void 0:We.content:It.content?on=It.content:(et=It.data)!=null&&et.content?on=It.data.content:It.text?on=It.text:(G=It.data)!=null&&G.text?on=It.data.text:It.message?on=typeof It.message=="string"?It.message:It.message.content:(fe=It.data)!=null&&fe.message?on=typeof It.data.message=="string"?It.data.message:It.data.message.content:It.result?on=typeof It.result=="string"?It.result:It.result.content:(Ue=It.data)!=null&&Ue.result&&(on=typeof It.data.result=="string"?It.data.result:It.data.result.content),!on||on.trim()===""||on==="{}")throw console.error("[] API :",It),new Error(`API : ${JSON.stringify(It).substring(0,200)}`);console.log("[] :",on.length,"100:",on.substring(0,100));let yn=on.trim();yn.startsWith("```")&&(yn=yn.replace(/^```(?:json)?\n?/,"").replace(/\n?```$/,""));let vn;try{vn=JSON.parse(yn),console.log("[] JSON :",vn.scene_index||st+1)}catch(Cn){console.error("[]  JSON :",Cn,"500:",yn.substring(0,500));try{yn=yn.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,""),yn=yn.replace(/,(\s*[}\]])/g,"$1"),vn=JSON.parse(yn),console.log("[] JSON ")}catch(Vn){console.error("[] JSON:",Vn,":",yn),vn={video_id:D,scene_index:st+1,time_range:Xe,keyframes:gt.map((ln,an)=>({type:an===0?"prev":an===1?"current":"next",time:ln.time,description:` ${ln.time.toFixed(1)}s`,mj_prompt:"A detailed scene from the video",jimeng_prompt:""})),global_tags:{style:[],camera:[],color:[]}},console.warn("[] :",yn.substring(0,200))}}if(I.push(vn),console.log("[] :",I.length),l(Cn=>Cn.map(Vn=>{if(Vn.id===r){const an=[...Vn.analysisResults||[],vn];return console.log("[] :",an.length),{...Vn,analysisResults:an}}return Vn})),!(R==="manual")){const Vn={id:`analyze-${r}-${st}-${Date.now()}`,type:"analyze",prompt:` -  ${st+1}`,url:((vt=gt[0])==null?void 0:vt.url)||"",status:"completed",progress:100,modelName:(M==null?void 0:M.provider)||"Gemini 3 Pro",time:new Date().toLocaleString("zh-CN"),sourceNodeId:r,analysisResult:vn,videoFileName:D,sceneIndex:st+1,timeRange:Xe};St(ln=>[Vn,...ln])}}console.log("[] :",I.length),l(st=>st.map(gt=>{if(gt.id===r){const Xe=I.length>0?I:gt.analysisResults||[];return console.log("[] :",Xe.length),{...gt,isGenerating:!1,analysisResults:Xe}}return gt}))}catch(st){console.error(":",st);const gt=st.message||"";l(Xe=>Xe.map(ct=>ct.id===r?{...ct,isGenerating:!1,errorMsg:gt}:ct))}},E1=async r=>{var M,C,T,I,D,R,B,E,K,J,te;const c=Xt.get(r);if(!c||c.type!=="video-analyze")return;const f=Ja(r);if(!f||!f.content){alert("");return}let h=f.content;if(h.startsWith("blob:"))try{console.log("Converting Blob URL to Base64 for API...");const ne=await fetch(h).then(re=>re.blob());h=await new Promise((re,be)=>{const Ce=new FileReader;Ce.onerror=()=>be(new Error("FileReader failed")),Ce.onloadend=()=>re(Ce.result),Ce.readAsDataURL(ne)})}catch(ne){console.error("Blob conversion failed",ne),alert(" AI");return}let p=Te.find(ne=>ne.id==="gemini-3-pro"&&ne.type==="Chat");p||(p=Te.find(ne=>{var be;return(((be=ne.id)==null?void 0:be.toLowerCase())||"").includes("gemini")&&ne.type==="Chat"})),p||(p=Te.find(ne=>ne.type==="Chat"));const{key:m,url:_}=Hs((p==null?void 0:p.id)||"gemini-3-pro");if(!m){alert(" API  Key"),li(!0);return}l(ne=>ne.map(re=>re.id===r?{...re,isGenerating:!0,settings:{...re.settings,voiceoverResults:[],analysisResults:[]}}:re));try{const be=[{role:"system",content:`******AI**

1. ****

2. ****Voiceover

 **JSON **Markdown

{
  "voiceover_script": [
    { "time_range": "0s-3s", "text": "..." }
  ],
  "scenes": [
    {
      "scene_id": 1,
      "time_range": "0s-2.5s",
      "visual_analysis": {
        "camera_movement": "(Dolly Zoom Out) (Orbit)",
        "subject_dynamics": "",
        "atmosphere": ""
      },
      "prompts": {
        "jimeng_prompt": "()+++()...",
        "mj_prompt": "Midjourney Prompt: English description, include camera directives like 'dynamic angle', 'fast zoom out', 'cinematic lighting'..."
      }
    }
  ]
}

****
- ****
- ****""
- ****`},{role:"user",content:[{type:"text",text:"JSON"},{type:"image_url",image_url:{url:h}}]}],Ce=new AbortController,We=setTimeout(()=>Ce.abort(),12e4);let et;try{et=await fetch(`${_}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({model:(p==null?void 0:p.id)||"gemini-3-pro",messages:be,stream:!1}),signal:Ce.signal})}catch(Xe){throw clearTimeout(We),Xe.name==="AbortError"?new Error("120"):Xe.message&&Xe.message.includes("Failed to fetch")?new Error(` API  (${_})
1. API 
2. 
3. API 
4.  API Key`):new Error(`: ${Xe.message}`)}finally{clearTimeout(We)}if(!et.ok){let Xe="";try{Xe=await et.text()}catch{Xe=`HTTP ${et.status}: ${et.statusText}`}throw new Error(Xe||`API Error: ${et.status}`)}const G=await et.json();console.log("[AI] API :",{hasData:!!G,hasChoices:!!G.choices,choicesLength:(M=G.choices)==null?void 0:M.length,dataKeys:Object.keys(G||{}),model:(p==null?void 0:p.modelName)||(p==null?void 0:p.id)});let fe=null;if(G.choices&&G.choices.length>0?fe=(T=(C=G.choices[0])==null?void 0:C.message)==null?void 0:T.content:(I=G.data)!=null&&I.choices&&G.data.choices.length>0?fe=(R=(D=G.data.choices[0])==null?void 0:D.message)==null?void 0:R.content:G.content?fe=G.content:(B=G.data)!=null&&B.content?fe=G.data.content:G.text?fe=G.text:(E=G.data)!=null&&E.text?fe=G.data.text:G.message?fe=typeof G.message=="string"?G.message:G.message.content:(K=G.data)!=null&&K.message?fe=typeof G.data.message=="string"?G.data.message:G.data.message.content:G.result?fe=typeof G.result=="string"?G.result:G.result.content:(J=G.data)!=null&&J.result&&(fe=typeof G.data.result=="string"?G.data.result:G.data.result.content),!fe||fe.trim()===""||fe==="{}")throw console.error("[AI] API :",G),new Error(`API : ${JSON.stringify(G).substring(0,200)}`);console.log("[AI] :",fe.length,"100:",fe.substring(0,100));let Ue=fe.trim();Ue.startsWith("```")&&(Ue=Ue.replace(/^```(?:json)?\n?/,"").replace(/\n?```$/,""));let vt;try{vt=JSON.parse(Ue),console.log("[AI] JSON :",((te=vt.scenes)==null?void 0:te.length)||0)}catch(Xe){console.error("[AI]  JSON :",Xe,"500:",Ue.substring(0,500));try{Ue=Ue.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,""),Ue=Ue.replace(/,(\s*[}\]])/g,"$1"),vt=JSON.parse(Ue),console.log("[AI] JSON ")}catch(ct){throw console.error("[AI] JSON:",ct,":",Ue.substring(0,500)),new Error(` JSON : ${Ue.substring(0,200)}`)}}const st=(vt.voiceover_script||[]).map((Xe,ct)=>({time:ct,text:Xe.text||""}));console.log("[AI] :",st.length);const gt=(vt.scenes||[]).map((Xe,ct)=>{var Nt,ht,Lt,Kt,Et,Bt;return{scene_index:Xe.scene_id||ct+1,time_range:Xe.time_range||"",keyframes:[{type:"current",time:0,description:`${((Nt=Xe.visual_analysis)==null?void 0:Nt.camera_movement)||""} ${((ht=Xe.visual_analysis)==null?void 0:ht.subject_dynamics)||""}`.trim(),mj_prompt:((Lt=Xe.prompts)==null?void 0:Lt.mj_prompt)||"",jimeng_prompt:((Kt=Xe.prompts)==null?void 0:Kt.jimeng_prompt)||""}],global_tags:{style:(Et=Xe.visual_analysis)!=null&&Et.atmosphere?[Xe.visual_analysis.atmosphere]:[],camera:(Bt=Xe.visual_analysis)!=null&&Bt.camera_movement?[Xe.visual_analysis.camera_movement]:[],color:[]}}});console.log("[AI] :",gt.length),l(Xe=>Xe.map(ct=>ct.id===r?(console.log("[AI] :",gt.length,":",st.length),{...ct,isGenerating:!1,settings:{...ct.settings,voiceoverResults:st,analysisResults:gt}}):ct)),gt.length>0&&setTimeout(()=>{_1(r,gt)},100)}catch(ne){console.error("AI:",ne);const re=ne.message||"AI";l(be=>be.map(Ce=>Ce.id===r?{...Ce,isGenerating:!1,errorMsg:re}:Ce))}},I1=()=>{const r=Nn.name.trim(),c=Nn.prompt.trim();if(!r||!c){alert("");return}nr(f=>[{id:`custom-${Date.now()}`,name:r,prompt:c},...f]),cr({name:"",prompt:""})},T1=r=>{nr(c=>c.filter(f=>f.id!==r))},M1=(r,c)=>{!r||!c||pt(r,{prompt:c})},$1=async r=>new Promise((c,f)=>{const h=new Image;h.crossOrigin="anonymous";const p=setTimeout(()=>{f(new Error(""))},3e4);h.onload=()=>{clearTimeout(p);try{const _=document.createElement("canvas").getContext("2d"),M=Math.floor(h.width/3),C=Math.floor(h.height/3),T=[],I=[];for(let D=0;D<3;D++)for(let R=0;R<3;R++){const B=Math.max(0,Math.min(R*M,h.width-M)),E=Math.max(0,Math.min(D*C,h.height-C)),K=Math.min(M,h.width-B),J=Math.min(C,h.height-E),te=document.createElement("canvas");te.width=K,te.height=J;const ne=te.getContext("2d");ne.fillStyle="#ffffff",ne.fillRect(0,0,K,J),ne.drawImage(h,B,E,K,J,0,0,K,J);try{const re=te.toDataURL("image/png");I.push(Promise.resolve({url:re,width:K,height:J}))}catch(re){console.error("Canvas toDataURL :",re)}}Promise.all(I).then(D=>{c(D)}).catch(D=>{f(D)})}catch(m){f(m)}},h.onerror=()=>{clearTimeout(p),f(new Error(""))},h.src=r}),Qa=async(r,c={})=>{if(!r)return;const{originX:f,originY:h,cols:p=3,spacing:m=20,nodeWidth:_=260,nodeHeight:M=260,replaceSelected:C=!1}=c;try{const T=await $1(r);if(T.length!==9){alert("9");return}const I=Fs.current;if(C&&I&&I.size===9){const K=Array.from(I);l(J=>J.map(te=>{const ne=K.indexOf(te.id);return ne!==-1&&ne<T.length?{...te,content:T[ne].url,dimensions:{w:T[ne].width,h:T[ne].height}}:te}));return}const D=xn(window.innerWidth/2,window.innerHeight/2),R=f!==void 0?f:D.x,B=h!==void 0?h:D.y,E=[];for(let K=0;K<T.length;K++){const J=Math.floor(K/p),te=K%p,ne=R+te*(_+m),re=B+J*(M+m);E.push({id:`node-${Date.now()}-${K}`,type:"input-image",x:ne,y:re,width:_,height:M,content:T[K].url,dimensions:{w:T[K].width,h:T[K].height}})}l(K=>[...K,...E])}catch(T){alert(": "+T.message)}},A1=()=>{const r=Ri.current,c=Fs.current;let f=[];if(r){const J=ls.current.find(te=>te.id===r);J&&(f=[J])}else c&&c.size>0&&(f=ls.current.filter(J=>c.has(J.id)));if(f.length<2){alert("");return}const h=new Set(f.map(J=>J.id)),p={};f.forEach(J=>{p[J.id]={id:J.id,node:J,parents:[],children:[],level:0,rank:0}}),Ha.current.forEach(J=>{h.has(J.from)&&h.has(J.to)&&(p[J.from].children.push(J.to),p[J.to].parents.push(J.from))});let m=Object.values(p).filter(J=>J.parents.length===0);m.length===0&&f.length>0&&(m=[Object.values(p)[0]]),(()=>{const J=m.map(te=>({node:te,lvl:0}));for(;J.length>0;){const{node:te,lvl:ne}=J.shift();ne>=te.level&&(te.level=ne,te.children.forEach(re=>{const be=p[re];be&&ne<20&&J.push({node:be,lvl:ne+1})}))}})();const M=Math.max(...Object.values(p).map(J=>J.level)),C=Array.from({length:M+1},()=>[]);Object.values(p).forEach(J=>{C[J.level].push(J)}),C.forEach(J=>{J.sort((te,ne)=>te.node.y-ne.node.y)});const T=3;for(let J=0;J<T;J++){for(let te=1;te<C.length;te++){const ne=C[te];ne.forEach(re=>{if(re.parents.length>0){let be=0;re.parents.forEach(Ce=>{const We=p[Ce],et=C[te-1].indexOf(We);et!==-1&&(be+=et)}),re.barycenter=be/re.parents.length}else re.barycenter=C[te].indexOf(re)}),ne.sort((re,be)=>(re.barycenter||0)-(be.barycenter||0))}for(let te=C.length-2;te>=0;te--){const ne=C[te];ne.forEach(re=>{if(re.children.length>0){let be=0;re.children.forEach(Ce=>{const We=p[Ce],et=C[te+1].indexOf(We);et!==-1&&(be+=et)}),re.barycenter=be/re.children.length}else re.barycenter=C[te].indexOf(re)}),ne.sort((re,be)=>(re.barycenter||0)-(be.barycenter||0))}}const I=Math.min(...f.map(J=>J.x)),D=Math.min(...f.map(J=>J.y)),R=150,B=40;let E=I;const K=new Map;C.forEach((J,te)=>{if(J.length===0)return;const ne=Math.max(...J.map(be=>be.node.width||260));J.reduce((be,Ce)=>be+(Ce.node.height||200),0)+(J.length-1)*B;let re=D;J.forEach(be=>{K.set(be.id,{...be.node,x:E,y:re}),re+=(be.node.height||200)+B}),E+=ne+R}),l(J=>J.map(te=>K.has(te.id)?K.get(te.id):te))},sh=(r,c)=>{c.preventDefault(),c.stopPropagation(),c.currentTarget.classList.remove("drag-over");const f=Array.from(c.dataTransfer.files),h=f.find(m=>m.type.startsWith("video/"));if(h){Va(r,h);return}const p=f.filter(m=>m.type.startsWith("image/"));if(p.sort((m,_)=>m.name.localeCompare(_.name,void 0,{numeric:!0,sensitivity:"base"})),p.length>0){console.log(`[KeyframeOrganizer] Adding ${p.length} images as keyframes`);const m=Xt.get(r),_=(m==null?void 0:m.frames)||[],M=(m==null?void 0:m.selectedKeyframes)||[];let C=0;const T=[];p.forEach((I,D)=>{const R=new FileReader;R.onload=async B=>{const E=B.target.result,K=await bi.saveImage(E);if(console.log(`[KeyframeOrganizer] Saved image to IndexedDB: ${K}`),T[D]={time:_.length+D,url:K,filename:I.name},C++,C===p.length){const J=T.filter(Boolean);l(te=>te.map(ne=>ne.id===r?{...ne,frames:[..._,...J],selectedKeyframes:[...M,...J]}:ne)),console.log(`[KeyframeOrganizer] Added ${J.length} keyframes to node (stored in IndexedDB)`)}},R.readAsDataURL(I)})}},P1=(r,c,f)=>{r.preventDefault(),r.stopPropagation();const h=r.currentTarget.getBoundingClientRect(),m=r.clientX-h.left>h.width/2?f+1:f;(y!==m||P!==c)&&(S(m),x(c))},R1=(r,c,f)=>{r.preventDefault(),r.stopPropagation(),r.target===r.currentTarget&&(y!==f||P!==c)&&(S(f),x(c))},D1=(r,c)=>{var T;c.preventDefault(),c.stopPropagation();const f=Array.from(c.dataTransfer.files).filter(I=>I.type.startsWith("image/"));if(f.length===0)return;let h=P===r&&y!==null?y:(((T=Xt.get(r))==null?void 0:T.frames)||[]).length;x(null),S(null),f.sort((I,D)=>I.name.localeCompare(D.name,void 0,{numeric:!0,sensitivity:"base"})),console.log(`[KeyframeOrganizer] Inserting ${f.length} images at index ${h}`);const p=Xt.get(r),m=(p==null?void 0:p.frames)||[],_=(p==null?void 0:p.selectedKeyframes)||[];let M=0;const C=[];f.forEach((I,D)=>{const R=new FileReader;R.onload=async B=>{const E=B.target.result,K=await bi.saveImage(E);let J=E;try{const te=await bi.getImage(K);te&&(J=URL.createObjectURL(te))}catch(te){console.warn("[KeyframeOrganizer] Failed to create blob URL, using base64:",te)}if(C[D]={time:Date.now()+D,url:J,imgId:K,filename:I.name},M++,M===f.length){const te=C.filter(Boolean),ne=[...m.slice(0,h),...te,...m.slice(h)],re=new Set([..._,...te]),be=ne.map((We,et)=>({...We,time:et})),Ce=be.filter((We,et)=>re.has(ne[et]));l(We=>We.map(et=>et.id===r?{...et,frames:be,selectedKeyframes:Ce}:et))}},R.readAsDataURL(I)})},L1=async(r,c=30)=>new Promise((f,h)=>{const p=document.createElement("video");p.crossOrigin="anonymous",p.src=r,p.muted=!0;const m=document.createElement("canvas"),_=m.getContext("2d",{willReadFrequently:!0}),M=[];let C=null;p.onloadeddata=async()=>{m.width=320,m.height=Math.floor(320*(p.videoHeight/p.videoWidth));const T=p.duration,I=2;p.currentTime=0;const D=async()=>{const R=p.currentTime;if(R>=T||Math.abs(R-T)<.01){if(M.length===0||parseFloat(M[M.length-1].time)<T-.5){const K=document.createElement("canvas");K.width=p.videoWidth,K.height=p.videoHeight;const J=K.getContext("2d");p.currentTime=Math.max(0,T-.1),await new Promise(te=>{const ne=setTimeout(()=>te(),200);p.onseeked=()=>{clearTimeout(ne),J.drawImage(p,0,0);const re=Math.max(0,T-.1);M.push({time:re.toFixed(2),image:K.toDataURL("image/jpeg",.8)}),te()}})}f(M.map(K=>({time:parseFloat(K.time),url:K.image})));return}_.drawImage(p,0,0,m.width,m.height);const B=_.getImageData(0,0,m.width,m.height).data;if(C){let K=0;for(let te=0;te<B.length;te+=4)K+=Math.abs(B[te]-C[te])+Math.abs(B[te+1]-C[te+1])+Math.abs(B[te+2]-C[te+2]);if(K/(B.length/4*3)>c){const te=document.createElement("canvas");te.width=p.videoWidth,te.height=p.videoHeight,te.getContext("2d").drawImage(p,0,0);const ne=te.toDataURL("image/jpeg",.8),re=p.currentTime;M.push({time:re.toFixed(2),image:ne}),C=null}else C=B}else{C=B;const K=p.currentTime,J=document.createElement("canvas");J.width=p.videoWidth,J.height=p.videoHeight,J.getContext("2d").drawImage(p,0,0),M.push({time:K.toFixed(2),image:J.toDataURL("image/jpeg",.8)})}const E=p.currentTime+1/I;if(E>=T){if(M.length===0||parseFloat(M[M.length-1].time)<T-.5){const K=document.createElement("canvas");K.width=p.videoWidth,K.height=p.videoHeight;const J=K.getContext("2d");p.currentTime=Math.max(0,T-.1),await new Promise(te=>{const ne=setTimeout(()=>te(),200);p.onseeked=()=>{clearTimeout(ne),J.drawImage(p,0,0);const re=Math.max(0,T-.1);M.push({time:re.toFixed(2),image:K.toDataURL("image/jpeg",.8)}),te()}})}f(M.map(K=>({time:parseFloat(K.time),url:K.image})));return}p.currentTime=E,await new Promise(K=>{const J=setTimeout(()=>K(),200);p.onseeked=()=>{clearTimeout(J),K()}}),D()};D()},p.onerror=T=>h(new Error(""))}),O1=async(r,c=2)=>{const f=Xt.get(r);if(f!=null&&f.content){l(h=>h.map(p=>p.id===r?{...p,extractingFrames:!0}:p));try{const h=await zk(f.content,{fps:c});l(p=>p.map(m=>m.id===r?{...m,frames:h,selectedKeyframes:[],extractingFrames:!1}:m))}catch(h){console.error("",h),l(p=>p.map(m=>m.id===r?{...m,extractingFrames:!1}:m))}}},U1=async(r,c=30)=>{const f=Xt.get(r);if(f!=null&&f.content){l(h=>h.map(p=>p.id===r?{...p,extractingFrames:!0}:p));try{const h=await L1(f.content,c);l(p=>p.map(m=>m.id===r?{...m,frames:h,selectedKeyframes:[],extractingFrames:!1}:m))}catch(h){console.error("",h),alert(`: ${h.message}`),l(p=>p.map(m=>m.id===r?{...m,extractingFrames:!1}:m))}}},F1=(r,c,f=0,h=null)=>{const p=!!(h!=null&&h.shiftKey);l(m=>m.map(_=>{if(_.id!==r)return _;const M=_.frames||[],C=R=>`${R.time}-${R.url}`,T=new Map(M.map(R=>[C(R),R]));let D=[..._.selectedKeyframes||[]];if(p&&xc.current[r]!==void 0&&xc.current[r]!==null&&M.length>0){const R=xc.current[r],B=Math.min(R,f),E=Math.max(R,f),K=M.slice(B,E+1),J=new Set(D.map(C));K.forEach(te=>J.add(C(te))),D=Array.from(J).map(te=>T.get(te)).filter(Boolean)}else D=D.some(B=>C(B)===C(c))?D.filter(B=>C(B)!==C(c)):[...D,c];return xc.current[r]=f,{..._,selectedKeyframes:D}}))},B1=(r,c,f)=>{r.preventDefault(),r.stopPropagation(),dd({visible:!0,x:r.clientX,y:r.clientY,nodeId:c,frame:f})},Cc=()=>{dd({visible:!1,x:0,y:0,nodeId:null,frame:null})},H1=()=>{const{frame:r}=Ai;if(!(r!=null&&r.url))return;const c={name:`Frame-${(r.time??0).toFixed(2)}s.png`,type:"image/png",content:r.url,isImage:!0,isVideo:!1,isAudio:!1,fromHistory:!0,fileExt:"png"};ns(f=>[...f,c]),lr(!0),Cc()},W1=async()=>{const{frame:r}=Ai;if(!(r!=null&&r.url))return;let c=r.url;if(c.startsWith("blob:"))try{c=`data:image/png;base64,${await ur(c)}`,console.log("  Blob URL  Data URL")}catch(I){console.error(" Blob URL  URL:",I)}let f;try{const I=await Ur(c);I!=null&&I.w&&(I!=null&&I.h)&&(f={w:I.w,h:I.h})}catch{}const h=a.filter(I=>I.type==="input-image");let p,m;if(h.length>0){const I=h[h.length-1];p=I.x-40,m=I.y+35}else{const I=xn(window.innerWidth/2,window.innerHeight/2);p=I.x+50,m=I.y+50}let _=p,M=m;const C=(I,D)=>a.some(R=>Math.abs(R.x-I)<80&&Math.abs(R.y-D)<80);let T=0;for(;C(_,M)&&T<50;)_-=40,M+=35,T++;Es("input-image",_,M,null,c,f),Cc()},V1=()=>{const{frame:r}=Ai;r!=null&&r.url&&(l(c=>{const f=Ri.current,h=Fs.current,p=c.filter(_=>_.type==="preview");if(!p.length)return c;let m=null;if(f){const _=p.find(M=>M.id===f);_&&(m=_.id)}if(!m&&h&&h.size>0){const _=p.find(M=>h.has(M.id));_&&(m=_.id)}return m||(m=p[p.length-1].id),c.map(_=>_.id===m?{..._,content:r.url,previewType:"image"}:_)}),Cc())},K1=()=>{const{frame:r}=Ai;if(!(r!=null&&r.url))return;const c=X,f=Xt.get(c);f&&f.type==="input-image"?l(h=>h.map(p=>p.id===c?{...p,content:r.url}:p)):alert('""'),Cc()},Ec=(r,c,f=null,h=null)=>{r.preventDefault(),r.stopPropagation();const p=f||c.url,m=h!==null?h:c.selectedMjImageIndex!==void 0?c.selectedMjImageIndex:null,_={...c,url:p,selectedMjImageIndex:m},M=xn(r.clientX,r.clientY);Ss({visible:!0,x:r.clientX,y:r.clientY,worldX:M.x,worldY:M.y,item:_})},Y1=()=>{const r=vr.item,c=X,f=Xt.get(c);f&&f.type==="input-image"&&r.url?l(h=>h.map(p=>p.id===c?{...p,content:r.url}:p)):alert('""'),Ss({visible:!1,x:0,y:0,item:null})},G1=async()=>{const r=vr.item;if(!(r!=null&&r.url))return;let c=r.url;r.type==="video"&&!pr(c)&&(c+=(c.includes("?")?"&":"?")+"force_video_display=true");let f;if(r.type==="image")try{const I=await Ur(c);I!=null&&I.w&&(I!=null&&I.h)&&(f={w:I.w,h:I.h})}catch(I){console.error("SendHistoryToCanvas getImageDimensions error",I)}const h=a.filter(I=>I.type==="input-image");let p,m;if(h.length>0){const I=h[h.length-1];p=I.x-40,m=I.y+35}else{const I=xn(window.innerWidth/2,window.innerHeight/2);p=I.x+50,m=I.y+50}let _=p,M=m;const C=(I,D)=>a.some(R=>Math.abs(R.x-I)<80&&Math.abs(R.y-D)<80);let T=0;for(;C(_,M)&&T<50;)_-=40,M+=35,T++;Es("input-image",_,M,null,c,f),Ss({visible:!1,x:0,y:0,item:null})},X1=()=>{const r=vr.item;if(!r||!r.url)return;const c=r.type==="image",f=r.type==="video",h=c?"png":f?"mp4":"file",p=c?"image/png":f?"video/mp4":"application/octet-stream",m={name:`Generated-${r.id}.${h}`,type:p,content:r.url,isImage:c,isVideo:f,isAudio:!1,fromHistory:!0,fileExt:h};ns(_=>[..._,m]),lr(!0),Ss({visible:!1,x:0,y:0,item:null})},Sd=async r=>{if(console.log("[V3.5.1 Debug] handleHistoryBatchDownload called with",r==null?void 0:r.length,"items"),!r||r.length===0){console.warn("[V3.5.1 Debug] No items to download");return}if(r.length===1){const p=r[0];if(!(p!=null&&p.mjImages)&&(p==null?void 0:p.url)){Sr({active:!0,current:0,total:1});try{const _=p.url;let M="mp4";if(_.startsWith("data:image"))M="png";else if(_.startsWith("data:video"))M="mp4";else if(p.type==="video"||_.includes("/video/")||_.includes("video_mp4"))M="mp4";else if(p.type==="image")M="png";else{const D=_.split("?")[0].split("/").pop();if(D&&D.includes(".")){const R=D.split(".").pop();R&&R.length<=5&&/^[a-z0-9]+$/i.test(R)&&(M=R)}}const T=`${(p.prompt||"download").replace(/[\\/:*?"<>|]/g,"_").slice(0,50)}.${M}`;if(_.startsWith("data:")){const I=document.createElement("a");I.href=_,I.download=T,I.click(),console.log("  (data URL):",T)}else{console.log(" ...",T);const D=await(await fetch(_)).blob(),R=document.createElement("a");R.href=URL.createObjectURL(D),R.download=T,R.click(),console.log(" :",T)}Sr({active:!1,current:1,total:1})}catch(_){console.error(":",_),Sr({active:!1,current:0,total:0}),alert(": "+_.message)}return}}const c=new dk;let f=0;const h=r.length;console.log(`  ${h} ...`),Sr({active:!0,current:0,total:h});try{for(const M of r){if(!M)continue;const C=[];M.mjImages&&M.mjImages.length>0?M.mjImages.forEach((T,I)=>{C.push({url:T,suffix:`_${I+1}`})}):M.url&&C.push({url:M.url,suffix:""});for(const T of C)try{let I;if(T.url.startsWith("data:")){const K=T.url.split(","),J=K[0].match(/:(.*?);/)[1],te=atob(K[1]);let ne=te.length;const re=new Uint8Array(ne);for(;ne--;)re[ne]=te.charCodeAt(ne);I=new Blob([re],{type:J})}else I=await(await fetch(T.url)).blob();let D=I.type.split("/")[1]||"png";if(M.url&&!M.url.startsWith("data:")){const K=M.url.split(".").pop().split("?")[0];K&&K.length<5&&(D=K)}const R=(M.prompt||"untitled").replace(/[\\/:*?"<>|]/g,"_").slice(0,40),B=M.id?`_${M.id.slice(-4)}`:"",E=`${R}${B}${T.suffix}.${D}`;c.file(E,I),f++}catch(I){console.error(` [${M.id}]:`,I)}Sr(T=>({...T,current:T.current+1}))}if(f===0){Sr({active:!1,current:0,total:0}),alert("");return}const p=await c.generateAsync({type:"blob"}),m=new Date,_=`${m.getFullYear().toString().slice(2)}${(m.getMonth()+1).toString().padStart(2,"0")}${m.getDate().toString().padStart(2,"0")}-${m.getHours().toString().padStart(2,"0")}${m.getMinutes().toString().padStart(2,"0")}`;pk.saveAs(p,`tapnow-assets-${_}.zip`),console.log(`  ${f} `),Sr({active:!1,current:0,total:0})}catch(p){console.error(":",p),Sr({active:!1,current:0,total:0}),alert(": "+p.message)}},el=(r,c)=>{c!=null&&c.url&&(r.preventDefault(),r.stopPropagation(),v0({visible:!0,x:r.clientX,y:r.clientY,item:c}))},xo=()=>v0({visible:!1,x:0,y:0,item:null}),J1=()=>{const r=Pi.item;if(!(r!=null&&r.url))return;const c=r.type!=="video",f=r.type==="video",h=c?"png":"mp4",p=c?"image/png":"video/mp4",m={name:`Preview-${Date.now()}.${h}`,type:p,content:r.url,isImage:c,isVideo:f,isAudio:!1,fileExt:h};ns(_=>[..._,m]),lr(!0),xo()},Z1=async()=>{const r=Pi.item;if(!(r!=null&&r.url))return;const c=xn(window.innerWidth/2,window.innerHeight/2);let f={w:512,h:512};try{f=await Ur(r.url)}catch(h){console.warn("Preview dims fail",h)}Es("input-image",c.x+50,c.y+50,null,r.url,f),xo()},q1=(r,c)=>{r.preventDefault(),r.stopPropagation();const f=Xt.get(c);!f||!f.content||b0({visible:!0,x:r.clientX,y:r.clientY,nodeId:c})},Cd=()=>{b0({visible:!1,x:0,y:0,nodeId:null})},Q1=()=>{const r=Ra.nodeId,c=Xt.get(r);if(!c||!c.content)return;const f=!pr(c.content),h=pr(c.content),p=f?"png":"mp4",m=f?"image/png":"video/mp4",_={name:`InputImage-${Date.now()}.${p}`,type:m,content:c.content,isImage:f,isVideo:h,isAudio:!1,fileExt:p};ns(M=>[...M,_]),lr(!0),Cd()},ih=F.memo(({connections:r,nodesMap:c,connectionsByNode:f,connectingSource:h,connectingTarget:p,connectingInputType:m,mousePos:_,apiConfigsMap:M,selectedNodeId:C,onDisconnectConnection:T,visibleNodes:I})=>{const D=F.useMemo(()=>new Set(I.map(B=>B.id)),[I]),R=F.useMemo(()=>r.filter(B=>D.has(B.from)||D.has(B.to)),[r,D]);return i.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible w-full h-full",children:i.jsxs("svg",{className:"absolute inset-0 overflow-visible w-full h-full pointer-events-none",children:[R.map(B=>{var vt;const E=c.get(B.from),K=c.get(B.to);if(!E||!K)return null;const J=C&&(E.id===C||K.id===C),te=J?1:.35,ne=E.x+E.width-4,re=E.y+E.height/2,be=K.x+4;let Ce=K.y+K.height/2;if(K.type==="image-compare"){const gt=(f.to.get(K.id)||[]).findIndex(Xe=>Xe.id===B.id);gt===0?Ce=K.y+K.height*.33:gt>=1&&(Ce=K.y+K.height*.66)}if(K.type==="gen-image"&&(B.inputType==="oref"||B.inputType==="sref")){const st=M.get((vt=K.settings)==null?void 0:vt.model);if(st&&(st.id.includes("mj")||st.provider.toLowerCase().includes("midjourney"))){const yn=(f.to.get(K.id)||[]).some(ds=>!ds.inputType||ds.inputType==="default");let vn=12;vn+=24,yn&&(vn+=68),vn+=108,B.inputType==="oref"?Ce=K.y+vn+16*.5:B.inputType==="sref"&&(Ce=K.y+vn+16+6+28+6+16*.5)}}const We=Math.abs(be-ne),et=ne+We*.5,G=be-We*.5,fe=(ne+be)/2,Ue=(re+Ce)/2;return i.jsxs("g",{className:"connection-group",style:{opacity:te},children:[i.jsx("path",{d:`M ${ne} ${re} C ${et} ${re}, ${G} ${Ce}, ${be} ${Ce}`,stroke:"transparent",strokeWidth:"20",fill:"none",style:{pointerEvents:"stroke"}}),i.jsx("path",{d:`M ${ne} ${re} C ${et} ${re}, ${G} ${Ce}, ${be} ${Ce}`,stroke:"#18181b",strokeWidth:"4",fill:"none"}),i.jsx("path",{d:`M ${ne} ${re} C ${et} ${re}, ${G} ${Ce}, ${be} ${Ce}`,stroke:"#71717a",strokeWidth:"2",fill:"none"}),i.jsx("circle",{cx:ne,cy:re,r:"2",fill:"#71717a"}),i.jsx("circle",{cx:be,cy:Ce,r:"2",fill:"#71717a"}),i.jsxs("g",{className:"connection-delete cursor-pointer",style:{opacity:J?1:.35,pointerEvents:"auto",cursor:"pointer"},onClick:st=>{st.stopPropagation(),st.preventDefault(),T(B.id)},onMouseDown:st=>{st.stopPropagation(),st.preventDefault(),T(B.id)},children:[i.jsx("circle",{cx:fe,cy:Ue,r:"25",fill:"transparent",style:{pointerEvents:"auto",cursor:"pointer"},onClick:st=>{st.stopPropagation(),st.preventDefault(),T(B.id)},onMouseDown:st=>{st.stopPropagation(),st.preventDefault(),T(B.id)}}),i.jsx("circle",{cx:fe,cy:Ue,r:"12",fill:"#ef4444",opacity:"0.8",style:{pointerEvents:"none"}}),i.jsx("circle",{cx:fe,cy:Ue,r:"8",fill:"#ef4444",style:{pointerEvents:"none"}}),i.jsx(ak,{size:10,className:"text-white",x:fe-5,y:Ue-5,style:{pointerEvents:"none"}})]})]},B.id)}),h&&(()=>{const B=c.get(h);return B?i.jsx("path",{d:`M ${B.x+B.width-4} ${B.y+B.height/2} C ${B.x+B.width+100} ${B.y+B.height/2}, ${_.x-100} ${_.y}, ${_.x} ${_.y}`,stroke:"#60a5fa",strokeWidth:"2",fill:"none",strokeDasharray:"4,4"}):null})(),p&&(()=>{var J;const B=c.get(p);if(!B)return null;const E=B.x+4;let K=B.y+B.height/2;if(B.type==="gen-image"&&m){const te=M.get((J=B.settings)==null?void 0:J.model);if(te&&(te.id.includes("mj")||te.provider.toLowerCase().includes("midjourney"))){const Xe=(f.to.get(B.id)||[]).some(Nt=>!Nt.inputType||Nt.inputType==="default");let ct=12;ct+=24,Xe&&(ct+=68),ct+=108,m==="oref"?K=B.y+ct+16*.5:m==="sref"&&(K=B.y+ct+16+6+28+6+16*.5)}}else B.type==="image-compare"&&(K=B.y+B.height/2);return i.jsx("path",{d:`M ${E} ${K} C ${E-100} ${K}, ${_.x+100} ${_.y}, ${_.x} ${_.y}`,stroke:"#60a5fa",strokeWidth:"2",fill:"none",strokeDasharray:"4,4"})})()]})})},(r,c)=>r.connections===c.connections&&r.visibleNodes===c.visibleNodes&&r.selectedNodeId===c.selectedNodeId&&r.connectingSource===c.connectingSource&&r.connectingTarget===c.connectingTarget&&r.connectingInputType===c.connectingInputType&&r.mousePos.x===c.mousePos.x&&r.mousePos.y===c.mousePos.y);F.useCallback(()=>i.jsx(ih,{connections:u,nodesMap:Xt,connectionsByNode:Xo,connectingSource:Mn,connectingTarget:un,connectingInputType:is,mousePos:ld,apiConfigsMap:pn,selectedNodeId:X,onDisconnectConnection:_d,visibleNodes:yc}),[u,Xt,Xo,Mn,un,is,ld,pn,X,_d,yc]);const oh=F.useMemo(()=>{const r=new Map;return u.forEach(c=>{(!c.inputType||c.inputType==="default")&&r.set(c.to,!0)}),r},[u]),ah=F.useCallback(r=>{const c=new Set,f=Xo.from.get(r)||[],h=Xo.to.get(r)||[];return f.forEach(p=>c.add(p.to)),h.forEach(p=>c.add(p.from)),c},[Xo]),lh=F.useMemo(()=>{const r=new Map;if(X||Wn.size>0){const c=X||(Wn.size===1?Array.from(Wn)[0]:null);c&&r.set(c,ah(c))}return r},[X,Wn,ah]),ev=F.useCallback(r=>{var B,E,K,J,te,ne,re,be,Ce,We,et,G,fe,Ue,vt,st,gt,Xe,ct,Nt,ht,Lt,Kt,Et,Bt,Ot,It,on,yn,vn,ds,Cn,Vn,ln,an,fn,Ut,bn,Bn,dr;const f=pe.zoom<.4,h=X===r.id||Wn.has(r.id),p=zd(r.id),m=Oo===r.id,_=oh.get(r.id)||!1,M=Dr===r.id||Dr&&Wn.has(r.id),C=X||(Wn.size===1?Array.from(Wn)[0]:null),T=C?lh.get(C):null,I=C&&C!==r.id&&T&&T.has(r.id),D=pn.get((B=r.settings)==null?void 0:B.model),R=D?(D.modelName||D.id||"").includes("nano-banana-2"):(((E=r.settings)==null?void 0:E.model)||"").includes("nano-banana-2");return f?i.jsxs("div",{"data-node-id":r.id,className:`absolute node-wrapper flex flex-col ${h?"ring-1 ring-blue-500":e==="dark"?"border border-zinc-800":"border border-zinc-200"} ${e==="dark"?"bg-[#18181b]":"bg-white"}`,style:{left:r.x,top:r.y,width:r.width,height:r.height,cursor:Dr===r.id||Dr&&Wn.has(r.id)?"grabbing":"default",zIndex:M?50:10,border:`1px solid ${e==="dark"?"#3f3f46":"#e4e4e7"}`,background:e==="dark"?"#18181b":"#fff",boxShadow:"none",borderRadius:"0",transform:"translateZ(0)",backfaceVisibility:"hidden"},onMouseDown:O=>{O.button===0&&(O.stopPropagation(),O.ctrlKey||O.metaKey?Lr(je=>{const xt=new Set(je);return xt.has(r.id)?xt.delete(r.id):xt.add(r.id),xt.size===1?Z(Array.from(xt)[0]):Z(null),xt}):Wn.has(r.id)&&Wn.size>1?Z(r.id):(Z(r.id),Lr(new Set([r.id]))),Aa(r.id))},onMouseEnter:()=>{(Mn||un)&&Ti(r.id)},onMouseLeave:()=>{(Mn||un)&&Oo===r.id&&Ti(null)},onMouseUp:O=>Cs(r.id,O),children:[r.type==="input-image"&&r.content&&i.jsx("div",{className:"w-full h-full relative",children:pr(r.content)?i.jsx("video",{src:r.content,className:"w-full h-full object-cover opacity-80",muted:!0,playsInline:!0}):i.jsx(sr,{src:r.content,className:"w-full h-full object-cover opacity-80",alt:""})}),r.type==="video-input"&&r.content&&i.jsx("video",{src:r.content,className:"w-full h-full object-cover opacity-80",muted:!0,playsInline:!0}),!r.content&&i.jsx("div",{className:`p-2 font-bold text-sm truncate ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:r.type==="input-image"?"":r.type==="video-input"?"":r.type==="gen-image"||r.type==="gen-image"?"":r.type==="gen-video"?"":r.type==="text-node"?"":r.type==="preview"?"":r.type==="novel-input"?"":r.type==="extract-characters-scenes"?"":r.type==="save-to-local"||r.type==="local-save"?"":r.type||""}),r.type!=="input-image"&&r.type!=="video-input"&&r.type!=="video-analyze"&&r.type!=="preview"&&(r.type==="image-compare"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"input-point",style:{top:"33%",left:"-0.25rem",width:"0.5rem",height:"0.5rem",backgroundColor:_?"#60a5fa":"#52525b",borderRadius:"50%",position:"absolute",zIndex:20,pointerEvents:"auto"},onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),ss(r.id),os("default")},onMouseUp:O=>Cs(r.id,O,"default")}),i.jsx("div",{className:"input-point",style:{top:"66%",left:"-0.25rem",width:"0.5rem",height:"0.5rem",backgroundColor:_?"#60a5fa":"#52525b",borderRadius:"50%",position:"absolute",zIndex:20,pointerEvents:"auto"},onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),ss(r.id),os("default")},onMouseUp:O=>Cs(r.id,O,"default")})]}):i.jsx("div",{className:"input-point",style:{top:"50%",left:"-0.25rem",width:"0.5rem",height:"0.5rem",backgroundColor:_?"#60a5fa":"#52525b",borderRadius:"50%",position:"absolute",zIndex:20,pointerEvents:"auto"},onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),ss(r.id),os("default")},onMouseUp:O=>Cs(r.id,O,"default")})),r.type!=="preview"&&i.jsx("div",{className:"connector connector-right",style:{position:"absolute",top:"50%",right:"-0.45rem",width:"0.9rem",height:"0.9rem",backgroundColor:Mn===r.id?"#d4d4d8":"#27272a",border:"1px solid #71717a",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"crosshair",zIndex:30,opacity:Mn===r.id?1:.5,pointerEvents:"auto"},onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),Lo(r.id)},children:i.jsx(Hi,{size:10})})]},r.id):i.jsxs("div",{"data-node-id":r.id,className:`absolute rounded-xl shadow-xl transition-shadow duration-150 group flex flex-col node-wrapper ${h?"ring-1 ring-blue-500 shadow-blue-500/20":I?"ring-2 ring-blue-300/60 shadow-blue-300/30":e==="dark"?"border border-zinc-800 shadow-black/40":"border border-zinc-200 shadow-black/10"} ${m&&(Mn&&Mn!==r.id||un&&un!==r.id)?"ring-2 ring-green-500/50":""} ${e==="dark"?"bg-[#18181b]":"bg-white"}`,style:{left:r.x,top:r.y,width:r.width,height:r.height,cursor:Dr===r.id||Dr&&Wn.has(r.id)?"grabbing":"default",zIndex:M?50:10,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",transform:"translateZ(0)",backfaceVisibility:"hidden"},onMouseDown:O=>{O.button===0&&(O.stopPropagation(),O.ctrlKey||O.metaKey?Lr(je=>{const xt=new Set(je);return xt.has(r.id)?xt.delete(r.id):xt.add(r.id),xt.size===1?Z(Array.from(xt)[0]):Z(null),xt}):Wn.has(r.id)&&Wn.size>1?Z(r.id):(Z(r.id),Lr(new Set([r.id]))),Aa(r.id),Sn(null))},onMouseEnter:()=>{(Mn||un)&&Ti(r.id)},onMouseLeave:()=>{(Mn||un)&&Oo===r.id&&Ti(null)},onMouseUp:O=>Cs(r.id,O),onDoubleClick:O=>{O.stopPropagation(),(r.type==="input-image"||r.type==="video-input")&&r.content&&Se({url:r.content,type:pr(r.content)?"video":"image"})},children:[i.jsx("button",{onClick:O=>{O.stopPropagation(),bd(r.id)},className:`absolute -top-2.5 -right-2.5 z-50 p-1 rounded-full shadow border opacity-0 group-hover:opacity-100 transition-opacity scale-90 hover:scale-100 ${e==="dark"?"bg-zinc-800 text-zinc-400 hover:text-red-500 hover:bg-zinc-700 border-zinc-700":"bg-zinc-100 text-zinc-500 hover:text-red-500 hover:bg-zinc-200 border-zinc-300"}`,onMouseDown:O=>O.stopPropagation(),children:i.jsx(hs,{size:12})}),i.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 z-[100] resize-handle flex items-end justify-end p-0.5",onMouseDown:O=>{O.stopPropagation(),O.preventDefault(),lc(r.id)},children:i.jsx("svg",{width:"6",height:"6",viewBox:"0 0 8 8",fill:"none",className:"text-zinc-600",children:i.jsx("path",{d:"M8 0L8 8L0 8",stroke:"currentColor",strokeWidth:"2"})})}),r.type!=="input-image"&&r.type!=="video-input"&&r.type!=="video-analyze"&&r.type!=="preview"&&(r.type==="image-compare"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`input-point ${un===r.id&&!is?"active":""}`,style:{top:"33%"},title:" 1 ",onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),ss(r.id),os("default")},onMouseUp:O=>Cs(r.id,O,"default")}),i.jsx("div",{className:`input-point ${un===r.id&&!is?"active":""}`,style:{top:"66%"},title:" 2 ",onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),ss(r.id),os("default")},onMouseUp:O=>Cs(r.id,O,"default")})]}):i.jsx("div",{className:`input-point ${_?"connected":""} ${un===r.id&&!is?"active":""}`,title:"",onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),ss(r.id),os("default")},onMouseUp:O=>Cs(r.id,O,"default")})),r.type!=="preview"&&i.jsx("div",{className:`connector connector-right ${Mn===r.id?"active":""} ${un&&Oo===r.id?"ring-2 ring-green-500/50":""}`,title:"",onMouseDown:O=>{O.stopPropagation(),O.preventDefault();const je=xn(O.clientX,O.clientY);_s(je),Lo(r.id)},onMouseEnter:()=>{un&&Ti(r.id)},onMouseLeave:()=>{un&&Oo===r.id&&Ti(null)},children:i.jsx(Hi,{size:10})}),i.jsxs("div",{className:`overflow-hidden rounded-xl flex-1 flex flex-col pointer-events-none h-full w-full relative ${e==="dark"?"bg-[#18181b]":"bg-white"}`,children:[r.type==="novel-input"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 border-b text-xs font-semibold shrink-0",children:[i.jsx(fs,{size:12,className:"text-blue-500"}),i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex-1 flex flex-col gap-2 p-3 overflow-hidden min-h-0",children:[i.jsx("textarea",{value:((K=r.settings)==null?void 0:K.content)||"",onChange:O=>{const je=O.target.value;je.length<=1e4&&pt(r.id,{content:je})},placeholder:"10,000...",maxLength:1e4,className:`w-full h-full resize-none outline-none text-sm p-2 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()}),i.jsxs("div",{className:"text-right text-[10px] text-zinc-500 shrink-0",children:[(((J=r.settings)==null?void 0:J.content)||"").length,"/10,000"]})]})]}),r.type==="extract-characters-scenes"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:i.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[i.jsx(yl,{size:12,className:"text-purple-500"}),i.jsx("span",{children:""})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:O=>{O.stopPropagation(),Sn((qe==null?void 0:qe.nodeId)===r.id&&qe.type==="extract-model"?null:{nodeId:r.id,type:"extract-model"})},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-xs border transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,onMouseDown:O=>O.stopPropagation(),children:[i.jsx("span",{className:"truncate font-mono",children:((ne=pn.get((te=r.settings)==null?void 0:te.model))==null?void 0:ne.modelName)||""}),i.jsx(mi,{size:12,className:"opacity-50 shrink-0"})]}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="extract-model"&&i.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:O=>O.stopPropagation(),onMouseLeave:()=>as(null),children:[i.jsx("div",{className:`w-24 border-r pr-1 max-h-80 overflow-y-auto custom-scrollbar flex flex-col justify-end ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(cs).filter(([,O])=>O.models.some(je=>je.type==="Chat")).map(([O,je])=>i.jsx("button",{onMouseEnter:()=>as(O),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${br===O?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:je.name||O},O))}),i.jsxs("div",{className:"flex-1 pl-1 max-h-80 overflow-y-auto custom-scrollbar",children:[br&&((re=cs[br])==null?void 0:re.models.filter(O=>O.type==="Chat").map(O=>{var je;return i.jsxs("button",{onClick:()=>{pt(r.id,{model:O.id}),Sn(null),as(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${((je=r.settings)==null?void 0:je.model)===O.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[i.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:O.id}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Oi(O.id)}`})]},O.id)})),!br&&i.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]})]}),i.jsx("button",{className:`w-full py-2 rounded text-xs font-medium transition-colors flex items-center justify-center gap-1.5 ${(be=r.settings)!=null&&be.isAnalyzing?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500 text-white"}`,onMouseDown:O=>O.stopPropagation(),onClick:O=>{O.stopPropagation(),N1(r.id)},children:(Ce=r.settings)!=null&&Ce.isAnalyzing?i.jsxs(i.Fragment,{children:[i.jsx(gi,{size:12,className:"animate-spin"}),"..."]}):i.jsxs(i.Fragment,{children:[i.jsx(xl,{size:12}),""]})})]})})]}),r.type==="local-save"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[i.jsx(Bm,{size:12,className:"text-green-500"}),i.jsx("span",{children:""})]}),i.jsx("div",{className:`w-2 h-2 rounded-full ${((We=r.settings)==null?void 0:We.serverStatus)==="connected"||tr?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500"}`,title:tr?"":""})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),i.jsx("input",{type:"text",value:((et=r.settings)==null?void 0:et.savePath)||"",onChange:O=>pt(r.id,{savePath:O.target.value}),placeholder:"C:/Downloads/Tapnow",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),i.jsx("input",{type:"text",value:((G=r.settings)==null?void 0:G.subfolder)||"",onChange:O=>pt(r.id,{subfolder:O.target.value}),placeholder:"v1_characters",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),i.jsx("button",{className:`w-10 h-5 rounded-full relative transition-colors ${(fe=r.settings)!=null&&fe.autoSave?"bg-green-600":"bg-zinc-600"}`,onClick:()=>{var O;return pt(r.id,{autoSave:!((O=r.settings)!=null&&O.autoSave)})},onMouseDown:O=>O.stopPropagation(),children:i.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${(Ue=r.settings)!=null&&Ue.autoSave?"left-6":"left-1"}`})})]}),i.jsxs("div",{className:"mt-auto border-t pt-2 border-zinc-700/50",children:[i.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between",children:[i.jsx("span",{children:":"}),i.jsx("span",{children:(vt=r.settings)!=null&&vt.lastSaved?r.settings.lastSaved.split(" ")[1]:""})]}),i.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between mt-1",children:[i.jsx("span",{children:":"}),i.jsxs("span",{children:[((gt=(st=r.settings)==null?void 0:st.savedFiles)==null?void 0:gt.length)||0," "]})]})]})]})]}),r.type==="novel-input"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 border-b text-xs font-semibold shrink-0",children:[i.jsx(fs,{size:12,className:"text-blue-500"}),i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex-1 flex flex-col gap-2 p-3 overflow-hidden min-h-0",children:[i.jsx("textarea",{value:((Xe=r.settings)==null?void 0:Xe.content)||"",onChange:O=>{const je=O.target.value;je.length<=1e4&&pt(r.id,{content:je})},placeholder:"10,000...",maxLength:1e4,className:`w-full h-full resize-none outline-none text-sm p-2 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()}),i.jsxs("div",{className:"text-right text-[10px] text-zinc-500 shrink-0",children:[(((ct=r.settings)==null?void 0:ct.content)||"").length,"/10,000"]})]})]}),r.type==="extract-characters-scenes"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:i.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[i.jsx(yl,{size:12,className:"text-purple-500"}),i.jsx("span",{children:""})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:((Nt=r.settings)==null?void 0:Nt.model)||"",onChange:O=>pt(r.id,{model:O.target.value}),className:`w-full text-xs border rounded px-2 py-1.5 appearance-none outline-none focus:border-blue-500 cursor-pointer ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300 text-zinc-800"}`,onMouseDown:O=>O.stopPropagation(),children:[i.jsx("option",{value:"",disabled:!0,children:""}),Te.filter(O=>O.type==="Chat").map(O=>i.jsx("option",{value:O.id,children:O.modelName||O.id},O.id))]}),i.jsx(mi,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-50 pointer-events-none"})]})]}),i.jsx("button",{className:`w-full py-2 rounded text-xs font-medium transition-colors flex items-center justify-center gap-1.5 ${(ht=r.settings)!=null&&ht.isAnalyzing?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500 text-white"}`,onMouseDown:O=>O.stopPropagation(),onClick:async()=>{alert("V3.4.4: APIUI")},children:(Lt=r.settings)!=null&&Lt.isAnalyzing?i.jsxs(i.Fragment,{children:[i.jsx(gi,{size:12,className:"animate-spin"}),"..."]}):i.jsxs(i.Fragment,{children:[i.jsx(xl,{size:12}),""]})})]})})]}),r.type==="local-save"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[i.jsx(Bm,{size:12,className:"text-green-500"}),i.jsx("span",{children:""})]}),i.jsx("div",{className:`w-2 h-2 rounded-full ${((Kt=r.settings)==null?void 0:Kt.serverStatus)==="connected"||tr?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500"}`,title:tr?"":""})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),i.jsx("input",{type:"text",value:((Et=r.settings)==null?void 0:Et.savePath)||"",onChange:O=>pt(r.id,{savePath:O.target.value}),placeholder:"C:/Downloads/Tapnow",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),i.jsx("input",{type:"text",value:((Bt=r.settings)==null?void 0:Bt.subfolder)||"",onChange:O=>pt(r.id,{subfolder:O.target.value}),placeholder:"v1_characters",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),i.jsx("button",{className:`w-10 h-5 rounded-full relative transition-colors ${(Ot=r.settings)!=null&&Ot.autoSave?"bg-green-600":"bg-zinc-600"}`,onClick:()=>{var O;return pt(r.id,{autoSave:!((O=r.settings)!=null&&O.autoSave)})},onMouseDown:O=>O.stopPropagation(),children:i.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${(It=r.settings)!=null&&It.autoSave?"left-6":"left-1"}`})})]}),i.jsxs("div",{className:"mt-auto border-t pt-2 border-zinc-700/50",children:[i.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between",children:[i.jsx("span",{children:":"}),i.jsx("span",{children:(on=r.settings)!=null&&on.lastSaved?r.settings.lastSaved.split(" ")[1]:""})]}),i.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between mt-1",children:[i.jsx("span",{children:":"}),i.jsxs("span",{children:[((vn=(yn=r.settings)==null?void 0:yn.savedFiles)==null?void 0:vn.length)||0," "]})]})]})]})]}),r.type==="input-image"&&i.jsx("div",{className:`relative w-full h-full flex flex-col items-center justify-center transition-colors pointer-events-auto drop-zone ${e==="dark"?"bg-zinc-900 group-hover:bg-zinc-800":"bg-zinc-100 group-hover:bg-zinc-200"}`,onDrop:O=>g1(r.id,O),onDragOver:X0,onDragLeave:J0,onContextMenu:O=>q1(O,r.id),children:r.content?i.jsxs("div",{className:"relative w-full h-full",children:[pr(r.content)?i.jsx("video",{src:r.content,controls:!0,className:"w-full h-full object-contain bg-black/50",draggable:!1,style:{imageRendering:pe.zoom>=1?"auto":"crisp-edges",WebkitFontSmoothing:"antialiased",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}}):i.jsx("img",{src:r.content,className:"w-full h-full object-contain bg-black/50",draggable:!1,loading:"lazy",style:{imageRendering:pe.zoom>=1?"auto":"crisp-edges",WebkitFontSmoothing:"antialiased",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}}),r.dimensions&&i.jsxs("div",{className:`absolute bottom-2 right-2 text-[10px] px-1.5 py-0.5 rounded backdrop-blur-sm border ${e==="dark"?"bg-black/70 text-white border-white/10":"bg-white/80 text-zinc-800 border-zinc-200"}`,children:[r.dimensions.w,"x",r.dimensions.h]}),!r.isMasking&&i.jsxs("div",{className:"absolute inset-0 bg-black/40 transition-opacity gap-2 opacity-0 group-hover:opacity-100 flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded-lg text-xs backdrop-blur-sm border transition-colors ${e==="dark"?"bg-white/10 hover:bg-white/20 text-white border-white/10":"bg-white hover:bg-zinc-100 text-zinc-800 border-zinc-300"}`,onMouseDown:O=>O.stopPropagation(),children:[" ",i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:O=>rh(r.id,O)})]}),!pr(r.content)&&i.jsxs("button",{onClick:O=>{O.stopPropagation(),l(je=>je.map(xt=>xt.id===r.id?{...xt,isMasking:!xt.isMasking}:xt))},className:`px-3 py-1.5 rounded-lg text-xs backdrop-blur-sm border transition-colors flex items-center gap-1 ${e==="dark"?r.isMasking?"bg-red-500/80 hover:bg-red-500 text-white border-red-400":"bg-white/10 hover:bg-white/20 text-white border-white/10":r.isMasking?"bg-red-500 hover:bg-red-600 text-white border-red-400":"bg-white hover:bg-zinc-100 text-zinc-800 border-zinc-300"}`,onMouseDown:O=>O.stopPropagation(),children:[i.jsx(D2,{size:12}),""]})]}),i.jsxs("div",{className:`text-[10px] text-center px-2 ${e==="dark"?"text-zinc-300":"text-zinc-500"}`,children:["",i.jsx("br",{})," Ctrl+V "]})]}),!r.isMasking&&r.maskContent&&i.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none",style:{background:"rgba(255, 0, 0, 0.3)",mixBlendMode:"multiply",WebkitMaskImage:`url(${r.maskContent})`,maskImage:`url(${r.maskContent})`,WebkitMaskSize:"100% 100%",maskSize:"100% 100%",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}}),r.isMasking&&!pr(r.content)&&r.dimensions&&i.jsx(mk,{nodeId:r.id,imageUrl:r.content,imageDimensions:r.dimensions,isActive:r.isMasking,onClose:()=>{l(O=>O.map(je=>je.id===r.id?{...je,isMasking:!1}:je))},onSave:O=>{console.log(":",O)},onUpdateNode:(O,je)=>{l(xt=>xt.map($n=>$n.id===O?{...$n,...je}:$n))},theme:e,view:pe,maskContent:r.maskContent})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[i.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center mb-3 border ${e==="dark"?"bg-zinc-800 border-zinc-700/50":"bg-zinc-100 border-zinc-300"}`,children:i.jsx(ta,{className:`w-6 h-6 ${e==="dark"?"text-zinc-500":"text-zinc-400"}`})}),i.jsxs("label",{className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-xs font-medium transition-colors cursor-pointer pointer-events-auto",onMouseDown:O=>O.stopPropagation(),children:["",i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:O=>rh(r.id,O)})]}),i.jsxs("div",{className:"text-[10px] text-center mt-2 pointer-events-none text-zinc-500",children:["",i.jsx("br",{})," Ctrl+V "]})]})}),r.type==="video-input"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto drop-zone video-input-container ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,onDragOver:X0,onDragLeave:J0,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b text-xs font-semibold",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(cp,{size:13,className:"text-blue-500"}),i.jsx("span",{children:" / "}),i.jsx("button",{onClick:O=>{var Dn;O.stopPropagation();const je=((Dn=r.settings)==null?void 0:Dn.videoExpanded)===!1,xt=(r.frames||[]).length,$n=je?Math.max(1,Math.floor(r.width/290)):1,ve=Math.max(1,Math.ceil(xt/$n)),rt=72,bt=je?r.content?230:190:0,Ve=r.content&&je?48:0,yt=36,_t=30,Qt=je?158:106,Qe=rt+bt+Ve+yt+ve*Qt+_t;l(wn=>wn.map(Jn=>Jn.id===r.id?{...Jn,height:Math.max(je?500:220,Qe),settings:{...Jn.settings,videoExpanded:je}}:Jn))},className:`p-1 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded transition-colors ml-1 ${((ds=r.settings)==null?void 0:ds.videoExpanded)===!1?"bg-zinc-200 dark:bg-zinc-700":""}`,title:((Cn=r.settings)==null?void 0:Cn.videoExpanded)===!1?"":"",children:((Vn=r.settings)==null?void 0:Vn.videoExpanded)===!1?i.jsx(mi,{size:12}):i.jsx(ap,{size:12})})]}),i.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[(ln=r.videoMeta)!=null&&ln.duration?i.jsxs("span",{children:[" ",r.videoMeta.duration.toFixed(1),"s"]}):null,(an=r.videoMeta)!=null&&an.w?i.jsxs("span",{children:[r.videoMeta.w,"x",r.videoMeta.h]}):null,(fn=r.selectedKeyframes)!=null&&fn.length?i.jsxs("span",{className:"text-blue-500",children:[" ",r.selectedKeyframes.length," "]}):null]})]}),i.jsxs("div",{className:"flex-1 flex flex-col gap-3 p-3 overflow-hidden min-h-0",children:[r.content?i.jsxs("div",{className:"space-y-2",children:[((Ut=r.settings)==null?void 0:Ut.videoExpanded)!==!1&&i.jsx("div",{className:"relative w-full max-w-[360px] aspect-video bg-black rounded-lg overflow-hidden flex items-center justify-center mx-auto",onDrop:O=>sh(r.id,O),children:i.jsx("video",{src:r.content,controls:!0,className:"w-full h-full object-contain",draggable:!1})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded text-xs font-medium transition-colors cursor-pointer",onMouseDown:O=>O.stopPropagation(),children:["",i.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:O=>{var je;return Va(r.id,(je=O.target.files)==null?void 0:je[0])}})]}),i.jsx("button",{className:`px-3 py-1.5 rounded text-xs border transition-colors ${e==="dark"?"border-zinc-700 bg-zinc-800 text-zinc-300 hover:border-blue-500 hover:text-blue-400":"border-zinc-300 hover:border-blue-500 hover:text-blue-600"}`,onMouseDown:O=>O.stopPropagation(),onClick:()=>O1(r.id,2),children:i.jsx("span",{className:"whitespace-nowrap",children:"2fps"})}),i.jsx("button",{className:`px-3 py-1.5 rounded text-xs border transition-colors ${e==="dark"?"bg-green-600/40 border-green-500 text-green-200 hover:bg-green-600/60 hover:border-green-400":"bg-green-50 border-green-300 hover:border-green-500 hover:text-green-600"}`,onMouseDown:O=>O.stopPropagation(),onClick:()=>U1(r.id,30),children:i.jsx("span",{className:"whitespace-nowrap",children:""})}),r.extractingFrames&&i.jsx("span",{className:"text-[11px] text-blue-500",children:"..."})]})]}):((bn=r.settings)==null?void 0:bn.videoExpanded)!==!1&&i.jsx("div",{className:"flex flex-col items-center justify-center gap-3 w-full px-4 mx-auto shrink-0 transition-colors border-2 border-transparent hover:border-blue-500/30 rounded-lg p-4",onDrop:O=>sh(r.id,O),children:i.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center shrink-0 w-full",children:[i.jsx("div",{className:`relative w-full h-64 flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-colors ${L===r.id&&!P?"border-blue-500 bg-blue-500/10":e==="dark"?"border-zinc-700 hover:border-zinc-500":"border-zinc-300 hover:border-zinc-400"}`,children:i.jsxs("label",{className:"cursor-pointer flex flex-col items-center justify-center w-full h-full",children:[i.jsx(lk,{size:48,className:`mb-2 ${e==="dark"?"text-zinc-500":"text-zinc-400"}`}),i.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:""}),i.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:O=>{var je;return Va(r.id,(je=O.target.files)==null?void 0:je[0])}})]})}),i.jsx("div",{className:"text-[10px] text-center text-zinc-500 pointer-events-none",children:" MP4/WEBM Ctrl+V "})]})}),i.jsxs("div",{className:"flex items-center justify-between text-[11px] text-zinc-500",children:[i.jsx("span",{children:""}),i.jsxs("div",{className:"flex items-center gap-2 flex-nowrap shrink-0 whitespace-nowrap",children:[i.jsxs("span",{children:[(r.frames||[]).length," "]}),(r.frames||[]).length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{const O=r.frames||[],je=r.selectedKeyframes||[];let xt=[];je.length===0?xt=O.map($n=>({url:$n.url,time:$n.time,filename:$n.filename})):xt=[],l($n=>$n.map(ve=>ve.id===r.id?{...ve,selectedKeyframes:xt}:ve))},className:`text-[10px] px-1.5 py-0.5 rounded transition-colors flex items-center gap-1 ${e==="dark"?"bg-blue-600/30 text-blue-300 hover:bg-blue-600/50":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,onMouseDown:O=>O.stopPropagation(),title:(r.selectedKeyframes||[]).length>0?"":"",children:[(r.selectedKeyframes||[]).length>0?i.jsx(Km,{size:10}):i.jsx(L2,{size:10}),(r.selectedKeyframes||[]).length>0?"":""]}),i.jsxs("button",{onClick:()=>{confirm("")&&l(O=>O.map(je=>je.id===r.id?{...je,frames:[],selectedKeyframes:[]}:je))},className:`text-[10px] px-1.5 py-0.5 rounded transition-colors flex items-center gap-1 flex-nowrap ${e==="dark"?"bg-red-600/30 text-red-300 hover:bg-red-600/50":"bg-red-100 text-red-600 hover:bg-red-200"}`,onMouseDown:O=>O.stopPropagation(),title:"",children:[i.jsx(Ys,{size:10}),""]})]})]})]}),i.jsx("div",{className:"grid gap-3 w-full overflow-y-auto custom-scrollbar flex-1 min-h-0 relative p-1 content-start items-start",style:{gridTemplateColumns:((Bn=r.settings)==null?void 0:Bn.videoExpanded)===!1?"1fr":"repeat(auto-fill, minmax(260px, 1fr))",gridAutoRows:"auto"},onDrop:O=>D1(r.id,O),onDragOver:O=>R1(O,r.id,(r.frames||[]).length),onDragLeave:O=>{O.currentTarget.contains(O.relatedTarget)||(x(null),S(null))},children:(r.frames||[]).length===0?i.jsxs("div",{className:`col-span-full text-[11px] text-zinc-500 text-center py-4 border rounded ${e==="dark"?"bg-zinc-800/40 border-zinc-700":"bg-white/40 border-zinc-300"}`,children:["",i.jsx("div",{className:"mt-1 opacity-50 text-[9px]",children:""})]}):(r.frames||[]).map((O,je)=>{var rt;const xt=(r.selectedKeyframes||[]).some(bt=>bt.url===O.url&&bt.time===O.time),$n=P===r.id&&y===je,ve=P===r.id&&y===(r.frames||[]).length&&je===(r.frames||[]).length-1;return i.jsxs("div",{className:"relative",children:[$n&&i.jsx("div",{className:"absolute -top-1.5 left-0 right-0 h-1 bg-red-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.8)] z-50"}),i.jsxs("button",{className:`relative w-full rounded overflow-hidden group transition-all ${xt?"ring-2 ring-blue-500 border-2 border-blue-500 bg-blue-900/30":e==="dark"?"border border-zinc-700 hover:border-zinc-500":"border border-zinc-300 hover:border-zinc-400"}`,onMouseDown:bt=>bt.stopPropagation(),onClick:bt=>F1(r.id,O,je,bt),onContextMenu:bt=>B1(bt,r.id,O),onDragOver:bt=>P1(bt,r.id,je),children:[i.jsx(sr,{src:O.url,className:`w-full bg-black ${((rt=r.settings)==null?void 0:rt.videoExpanded)===!1?"h-[90px] object-cover":"aspect-video object-contain max-h-[140px]"}`,alt:`frame-${je}`}),i.jsxs("div",{className:"absolute left-1 top-1 text-[10px] px-1 py-0.5 rounded bg-black/60 text-white",children:[typeof O.time=="number"?O.time.toFixed(2):O.time,"s"]}),O.filename&&i.jsx("div",{className:"absolute left-0 bottom-0 right-0 bg-black/80 text-white text-[9px] px-1 py-0.5 opacity-0 group-hover:opacity-100 transition-opacity truncate",title:O.filename,children:O.filename}),i.jsxs("div",{className:"absolute top-1 bottom-1 right-1 flex flex-col justify-between items-center z-20 pointer-events-none",children:[i.jsx("div",{className:"pointer-events-auto w-5 h-5 rounded-full border border-white/80 bg-black/40 flex items-center justify-center shrink-0 mb-auto",children:xt?i.jsx(zl,{size:12,className:"text-white"}):null}),i.jsx("button",{onClick:bt=>{bt.stopPropagation(),l(Ve=>Ve.map(yt=>{if(yt.id!==r.id)return yt;const _t=(yt.frames||[]).filter((Qe,Dn)=>Dn!==je),Qt=(yt.selectedKeyframes||[]).filter(Qe=>Qe.url!==O.url);return{...yt,frames:_t,selectedKeyframes:Qt}}))},className:"pointer-events-auto w-5 h-5 rounded bg-red-600/80 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 my-1 shrink-0",title:"",children:i.jsx(hs,{size:12})}),i.jsxs("div",{className:"pointer-events-auto flex flex-col gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0 mt-auto",children:[je>0&&i.jsx("button",{onClick:bt=>{bt.stopPropagation(),l(Ve=>Ve.map(yt=>{if(yt.id!==r.id)return yt;const _t=[...yt.frames||[]];[_t[je-1],_t[je]]=[_t[je],_t[je-1]];const Qt=[...yt.selectedKeyframes||[]],Qe=Qt.findIndex(Dn=>Dn.url===O.url);return Qe>0&&([Qt[Qe-1],Qt[Qe]]=[Qt[Qe],Qt[Qe-1]]),{...yt,frames:_t,selectedKeyframes:Qt}}))},className:"w-5 h-5 rounded bg-black/70 text-white flex items-center justify-center hover:bg-blue-600",title:"",children:i.jsx(ap,{size:12})}),je<(r.frames||[]).length-1&&i.jsx("button",{onClick:bt=>{bt.stopPropagation(),l(Ve=>Ve.map(yt=>{if(yt.id!==r.id)return yt;const _t=[...yt.frames||[]];[_t[je],_t[je+1]]=[_t[je+1],_t[je]];const Qt=[...yt.selectedKeyframes||[]],Qe=Qt.findIndex(Dn=>Dn.url===O.url);return Qe>=0&&Qe<Qt.length-1&&([Qt[Qe],Qt[Qe+1]]=[Qt[Qe+1],Qt[Qe]]),{...yt,frames:_t,selectedKeyframes:Qt}}))},className:"w-5 h-5 rounded bg-black/70 text-white flex items-center justify-center hover:bg-blue-600",title:"",children:i.jsx(mi,{size:12})})]})]})]}),ve&&i.jsx("div",{className:"absolute -bottom-1.5 left-0 right-0 h-1 bg-red-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.8)] z-50"})]},`${O.url}-${je}`)})})]})]}),r.type==="text-node"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[i.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b text-xs font-semibold",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(fs,{size:13,className:"text-blue-500"}),i.jsx("span",{children:""})]})}),i.jsx("div",{className:"flex-1 p-3",children:i.jsx("textarea",{"data-node-type":"text-node","data-node-id":r.id,value:((dr=r.settings)==null?void 0:dr.text)||"",onChange:O=>{pt(r.id,{text:O.target.value})},placeholder:"...",className:`w-full h-full resize-none outline-none text-sm p-2 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:O=>O.stopPropagation()})})]}),r.type==="video-analyze"&&i.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto video-analyze-container ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,onClick:O=>{const je=window.getSelection();if(je&&je.toString().length>0)return;const xt=O.target;xt&&(xt.tagName==="INPUT"||xt.tagName==="TEXTAREA"||xt.tagName==="SELECT"||xt.tagName==="BUTTON"||xt.isContentEditable||xt.closest('input, textarea, select, button, [contenteditable="true"]'))||O.stopPropagation()},children:[i.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b text-xs font-semibold",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(W2,{size:13,className:"text-blue-500"}),i.jsx("span",{children:" / "})]})}),i.jsx("div",{className:"flex-1 flex flex-col gap-3 p-3 overflow-hidden min-h-0",children:(()=>{var ve,rt,bt,Ve,yt,_t,Qt,Qe,Dn,wn,Jn,ps,wr,Zn,me,it,Ct,Jt;const O=Ja(r.id);if(!O)return i.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 gap-2 text-[11px] text-zinc-500",children:[i.jsx(gl,{size:24,className:"text-zinc-400"}),i.jsx("span",{children:""})]});const je=O.videoFileName||"",xt=((ve=O.videoMeta)==null?void 0:ve.duration)||0,$n=O.selectedKeyframes||[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`text-[11px] px-2 py-1.5 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-zinc-50 border-zinc-300"}`,children:[i.jsx("div",{className:"flex items-center justify-between mb-1",children:i.jsx("span",{className:"text-zinc-500",children:O.isImageInput?"":""})}),i.jsxs("div",{className:"text-zinc-700 dark:text-zinc-300",children:[i.jsxs("div",{children:[": ",O.isImageInput?"":je]}),!O.isImageInput&&i.jsxs("div",{children:[": ",xt.toFixed(1),"s"]}),i.jsxs("div",{children:[": ",$n.length," "]})]})]}),i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded-lg border shadow-inner ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-zinc-100 border-zinc-200"}`,children:[i.jsxs("button",{onClick:()=>pt(r.id,{analysisMode:"manual"}),className:`flex-1 py-1 px-2 text-[11px] rounded transition-all flex justify-center items-center gap-1 ${(((rt=r.settings)==null?void 0:rt.analysisMode)||"manual")==="manual"?e==="dark"?"bg-zinc-600 shadow-md text-blue-300 font-bold":"bg-white shadow-md text-blue-600 font-bold":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:ie=>ie.stopPropagation(),children:[i.jsx(Dm,{size:12})," "]}),i.jsxs("button",{onClick:()=>pt(r.id,{analysisMode:"auto"}),className:`flex-1 py-1 px-2 text-[11px] rounded transition-all flex justify-center items-center gap-1 ${((bt=r.settings)==null?void 0:bt.analysisMode)==="auto"?e==="dark"?"bg-zinc-600 shadow-md text-purple-300 font-bold":"bg-white shadow-md text-purple-600 font-bold":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:ie=>ie.stopPropagation(),children:[i.jsx(xl,{size:12})," AI "]})]}),(((Ve=r.settings)==null?void 0:Ve.analysisMode)||"manual")==="manual"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-[11px] text-zinc-500",children:":"}),i.jsx("input",{type:"number",min:"1",max:"30",value:((yt=r.settings)==null?void 0:yt.segmentDuration)||3,onChange:ie=>{const se=parseInt(ie.target.value)||3;pt(r.id,{segmentDuration:se}),e1(se.toString());try{localStorage.setItem("tapnow_last_segment_duration",se.toString())}catch{}},className:`w-16 px-2 py-1 text-[11px] rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300 text-zinc-800"}`,onMouseDown:ie=>ie.stopPropagation()}),i.jsx("span",{className:"text-[11px] text-zinc-500",children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-[11px] text-zinc-500",children:":"}),i.jsxs("div",{className:"relative flex-1",children:[i.jsxs("button",{onClick:ie=>{ie.stopPropagation(),Sn((qe==null?void 0:qe.nodeId)===r.id&&qe.type==="analyze-model"?null:{nodeId:r.id,type:"analyze-model"})},className:`w-full flex items-center justify-between px-2 py-1 rounded text-[11px] border transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 hover:border-zinc-600":"bg-zinc-50 border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,onMouseDown:ie=>ie.stopPropagation(),children:[i.jsx("span",{className:"truncate font-mono",children:((Qt=pn.get((_t=r.settings)==null?void 0:_t.model))==null?void 0:Qt.id)||((Qe=r.settings)==null?void 0:Qe.model)||"gemini-3-pro"}),i.jsx(mi,{size:10,className:"opacity-50 shrink-0 ml-1"})]}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="analyze-model"&&i.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:ie=>ie.stopPropagation(),onMouseLeave:()=>as(null),children:[i.jsx("div",{className:`w-24 border-r pr-1 max-h-80 overflow-y-auto custom-scrollbar ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(cs).filter(([,ie])=>ie.models.some(se=>se.type==="Chat")).map(([ie,se])=>i.jsx("button",{onMouseEnter:()=>as(ie),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${br===ie?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:se.name||ie},ie))}),i.jsxs("div",{className:"flex-1 pl-1 max-h-80 overflow-y-auto custom-scrollbar",children:[br&&((Dn=cs[br])==null?void 0:Dn.models.filter(ie=>ie.type==="Chat").map(ie=>{var se;return i.jsxs("button",{onClick:()=>{pt(r.id,{model:ie.id}),n1(ie.id);try{localStorage.setItem("tapnow_last_analyze_model",ie.id)}catch{}Sn(null),as(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${((se=r.settings)==null?void 0:se.model)===ie.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[i.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:ie.id}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Oi(ie.id)}`})]},ie.id)})),!br&&i.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]})]})]}),i.jsx("button",{onClick:()=>{var ie;return((ie=r.settings)==null?void 0:ie.analysisMode)==="auto"?E1(r.id):C1(r.id)},disabled:r.isGenerating||(((wn=r.settings)==null?void 0:wn.analysisMode)||"manual")==="manual"&&$n.length===0,className:`w-full px-3 py-2 rounded text-xs font-medium transition-colors flex items-center justify-center gap-2 ${r.isGenerating?"bg-zinc-600 text-zinc-400 cursor-not-allowed":((Jn=r.settings)==null?void 0:Jn.analysisMode)==="auto"?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-lg":"bg-blue-600 hover:bg-blue-500 text-white"}`,onMouseDown:ie=>ie.stopPropagation(),children:r.isGenerating?i.jsxs(i.Fragment,{children:[i.jsx(gi,{size:14,className:"animate-spin"}),i.jsx("span",{children:((ps=r.settings)==null?void 0:ps.analysisMode)==="auto"?"AI ...":"..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(xl,{size:14}),i.jsx("span",{children:((wr=r.settings)==null?void 0:wr.analysisMode)==="auto"?"":""})]})}),r.errorMsg&&i.jsx("div",{className:"text-[10px] text-red-500 px-2 py-1 rounded bg-red-500/10",children:r.errorMsg})]}),((Zn=r.settings)==null?void 0:Zn.analysisMode)==="auto"&&((it=(me=r.settings)==null?void 0:me.analysisResults)==null?void 0:it.length)>0&&i.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pt-2",children:[((Ct=r.settings.voiceoverResults)==null?void 0:Ct.length)>0&&i.jsxs("div",{className:`p-2 rounded-lg mb-4 ${e==="dark"?"bg-zinc-700/50 border border-zinc-700":"bg-zinc-50 border border-blue-200"}`,children:[i.jsxs("h4",{className:`text-xs font-semibold mb-2 flex items-center gap-1 ${e==="dark"?"text-white":"text-blue-700"}`,children:[i.jsx(K2,{size:12})," "]}),i.jsx("div",{className:"space-y-1",children:r.settings.voiceoverResults.map((ie,se)=>i.jsxs("p",{className:`text-[10px] select-text cursor-text ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,onMouseDown:Ht=>Ht.stopPropagation(),children:[i.jsxs("span",{className:"font-mono text-xs mr-2 opacity-70",children:["[",ie.time_range||`${ie.time}s`,"]"]}),ie.text||i.jsx("span",{className:"text-zinc-400 italic",children:""})]},se))})]}),i.jsxs("h4",{className:`text-xs font-semibold mb-3 flex items-center gap-1 ${e==="dark"?"text-white":"text-zinc-800"}`,children:[i.jsx(Dm,{size:12}),"  (",r.settings.analysisResults.length," )"]}),i.jsx("div",{className:"space-y-4",children:r.settings.analysisResults.map((ie,se)=>{var Ht,en,Yt,mt,tt,A,Le,De;return i.jsxs("div",{className:`p-3 rounded-lg ${e==="dark"?"bg-zinc-800 border border-zinc-700":"bg-zinc-50 border border-zinc-200"}`,children:[i.jsxs("h5",{className:`text-sm font-bold mb-2 ${e==="dark"?"text-purple-400":"text-purple-700"}`,children:[" ",ie.scene_index||ie.scene_id||se+1," ",i.jsxs("span",{className:"text-xs font-normal opacity-70 ml-2",children:["(",ie.time_range,")"]})]}),i.jsxs("div",{className:"text-[11px] space-y-1 mb-3",children:[((en=(Ht=ie.keyframes)==null?void 0:Ht[0])==null?void 0:en.description)&&i.jsxs("p",{className:`select-text cursor-text ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,onMouseDown:Fe=>Fe.stopPropagation(),children:[i.jsx("span",{className:"font-semibold mr-1",children:"/:"})," ",ie.keyframes[0].description]}),((mt=(Yt=ie.global_tags)==null?void 0:Yt.style)==null?void 0:mt[0])&&i.jsxs("p",{className:`select-text cursor-text ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,onMouseDown:Fe=>Fe.stopPropagation(),children:[i.jsx("span",{className:"font-semibold mr-1",children:"/:"})," ",ie.global_tags.style[0]]})]}),i.jsxs("div",{className:"space-y-2",children:[((A=(tt=ie.keyframes)==null?void 0:tt[0])==null?void 0:A.jimeng_prompt)&&i.jsxs("div",{className:`p-2 rounded ${e==="dark"?"bg-zinc-700 border border-zinc-600":"bg-zinc-50 border border-gray-300"}`,children:[i.jsxs("h6",{className:`text-[10px] font-semibold mb-1 flex items-center gap-1 ${e==="dark"?"text-yellow-300":"text-yellow-700"}`,children:[i.jsx(Om,{size:10}),"  Prompt"]}),i.jsx("p",{className:`text-[10px] whitespace-pre-wrap select-text cursor-text ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,onMouseDown:Fe=>Fe.stopPropagation(),children:ie.keyframes[0].jimeng_prompt}),i.jsxs("button",{onClick:()=>navigator.clipboard.writeText(ie.keyframes[0].jimeng_prompt),className:"mt-1 flex items-center text-[9px] text-blue-400 hover:text-blue-300",onMouseDown:Fe=>Fe.stopPropagation(),children:[i.jsx(Lm,{size:10,className:"mr-1"})," "]})]}),((De=(Le=ie.keyframes)==null?void 0:Le[0])==null?void 0:De.mj_prompt)&&i.jsxs("div",{className:`p-2 rounded ${e==="dark"?"bg-zinc-700 border border-zinc-600":"bg-zinc-50 border border-gray-300"}`,children:[i.jsxs("h6",{className:`text-[10px] font-semibold mb-1 flex items-center gap-1 ${e==="dark"?"text-green-300":"text-green-700"}`,children:[i.jsx(Om,{size:10})," MJ Prompt"]}),i.jsx("p",{className:`text-[10px] whitespace-pre-wrap select-text cursor-text ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,onMouseDown:Fe=>Fe.stopPropagation(),children:ie.keyframes[0].mj_prompt}),i.jsxs("button",{onClick:()=>navigator.clipboard.writeText(ie.keyframes[0].mj_prompt),className:"mt-1 flex items-center text-[9px] text-blue-400 hover:text-blue-300",onMouseDown:Fe=>Fe.stopPropagation(),children:[i.jsx(Lm,{size:10,className:"mr-1"})," "]})]})]})]},se)})})]}),(((Jt=r.settings)==null?void 0:Jt.analysisMode)||"manual")==="manual"&&r.analysisResults&&r.analysisResults.length>0?i.jsxs("div",{className:"space-y-3 flex-1 flex flex-col min-h-0",children:[i.jsxs("div",{className:"text-[11px] font-medium text-zinc-700 dark:text-zinc-300 shrink-0",children:[" (",r.analysisResults.length," )"]}),i.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto custom-scrollbar min-h-0",children:r.analysisResults.map((ie,se)=>{var A,Le,De,Fe,Be,le,ze;const Ht=_e=>{var ot,oe;const Ie=(ot=O.selectedKeyframes)==null?void 0:ot.find(Oe=>Math.abs(Oe.time-_e)<.1);if(Ie)return Ie.url;const Ke=(oe=O.frames)==null?void 0:oe.find(Oe=>Math.abs(Oe.time-_e)<.1);return(Ke==null?void 0:Ke.url)||null},en=((A=ie.keyframes)==null?void 0:A.find(_e=>_e.type==="current"))||((Le=ie.keyframes)==null?void 0:Le[0]),Yt=(De=ie.keyframes)==null?void 0:De.find(_e=>_e.type==="prev"),mt=(Fe=ie.keyframes)==null?void 0:Fe.find(_e=>_e.type==="next"),tt=(en==null?void 0:en.description)||((le=(Be=ie.keyframes)==null?void 0:Be[0])==null?void 0:le.description)||"";return i.jsxs("div",{className:`p-3 rounded-lg border ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-white border-zinc-300"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"font-medium text-[11px] text-zinc-800 dark:text-zinc-200",children:[" ",ie.scene_index||se+1]}),i.jsx("div",{className:"text-[10px] text-zinc-500",children:ie.time_range})]}),i.jsx("div",{className:"text-[10px] text-zinc-600 dark:text-zinc-400 mb-3 line-clamp-2 select-text cursor-text",onMouseDown:_e=>_e.stopPropagation(),children:tt}),i.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[Yt,en,mt].map((_e,Ie)=>{if(!_e)return i.jsx("div",{className:"aspect-video bg-zinc-200 dark:bg-zinc-700 rounded"},Ie);const Ke=Ht(_e.time);return i.jsxs("div",{className:"relative aspect-video bg-black rounded overflow-hidden",children:[Ke?i.jsx("img",{src:Ke,className:"w-full h-full object-cover",alt:` ${Ie+1}`,loading:"lazy"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] text-zinc-500",children:_e.type==="prev"?"":_e.type==="current"?"":""}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[8px] px-1 py-0.5 text-center",children:[_e.time.toFixed(1),"s"]})]},Ie)})}),i.jsx("div",{className:"space-y-2",children:(ze=ie.keyframes)==null?void 0:ze.map((_e,Ie)=>i.jsxs("div",{className:"space-y-1.5",children:[i.jsxs("div",{className:"text-[9px] text-zinc-500",children:[_e.type==="prev"?"":_e.type==="current"?"":""," (",_e.time.toFixed(1),"s)"]}),_e.mj_prompt&&i.jsx("div",{className:`p-2 rounded border ${e==="dark"?"bg-zinc-900 border-zinc-600":"bg-zinc-50 border-zinc-200"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-[9px] text-zinc-500 mb-1",children:"Midjourney "}),i.jsx("div",{className:"text-[10px] text-zinc-700 dark:text-zinc-300 break-words select-text cursor-text",onMouseDown:Ke=>Ke.stopPropagation(),children:_e.mj_prompt})]}),i.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[i.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(_e.mj_prompt),alert("")}catch{alert("")}},className:`p-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:Ke=>Ke.stopPropagation(),title:"",children:i.jsx(qo,{size:12})}),i.jsx("button",{onClick:()=>{const Ke=xn(r.x+r.width+100,r.y+r.height/2),ot=`node-${Date.now()}`,oe={id:ot,type:"gen-image",x:Ke.x-180,y:Ke.y-170,width:360,height:340,settings:{model:"mj-v6",prompt:_e.mj_prompt,ratio:"Auto",resolution:"Auto"}};l(Oe=>[...Oe,oe]),setTimeout(()=>{const Oe=xn(r.x+r.width+200,r.y+r.height/2),wt=`node-${Date.now()+1}`,Ge={id:wt,type:"preview",x:Oe.x-160,y:Oe.y-130,width:320,height:260};l(jt=>[...jt,Ge]),d(jt=>[...jt,{id:`conn-${Date.now()}`,from:ot,to:wt}])},50)},className:"p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-blue-600 dark:text-blue-400",onMouseDown:Ke=>Ke.stopPropagation(),title:"",children:i.jsx(Wm,{size:12})})]})]})}),_e.jimeng_prompt&&i.jsx("div",{className:`p-2 rounded border ${e==="dark"?"bg-zinc-900 border-zinc-600":"bg-zinc-50 border-zinc-200"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-[9px] text-zinc-500 mb-1",children:""}),i.jsx("div",{className:"text-[10px] text-zinc-700 dark:text-zinc-300 break-words select-text cursor-text",onMouseDown:Ke=>Ke.stopPropagation(),children:_e.jimeng_prompt})]}),i.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(_e.jimeng_prompt),alert("")}catch{alert("")}},className:`p-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:Ke=>Ke.stopPropagation(),title:"",children:i.jsx(qo,{size:12})})]})})]},Ie))}),ie.global_tags&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-zinc-300 dark:border-zinc-700",children:[i.jsx("div",{className:"text-[9px] text-zinc-500 mb-1",children:""}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(ie.global_tags).map(([_e,Ie])=>Array.isArray(Ie)&&Ie.map((Ke,ot)=>i.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:Ke},`${_e}-${ot}`)))})]})]},se)})})]}):null]})})()})]}),r.type==="storyboard-node"&&(()=>{var je,xt,$n,ve,rt,bt,Ve,yt,_t,Qt,Qe,Dn,wn,Jn,ps,wr,Zn,me,it,Ct,Jt,ie,se,Ht,en,Yt,mt,tt;const O=(A,Le)=>{const De=A.clipboardData.items;for(let Fe=0;Fe<De.length;Fe++)if(De[Fe].type.indexOf("image")!==-1){A.preventDefault(),A.stopPropagation();const Be=De[Fe].getAsFile(),le=new FileReader;le.onload=ze=>Vt(r.id,Le,{image_url:ze.target.result}),le.readAsDataURL(Be);return}};return i.jsx("div",{className:"flex h-full",children:i.jsxs("div",{className:`flex flex-col h-full rounded-xl overflow-hidden pointer-events-auto transition-colors flex-1 ${e==="dark"?"bg-zinc-950 border border-zinc-800":"bg-white border border-zinc-300 shadow-sm"}`,onMouseEnter:()=>y0(!0),onMouseLeave:()=>y0(!1),children:[i.jsxs("div",{className:`px-4 py-3 border-b flex justify-between items-center shrink-0 flex-nowrap overflow-x-auto no-scrollbar ${e==="dark"?"bg-zinc-900 border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[i.jsx(ml,{size:16,className:"text-purple-500"}),i.jsx("span",{className:`font-bold text-xs ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,children:""}),i.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"/"}),(je=r.settings)!=null&&je.isEditingTitle?i.jsx("input",{type:"text",value:((xt=r.settings)==null?void 0:xt.projectTitle)||"",onChange:A=>pt(r.id,{projectTitle:A.target.value}),placeholder:"",className:`font-bold text-xs bg-transparent border-b border-blue-500 outline-none w-32 transition-colors ${e==="dark"?"text-zinc-200 placeholder-zinc-500":"text-zinc-800 placeholder-zinc-400"}`,onMouseDown:A=>A.stopPropagation(),onClick:A=>A.stopPropagation(),onKeyDown:A=>{A.stopPropagation(),(A.key==="Enter"||A.key==="Escape")&&pt(r.id,{isEditingTitle:!1})},onBlur:()=>pt(r.id,{isEditingTitle:!1}),autoFocus:!0}):i.jsx("span",{className:`font-bold text-xs cursor-move ${e==="dark"?"text-zinc-200":"text-zinc-800"} ${($n=r.settings)!=null&&$n.projectTitle?"":e==="dark"?"text-zinc-500":"text-zinc-400"}`,title:"",children:((ve=r.settings)==null?void 0:ve.projectTitle)||""}),i.jsx("button",{onClick:A=>{var Le;A.stopPropagation(),pt(r.id,{isEditingTitle:!((Le=r.settings)!=null&&Le.isEditingTitle)})},onMouseDown:A=>A.stopPropagation(),className:`p-0.5 rounded transition-colors ${(rt=r.settings)!=null&&rt.isEditingTitle?"text-blue-500":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-400 hover:text-zinc-600"}`,title:"",children:i.jsx(Q2,{size:12})}),i.jsxs("div",{className:`flex items-center ml-2 p-0.5 rounded-full ${e==="dark"?"bg-zinc-800":"bg-zinc-200"}`,children:[i.jsx("button",{onClick:A=>{var le,ze;A.stopPropagation();const Le="image",De=localStorage.getItem("tapnow_last_image_model")||((le=Te.find(_e=>_e.type==="Image"))==null?void 0:le.id)||"",Be=(((ze=r.settings)==null?void 0:ze.shots)||[]).map(_e=>{const Ie=Te.find(Ke=>Ke.id===_e.model);return!Ie||Ie.type==="Video"?{..._e,model:De,duration:void 0}:_e});pt(r.id,{mode:Le,shots:Be})},className:`text-[10px] px-2 py-0.5 rounded-full transition-all ${(((bt=r.settings)==null?void 0:bt.mode)||"video")==="image"?"bg-blue-500 text-white shadow-sm":e==="dark"?"text-zinc-400 hover:text-zinc-200":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:A=>A.stopPropagation(),title:"",children:""}),i.jsx("button",{onClick:A=>{var le,ze;A.stopPropagation();const Le="video",De=localStorage.getItem("tapnow_last_video_model")||((le=Te.find(_e=>_e.type==="Video"))==null?void 0:le.id)||"",Be=(((ze=r.settings)==null?void 0:ze.shots)||[]).map(_e=>{const Ie=Te.find(Ke=>Ke.id===_e.model);return!Ie||Ie.type==="Image"?{..._e,model:De,duration:go(De)}:_e});pt(r.id,{mode:Le,shots:Be})},className:`text-[10px] px-2 py-0.5 rounded-full transition-all ${(((Ve=r.settings)==null?void 0:Ve.mode)||"video")==="video"?"bg-green-500 text-white shadow-sm":e==="dark"?"text-zinc-400 hover:text-zinc-200":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:A=>A.stopPropagation(),title:"",children:""})]})]}),i.jsxs("div",{className:"flex items-center gap-2 relative z-10 shrink-0",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),confirm("")&&pt(r.id,{shots:[]})},className:"p-1 hover:bg-red-100 hover:text-red-500 rounded text-zinc-400 transition-colors",title:"",children:i.jsx(Ys,{size:14})}),i.jsxs("button",{onClick:()=>{var Le,De;const A=Za(r.id);if(A.length>0){const Fe=A.join(`
`),Be=/#\s*(\d+)\s*([^#]*)|\s*(\d+)\s*\s*([^#]*)/g,le=[];let ze;for(;(ze=Be.exec(Fe))!==null;){const _e=parseInt(ze[1]||ze[3]),Ie=(ze[2]||ze[4]||"").trim();Ie&&le.push({num:_e,text:Ie})}if(le.length===0&&Fe.split(`
`).filter(Ie=>Ie.trim()).forEach((Ie,Ke)=>{const ot=Ie.match(/^(\d+)[.\s]+(.*)/);ot?le.push({num:parseInt(ot[1]),text:ot[2].trim()}):le.push({num:Ke+1,text:Ie.trim()})}),le.length>0){const _e=((Le=r.settings)==null?void 0:Le.shots)||[],Ie=[..._e];le.forEach((Ke,ot)=>{ot<_e.length?Ie[ot]={...Ie[ot],prompt:Ke.text,description:Ke.text}:Ie.push({id:Date.now()+Math.random()+ot,prompt:Ke.text,description:Ke.text,model:localStorage.getItem("tapnow_last_video_model")||"",duration:5,status:"draft",outputEnabled:!0,selectedImageIndex:0})}),pt(r.id,{shots:Ie})}else alert(" (: #1 )")}else pt(r.id,{scriptExpanded:!((De=r.settings)!=null&&De.scriptExpanded)})},className:`text-xs px-2 py-1 rounded transition-colors flex items-center gap-1 ${e==="dark"?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-500 hover:bg-purple-400 text-white"}`,onMouseDown:A=>A.stopPropagation(),title:Za(r.id).length>0?"":"",children:[i.jsx(fs,{size:12}),i.jsx("span",{className:"whitespace-nowrap",children:""})]}),(()=>{var De;const A=Ja(r.id),Le=((De=A==null?void 0:A.selectedKeyframes)==null?void 0:De.length)||0;return i.jsxs("button",{onClick:async()=>{var _e;if(!A||Le===0){alert("");return}const Fe=A.selectedKeyframes,Be=((_e=r.settings)==null?void 0:_e.shots)||[],le=Math.max(Be.length,Fe.length),ze=Array.from({length:le},(Ie,Ke)=>{var ot,oe,Oe,wt,Ge,jt,Ft,ut,An;return{id:((ot=Be[Ke])==null?void 0:ot.id)||`shot-${Date.now()}-${Ke}`,...Be[Ke],prompt:((oe=Be[Ke])==null?void 0:oe.prompt)??"",description:((Oe=Be[Ke])==null?void 0:Oe.description)??"",model:((wt=Be[Ke])==null?void 0:wt.model)||localStorage.getItem("tapnow_last_video_model")||"",image_url:((Ge=Fe[Ke])==null?void 0:Ge.url)??((jt=Be[Ke])==null?void 0:jt.image_url)??"",image_filename:((Ft=Fe[Ke])==null?void 0:Ft.filename)||((ut=Be[Ke])==null?void 0:ut.image_filename)||"",status:((An=Be[Ke])==null?void 0:An.status)||"draft"}});if(N(),window.LocalImageManager){for(let Ie of ze)if(Ie.image_url&&(Ie.image_url.startsWith("file://")||Ie.image_url.startsWith("img_"))){const ot=Ie.image_url.startsWith("img_")?Ie.image_url:Ie.imgId||Ie.image_filename;if(ot)try{const oe=await window.LocalImageManager.getImage(ot);oe&&(Ie.image_url=URL.createObjectURL(oe))}catch(oe){console.error("[KeyframeImport] Failed to load local image:",ot,oe)}}}pt(r.id,{shots:ze}),console.log(`[KeyframeImport] Imported ${Fe.length} images, merged to ${ze.length} shots`)},className:`text-xs px-2 py-1 rounded transition-colors flex items-center gap-1 ${Le>0?"bg-blue-600 hover:bg-blue-500 text-white":e==="dark"?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-zinc-200 text-zinc-500 cursor-not-allowed"}`,onMouseDown:Fe=>Fe.stopPropagation(),disabled:Le===0,title:Le>0?` ${Le} `:"",children:[i.jsx(ta,{size:12}),i.jsxs("span",{className:"whitespace-nowrap",children:["",Le>0?` (${Le})`:""]})]})})(),(()=>{var Fe;const A=((Fe=r.settings)==null?void 0:Fe.mode)||"video",Le=u.filter(Be=>Be.to===r.id).map(Be=>Xt.get(Be.from)).find(Be=>Be&&(A==="image"&&Be.type==="gen-image"||A==="video"&&Be.type==="gen-video"));if(!Le)return null;const De=Le.settings||{};return i.jsxs("button",{onClick:()=>{var ze;const Be=((ze=r.settings)==null?void 0:ze.shots)||[];if(Be.length===0){pt(r.id,{errorMsg:""});return}N();const le=Be.map(_e=>({..._e,model:De.model||_e.model,ratio:De.ratio||_e.ratio,resolution:De.resolution||_e.resolution,duration:De.duration||_e.duration}));pt(r.id,{shots:le}),o(`  ${le.length}  | ${De.model||"?"} / ${De.ratio||"?"}`,"success",5e3),console.log(`[BatchSync] Synced ${le.length} shots`)},className:`text-xs px-2 py-1 rounded transition-colors flex items-center gap-1 ${e==="dark"?"bg-green-600 hover:bg-green-500 text-white":"bg-green-500 hover:bg-green-400 text-white"}`,onMouseDown:Be=>Be.stopPropagation(),title:` ${A==="image"?"":""}: ${De.model||"?"} / ${De.ratio||"?"} / ${De.resolution||"?"}${A==="video"?` / ${De.duration||"?"}`:""}`,children:[i.jsx(mu,{size:12}),i.jsx("span",{className:"whitespace-nowrap",children:""})]})})(),i.jsxs("div",{className:`flex items-center gap-1 border-l pl-2 ml-1 ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,children:[i.jsx("input",{type:"number",min:"0",max:"20",value:ye,onChange:A=>He(Math.max(0,parseInt(A.target.value)||0)),className:`w-8 text-center text-xs rounded border outline-none py-0.5 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300"}`,title:" (0=)"}),i.jsx("button",{onClick:()=>{var ze,_e;const A=((ze=r.settings)==null?void 0:ze.mode)||"video",Le=((_e=r.settings)==null?void 0:_e.shots)||[],De=Le.filter(Ie=>Ie.status==="generating");if(De.length>0){const Ie=prompt(` ${De.length} 




  "1"  "ok" = 
  "2"  "skip" = 
  = `,"");if(Ie===null||Ie.trim()==="")return;const Ke=Ie.trim().toLowerCase();(Ke==="1"||Ke==="ok"||Ke==="")&&De.forEach(ot=>{Vt(r.id,ot.id,{status:"pending",errorMsg:""}),ot.status="pending"})}let Fe=Le.filter(Ie=>Ie.status!=="done"&&Ie.status!=="generating"&&!Ie.outputEnabled),Be=!1;if(Fe.length===0){if(Fe=Le.filter(Ie=>!Ie.outputEnabled&&Ie.status==="done"),Fe.length===0){const Ie=Le.every(ot=>ot.outputEnabled);Le.some(ot=>ot.status==="generating")?alert(""):Ie&&Le.length>0?alert(`
`):alert("");return}Be=!0}if(Be){const Ie=`

 ${Fe.length} 

 
 

`;if(!confirm(Ie))return}const le=Fe.map(Ie=>({nodeId:r.id,shotId:Ie.id,retryCount:0,mode:A}));Q(Ie=>[...Ie,...le]),console.log(`[Batch ${A}]  ${le.length} : ${ye}`),he.current!=="running"&&(he.current="idle"),ce(Ie=>Ie+1),o(`  ${le.length} ${A==="image"?"":""} | : ${ye===0?"":ye}${Be?" ()":""}`,"success",5e3)},className:`p-1 rounded transition-colors ${(((yt=r.settings)==null?void 0:yt.mode)||"video")==="image"?e==="dark"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-400 text-white":e==="dark"?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-yellow-500 hover:bg-yellow-400 text-white"}`,title:`${(((_t=r.settings)==null?void 0:_t.mode)||"video")==="image"?"":""}`,children:i.jsxs("div",{className:"flex items-center gap-1",children:[(((Qt=r.settings)==null?void 0:Qt.mode)||"video")==="image"?i.jsx(ta,{size:12}):i.jsx(up,{size:12,fill:"currentColor"}),i.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:""})]})}),i.jsx("button",{onClick:async()=>{var Fe,Be,le;const A=((Fe=r.settings)==null?void 0:Fe.mode)||"video",Le=(((Be=r.settings)==null?void 0:Be.shots)||[]).filter(ze=>A==="image"?ze.output_url:ze.video_url);if(Le.length===0){alert(`${A==="image"?"":""}`);return}const De=((le=r.settings)==null?void 0:le.projectTitle)||"";for(let ze=0;ze<Le.length;ze++){const _e=Le[ze],Ie=A==="image"?_e.output_url:_e.video_url,Ke=A==="image"?"png":"mp4",ot=`${De}_${ze+1}.${Ke}`;try{const Oe=await(await fetch(Ie)).blob(),wt=document.createElement("a");wt.href=URL.createObjectURL(Oe),wt.download=ot,wt.click(),URL.revokeObjectURL(wt.href)}catch(oe){console.error("Download failed:",oe)}await new Promise(oe=>setTimeout(oe,300))}},className:`p-1 rounded transition-colors ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-600"}`,title:"",onMouseDown:A=>A.stopPropagation(),children:i.jsx(Qo,{size:12})}),i.jsx("button",{onClick:A=>{A.stopPropagation(),l(Le=>Le.map(De=>{var Fe;if(De.id===r.id){const Be=(Fe=De.settings)==null?void 0:Fe.showOutputPreview,le=Be?Math.max(380,De.width-160):De.width+160;return{...De,width:le,settings:{...De.settings,showOutputPreview:!Be}}}return De}))},className:`p-1 rounded transition-colors ${(Qe=r.settings)!=null&&Qe.showOutputPreview?"bg-blue-500 text-white":e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-400":"bg-zinc-200 hover:bg-zinc-300 text-zinc-500"}`,title:(Dn=r.settings)!=null&&Dn.showOutputPreview?"":"",onMouseDown:A=>A.stopPropagation(),children:i.jsx(_l,{size:12,className:`transition-transform ${(wn=r.settings)!=null&&wn.showOutputPreview?"rotate-90":""}`})})]})]}),((Jn=r.settings)==null?void 0:Jn.showOutputPreview)&&i.jsx("div",{className:"w-[160px] shrink-0 flex items-center justify-center gap-2 ml-1 ",children:(((ps=r.settings)==null?void 0:ps.mode)||"video")==="image"?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A=>{var Fe;A.stopPropagation();const Le=((Fe=r.settings)==null?void 0:Fe.shots)||[],De=Le.length>0&&Le.every(Be=>Be.outputEnabled);pt(r.id,{shots:Le.map(Be=>({...Be,outputEnabled:!De}))})},className:`text-[10px] px-2 py-1 rounded transition-colors whitespace-nowrap ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-600"}`,onMouseDown:A=>A.stopPropagation(),title:"/",children:(((wr=r.settings)==null?void 0:wr.shots)||[]).every(A=>A.outputEnabled)?"":""}),i.jsxs("button",{onClick:A=>{var Fe;A.stopPropagation();const Le=((Fe=r.settings)==null?void 0:Fe.shots)||[],De=Le.some(Be=>Be.selectedImageIndex>=0);pt(r.id,{shots:Le.map(Be=>({...Be,selectedImageIndex:Be.outputEnabled?Be.selectedImageIndex:De?-1:0}))})},className:`text-[10px] px-2 py-1 rounded transition-colors flex items-center gap-1 whitespace-nowrap ${e==="dark"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-400 text-white"}`,onMouseDown:A=>A.stopPropagation(),title:"==",children:[i.jsx(ta,{size:10}),i.jsx("span",{children:(((Zn=r.settings)==null?void 0:Zn.shots)||[]).some(A=>A.selectedImageIndex>=0)?"":""})]})]}):i.jsx("button",{onClick:A=>{var Fe;A.stopPropagation();const Le=((Fe=r.settings)==null?void 0:Fe.shots)||[],De=Le.length>0&&Le.every(Be=>Be.outputEnabled);pt(r.id,{shots:Le.map(Be=>({...Be,outputEnabled:!De}))})},className:`text-[10px] px-2 py-1 rounded transition-colors whitespace-nowrap ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-600"}`,onMouseDown:A=>A.stopPropagation(),title:"/",children:(((me=r.settings)==null?void 0:me.shots)||[]).every(A=>A.outputEnabled)?"":""})})]}),((it=r.settings)==null?void 0:it.scriptExpanded)&&i.jsxs("div",{className:`border-b shrink-0 p-3 space-y-2 ${e==="dark"?"bg-zinc-900/30 border-zinc-800":"bg-zinc-50/50 border-zinc-200"}`,children:[i.jsx("textarea",{value:((Ct=r.settings)==null?void 0:Ct.scriptText)||"",onChange:A=>pt(r.id,{scriptText:A.target.value}),placeholder:": #1  #2  ...",className:`w-full h-24 p-2 text-xs rounded border resize-none overflow-y-auto custom-scrollbar ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:A=>A.stopPropagation(),onWheel:A=>{A.stopPropagation()}}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>{var Ke,ot;const Le=Za(r.id).join(`
`),De=((Ke=r.settings)==null?void 0:Ke.scriptText)||"",Fe=Le||De;console.log("[ScriptSplitter] Text source:",Le?"connected node":"internal","length:",Fe.length);const Be=[],le=/#\s*(\d+)\s*([^#]*)|\s*(\d+)\s*\s*([^#]*)/g;let ze;for(;(ze=le.exec(Fe))!==null;){const oe=parseInt(ze[1]||ze[3]),Oe=(ze[2]||ze[4]||"").trim();Oe&&Be.push({num:oe,text:Oe})}if(Be.length===0&&Fe.split(`
`).filter(Oe=>Oe.trim()).forEach((Oe,wt)=>{const Ge=Oe.match(/^(\d+)[.\s]+(.*)/);Ge?Be.push({num:parseInt(Ge[1]),text:Ge[2].trim()}):Be.push({num:wt+1,text:Oe.trim()})}),Be.length===0){alert(": #1  #2 ");return}Be.sort((oe,Oe)=>oe.num-Oe.num);const _e=((ot=r.settings)==null?void 0:ot.shots)||[],Ie=[..._e];Be.forEach((oe,Oe)=>{Oe<_e.length?Ie[Oe]={...Ie[Oe],prompt:oe.text,description:oe.text}:Ie.push({id:Date.now()+Math.random()+Oe,prompt:oe.text,description:oe.text,model:localStorage.getItem("tapnow_last_video_model")||"",duration:5,status:"draft",outputEnabled:!0,selectedImageIndex:0})}),pt(r.id,{shots:Ie,scriptExpanded:!1}),console.log("[ScriptSplitter] Merged/Generated shots from text")},className:"px-3 py-1.5 text-xs bg-purple-600 text-white rounded hover:bg-purple-500 transition-colors",onMouseDown:A=>A.stopPropagation(),children:""}),i.jsxs("button",{onClick:async()=>{var Be,le,ze,_e,Ie,Ke,ot,oe,Oe,wt;const A=((Be=r.settings)==null?void 0:Be.scriptText)||"";if(!A.trim()){pt(r.id,{errorMsg:""});return}(((le=r.settings)==null?void 0:le.shots)||[]).length>0&&window.confirm(`
""""`);const{key:De,url:Fe}=Hs(Cr);if(!De){pt(r.id,{errorMsg:" Chat  Key"});return}try{N(),pt(r.id,{isGenerating:!0,errorMsg:""});const Ge=((ze=r.settings)==null?void 0:ze.llmSplitPrompt)||`
 JSON : [{"prompt": "1"}, {"prompt": "2"}, ...]
 JSON`,An=(((Ke=(Ie=(_e=(await(await fetch(`${Fe}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"Content-Type":"application/json"},body:JSON.stringify({model:Cr,messages:[{role:"system",content:Ge},{role:"user",content:A}],stream:!1})})).json()).choices)==null?void 0:_e[0])==null?void 0:Ie.message)==null?void 0:Ke.content)||"").match(/\[[\s\S]*\]/);if(An){const tn=JSON.parse(An[0]),Rt=((ot=r.settings)==null?void 0:ot.mode)||"video",Mt=Rt==="image"?localStorage.getItem("tapnow_last_image_model")||((oe=Te.find(Fi=>Fi.type==="Image"))==null?void 0:oe.id)||"":localStorage.getItem("tapnow_last_video_model")||((Oe=Te.find(Fi=>Fi.type==="Video"))==null?void 0:Oe.id)||"",Je=Rt==="image"?"1:1":"16:9",Tt=Rt==="video"?go(Mt):void 0,Zt=tn.map((Fi,dh)=>({id:`shot-${Date.now()}-${dh}`,scene_index:dh+1,prompt:Fi.prompt||Fi.description||"",description:Fi.description||Fi.prompt||"",image_url:"",video_url:"",output_url:"",model:Mt,ratio:Je,duration:Tt,status:"draft",outputEnabled:!1,selectedImageIndex:-1})),qn=((wt=r.settings)==null?void 0:wt.shots)||[],Is=qn.length>0&&!window.lastLlmSplitOverwrite?[...qn,...Zt]:Zt;pt(r.id,{shots:Is,scriptExpanded:!1,isGenerating:!1}),console.log("[LLM Split] Generated",Zt.length,"shots")}else throw new Error("AI ")}catch(Ge){console.error("[LLM Split] Error:",Ge),pt(r.id,{isGenerating:!1,errorMsg:Ge.message})}},className:"px-2 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-500 transition-colors flex items-center gap-1",onMouseDown:A=>A.stopPropagation(),disabled:(Jt=r.settings)==null?void 0:Jt.isGenerating,title:" AI ",children:[i.jsx(xl,{size:12}),(ie=r.settings)!=null&&ie.isGenerating?"...":"LLM"]}),i.jsx("button",{onClick:()=>{var A;return pt(r.id,{showLlmPromptEditor:!((A=r.settings)!=null&&A.showLlmPromptEditor)})},className:`p-1.5 text-xs rounded transition-colors ${(se=r.settings)!=null&&se.showLlmPromptEditor?"bg-blue-500 text-white":e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-700"}`,onMouseDown:A=>A.stopPropagation(),title:" LLM  Prompt",children:i.jsx(Z2,{size:12})}),!((Ht=r.settings)!=null&&Ht.showLlmPromptEditor)&&i.jsxs("div",{className:`flex flex-col text-[10px] ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:[i.jsx("span",{children:": #1 #2 "}),i.jsx("span",{children:"LLM: "})]})]}),((en=r.settings)==null?void 0:en.showLlmPromptEditor)&&i.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[i.jsx("span",{className:`text-[10px] shrink-0 pt-1 ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"LLM Prompt:"}),i.jsx("textarea",{value:((Yt=r.settings)==null?void 0:Yt.llmSplitPrompt)||`
 JSON : [{"prompt": "1"}, {"prompt": "2"}, ...]
 JSON`,onChange:A=>pt(r.id,{llmSplitPrompt:A.target.value}),className:`flex-1 text-xs p-2 rounded resize-none overflow-y-auto custom-scrollbar ${e==="dark"?"bg-zinc-800 text-zinc-200 border-zinc-700":"bg-white text-zinc-800 border-zinc-300"} border`,rows:3,placeholder:" LLM  Prompt...",onMouseDown:A=>A.stopPropagation(),onClick:A=>A.stopPropagation(),onKeyDown:A=>A.stopPropagation(),onWheel:A=>{A.stopPropagation()}})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3 min-h-0 bg-opacity-50",onWheel:A=>{A.stopPropagation()},children:((tt=(mt=r.settings)==null?void 0:mt.shots)==null?void 0:tt.length)>0?r.settings.shots.map((A,Le)=>{var Fe,Be,le,ze,_e,Ie,Ke,ot;const De=(Yr==null?void 0:Yr.nodeId)===r.id&&(Yr==null?void 0:Yr.shotId)===A.id;return i.jsxs(Wu.Fragment,{children:[i.jsxs("div",{className:"relative h-2 -mt-1 -mb-1 z-10 group/insert flex items-center justify-center cursor-pointer hover:h-6 transition-all",onClick:oe=>{oe.stopPropagation();const Oe=[...r.settings.shots||[]];Oe.splice(Le,0,{id:Date.now()+Math.random(),prompt:"",description:"",model:localStorage.getItem("tapnow_last_video_model")||"",duration:5,status:"draft",outputEnabled:!0,selectedImageIndex:0}),pt(r.id,{shots:Oe})},title:"",children:[i.jsx("div",{className:"w-full h-[2px] bg-blue-500 opacity-0 group-hover/insert:opacity-100 transition-opacity"}),i.jsx("div",{className:"absolute w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center opacity-0 group-hover/insert:opacity-100 transition-opacity shadow-sm scale-75 group-hover/insert:scale-100",children:i.jsx(Hi,{size:12})})]}),i.jsxs("div",{className:"flex items-stretch gap-2 w-full",children:[i.jsxs("div",{tabIndex:0,onClick:oe=>{oe.stopPropagation(),Pa({nodeId:r.id,shotId:A.id}),oe.currentTarget.focus()},onPaste:oe=>O(oe,A.id),className:`flex-1 flex gap-3 p-3 rounded-lg border transition-all group/shot cursor-pointer outline-none focus:ring-2 focus:ring-blue-500/50 ${De?"border-blue-500 ring-1 ring-blue-500 bg-blue-500/5 z-10":e==="dark"?"bg-zinc-900/50 border-zinc-800 hover:border-zinc-600":"bg-white border-zinc-200 hover:border-blue-300 hover:shadow-md"}`,children:[i.jsx("div",{className:`font-mono text-sm w-6 shrink-0 flex items-start pt-1 font-bold ${e==="dark"?"text-zinc-600":"text-zinc-400"}`,children:Le+1}),i.jsx("div",{className:"flex flex-col gap-2 shrink-0 mr-2 h-full min-h-[14rem] w-52",children:(()=>{var tn;const Oe=(((tn=r.settings)==null?void 0:tn.mode)||"video")==="video",wt=A.useFirstLastFrame,Ge=A.activeInput||"first",jt=A.useMultiRef,Ft=e==="dark"?"border-zinc-800":"border-zinc-300",ut=e==="dark"?"bg-black":"bg-zinc-50",An=(Rt,Mt)=>{var Zt;const Je=(Zt=Rt.target.files)==null?void 0:Zt[0];if(!Je)return;const Tt=new FileReader;Tt.onload=qn=>{Vt(r.id,A.id,{[Mt]:qn.target.result})},Tt.readAsDataURL(Je),Rt.target.value=""};if(Oe){const Rt=(Mt,Je)=>{const Tt=Mt==="first"?"image_url":"lastFrame",Zt=A[Tt],qn=Mt==="first"?"":"",hi=Je?"flex-1 h-full":"w-14 h-full shrink-0";return i.jsxs("div",{className:`relative rounded-lg border overflow-hidden group ${hi} ${ut} ${Ft} flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 transition-all`,onClick:Is=>{Is.stopPropagation(),Je||Vt(r.id,A.id,{activeInput:Mt})},children:[Zt?i.jsx(sr,{src:Zt,className:`w-full h-full object-cover ${Je?"":"opacity-60 hover:opacity-100"}`}):i.jsxs("div",{className:"flex flex-col items-center gap-1 text-zinc-500",children:[i.jsx(ea,{size:Je?20:14}),Je&&i.jsxs("span",{className:"text-[10px]",children:["",qn]})]}),i.jsx("div",{className:"absolute top-0 left-0 bg-black/60 text-white text-[9px] px-1.5 py-0.5 rounded-br z-20 backdrop-blur-md pointer-events-none",children:qn}),Zt&&i.jsx("button",{onClick:Is=>{Is.stopPropagation(),Se({url:Zt,type:"image"})},className:"absolute bottom-1 left-1 p-1 rounded-full bg-black/60 text-white hover:bg-blue-500 opacity-0 group-hover:opacity-100 transition-opacity z-30",title:"",children:i.jsx(Ms,{size:10})}),Je&&i.jsxs(i.Fragment,{children:[Zt&&i.jsx("button",{onClick:Is=>{Is.stopPropagation(),Vt(r.id,A.id,{[Tt]:""})},className:"absolute top-1 right-1 p-1 rounded-full bg-black/60 text-white hover:bg-red-500 opacity-0 group-hover:opacity-100 transition-opacity z-30",children:i.jsx(hs,{size:12})}),i.jsxs("label",{className:"absolute inset-0 z-10 flex items-center justify-center cursor-pointer opacity-0 hover:opacity-100",children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Is=>An(Is,Tt)}),i.jsx("div",{className:"p-2 rounded-full bg-black/50 text-white",children:i.jsx(ea,{size:16})})]}),i.jsx("div",{className:"absolute bottom-1 right-1 p-1 rounded bg-black/40 hover:bg-blue-500 text-white transition-colors cursor-pointer z-30",onClick:Is=>{Is.stopPropagation(),Vt(r.id,A.id,{useFirstLastFrame:!wt,activeInput:wt?"first":"last"})},title:"",children:i.jsx(ff,{size:12})}),Zt&&A.image_filename&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[9px] pl-8 pr-8 py-0.5 truncate opacity-0 group-hover:opacity-100 transition-opacity z-20",title:A.image_filename,children:A.image_filename})]})]},Mt)};return wt?i.jsxs("div",{className:"flex flex-row gap-2 h-full w-full",children:[Rt("first",Ge==="first"),Rt("last",Ge==="last")]}):Rt("first",!0)}else{const Rt=A.referenceImages&&A.referenceImages.length>0?A.referenceImages:A.image_url?[A.image_url]:[],Mt=Rt[0]||"";return i.jsxs("div",{className:"flex flex-col gap-2 h-full w-full",children:[i.jsxs("div",{className:`relative flex-1 rounded-lg border overflow-hidden group ${ut} ${Ft} flex flex-col items-center justify-center`,children:[Mt?i.jsxs(i.Fragment,{children:[i.jsx(sr,{src:Mt,className:"w-full h-full object-cover"}),i.jsx("button",{onClick:Je=>{Je.stopPropagation(),Se({url:Mt,type:"image"})},className:"absolute bottom-1 left-1 p-1 rounded-full bg-black/60 text-white hover:bg-blue-500 opacity-0 group-hover:opacity-100 transition-opacity z-30",title:"",children:i.jsx(Ms,{size:12})}),A.image_filename&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[9px] px-8 py-0.5 truncate opacity-0 group-hover:opacity-100 transition-opacity z-20",title:A.image_filename,children:A.image_filename}),i.jsx("button",{onClick:Je=>{Je.stopPropagation(),Vt(r.id,A.id,{image_url:"",image_filename:"",referenceImages:[]})},className:"absolute top-1 right-1 p-1 rounded-full bg-black/60 text-white hover:bg-red-500 opacity-0 group-hover:opacity-100 transition-opacity z-30",title:"",children:i.jsx(hs,{size:12})})]}):i.jsxs("div",{className:"flex flex-col items-center gap-1 text-zinc-500",children:[i.jsx(ea,{size:20}),i.jsx("span",{className:"text-[10px]",children:""})]}),i.jsxs("label",{className:`absolute inset-0 z-10 flex items-center justify-center cursor-pointer ${Mt?"opacity-0 hover:opacity-100":"opacity-100"}`,children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Je=>{var Zt;const Tt=(Zt=Je.target.files)==null?void 0:Zt[0];if(Tt){const qn=new FileReader;qn.onload=hi=>{Vt(r.id,A.id,{image_url:hi.target.result,image_filename:Tt.name})},qn.readAsDataURL(Tt)}}}),Mt&&i.jsx("div",{className:"p-2 rounded-full bg-black/50 text-white",children:i.jsx(ea,{size:16})})]}),i.jsx("div",{className:`absolute bottom-1 right-1 p-1 rounded bg-black/40 hover:bg-blue-500 text-white transition-colors cursor-pointer z-30 ${jt?"text-blue-400 bg-blue-500/30":"text-zinc-400"}`,onClick:Je=>{Je.stopPropagation(),Vt(r.id,A.id,{useMultiRef:!jt})},title:"",children:i.jsx(ml,{size:12})})]}),jt&&i.jsxs("div",{className:"flex gap-2 h-14 shrink-0 overflow-x-auto no-scrollbar items-center",children:[Rt.slice(1).map((Je,Tt)=>i.jsxs("div",{className:`relative w-12 h-14 shrink-0 rounded border overflow-hidden cursor-pointer hover:border-blue-500 transition-all ${Ft} ${ut}`,onClick:Zt=>{Zt.stopPropagation();const qn=[...Rt],hi=Tt+1;[qn[0],qn[hi]]=[qn[hi],qn[0]],Vt(r.id,A.id,{referenceImages:qn,image_url:qn[0]})},children:[i.jsx(sr,{src:Je,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute top-0 left-0 bg-black/50 text-white text-[8px] px-1 backdrop-blur-sm",children:Tt+2})]},Tt+1)),Rt.length<4&&i.jsxs("label",{className:`w-12 h-14 shrink-0 rounded border border-dashed flex items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 ${Ft} text-zinc-400 hover:text-blue-500 hover:border-blue-500 transition-colors`,children:[i.jsx(Hi,{size:16}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Je=>{var Zt;const Tt=(Zt=Je.target.files)==null?void 0:Zt[0];if(Tt){const qn=new FileReader;qn.onload=hi=>{Vt(r.id,A.id,{referenceImages:[...Rt,hi.target.result]})},qn.readAsDataURL(Tt)}}})]})]})]})}})()}),i.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:oe=>{oe.stopPropagation(),Sn((qe==null?void 0:qe.nodeId)===r.id&&qe.type==="shot-model"&&qe.shotId===A.id?null:{nodeId:r.id,type:"shot-model",shotId:A.id})},onMouseDown:oe=>oe.stopPropagation(),className:`flex items-center justify-between gap-1 px-2 py-1 rounded border text-xs transition-colors min-w-[100px] ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,children:[i.jsx("span",{className:"truncate font-mono text-[10px]",children:(()=>{var oe,Oe;return(oe=r.settings)!=null&&oe.mode,((Oe=pn.get(A.model))==null?void 0:Oe.id)||A.model||""})()}),i.jsx(mi,{size:10,className:"opacity-50 shrink-0"})]}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="shot-model"&&qe.shotId===A.id&&i.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:oe=>oe.stopPropagation(),onMouseLeave:()=>as(null),children:[i.jsx("div",{className:`w-24 border-r pr-1 max-h-80 overflow-y-auto custom-scrollbar ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:(()=>{var wt;const Oe=(((wt=r.settings)==null?void 0:wt.mode)||"video")==="image"?"Image":"Video";return Object.entries(cs).filter(([,Ge])=>Ge.models.some(jt=>jt.type===Oe)).map(([Ge,jt])=>i.jsx("button",{onMouseEnter:()=>as(Ge),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${br===Ge?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:jt.name||Ge},Ge))})()}),i.jsxs("div",{className:"flex-1 pl-1 max-h-80 overflow-y-auto custom-scrollbar",children:[(()=>{var wt,Ge;const Oe=(((wt=r.settings)==null?void 0:wt.mode)||"video")==="image"?"Image":"Video";return br&&((Ge=cs[br])==null?void 0:Ge.models.filter(jt=>jt.type===Oe).map(jt=>i.jsxs("button",{onClick:()=>{var tn;const Ft=((tn=r.settings)==null?void 0:tn.mode)||"video",ut=go(jt.id);Vt(r.id,A.id,{model:jt.id,duration:A.duration||ut});const An=Ft==="image"?"tapnow_last_image_model":"tapnow_last_video_model";localStorage.setItem(An,jt.id),Ft==="image"?E0(jt.id):T0(jt.id),Sn(null),as(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${A.model===jt.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[i.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:jt.id}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Oi(jt.id)}`})]},jt.id)))})(),!br&&i.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]}),(()=>{var wt;const oe=((wt=r.settings)==null?void 0:wt.mode)||"video",Oe=oe==="video"?rg(A.model):hf;return i.jsx("select",{value:A.ratio||(oe==="video"?"16:9":"1:1"),onChange:Ge=>Vt(r.id,A.id,{ratio:Ge.target.value}),onClick:Ge=>Ge.stopPropagation(),onMouseDown:Ge=>Ge.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,children:Oe.map(Ge=>i.jsx("option",{value:Ge,children:Ge},Ge))})})(),(()=>{var Oe,wt,Ge,jt;if((((Oe=r.settings)==null?void 0:Oe.mode)||"video")==="video")return(wt=A.model)!=null&&wt.includes("jimeng")||(jt=(Ge=pn.get(A.model))==null?void 0:Ge.modelName)!=null&&jt.includes("jimeng")?i.jsxs("select",{value:A.resolution||"720p",onChange:Ft=>Vt(r.id,A.id,{resolution:Ft.target.value}),onClick:Ft=>Ft.stopPropagation(),onMouseDown:Ft=>Ft.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,title:"",children:[i.jsx("option",{value:"720p",children:"720p"}),i.jsx("option",{value:"1080p",children:"1080p"})]}):null;{const Ft=pp(A.model);return i.jsx("select",{value:A.resolution||"Auto",onChange:ut=>Vt(r.id,A.id,{resolution:ut.target.value}),onClick:ut=>ut.stopPropagation(),onMouseDown:ut=>ut.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,title:"",children:Ft.map(ut=>i.jsx("option",{value:ut,children:ut},ut))})}})(),(((Fe=r.settings)==null?void 0:Fe.mode)||"video")==="video"&&(()=>{var jt,Ft;const oe=A.model||((jt=Te.find(ut=>ut.type==="Video"&&ut.id==="sora-2"))==null?void 0:jt.id)||((Ft=Te.find(ut=>ut.type==="Video"))==null?void 0:Ft.id)||"",Oe=Te.find(ut=>ut.id===oe),wt=(Oe==null?void 0:Oe.durations)||Nd(oe),Ge=go(oe);return i.jsx("select",{value:A.duration||Ge,onChange:ut=>Vt(r.id,A.id,{duration:ut.target.value}),onClick:ut=>ut.stopPropagation(),onMouseDown:ut=>ut.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,children:wt.map(ut=>i.jsx("option",{value:ut,children:ut},ut))})})()]}),i.jsx("textarea",{className:`text-sm outline-none resize-none bg-transparent transition-all ${e==="dark"?"text-zinc-200 placeholder:text-zinc-700":"text-zinc-800 placeholder:text-zinc-400"}`,value:A.description||"",placeholder:"...",title:A.description||"",onChange:oe=>Vt(r.id,A.id,{description:oe.target.value}),onClick:oe=>{oe.stopPropagation(),De||Pa({nodeId:r.id,shotId:A.id})},onMouseDown:oe=>oe.stopPropagation(),onFocus:oe=>{oe.stopPropagation(),De||Pa({nodeId:r.id,shotId:A.id})},onInput:oe=>{De&&(oe.currentTarget.style.height="auto",oe.currentTarget.style.height=oe.currentTarget.scrollHeight+"px")},ref:oe=>{oe&&De&&(oe.style.height="auto",oe.style.height=oe.scrollHeight+"px")},style:{minHeight:De?"8rem":"2.5rem",height:De?"auto":"2.5rem",transition:"all 0.2s ease-in-out"}}),i.jsxs("div",{className:`p-2 rounded text-xs font-mono border transition-all relative ${e==="dark"?"bg-zinc-950 border-zinc-800 text-zinc-400":"bg-zinc-50 border-zinc-200 text-zinc-600"}`,style:{minHeight:De?"8rem":"2rem",transition:"all 0.2s ease-in-out"},children:[i.jsx("textarea",{className:"w-full bg-transparent outline-none resize-none placeholder:text-opacity-50 transition-all pr-8",value:A.prompt||"",placeholder:"...",onChange:oe=>Vt(r.id,A.id,{prompt:oe.target.value}),onClick:oe=>{oe.stopPropagation(),De||Pa({nodeId:r.id,shotId:A.id})},onMouseDown:oe=>oe.stopPropagation(),onFocus:oe=>{oe.stopPropagation(),De||Pa({nodeId:r.id,shotId:A.id})},onInput:oe=>{De&&(oe.currentTarget.style.height="auto",oe.currentTarget.style.height=oe.currentTarget.scrollHeight+"px")},ref:oe=>{oe&&De&&(oe.style.height="auto",oe.style.height=oe.scrollHeight+"px")},style:{minHeight:De?"8rem":"2rem",height:De?"auto":"2rem",transition:"all 0.2s ease-in-out"}}),(A.model==="sora-2"||A.model==="sora-2-pro")&&Fn.length>0&&i.jsx("button",{onClick:oe=>{oe.stopPropagation(),Fo(!0)},className:`absolute top-2 right-2 p-1 rounded transition-colors ${e==="dark"?"text-zinc-500 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-400 hover:text-zinc-700 hover:bg-zinc-200"}`,title:"",children:i.jsx(yl,{size:12})})]}),(()=>{const oe=A.model||"";if(!(oe&&(oe.includes("sora")||oe==="sora-2"||oe==="sora-2-pro"))||Fn.length===0)return null;const wt=A.prompt||"",Ge=`${r.id}-${A.id}`,jt=N0[Ge]||!1,Ft=5,ut=Fn.length>Ft;return i.jsx("div",{className:"border-t border-dashed mt-1",style:{borderColor:e==="dark"?"rgba(63, 63, 70, 0.5)":"rgba(161, 161, 170, 0.5)"},children:i.jsxs("div",{className:"flex items-center justify-between py-1 px-1",children:[i.jsx("div",{className:"flex gap-2 overflow-x-auto py-2 flex-1 custom-scrollbar",children:(jt?Fn:Fn.slice(0,Ft)).map(An=>{const tn=`@${An.username}`,Rt=wt.includes(tn);return i.jsxs("button",{onClick:Mt=>{Mt.stopPropagation();let Je=wt||"";Rt?Je=Je.replace(tn,"").replace(/\s{2,}/g," ").trim():(Je=Je.trim(),Je=Je?`${Je} ${tn} `:`${tn} `),Vt(r.id,A.id,{prompt:Je})},className:`relative shrink-0 transition-all ${Rt?"scale-110":"opacity-70 hover:opacity-100"}`,title:An.username,children:[i.jsx("img",{src:An.profile_picture_url||"",alt:An.username,className:`w-8 h-8 rounded-full object-cover border-2 ${Rt?"border-blue-500 ring-2 ring-blue-500":"border-transparent"}`,onError:Mt=>{Mt.target.style.display="none"}}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-black/50 rounded-full p-0.5",children:i.jsx(gl,{size:8,className:"text-green-400"})})]},An.id)})}),ut&&i.jsx("button",{onClick:An=>{An.stopPropagation(),jt?hc(tn=>{const Rt={...tn};return delete Rt[Ge],Rt}):(Fo(!0),hc(tn=>({...tn,[Ge]:!0})))},className:`shrink-0 px-2 py-1 text-[10px] rounded transition-colors ml-2 ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,title:jt?"":"",children:jt?"":`+${Fn.length-Ft}`})]})})})(),i.jsxs("div",{className:"flex gap-1 flex-wrap items-center mt-1",children:[(Be=A.tags)==null?void 0:Be.map((oe,Oe)=>i.jsx("span",{className:`px-1.5 py-0.5 text-[10px] rounded border ${e==="dark"?"bg-blue-900/30 text-blue-300 border-blue-800":"bg-blue-50 text-blue-600 border-blue-200"}`,children:oe},Oe)),A.camera&&i.jsxs("span",{className:`px-1.5 py-0.5 text-[10px] rounded border flex items-center gap-1 ${e==="dark"?"bg-purple-900/30 text-purple-300 border-purple-800":"bg-purple-50 text-purple-600 border-purple-200"}`,children:[i.jsx(cp,{size:8})," ",A.camera]}),A.time_range&&i.jsx("span",{className:`text-[10px] ml-auto font-mono ${e==="dark"?"text-zinc-600":"text-zinc-400"}`,children:A.time_range})]})]}),i.jsxs("div",{className:`flex flex-col gap-2 justify-center border-l pl-2 shrink-0 ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[(()=>{var Ge;const oe=((Ge=r.settings)==null?void 0:Ge.mode)||"video",Oe=oe==="image"?A.output_url:A.video_url,wt=A.status==="done"&&Oe;return i.jsx("button",{onClick:jt=>{jt.stopPropagation(),A.status==="generating"?Vt(r.id,A.id,{status:"draft",errorMsg:null}):oe==="image"?nh(r.id,A):th(r.id,A)},className:`p-1.5 rounded text-white shadow-sm transition-all active:scale-95 ${A.status==="generating"?"bg-zinc-500 hover:bg-red-500":wt?"bg-blue-500 hover:bg-green-600":oe==="image"?"bg-blue-600 hover:bg-blue-500":"bg-green-600 hover:bg-green-500"}`,title:A.status==="generating"?"":wt?"":`${oe==="image"?"":""}`,onMouseDown:jt=>jt.stopPropagation(),children:A.status==="generating"?i.jsxs("div",{className:"relative w-3.5 h-3.5 flex items-center justify-center",children:[i.jsx(gi,{size:14,className:"animate-spin absolute"}),i.jsx(Km,{size:10,fill:"currentColor",className:"opacity-0 hover:opacity-100 absolute z-10 transition-opacity"})]}):wt?i.jsx(zl,{size:14}):oe==="image"?i.jsx(ta,{size:14}):i.jsx(Vm,{size:14,fill:"currentColor"})})})(),i.jsx("button",{onClick:()=>j1(r.id,A.id),className:`p-1.5 transition-colors ${e==="dark"?"text-zinc-600 hover:text-red-500":"text-zinc-400 hover:text-red-600"}`,title:"",onMouseDown:oe=>oe.stopPropagation(),children:i.jsx(Ys,{size:14})}),i.jsxs("div",{className:"flex flex-col gap-0.5 ml-1",children:[i.jsx("button",{onClick:()=>{var wt;const oe=[...((wt=r.settings)==null?void 0:wt.shots)||[]],Oe=oe.findIndex(Ge=>Ge.id===A.id);Oe>0&&([oe[Oe-1],oe[Oe]]=[oe[Oe],oe[Oe-1]],pt(r.id,{shots:oe}))},disabled:Le===0,className:`p-0.5 rounded transition-colors ${Le===0?"opacity-30 cursor-not-allowed":""} ${e==="dark"?"text-zinc-500 hover:text-blue-400 hover:bg-zinc-800":"text-zinc-400 hover:text-blue-500 hover:bg-zinc-100"}`,title:"",onMouseDown:oe=>oe.stopPropagation(),children:i.jsx(ap,{size:12})}),i.jsx("button",{onClick:()=>{var wt;const oe=[...((wt=r.settings)==null?void 0:wt.shots)||[]],Oe=oe.findIndex(Ge=>Ge.id===A.id);Oe<oe.length-1&&([oe[Oe],oe[Oe+1]]=[oe[Oe+1],oe[Oe]],pt(r.id,{shots:oe}))},disabled:Le===(((ze=(le=r.settings)==null?void 0:le.shots)==null?void 0:ze.length)||0)-1,className:`p-0.5 rounded transition-colors ${Le===(((Ie=(_e=r.settings)==null?void 0:_e.shots)==null?void 0:Ie.length)||0)-1?"opacity-30 cursor-not-allowed":""} ${e==="dark"?"text-zinc-500 hover:text-blue-400 hover:bg-zinc-800":"text-zinc-400 hover:text-blue-500 hover:bg-zinc-100"}`,title:"",onMouseDown:oe=>oe.stopPropagation(),children:i.jsx(mi,{size:12})})]})]})]}),((Ke=r.settings)==null?void 0:Ke.showOutputPreview)&&i.jsxs("div",{className:`w-[160px] shrink-0 p-2 ml-1 flex flex-col gap-2 rounded-lg border transition-all ${e==="dark"?"bg-zinc-900/50 border-zinc-800":"bg-white border-zinc-200"} ${A.outputEnabled?e==="dark"?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-300":""}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`w-4 h-4 rounded border cursor-pointer flex items-center justify-center transition-colors ${A.outputEnabled?"bg-blue-500 border-blue-500 text-white":e==="dark"?"border-zinc-600 hover:border-blue-400":"border-zinc-400 hover:border-blue-400"}`,onClick:oe=>{oe.stopPropagation(),Vt(r.id,A.id,{outputEnabled:!A.outputEnabled})},title:A.outputEnabled?"":"",children:A.outputEnabled&&i.jsx(jl,{size:10})}),i.jsx("span",{className:`text-[10px] ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:((ot=A.output_images)==null?void 0:ot.length)>0?"":""})]}),(()=>{var An;const oe=A.output_images||[],Oe=A.selectedImageIndex??0;if((((An=r.settings)==null?void 0:An.mode)||"video")==="video")return i.jsxs("div",{className:`flex-1 min-h-[80px] rounded overflow-hidden relative group/preview cursor-pointer border ${e==="dark"?"border-zinc-800 bg-black":"border-zinc-200 bg-zinc-50"}`,onClick:tn=>{tn.stopPropagation(),A.video_url&&Se({url:A.video_url,type:"video",prompt:A.prompt})},children:[A.video_url?i.jsx("video",{src:A.video_url,className:"w-full h-full object-cover",muted:!0}):i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:i.jsx(Um,{size:16})}),A.video_url&&i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/preview:opacity-100 flex items-center justify-center transition-opacity",children:i.jsx(Ms,{size:16,className:"text-white drop-shadow-md"})}),A.video_filename&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[8px] px-1 py-0.5 truncate opacity-0 group-hover/preview:opacity-100 transition-opacity",title:A.video_filename,children:A.video_filename})]});const Ge=A.outputEnabled,jt=Oe>=0,Ft=jt?Oe:0;if(oe.length>=2)if(De){const tn=oe[Ft]||oe[0],Rt=oe.slice(0,4).map((Mt,Je)=>({img:Mt,idx:Je})).filter(Mt=>Mt.idx!==Ft);return i.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-h-[100px]",children:[i.jsxs("div",{className:`relative flex-1 rounded border overflow-hidden transition-all group/main ${jt?"border-blue-500 ring-1 ring-blue-500/50":e==="dark"?"border-zinc-700":"border-zinc-300"} ${Ge?"cursor-not-allowed opacity-80":"cursor-pointer"}`,onClick:Mt=>{Mt.stopPropagation(),Ge||Vt(r.id,A.id,{selectedImageIndex:jt?-1:Ft})},onDoubleClick:Mt=>{var Je,Tt;Mt.stopPropagation(),Se({url:tn,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Ft,storyboardContext:{nodeId:r.id,shotId:A.id,shotIndex:(((Je=r.settings)==null?void 0:Je.shots)||[]).findIndex(Zt=>Zt.id===A.id),allShots:((Tt=r.settings)==null?void 0:Tt.shots)||[]}})},onContextMenu:Mt=>{el(Mt,{url:tn,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Ft,sourceNode:r})},children:[i.jsx(sr,{src:tn,className:"w-full h-full object-cover"}),i.jsx("div",{className:`absolute top-0 left-0 text-[8px] px-1 py-0.5 rounded-br ${jt?"bg-blue-500 text-white":"bg-black/50 text-white"}`,children:Ft+1}),jt&&i.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white p-0.5 rounded-bl",children:i.jsx(jl,{size:10})}),Ge&&i.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500 text-black p-0.5 rounded text-[8px]",children:""}),i.jsx("button",{onClick:Mt=>{var Je,Tt;Mt.stopPropagation(),Se({url:tn,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Ft,storyboardContext:{nodeId:r.id,shotId:A.id,shotIndex:(((Je=r.settings)==null?void 0:Je.shots)||[]).findIndex(Zt=>Zt.id===A.id),allShots:((Tt=r.settings)==null?void 0:Tt.shots)||[]}})},className:"absolute bottom-0 left-0 p-0.5 rounded-tr bg-black/60 text-white hover:bg-blue-500 opacity-0 group-hover/main:opacity-100 transition-opacity z-10",title:"",children:i.jsx(Ms,{size:10})})]}),i.jsx("div",{className:"flex gap-1 h-10 shrink-0",children:Rt.map(({img:Mt,idx:Je})=>i.jsxs("div",{className:`relative flex-1 rounded border overflow-hidden transition-all group/thumb ${e==="dark"?"border-zinc-700":"border-zinc-300"} ${Ge?"cursor-not-allowed opacity-60":"cursor-pointer hover:border-blue-400"}`,onClick:Tt=>{Tt.stopPropagation(),Ge||Vt(r.id,A.id,{selectedImageIndex:Je})},onContextMenu:Tt=>{el(Tt,{url:Mt,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Je,sourceNode:r})},children:[i.jsx(sr,{src:Mt,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute top-0 left-0 bg-black/50 text-white text-[7px] px-0.5",children:Je+1})]},Je))})]})}else return i.jsx("div",{className:"grid grid-cols-2 gap-1 flex-1 min-h-[100px]",children:oe.slice(0,4).map((tn,Rt)=>i.jsxs("div",{className:`relative rounded border overflow-hidden transition-all group/cell ${Oe===Rt?"border-blue-500 ring-1 ring-blue-500/50":e==="dark"?"border-zinc-700":"border-zinc-300"} ${Ge?"cursor-not-allowed opacity-80":"cursor-pointer hover:border-blue-400"}`,onClick:Mt=>{Mt.stopPropagation(),Ge||Vt(r.id,A.id,{selectedImageIndex:Oe===Rt?-1:Rt})},onDoubleClick:Mt=>{var Je,Tt;Mt.stopPropagation(),Se({url:tn,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Rt,storyboardContext:{nodeId:r.id,shotId:A.id,shotIndex:(((Je=r.settings)==null?void 0:Je.shots)||[]).findIndex(Zt=>Zt.id===A.id),allShots:((Tt=r.settings)==null?void 0:Tt.shots)||[]}})},onContextMenu:Mt=>{el(Mt,{url:tn,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Rt,sourceNode:r})},children:[i.jsx(sr,{src:tn,className:"w-full h-full object-cover"}),i.jsx("div",{className:`absolute top-0 left-0 text-[7px] px-0.5 rounded-br ${Oe===Rt?"bg-blue-500 text-white":"bg-black/50 text-white"}`,children:Rt+1}),Oe===Rt&&i.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white p-0.5 rounded-bl",children:i.jsx(jl,{size:8})}),i.jsx("button",{onClick:Mt=>{var Je,Tt;Mt.stopPropagation(),Se({url:tn,type:"image",prompt:A.prompt,mjImages:oe,selectedMjImageIndex:Rt,storyboardContext:{nodeId:r.id,shotId:A.id,shotIndex:(((Je=r.settings)==null?void 0:Je.shots)||[]).findIndex(Zt=>Zt.id===A.id),allShots:((Tt=r.settings)==null?void 0:Tt.shots)||[]}})},className:"absolute bottom-0 left-0 p-0.5 rounded-tr bg-black/60 text-white hover:bg-blue-500 opacity-0 group-hover/cell:opacity-100 transition-opacity z-10",title:"",children:i.jsx(Ms,{size:8})})]},Rt))});const ut=oe[0]||A.output_url;return i.jsxs("div",{className:`flex-1 min-h-[80px] rounded overflow-hidden relative group/preview cursor-pointer border ${e==="dark"?"border-zinc-800 bg-black":"border-zinc-200 bg-zinc-50"}`,onClick:tn=>{tn.stopPropagation(),ut&&Se({url:ut,type:"image",prompt:A.prompt})},onContextMenu:tn=>{ut&&el(tn,{url:ut,type:"image",prompt:A.prompt,sourceNode:r})},children:[ut?i.jsx(sr,{src:ut,className:"w-full h-full object-cover"}):i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30",children:i.jsx(Um,{size:16})}),ut&&i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/preview:opacity-100 flex items-center justify-center transition-opacity",children:i.jsx(Ms,{size:16,className:"text-white drop-shadow-md"})}),A.image_filename&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[8px] px-1 py-0.5 truncate opacity-0 group-hover/preview:opacity-100 transition-opacity",title:A.image_filename,children:A.image_filename})]})})()]})]})]},A.id)}):i.jsxs("div",{className:`flex flex-col items-center justify-center h-40 gap-3 rounded-lg border-2 border-dashed ${e==="dark"?"border-zinc-800 text-zinc-600":"border-zinc-300 text-zinc-400"}`,children:[i.jsx(ml,{size:32,className:"opacity-50"}),i.jsx("span",{className:"text-xs",children:""})]})}),i.jsx("div",{className:`p-3 border-t shrink-0 ${e==="dark"?"bg-zinc-900 border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:i.jsxs("button",{onClick:()=>z1(r.id),className:`w-full py-2 border border-dashed text-xs rounded transition-colors flex items-center justify-center gap-2 ${e==="dark"?"border-zinc-700 text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200":"border-zinc-300 text-zinc-500 hover:bg-white hover:text-blue-600 hover:border-blue-400"}`,onMouseDown:A=>A.stopPropagation(),children:[i.jsx(Hi,{size:14})," "]})})]})})})(),r.type==="image-compare"&&i.jsx("div",{className:"w-full h-full pointer-events-auto",children:i.jsx(jk,{img1:p[0],img2:p[1]})}),r.type==="preview"&&i.jsxs("div",{className:"flex flex-col h-full pointer-events-auto",children:[i.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b text-xs font-semibold ${e==="dark"?"border-zinc-800 text-zinc-200":"border-zinc-200 text-zinc-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ms,{size:13,className:"text-blue-500"}),i.jsx("span",{children:""})]}),i.jsx("span",{className:"text-[10px] text-zinc-500",children:r.previewType==="video"?"":""})]}),i.jsxs("div",{className:"flex-1 flex flex-col p-2 gap-2 min-h-0",children:[i.jsx("div",{className:`relative flex-1 rounded-lg overflow-hidden flex items-center justify-center min-h-0 ${e==="dark"?"bg-zinc-900":"bg-zinc-100"}`,onContextMenu:O=>{const je=r.content||r.previewMjImages&&r.previewMjImages[0];je&&el(O,{url:je,type:r.previewType||(pr(je)?"video":"image"),sourceNode:r})},onDoubleClick:O=>{O.stopPropagation(),O.preventDefault();const je=r.content||r.previewMjImages&&r.previewMjImages[0];je&&Se({url:je,type:r.previewType||(pr(je)?"video":"image")})},children:r.content||r.previewMjImages&&r.previewMjImages.length>0?pr(r.content)||r.previewType==="video"?i.jsx("video",{src:r.content,className:"w-full h-full object-contain bg-black",controls:!0,draggable:!1}):r.previewMjImages&&(r.previewMjImages.length===4||r.previewMjImages.length>1)?i.jsx("div",{className:`w-full h-full grid gap-0.5 p-0.5 ${r.previewMjImages.length===4?"grid-cols-2 grid-rows-2":"grid-cols-2"}`,children:r.previewMjImages.map((O,je)=>i.jsx("div",{className:"relative w-full h-full overflow-hidden bg-black flex items-center justify-center group",children:i.jsx("img",{src:O,className:"max-w-full max-h-full w-auto h-auto object-contain",alt:` ${je+1}`,draggable:!1,onError:xt=>{console.error(` ${je+1} `),xt.target.style.display="none"}})},je))}):i.jsxs("div",{className:"w-full h-full relative group/preview",children:[i.jsx(sr,{src:r.content||r.previewMjImages&&r.previewMjImages[0],className:"w-full h-full object-contain bg-black",draggable:!1,onError:O=>{console.warn("[Preview] Image load error")}}),r.previewFilename&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[10px] px-2 py-1 truncate opacity-0 group-hover/preview:opacity-100 transition-opacity backdrop-blur-sm",title:r.previewFilename,children:r.previewFilename})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center text-[11px] text-zinc-500",children:[i.jsx(ta,{className:"w-6 h-6 mb-1 text-zinc-400"}),i.jsx("span",{children:" AI  / AI  "}),i.jsx("span",{children:""})]})}),i.jsxs("div",{className:"flex items-center justify-between gap-2 text-[11px]",children:[i.jsxs("button",{className:`flex-1 inline-flex items-center justify-center gap-1 px-2 py-1 rounded border ${e==="dark"?"border-zinc-700 text-zinc-200 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onMouseDown:O=>O.stopPropagation(),onClick:async()=>{if(r.content)try{await navigator.clipboard.writeText(r.content)}catch{}},children:[i.jsx(qo,{size:13}),""]}),i.jsxs("button",{className:`flex-1 inline-flex items-center justify-center gap-1 px-2 py-1 rounded border ${e==="dark"?"border-zinc-700 text-zinc-200 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onMouseDown:O=>O.stopPropagation(),onClick:async()=>{if(!r.content)return;const O=xn(r.x+r.width+100,r.y+r.height/2);let je;if(!pr(r.content))try{const xt=await Ur(r.content);xt!=null&&xt.w&&(xt!=null&&xt.h)&&(je={w:xt.w,h:xt.h})}catch{}Es("input-image",O.x,O.y,null,r.content,je)},children:[i.jsx(qc,{size:13}),""]}),i.jsxs("button",{className:`flex-1 inline-flex items-center justify-center gap-1 px-2 py-1 rounded border ${e==="dark"?"border-zinc-700 text-zinc-200 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onMouseDown:O=>O.stopPropagation(),onClick:()=>{if(!r.content)return;const O={name:r.previewType==="video"?"Preview.mp4":"Preview.png",type:r.previewType==="video"?"video/mp4":"image/png",content:r.content,isImage:r.previewType!=="video",isVideo:r.previewType==="video",isAudio:!1,fromPreview:!0};ns(je=>[...je,O]),lr(!0)},children:[i.jsx(na,{size:13}),""]})]})]})]}),(r.type==="gen-image"||r.type==="gen-video")&&(()=>{var ve,rt,bt,Ve,yt,_t,Qt,Qe,Dn,wn,Jn,ps,wr,Zn;const O=kt.find(me=>me.sourceNodeId===r.id&&(me.status==="generating"||me.status==="completed")),je=O&&O.status==="generating",xt=O!=null&&O.durationMs?(O.durationMs/1e3).toFixed(1):null,$n=Vy[r.id]||0;return i.jsxs("div",{className:"p-3 flex flex-col h-full pointer-events-auto",children:[(je||xt)&&i.jsx("div",{className:`mb-2 px-2 py-1 rounded text-[10px] font-mono text-center ${e==="dark"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:je?i.jsxs("span",{children:[" ",$n.toFixed(1),"s"]}):i.jsxs("span",{children:["  ",xt,"s"]})}),i.jsxs("div",{className:`flex items-center gap-1.5 mb-2 text-xs font-semibold shrink-0 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:[r.type==="gen-image"?i.jsx(ck,{size:12,className:"text-blue-400"}):i.jsx(cp,{size:12,className:"text-purple-400"}),i.jsx("span",{children:r.type==="gen-image"?"AI ":"AI "})]}),p.length>0&&i.jsxs("div",{className:`mb-2 rounded-lg border p-2 relative group/ref ${e==="dark"?"bg-zinc-900/50 border-purple-500/20":"bg-violet-50 border-violet-200"}`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[i.jsxs("span",{className:`text-[10px] font-medium flex items-center gap-1 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:[i.jsx(Wm,{size:10}),""]}),i.jsxs("span",{className:"text-[9px] font-mono text-zinc-500",children:[p.length,"/10"]})]}),i.jsx("div",{className:"flex -space-x-2 overflow-visible pb-1 items-center custom-scrollbar pl-1",children:p.map((me,it)=>i.jsx("div",{className:"relative shrink-0 flex flex-col items-center gap-0 ",children:i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute -top-1 -left-1 w-4 h-4 text-[9px] font-semibold rounded-full bg-zinc-700 text-white select-none flex items-center justify-center border border-white/70 shadow-sm leading-none pointer-events-none",style:{zIndex:30},children:it+1}),i.jsx("div",{className:`relative w-8 h-8 rounded-full border-2 thumb-stack-item cursor-pointer overflow-hidden ${e==="dark"?"border-[#18181b] bg-zinc-800":"border-white bg-zinc-200"}`,style:{zIndex:10-it},children:i.jsx(sr,{src:me,className:"w-full h-full object-cover"})})]})},it))})]}),i.jsxs("div",{className:`rounded-lg p-3 mb-2 border focus-within:border-blue-500/30 transition-colors flex-1 flex flex-col ${e==="dark"?"bg-zinc-950/50 border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[r.type==="gen-image"&&(()=>{const me=r==null?void 0:r.maskContent;let it=u.find(se=>se.to===r.id&&(!se.inputType||se.inputType==="default"));it||(it=u.find(se=>se.to===r.id));const Ct=it?Xt.get(it.from):null,Jt=Ct&&Ct.maskContent;return me||Jt?i.jsxs("div",{className:`flex items-center gap-1.5 mb-2 px-2 py-1 rounded text-[10px] font-medium ${e==="dark"?"bg-purple-900/30 text-purple-300 border border-purple-800":"bg-purple-50 text-purple-600 border border-purple-200"}`,children:[i.jsx(Py,{size:12}),i.jsx("span",{children:Jt?"":""})]}):null})(),i.jsxs("div",{className:"flex items-start gap-2 mb-1 flex-1 h-full min-h-0",children:[i.jsx("textarea",{className:`flex-1 h-full bg-transparent text-xs outline-none resize-none custom-scrollbar ${e==="dark"?"text-zinc-300 placeholder-zinc-600":"text-zinc-800 placeholder-zinc-400"}`,placeholder:"...",value:r.type==="gen-image"?((ve=r.settings)==null?void 0:ve.prompt)||"":((rt=r.settings)==null?void 0:rt.videoPrompt)||"",onChange:me=>pt(r.id,r.type==="gen-image"?{prompt:me.target.value}:{videoPrompt:me.target.value}),onMouseDown:me=>me.stopPropagation()}),r.type==="gen-video"&&(((bt=r.settings)==null?void 0:bt.model)==="sora-2"||((Ve=r.settings)==null?void 0:Ve.model)==="sora-2-pro")&&Fn.length>0&&i.jsx("div",{className:"relative shrink-0",children:i.jsx("button",{onClick:me=>{me.stopPropagation(),Fo(!0)},className:`p-1.5 rounded transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:"",children:i.jsx(yl,{size:14})})})]})]}),r.type==="gen-video"&&(()=>{var Yt,mt;const me=((Yt=r.settings)==null?void 0:Yt.model)||"",it=pn.get(me),Ct=(it==null?void 0:it.modelName)||(it==null?void 0:it.id)||me;if(!(Ct&&(Ct.includes("sora")||me.includes("sora")))||Fn.length===0)return null;const ie=((mt=r.settings)==null?void 0:mt.videoPrompt)||"",se=N0[r.id]||!1,Ht=5,en=Fn.length>Ht;return i.jsx("div",{className:"border-t border-dashed mt-1",style:{borderColor:e==="dark"?"rgba(63, 63, 70, 0.5)":"rgba(161, 161, 170, 0.5)"},children:i.jsxs("div",{className:"flex items-center justify-between py-1 px-1",children:[i.jsx("div",{className:"flex gap-2 overflow-x-auto py-2 flex-1 custom-scrollbar",children:(se?Fn:Fn.slice(0,Ht)).map(tt=>{const A=`@${tt.username}`,Le=ie.includes(A);return i.jsxs("button",{onClick:De=>{De.stopPropagation();let Fe=ie||"";Le?Fe=Fe.replace(A,"").replace(/\s{2,}/g," ").trim():(Fe=Fe.trim(),Fe=Fe?`${Fe} ${A} `:`${A} `),pt(r.id,{videoPrompt:Fe})},className:`relative shrink-0 transition-all ${Le?"scale-110":"opacity-70 hover:opacity-100"}`,title:tt.username,children:[i.jsx(sr,{src:tt.profile_picture_url||"",alt:tt.username,className:`w-8 h-8 rounded-full object-cover border-2 ${Le?"border-blue-500 ring-2 ring-blue-500":"border-transparent"}`,onError:De=>{De.target.style.display="none"}}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-black/50 rounded-full p-0.5",children:i.jsx(gl,{size:8,className:"text-green-400"})})]},tt.id)})}),en&&i.jsx("button",{onClick:tt=>{tt.stopPropagation(),se?hc(A=>{const Le={...A};return delete Le[r.id],Le}):(Fo(!0),hc(A=>({...A,[r.id]:!0})))},className:`shrink-0 px-2 py-1 text-[10px] rounded transition-colors ml-2 ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,title:se?"":"",children:se?"":`+${Fn.length-Ht}`})]})})})(),r.type==="gen-image"&&(()=>{var Ct;const me=pn.get((Ct=r.settings)==null?void 0:Ct.model);return me&&(me.id.includes("mj")||me.provider.toLowerCase().includes("midjourney"))})()&&(()=>{var Ct,Jt;const me=_c(r.id,"oref"),it=_c(r.id,"sref");return i.jsxs("div",{className:"flex flex-col gap-1.5 mb-2 relative","data-mj-instructions":"true",children:[i.jsxs("div",{className:"relative flex items-center gap-1.5","data-mj-oref":"true",children:[i.jsx("div",{className:`input-point ${me?"connected":""} ${un===r.id&&is==="oref"?"active":""}`,title:"oref",onMouseDown:ie=>{ie.stopPropagation(),ie.preventDefault();const se=xn(ie.clientX,ie.clientY);_s(se),ss(r.id),os("oref")},onMouseUp:ie=>Cs(r.id,ie,"oref"),"data-input-type":"oref",style:{position:"absolute",top:"50%",left:"-0.25rem",transform:"translateY(-50%)",width:"0.5rem",height:"0.5rem",marginRight:"0.25rem",zIndex:20,cursor:"crosshair"}}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 ml-2",children:[i.jsx("span",{className:`text-[10px] font-medium ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"oref"}),me&&i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]})]}),i.jsxs("div",{className:"relative flex items-center gap-1.5",children:[i.jsx("div",{className:"w-0.5rem h-0.5rem mr-0.25rem ml-2"}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-1",children:[i.jsx("span",{className:`text-[10px] font-medium ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"ow"}),((Ct=r.settings)==null?void 0:Ct.mjOw)&&r.settings.mjOw>0&&i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]}),i.jsx("input",{type:"number",min:"1",max:"1000",placeholder:"1-1000",value:((Jt=r.settings)==null?void 0:Jt.mjOw)||"",onChange:ie=>{const se=parseInt(ie.target.value,10);isNaN(se)||se<1?pt(r.id,{mjOw:""}):se>1e3?pt(r.id,{mjOw:1e3}):pt(r.id,{mjOw:se})},onMouseDown:ie=>ie.stopPropagation(),className:`flex-1 px-2 py-1 rounded text-[10px] border outline-none focus:border-blue-500/50 ${e==="dark"?"bg-zinc-900/50 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`})]}),i.jsxs("div",{className:"relative flex items-center gap-1.5","data-mj-sref":"true",children:[i.jsx("div",{className:`input-point ${it?"connected":""} ${un===r.id&&is==="sref"?"active":""}`,title:"sref",onMouseDown:ie=>{ie.stopPropagation(),ie.preventDefault();const se=xn(ie.clientX,ie.clientY);_s(se),ss(r.id),os("sref")},onMouseUp:ie=>Cs(r.id,ie,"sref"),"data-input-type":"sref",style:{position:"absolute",top:"50%",left:"-0.25rem",transform:"translateY(-50%)",width:"0.5rem",height:"0.5rem",marginRight:"0.25rem",zIndex:20,cursor:"crosshair"}}),i.jsxs("div",{className:"flex items-center gap-1.5 flex-1 ml-2",children:[i.jsx("span",{className:`text-[10px] font-medium ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"sref"}),it&&i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]})]})]})})(),r.type==="gen-image"&&R&&i.jsxs("div",{className:`mb-2 rounded-lg border p-3 space-y-2 ${e==="dark"?"bg-zinc-900/50 border-zinc-800":"bg-white border-zinc-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{className:"flex items-center gap-1 text-[11px] font-semibold",onClick:()=>Ei(me=>!me),onMouseDown:me=>me.stopPropagation(),children:[i.jsx("span",{className:e==="dark"?"text-zinc-200":"text-zinc-700",children:""}),i.jsx(_l,{size:12,className:`transition-transform ${rs?"":"rotate-90"} ${e==="dark"?"text-zinc-400":"text-zinc-500"}`})]}),i.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[i.jsxs("span",{className:"text-zinc-500",children:[cn.length," "]}),i.jsx("button",{className:`px-2 py-0.5 rounded text-[10px] border ${e==="dark"?"border-zinc-700 text-zinc-300 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>rr(me=>!me),onMouseDown:me=>me.stopPropagation(),children:fo?"":""})]})]}),!rs&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"max-h-36 overflow-y-auto custom-scrollbar flex flex-wrap gap-2",children:[cn.map(me=>i.jsxs("div",{className:`border rounded-lg px-2 py-1.5 flex items-center gap-2 text-[11px] ${e==="dark"?"border-zinc-700 bg-zinc-950/50 text-zinc-200":"border-zinc-200 bg-zinc-50 text-zinc-700"}`,children:[i.jsx("span",{className:"font-medium whitespace-nowrap",children:me.name}),i.jsx("button",{onClick:()=>M1(r.id,me.prompt),className:"px-2 py-0.5 rounded text-[10px] bg-blue-600 text-white hover:bg-blue-500 transition-colors",onMouseDown:it=>it.stopPropagation(),children:""}),fo&&i.jsx("button",{onClick:()=>T1(me.id),className:`px-2 py-0.5 rounded text-[10px] border ${e==="dark"?"border-red-500/50 text-red-400 hover:bg-red-500/10":"border-red-200 text-red-600 hover:bg-red-50"}`,onMouseDown:it=>it.stopPropagation(),children:""})]},me.id)),cn.length===0&&i.jsx("div",{className:`text-[11px] ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:""})]}),fo&&i.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[i.jsx("input",{type:"text",value:Nn.name,onChange:me=>cr(it=>({...it,name:me.target.value})),placeholder:"",className:`w-full px-2 py-1 text-[11px] rounded border ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder:text-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder:text-zinc-400"}`,onMouseDown:me=>me.stopPropagation()}),i.jsx("textarea",{value:Nn.prompt,onChange:me=>cr(it=>({...it,prompt:me.target.value})),placeholder:"...",className:`w-full min-h-[70px] px-2 py-1 text-[11px] rounded border resize-none custom-scrollbar ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder:text-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder:text-zinc-400"}`,onMouseDown:me=>me.stopPropagation()}),i.jsx("button",{onClick:I1,className:"w-full py-1.5 rounded text-[11px] font-medium bg-blue-600 hover:bg-blue-500 text-white transition-colors",onMouseDown:me=>me.stopPropagation(),children:""})]})]})]}),i.jsxs("div",{className:`mt-auto pt-2 flex items-center justify-between shrink-0 relative gap-2 border-t ${e==="dark"?"border-zinc-800/50":"border-zinc-200"}`,children:[i.jsxs("div",{className:"relative flex-1 min-w-0",children:[i.jsxs("button",{title:(_t=pn.get((yt=r.settings)==null?void 0:yt.model))==null?void 0:_t.provider,onClick:me=>{me.stopPropagation(),Sn((qe==null?void 0:qe.type)==="model"?null:{nodeId:r.id,type:"model"})},className:`flex items-center gap-2 pl-1 pr-2 py-1 rounded text-[10px] transition-colors border w-full ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-300 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-700 border-zinc-300"}`,children:[i.jsx("span",{className:`w-2 h-2 rounded-full ${Oi((Qt=r.settings)==null?void 0:Qt.model)}`}),i.jsx("span",{className:"truncate font-mono",children:((Dn=pn.get((Qe=r.settings)==null?void 0:Qe.model))==null?void 0:Dn.id)||"Model"})]}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="model"&&i.jsxs("div",{className:`absolute bottom-full left-0 mb-1 w-96 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:me=>me.stopPropagation(),onMouseLeave:()=>as(null),children:[i.jsx("div",{className:`w-36 border-r pr-1 max-h-64 overflow-y-auto custom-scrollbar flex flex-col justify-end ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(cs).filter(([,me])=>me.models.some(it=>it.type===(r.type==="gen-image"?"Image":"Video"))).map(([me,it])=>i.jsxs("button",{onMouseEnter:()=>as(me),className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left text-[10px] transition-colors ${br===me?e==="dark"?"bg-zinc-700 text-zinc-100":"bg-zinc-200 text-zinc-900":e==="dark"?"hover:bg-zinc-800 text-zinc-400":"hover:bg-zinc-100 text-zinc-600"}`,children:[i.jsx("span",{className:"truncate font-medium",children:it.name}),i.jsx(_l,{size:10,className:"opacity-50"})]},me))}),i.jsxs("div",{className:"flex-1 pl-1 max-h-64 overflow-y-auto custom-scrollbar",children:[br&&((wn=cs[br])==null?void 0:wn.models.filter(me=>me.type===(r.type==="gen-image"?"Image":"Video")).map(me=>{var it;return i.jsxs("button",{onClick:()=>{const Ct={model:me.id};if(me.id==="grok-3"&&(Ct.ratio="3:2",Ct.duration="8s",Ct.resolution="1080P"),pt(r.id,Ct),r.type==="gen-image"){E0(me.id);try{localStorage.setItem("tapnow_last_image_model",me.id)}catch{}}else if(r.type==="gen-video"){T0(me.id);try{localStorage.setItem("tapnow_last_video_model",me.id)}catch{}}Sn(null),as(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${((it=r.settings)==null?void 0:it.model)===me.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[i.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:me.id}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Oi(me.id)}`})]},me.id)})),!br&&i.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]}),r.type==="gen-image"&&(()=>{var it;const me=pn.get((it=r.settings)==null?void 0:it.model);return me&&(me.id.includes("mj")||me.provider.toLowerCase().includes("midjourney"))})()&&i.jsxs("div",{className:"relative flex-1 min-w-0",children:[i.jsx("button",{title:((Jn=fp.find(me=>{var it;return me.value===((it=r.settings)==null?void 0:it.mjVersion)}))==null?void 0:Jn.label)||"MJ V7",onClick:me=>{me.stopPropagation(),Sn((qe==null?void 0:qe.type)==="mjVersion"&&qe.nodeId===r.id?null:{nodeId:r.id,type:"mjVersion"})},className:`flex items-center gap-2 pl-1 pr-2 py-1 rounded text-[10px] transition-colors border w-full ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-300 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-700 border-zinc-300"}`,children:i.jsx("span",{className:"truncate",children:((ps=fp.find(me=>{var it;return me.value===((it=r.settings)==null?void 0:it.mjVersion)}))==null?void 0:ps.label)||"MJ V7"})}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="mjVersion"&&i.jsx("div",{className:`absolute bottom-full left-0 mb-1 w-32 rounded-lg shadow-xl p-1 z-[60] border max-h-64 overflow-y-auto custom-scrollbar ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:me=>me.stopPropagation(),children:fp.map(me=>{var it,Ct;return i.jsxs("button",{onClick:()=>{pt(r.id,{mjVersion:me.value}),Sn(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"} ${((it=r.settings)==null?void 0:it.mjVersion)===me.value?e==="dark"?"bg-zinc-800":"bg-zinc-100":""}`,children:[i.jsx("span",{className:"text-xs font-medium",children:me.label}),((Ct=r.settings)==null?void 0:Ct.mjVersion)===me.value&&i.jsx("svg",{className:"w-3 h-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},me.value)})})]}),i.jsxs("div",{className:"flex gap-1 shrink-0",children:[i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:me=>{me.stopPropagation(),Sn((qe==null?void 0:qe.type)==="ratio"&&qe.nodeId===r.id?null:{nodeId:r.id,type:"ratio"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:((wr=r.settings)==null?void 0:wr.ratio)||"Auto"}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="ratio"&&i.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-20 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:me=>me.stopPropagation(),children:rg((Zn=r.settings)==null?void 0:Zn.model).map(me=>i.jsx("button",{onClick:()=>{pt(r.id,{ratio:me}),Gy(me);try{localStorage.setItem("tapnow_last_ratio",me)}catch{}Sn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:me},me))})]}),r.type==="gen-video"&&(()=>{var Jt,ie;const me=pn.get((Jt=r.settings)==null?void 0:Jt.model);return((me==null?void 0:me.id)||(me==null?void 0:me.modelName)||"").includes("grok")?i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:se=>{se.stopPropagation(),Sn((qe==null?void 0:qe.type)==="vres"&&qe.nodeId===r.id?null:{nodeId:r.id,type:"vres"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:((ie=r.settings)==null?void 0:ie.resolution)||"1080P"}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="vres"&&i.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-24 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:se=>se.stopPropagation(),children:wk.map(se=>i.jsx("button",{onClick:()=>{pt(r.id,{resolution:se}),qy(se);try{localStorage.setItem("tapnow_last_video_res",se)}catch{}Sn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:se},se))})]}):null})(),r.type==="gen-image"&&(()=>{var Ct;const me=pn.get((Ct=r.settings)==null?void 0:Ct.model);return!(me&&(me.id.includes("mj")||me.provider.toLowerCase().includes("midjourney")))})()?i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:me=>{me.stopPropagation(),Sn((qe==null?void 0:qe.type)==="res"&&qe.nodeId===r.id?null:{nodeId:r.id,type:"res"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:(()=>{var se,Ht;const me=pn.get((se=r.settings)==null?void 0:se.model),it=(me==null?void 0:me.id)||(me==null?void 0:me.modelName)||"",Ct=pp(it),Jt=((Ht=r.settings)==null?void 0:Ht.resolution)||"Auto",ie=Ct.includes(Jt)?Jt:Ct[0]||"Auto";return!Ct.includes(Jt)&&Ct.length>0&&setTimeout(()=>{pt(r.id,{resolution:Ct[0]})},0),ie})()}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="res"&&(()=>{var Jt;const me=pn.get((Jt=r.settings)==null?void 0:Jt.model),it=(me==null?void 0:me.id)||(me==null?void 0:me.modelName)||"",Ct=pp(it);return i.jsx("div",{className:`absolute bottom-full right-0 mb-1 w-24 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:ie=>ie.stopPropagation(),children:Ct.map(ie=>i.jsx("button",{onClick:()=>{pt(r.id,{resolution:ie}),Jy(ie);try{localStorage.setItem("tapnow_last_image_res",ie)}catch{}Sn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:ie},ie))})})()]}):(()=>{var Ct,Jt,ie,se,Ht,en,Yt,mt,tt,A,Le,De,Fe,Be;const me=pn.get((Ct=r.settings)==null?void 0:Ct.model);return me&&(me.id.includes("mj")||me.provider.toLowerCase().includes("midjourney"))?null:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:le=>{le.stopPropagation(),Sn((qe==null?void 0:qe.type)==="duration"&&qe.nodeId===r.id?null:{nodeId:r.id,type:"duration"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:((Jt=r.settings)==null?void 0:Jt.duration)||"5s"}),(qe==null?void 0:qe.nodeId)===r.id&&qe.type==="duration"&&i.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-20 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:le=>le.stopPropagation(),children:(((ie=Te.find(le=>{var ze;return le.id===((ze=r.settings)==null?void 0:ze.model)}))==null?void 0:ie.durations)||["5s","10s"]).map(le=>i.jsx("button",{onClick:()=>{pt(r.id,{duration:le}),Sn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:le},le))})]}),(((Ht=(se=r.settings)==null?void 0:se.model)==null?void 0:Ht.includes("jimeng"))||((mt=(Yt=pn.get((en=r.settings)==null?void 0:en.model))==null?void 0:Yt.modelName)==null?void 0:mt.includes("jimeng"))||((A=(tt=r.settings)==null?void 0:tt.model)==null?void 0:A.includes("grok")))&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("span",{className:"text-[10px] opacity-70",children:""}),i.jsx("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 rounded p-0.5 border dark:border-zinc-700",children:["720p","1080p"].map(le=>{var ze;return i.jsx("button",{onClick:_e=>{_e.stopPropagation(),pt(r.id,{resolution:le})},onMouseDown:_e=>_e.stopPropagation(),className:`text-[10px] px-2 py-0.5 rounded transition-all ${(((ze=r.settings)==null?void 0:ze.resolution)||"720p")===le?"bg-white dark:bg-zinc-700 shadow-sm text-blue-600 dark:text-blue-400 font-medium":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:le},le)})})]}),r.type==="gen-video"&&((Le=r.settings)==null?void 0:Le.model)==="sora-2"&&i.jsxs("label",{className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border cursor-pointer transition-colors ${e==="dark"?(De=r.settings)!=null&&De.isHD?"bg-blue-600/30 border-blue-500 text-blue-300":"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":(Fe=r.settings)!=null&&Fe.isHD?"bg-blue-500/30 border-blue-400 text-blue-700":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,onClick:le=>le.stopPropagation(),children:[i.jsx("input",{type:"checkbox",checked:((Be=r.settings)==null?void 0:Be.isHD)||!1,onChange:le=>{le.stopPropagation(),pt(r.id,{isHD:le.target.checked})},className:"w-3 h-3 cursor-pointer",onMouseDown:le=>le.stopPropagation()}),i.jsx("span",{children:"HD"})]})]})})()]}),i.jsx("button",{onClick:()=>{var Jt,ie;const me=r.type==="gen-image"?((Jt=r.settings)==null?void 0:Jt.prompt)||"":((ie=r.settings)==null?void 0:ie.videoPrompt)||"",it=Za(r.id),Ct=it.length>0?it.join(" ")+(me?" "+me:""):me;qa(Ct,r.type==="gen-image"?"image":"video",p,r.id)},className:"bg-blue-600 hover:bg-blue-500 text-white p-1.5 rounded-md shadow-lg active:scale-95 transition-transform shrink-0",title:"",children:i.jsx(Vm,{size:12,fill:"currentColor"})})]})]})})()]})]},r.id)},[X,Wn,Oo,oh,lh,pn,zd,e,pe,Dr,Mn,un,is,bd,Cs,xn,Aa,Z,Lr,Sn,Ti,Lo,ss,os,lc,Se,pr,pt,Za,qa,go,Nd,k1,Ja,a1]),tv=a.length>50,nv=ad||oi;return i.jsxs(i.Fragment,{children:[i.jsx(hk,{visible:Kr.visible,progress:Kr.progress,status:Kr.status,type:Kr.type}),i.jsxs("div",{className:`w-full h-screen font-sans overflow-hidden select-none flex flex-col transition-colors duration-300 ${e==="dark"?"bg-[#09090b] text-white":"bg-zinc-100 text-zinc-900"} ${tv?"perf-mode":""} ${nv?"interacting":""}`,onClick:()=>{vr.visible&&Ss(r=>({...r,visible:!1})),Ai.visible&&dd(r=>({...r,visible:!1}))},children:[i.jsxs("div",{className:`h-12 flex items-center justify-between px-4 z-50 shrink-0 border-b transition-colors duration-300 ${e==="dark"?"bg-[#09090b] border-zinc-800":"bg-white border-zinc-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-md flex items-center justify-center",children:i.jsx(V2,{size:16,className:"text-white"})}),i.jsx("span",{className:`font-bold text-sm tracking-wide ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,children:"Tapnow Studio"}),Wt?i.jsx("input",{ref:ar,type:"text",value:$e,onChange:r=>ft(r.target.value),onBlur:()=>{Pt(!1);try{localStorage.setItem("tapnow_project_name",$e)}catch{}},onKeyDown:r=>{if(r.key==="Enter"){Pt(!1);try{localStorage.setItem("tapnow_project_name",$e)}catch{}}},className:`ml-2 px-2 py-0.5 text-xs border rounded outline-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`,style:{minWidth:"100px",maxWidth:"200px"}}):i.jsx("span",{onClick:()=>{Pt(!0),setTimeout(()=>{var r;return(r=ar.current)==null?void 0:r.focus()},0)},className:`ml-2 text-xs cursor-pointer hover:underline ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,title:"",children:$e})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>{const r=["off","normal","ultra"],f=(r.indexOf(er)+1)%r.length,h=r[f];dn(h),localStorage.setItem("tapnow_performance_mode",h)},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${er!=="off"?e==="dark"?"bg-blue-600 border-blue-500 text-white hover:bg-blue-500":"bg-blue-500 border-blue-400 text-white hover:bg-blue-600":e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:er==="ultra"?"":er==="normal"?"":"",children:[i.jsx(up,{size:14,className:er!=="off"?"fill-current":""}),i.jsx("span",{children:er==="ultra"?"":""})]}),i.jsxs("button",{onClick:v1,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:"/",children:[i.jsx(Qo,{size:14}),i.jsx("span",{children:""})]}),i.jsx("button",{onClick:y1,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:"",children:e==="dark"?i.jsxs(i.Fragment,{children:[i.jsx(ik,{size:14,className:"text-amber-400"}),i.jsx("span",{children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx(Y2,{size:14,className:"text-blue-500"}),i.jsx("span",{children:""})]})}),i.jsx("button",{onClick:Ze,disabled:w.length===0,className:`flex items-center gap-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors border ${w.length===0?e==="dark"?"bg-zinc-900/50 border-zinc-800 text-zinc-600 cursor-not-allowed":"bg-zinc-50 border-zinc-200 text-zinc-400 cursor-not-allowed":e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:" (Ctrl+Z)",children:i.jsx(ek,{size:14})}),i.jsx("button",{onClick:we,disabled:v.length===0,className:`flex items-center gap-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors border ${v.length===0?e==="dark"?"bg-zinc-900/50 border-zinc-800 text-zinc-600 cursor-not-allowed":"bg-zinc-50 border-zinc-200 text-zinc-400 cursor-not-allowed":e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:" (Ctrl+Shift+Z)",children:i.jsx(tk,{size:14})}),i.jsx(eu,{variant:"ghost",onClick:()=>{N(),l([]),d([]),ft(""),localStorage.removeItem("tapnow_project_name")},children:""}),i.jsx(eu,{variant:"secondary",icon:sk,onClick:()=>li(!0),children:"API "})]})]}),i.jsxs("div",{className:`flex-1 relative overflow-hidden flex transition-colors duration-300 ${e==="dark"?"bg-[#09090b]":"bg-zinc-100"}`,children:[i.jsxs("div",{className:`w-14 border-r flex flex-col items-center py-3 gap-3 z-40 shrink-0 transition-colors duration-300 ${e==="dark"?"bg-[#09090b] border-zinc-800":"bg-white border-zinc-200"}`,children:[i.jsx("button",{onClick:A1,className:`p-2.5 rounded-lg transition-all mb-2 ${e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-800 hover:bg-zinc-200"}`,title:"",children:i.jsx(X2,{size:18})}),[{id:"select",icon:G2},{id:"history",icon:Hm},{id:"characters",icon:yl}].map(r=>i.jsx("button",{onClick:()=>{Hy(r.id),r.id==="history"&&uc(!cc),r.id==="characters"&&Fo(!w0)},className:`p-2.5 rounded-lg transition-all ${By===r.id?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-200 text-zinc-900":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-800"}`,children:i.jsx(r.icon,{size:18})},r.id)),i.jsx("div",{className:"flex-1"}),i.jsx("button",{onClick:()=>lr(!co),className:`p-2.5 rounded-lg transition-all mb-2 ${co?"bg-blue-600 text-white":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-800"}`,title:"AI ",children:i.jsx(na,{size:18})}),i.jsx("button",{onClick:b1,className:`p-2.5 rounded-lg transition-all ${e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-800 hover:bg-zinc-200"}`,title:"",children:i.jsx(nk,{size:18})}),i.jsx("button",{onClick:w1,className:`p-2.5 rounded-lg transition-all mb-2 ${e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-800 hover:bg-zinc-200"}`,title:"",children:i.jsx(ea,{size:18})})]}),cc&&i.jsxs("div",{className:`w-72 z-30 flex flex-col animate-in slide-in-from-left border-r transition-colors duration-300 ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[i.jsxs("div",{className:`p-3 border-b flex justify-between items-center ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:`font-bold text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),ei.active&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-16 h-1.5 bg-zinc-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 transition-all duration-200",style:{width:`${ei.current/ei.total*100}%`}})}),i.jsxs("span",{className:"text-[9px] text-zinc-500 font-mono",children:[ei.current,"/",ei.total]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>{const c=kt.filter(f=>f.status==="completed");zn.size>0?ts(new Set):ts(new Set(c.map(f=>f.id)))},className:`p-1.5 rounded transition-colors flex items-center gap-1 ${zn.size>0?e==="dark"?"text-blue-400 bg-blue-500/20 hover:bg-blue-500/30":"text-blue-600 bg-blue-100 hover:bg-blue-200":e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:zn.size>0?` (${zn.size})`:"",children:[zn.size>0?i.jsx(zl,{size:14}):i.jsx(F2,{size:14}),zn.size>0&&i.jsx("span",{className:"text-[9px] font-bold",children:zn.size})]}),i.jsx("button",{onClick:()=>mc(!0),className:`p-1.5 rounded transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:"",children:i.jsx(ml,{size:14})}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>{if(console.log("[V3.5.1 Debug] Download button clicked, historySelection.size =",zn.size),zn.size>0){const r=[...zn].map(c=>kt.find(f=>f.id===c)).filter(Boolean);console.log("[V3.5.1 Debug] Downloading selected items:",r.length),Sd(r)}else console.log("[V3.5.1 Debug] Opening dropdown menu"),Sn((qe==null?void 0:qe.type)==="batch-download"?null:{type:"batch-download"})},className:`p-1.5 rounded transition-colors ${zn.size>0?"text-blue-400 bg-blue-500/20":e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:zn.size>0?` (${zn.size})`:"",children:i.jsx(Qo,{size:14})}),(qe==null?void 0:qe.type)==="batch-download"&&zn.size===0&&i.jsxs("div",{className:`absolute right-0 top-full mt-1 w-40 rounded-lg shadow-xl py-1 z-50 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseLeave:()=>Sn(null),children:[i.jsxs("button",{onClick:()=>{Sn(null);const r=kt.filter(c=>(c.startTime||0)>=Us);Sd(r)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:[" (",kt.filter(r=>(r.startTime||0)>=Us).length,")"]}),i.jsxs("button",{onClick:()=>{Sn(null),Sd(kt)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:[" (",kt.length,")"]})]})]}),i.jsx("button",{onClick:()=>uc(!1),children:i.jsx(hs,{size:12,className:e==="dark"?"text-zinc-500":"text-zinc-400"})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3",children:(()=>{const r=kt.filter(f=>(f.startTime||0)>=Us),c=kt.filter(f=>(f.startTime||0)<Us);return i.jsxs(i.Fragment,{children:[r.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 text-[10px] ${e==="dark"?"text-blue-400":"text-blue-600"}`,children:[i.jsx("div",{className:"flex-1 h-px bg-blue-500/30"}),i.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-blue-500/10 font-medium",children:[" (",r.length,")"]}),i.jsx("div",{className:"flex-1 h-px bg-blue-500/30"})]}),r.map(f=>i.jsx(Gm,{item:f,theme:e,lightboxItem:Y,providers:Ne,defaultProviders:dp,onDelete:W0,isSelected:zn.has(f.id),onSelect:h=>{console.log("[V3.5.2 Debug] onSelect called, id:",h,"current Set size:",zn.size),ts(p=>{const m=new Set(p);return m.has(h)?m.delete(h):m.add(h),console.log("[V3.5.2 Debug] Updated Set size:",m.size),m})},onClick:()=>{if(f.url){const h=f.mjImages&&f.mjImages.length>1&&f.selectedMjImageIndex!==void 0?f.selectedMjImageIndex:0;Se({...f,url:f.mjImages&&f.mjImages.length>1?f.mjImages[h]:f.url,selectedMjImageIndex:h,storyboardContext:null})}},onContextMenu:h=>Ec(h,f),onImageClick:(h,p,m,_)=>{h.stopPropagation(),St(C=>C.map(T=>T.id===p.id?{...T,url:m,selectedMjImageIndex:_}:T));const M={...p,url:m,selectedMjImageIndex:_,storyboardContext:null};Se(M)},onImageContextMenu:(h,p,m,_)=>Ec(h,p,m,_),onRefresh:h=>{h.apiConfig&&(St(p=>p.map(m=>m.id===h.id?{...m,status:"generating",errorMsg:null,progress:5}:m)),h.modelName.includes("veo")?Ui(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height):mo(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height,h.apiConfig.modelId||""))},Loader2:gi,Trash2:Ys,RefreshCw:mu},f.id))]}),c.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 text-[10px] ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:[i.jsx("div",{className:`flex-1 h-px ${e==="dark"?"bg-zinc-700":"bg-zinc-300"}`}),i.jsxs("span",{className:"px-2 py-0.5 font-medium",children:[" (",c.length,")"]}),i.jsx("div",{className:`flex-1 h-px ${e==="dark"?"bg-zinc-700":"bg-zinc-300"}`})]}),c.map(f=>i.jsx(Gm,{item:f,theme:e,lightboxItem:Y,providers:Ne,defaultProviders:dp,onDelete:W0,isSelected:zn.has(f.id),onSelect:h=>{console.log("[V3.5.2 Debug] onSelect called (prev), id:",h,"current Set size:",zn.size),ts(p=>{const m=new Set(p);return m.has(h)?m.delete(h):m.add(h),console.log("[V3.5.2 Debug] Updated Set size:",m.size),m})},onClick:()=>{if(f.url){const h=f.mjImages&&f.mjImages.length>1&&f.selectedMjImageIndex!==void 0?f.selectedMjImageIndex:0;Se({...f,url:f.mjImages&&f.mjImages.length>1?f.mjImages[h]:f.url,selectedMjImageIndex:h,storyboardContext:null})}},onContextMenu:h=>Ec(h,f),onImageClick:(h,p,m,_)=>{h.stopPropagation(),St(C=>C.map(T=>T.id===p.id?{...T,url:m,selectedMjImageIndex:_}:T));const M={...p,url:m,selectedMjImageIndex:_,storyboardContext:null};Se(M)},onImageContextMenu:(h,p,m,_)=>Ec(h,p,m,_),onRefresh:h=>{h.apiConfig&&(St(p=>p.map(m=>m.id===h.id?{...m,status:"generating",errorMsg:null,progress:5}:m)),h.modelName.includes("veo")?Ui(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height):mo(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height,h.apiConfig.modelId||""))},Loader2:gi,Trash2:Ys,RefreshCw:mu},f.id))]})]})})()})]}),w0&&i.jsxs("div",{className:`w-72 z-30 flex flex-col animate-in slide-in-from-left border-r transition-colors duration-300 ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[i.jsxs("div",{className:`p-3 border-b flex justify-between items-center ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[i.jsx("h3",{className:`font-bold text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:"Sora "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{const r=Te.find(c=>c.type==="Video"&&(c.id==="sora-2"||c.id==="sora-2-pro"));if(r){const c=(r.url||Ir).replace(/\/+$/,"");La(`${c}/sora/v1/characters`)}else{const c=Ir.replace(/\/+$/,"");La(`${c}/sora/v1/characters`)}Da(!0)},className:`px-2 py-1 text-[10px] rounded transition-colors ${e==="dark"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:""}),i.jsx("button",{onClick:()=>Fo(!1),children:i.jsx(hs,{size:12,className:e==="dark"?"text-zinc-500":"text-zinc-400"})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3",children:Fn.length===0?i.jsx("div",{className:`text-center py-8 text-sm ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:'""'}):i.jsx("div",{className:"grid grid-cols-2 gap-3",children:Fn.map(r=>i.jsxs("div",{className:`group rounded-lg overflow-hidden border cursor-pointer hover:border-blue-500/50 transition-colors ${e==="dark"?"bg-zinc-900 border-zinc-800":"bg-white border-zinc-200"}`,onClick:()=>{const c=` @${r.username} `,f=document.activeElement;if(f&&(f.tagName==="TEXTAREA"||f.tagName==="INPUT")){const h=f,p=h.selectionStart||0,m=h.selectionEnd||0,_=h.value,M=_.slice(0,p)+c+_.slice(m);h.value=M;const C=p+c.length;h.setSelectionRange(C,C),h.dispatchEvent(new Event("input",{bubbles:!0})),h.focus()}else navigator.clipboard.writeText(c.trim()).then(()=>{alert(`: ${c.trim()}`)})},children:[i.jsxs("div",{className:"aspect-square bg-zinc-800 relative group/char",children:[r.profile_picture_url?i.jsx(sr,{src:r.profile_picture_url,alt:r.username,className:"w-full h-full object-cover",onError:c=>{c.target.style.display="none"}}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:i.jsx(Ym,{size:24})}),i.jsx("button",{onClick:c=>{if(c.stopPropagation(),confirm(` "${r.username}" `)){const f=Fn.filter(h=>h.id!==r.id);fd(f);try{localStorage.setItem("tapnow_characters",JSON.stringify(f))}catch(h){console.error(":",h)}}},className:"absolute top-1 right-1 p-1.5 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 z-10",title:"",children:i.jsx(Ys,{size:12})})]}),i.jsx("div",{className:"p-2 relative",children:i.jsxs("p",{className:`text-xs truncate flex items-center gap-1 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:[r.username,i.jsx(gl,{size:12,className:"text-green-500 shrink-0",title:"Sora 2 "})]})})]},r.id))})})]}),Uy&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center",onClick:()=>Da(!1),children:i.jsxs("div",{className:`w-[500px] max-h-[90vh] overflow-y-auto rounded-lg shadow-2xl flex flex-col ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-white border-zinc-200"} border`,onClick:r=>r.stopPropagation(),children:[i.jsxs("div",{className:`p-4 border-b flex justify-between items-center ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[i.jsx("h3",{className:`font-bold text-sm ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),i.jsx("button",{onClick:()=>Da(!1),children:i.jsx(hs,{size:16,className:e==="dark"?"text-zinc-500":"text-zinc-400"})})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs mb-2 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("button",{onClick:()=>{dc("url"),fc("")},className:`px-3 py-1.5 text-xs rounded transition-colors ${ci==="url"?e==="dark"?"bg-blue-600 text-white":"bg-blue-500 text-white":e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,children:" URL"}),i.jsx("button",{onClick:()=>{dc("history"),pc(""),Oa(null)},className:`px-3 py-1.5 text-xs rounded transition-colors ${ci==="history"?e==="dark"?"bg-blue-600 text-white":"bg-blue-500 text-white":e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,children:""})]}),ci==="url"?i.jsx("input",{type:"text",value:Bo,onChange:r=>pc(r.target.value),placeholder:" URL...",className:`w-full px-3 py-2 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`}):i.jsxs("select",{value:Ho,onChange:r=>{const c=r.target.value;if(fc(c),c){const f=Ya.get(c);f&&f.url&&(dc("url"),pc(f.url),fc(""))}},className:`w-full px-3 py-2 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`,children:[i.jsx("option",{value:"",children:"..."}),kt.filter(r=>r.type==="video"&&r.status==="completed"&&r.url).map(r=>{var c;return i.jsxs("option",{value:r.id,children:[((c=r.prompt)==null?void 0:c.slice(0,50))||"Untitled"," - ",r.time]},r.id)})]}),(()=>{let r=null;if(ci==="url"&&Bo.trim())r=Bo.trim();else if(ci==="history"&&Ho){const c=Ya.get(Ho);c&&c.url&&(r=c.url)}return r?i.jsxs("div",{className:"mt-2 mb-2",children:[i.jsx("video",{controls:!0,crossOrigin:"anonymous",className:"w-full h-40 object-contain bg-black rounded-lg",src:r,onError:c=>{console.error(":",r,c),Oa("")},onLoadStart:()=>{Oa(null)},onLoadedData:()=>{Oa(null)}},r),_0&&i.jsx("div",{className:"text-red-500 text-xs mt-1 text-center",children:_0})]}):null})()]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs mb-2 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:" 1-3 "}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx("input",{type:"number",min:"0",step:"0.1",value:Wo,onChange:r=>k0(parseFloat(r.target.value)||0),className:`w-20 px-2 py-1.5 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`}),i.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:""}),i.jsx("input",{type:"number",min:"0",step:"0.1",value:Vo,onChange:r=>z0(parseFloat(r.target.value)||0),className:`w-20 px-2 py-1.5 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`}),i.jsxs("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:[": ",(Vo-Wo).toFixed(1),"s"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-xs mb-2 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:"API  (API Endpoint)"}),i.jsx("input",{type:"text",value:j0,onChange:r=>La(r.target.value),placeholder:": https://your-domain.com/sora/v1/characters",className:`w-full px-3 py-2 text-xs rounded border outline-none font-mono ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onFocus:r=>{if(!r.target.value){const c=Te.find(h=>h.type==="Video"&&(h.id==="sora-2"||h.id==="sora-2-pro")),f=c?(c.url||Ir).replace(/\/+$/,""):Ir.replace(/\/+$/,"");La(`${f}/sora/v1/characters`)}}}),i.jsx("p",{className:`text-[10px] mt-1 ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:""})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{onClick:()=>Da(!1),className:`px-4 py-2 text-xs rounded transition-colors ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200"}`,children:""}),i.jsx("button",{onClick:async()=>{if(ci==="url"&&!Bo.trim()){alert(" URL");return}if(ci==="history"&&!Ho){alert("");return}if(Vo-Wo<1||Vo-Wo>3){alert(" 1-3 ");return}Ko(!0);try{const r=j0.trim()||null;ci==="url"?await eh(Bo,Wo,Vo,null,r):await eh("",Wo,Vo,Ho,r)}finally{Ko(!1)}},disabled:hd,className:`px-4 py-2 text-xs rounded transition-colors ${hd?"bg-zinc-400 text-zinc-200 cursor-not-allowed":e==="dark"?"bg-blue-600 text-white hover:bg-blue-500":"bg-blue-500 text-white hover:bg-blue-600"}`,children:hd?"...":""})]})]})]})}),i.jsxs("div",{className:"flex-1 relative overflow-hidden flex",children:[i.jsxs("div",{ref:ui,id:"canvas-bg",className:"flex-1 h-full cursor-default relative",onMouseDown:s1,onClick:i1,onDoubleClick:o1,style:{backgroundImage:e==="dark"?"radial-gradient(#27272a 1px, transparent 1px)":"radial-gradient(rgba(0, 0, 0, 0.08) 0.5px, transparent 0.5px)",backgroundSize:`${20*pe.zoom}px ${20*pe.zoom}px`,backgroundPosition:`${pe.x}px ${pe.y}px`,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:[i.jsxs("div",{className:"absolute origin-top-left will-change-transform",style:{transform:`translate3d(${pe.x}px, ${pe.y}px, 0) scale(${pe.zoom})`,width:xk,height:yk,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",transformOrigin:"top left",imageRendering:pe.zoom>=1?"auto":"crisp-edges"},children:[i.jsx(ih,{connections:u,nodesMap:Xt,connectionsByNode:Xo,connectingSource:Mn,connectingTarget:un,connectingInputType:is,mousePos:ld,apiConfigsMap:pn,selectedNodeId:X,onDisconnectConnection:_d,visibleNodes:yc}),yc.map(r=>ev(r))]}),Ns&&i.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-500/10 pointer-events-none z-50",style:{left:Math.min(Ns.startX,Ns.endX),top:Math.min(Ns.startY,Ns.endY),width:Math.abs(Ns.endX-Ns.startX),height:Math.abs(Ns.endY-Ns.startY)}})]}),i.jsxs("div",{className:`fixed right-0 top-12 bottom-0 border-l shadow-2xl flex flex-col z-50 transition-transform duration-300 ease-in-out select-text ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-white border-zinc-200"} ${co?"translate-x-0":"translate-x-full"}`,style:{width:si,pointerEvents:co?"auto":"none"},children:[i.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 cursor-ew-resize transition-colors z-50 flex items-center justify-center group ${e==="dark"?"hover:bg-blue-600/50":"hover:bg-blue-400/30"}`,onMouseDown:r1,children:i.jsx("div",{className:`h-8 w-1 rounded transition-colors ${e==="dark"?"bg-zinc-700 group-hover:bg-blue-500":"bg-zinc-300 group-hover:bg-blue-500"}`})}),i.jsxs("div",{className:`h-12 flex items-center justify-between px-3 shrink-0 border-b ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"relative z-50",children:[i.jsxs("button",{onClick:r=>{r.stopPropagation(),console.log("[Chat] Dropdown toggle:",!Po),Ma(!Po),po(null)},className:`flex items-center gap-2 text-xs border rounded px-2 py-1 outline-none focus:border-blue-500 cursor-pointer max-w-[200px] ${e==="dark"?"bg-zinc-800 text-zinc-300 border-zinc-700 hover:border-zinc-600":"bg-white text-zinc-800 border-zinc-300 hover:border-zinc-400"}`,children:[i.jsx("span",{className:"truncate font-mono",children:Cr}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Oi(Cr)}`}),i.jsx(mi,{size:12,className:"shrink-0 opacity-50"})]}),Po&&i.jsxs("div",{className:`absolute top-full left-0 mt-1 w-72 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseLeave:()=>po(null),children:[i.jsx("div",{className:`w-24 border-r pr-1 max-h-64 overflow-y-auto custom-scrollbar flex flex-col ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(cs).filter(([,r])=>r.models.some(c=>c.type==="Chat")).map(([r,c])=>i.jsx("button",{onMouseEnter:()=>po(r),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${uo===r?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:c.name||r},r))}),i.jsxs("div",{className:"flex-1 pl-1 max-h-64 overflow-y-auto custom-scrollbar",children:[uo&&((ch=cs[uo])==null?void 0:ch.models.filter(r=>r.type==="Chat").map(r=>i.jsxs("button",{onClick:()=>{js(r.id),Ma(!1),po(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${Cr===r.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[i.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:r.id}),i.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Oi(r.id)}`})]},r.id))),!uo&&i.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:d1,className:`p-1.5 rounded ${e==="dark"?"text-zinc-400 hover:text-white hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100"}`,title:"",children:i.jsx(Hi,{size:16})}),Xn.length>1&&i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>md(!S0),className:`p-1.5 rounded ${e==="dark"?"text-zinc-400 hover:text-white hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100"}`,children:i.jsx(Hm,{size:16})}),S0&&i.jsx("div",{className:`absolute right-0 top-full mt-1 w-48 rounded-lg shadow-xl py-1 z-50 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseLeave:()=>md(!1),children:Xn.map(r=>i.jsxs("div",{className:`flex items-center justify-between px-3 py-2 text-xs cursor-pointer ${zs===r.id?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:bg-zinc-800/50":"text-zinc-500 hover:bg-zinc-100"}`,onClick:()=>{ni(r.id),md(!1)},children:[i.jsx("span",{className:"truncate flex-1",children:r.title}),i.jsx("button",{onClick:c=>{c.stopPropagation(),p1(c,r.id)},className:`p-1 ${e==="dark"?"text-zinc-600 hover:text-red-500":"text-zinc-400 hover:text-red-500"}`,children:i.jsx(hs,{size:10})})]},r.id))})]}),i.jsx("button",{onClick:()=>lr(!1),className:`p-1.5 rounded ${e==="dark"?"text-zinc-400 hover:text-white hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100"}`,children:i.jsx(_l,{size:16})})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4 select-text",children:[Jo==null?void 0:Jo.messages.map(r=>i.jsxs("div",{className:`flex gap-3 select-text ${r.role==="user"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 select-none ${r.role==="user"?"bg-blue-600":"bg-green-600"}`,children:r.role==="user"?i.jsx(Ym,{size:16,className:"text-white"}):i.jsx(Rm,{size:16,className:"text-white"})}),i.jsxs("div",{className:`flex flex-col gap-1 max-w-[85%] select-text ${r.role==="user"?"items-end":"items-start"}`,children:[r.files&&r.files.length>0&&i.jsx("div",{className:`flex flex-wrap gap-2 mb-1 ${r.role==="user"?"justify-end":"justify-start"}`,children:r.files.map((c,f)=>i.jsx("div",{className:`rounded p-1 border flex items-center gap-1 ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-zinc-100 border-zinc-300"}`,children:c.isImage?i.jsx(sr,{src:c.content,className:"w-16 h-16 object-cover rounded",alt:c.name}):c.isVideo?i.jsx("video",{src:c.content,controls:!0,className:`max-w-full rounded-lg bg-black max-h-[300px] border ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,playsInline:!0}):c.isAudio?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(Fm,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:""})]}):c.isPDF?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:"PDF"})]}):c.isDoc?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:"DOC"})]}):c.isExcel?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:"XLS"})]}):i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1 max-w-full truncate px-1",children:c.fileExt||c.name.split(".").pop()||""})]})},f))}),r.content&&r.content.trim()&&i.jsx("div",{className:`rounded-2xl px-4 py-2.5 text-sm select-text break-words ${r.role==="user"?e==="dark"?"bg-zinc-800 text-white rounded-tr-none":"bg-zinc-300 text-zinc-900 rounded-tr-none":e==="dark"?"bg-zinc-800/50 text-zinc-300 rounded-tl-none border border-zinc-800":"bg-zinc-100 text-zinc-800 rounded-tl-none border border-zinc-200"}`,style:{userSelect:"text",cursor:"text"},children:r.isError?i.jsx("span",{className:"text-red-500 select-text cursor-text",style:{userSelect:"text",cursor:"text"},children:r.content}):r.content?i.jsx("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:$2.sanitize(hn.parse(r.content))},style:{userSelect:"text",cursor:"text"}}):null})]})]},r.id||r.timestamp||`msg-${Math.random()}`)),Ro&&i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600 flex items-center justify-center shrink-0",children:i.jsx(Rm,{size:16,className:"text-white"})}),i.jsx("div",{className:`rounded-2xl rounded-tl-none px-4 py-2 border flex items-center ${e==="dark"?"bg-zinc-800/50 border-zinc-800":"bg-zinc-100 border-zinc-200"}`,children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),i.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),i.jsx("div",{ref:$0})]}),i.jsxs("div",{className:`p-3 border-t ${e==="dark"?"border-zinc-800 bg-[#121214]":"border-zinc-200 bg-zinc-50"}`,children:[ii.length>0&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-2 custom-scrollbar",children:ii.map((r,c)=>i.jsxs("div",{className:"relative group shrink-0",children:[r.isImage?i.jsx(sr,{src:r.content,className:`w-12 h-12 object-cover rounded border ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,alt:r.name}):r.isVideo?i.jsx("video",{src:r.content,className:`w-16 h-12 object-cover rounded border bg-black ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,muted:!0,playsInline:!0}):r.isAudio?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(Fm,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:""})]}):r.isPDF?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:"PDF"})]}):r.isDoc?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:"DOC"})]}):r.isExcel?i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1",children:"XLS"})]}):i.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[i.jsx(fs,{size:16}),i.jsx("span",{className:"text-[8px] mt-1 max-w-full truncate px-1",children:r.fileExt||r.name.split(".").pop()||""})]}),i.jsx("button",{onClick:()=>h1(c),className:`absolute -top-1 -right-1 rounded-full p-0.5 border opacity-0 group-hover:opacity-100 transition-opacity ${e==="dark"?"bg-zinc-900 text-zinc-400 hover:text-white border-zinc-700":"bg-white text-zinc-500 hover:text-zinc-900 border-zinc-300"}`,children:i.jsx(hs,{size:10})})]},c))}),i.jsxs("div",{className:`relative rounded-xl flex items-end p-2 focus-within:border-blue-500/50 transition-colors border ${e==="dark"?"bg-zinc-800/50 border-zinc-700":"bg-white border-zinc-300"}`,children:[i.jsxs("label",{className:`p-2 cursor-pointer transition-colors ${e==="dark"?"text-zinc-400 hover:text-white":"text-zinc-500 hover:text-zinc-900"}`,title:"",children:[i.jsx(J2,{size:18}),i.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:f1,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.md,.js,.py,.html,.css,.json,.csv"})]}),i.jsx("textarea",{value:ri,onChange:r=>Ta(r.target.value),onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),K0())},placeholder:"...",className:`w-full bg-transparent text-sm resize-none outline-none max-h-32 py-2 px-1 custom-scrollbar ${e==="dark"?"text-white placeholder-zinc-500":"text-zinc-800 placeholder-zinc-400"}`,rows:1,style:{minHeight:"36px"}}),i.jsx("button",{onClick:K0,disabled:!ri.trim()&&ii.length===0||Ro,className:`p-2 rounded-lg transition-all mb-0.5 ${!ri.trim()&&ii.length===0||Ro?"opacity-50 bg-transparent text-zinc-400":"bg-blue-600 text-white hover:bg-blue-500"}`,children:i.jsx(rk,{size:16})})]}),i.jsx("div",{className:`text-[10px] text-center mt-2 ${e==="dark"?"text-zinc-600":"text-zinc-500"}`,children:" MP4/MP3/PDF/Doc/Excel/Code   Enter "})]})]}),$i.visible&&i.jsx("div",{className:`fixed z-50 w-40 rounded-lg shadow-xl border ${e==="dark"?"bg-[#18181b] border-zinc-800":"bg-white border-zinc-200"}`,style:{left:$i.x,top:$i.y,transform:"translate(-50%, -50%)"},onMouseLeave:()=>Uo(r=>({...r,visible:!1})),children:i.jsx("div",{className:"p-1",children:[{type:"input-image",label:""},{type:"text-node",label:""},{type:"video-input",label:" / "},{type:"video-analyze",label:" / "},{type:"storyboard-node",label:""},{type:"gen-image",label:"AI "},{type:"gen-video",label:"AI "},{type:"image-compare",label:""},{type:"preview",label:""}].map(r=>i.jsx("button",{className:`w-full text-left px-3 py-2 text-xs rounded transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>Es(r.type,$i.worldX,$i.worldY,$i.sourceNodeId,void 0,void 0,$i.targetNodeId,$i.inputType),children:r.label},r.type))})}),vr.visible&&i.jsxs("div",{className:`fixed z-[100] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:vr.x,top:vr.y},children:[i.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:X1,children:[i.jsx(na,{size:14,className:"text-purple-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:G1,children:[i.jsx(qo,{size:14,className:"text-blue-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const r=vr.item;r!=null&&r.url&&(l(c=>{const f=c.filter(p=>p.type==="preview");if(!f.length)return c;const h=f[f.length-1].id;return c.map(p=>p.id===h?{...p,content:r.url,previewType:r.type==="video"?"video":"image"}:p)}),Ss({visible:!1,x:0,y:0,item:null}))},children:[i.jsx(Ms,{size:14,className:"text-emerald-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:Y1,children:[i.jsx(qc,{size:14,className:X?"text-green-500":"text-zinc-400"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const r=vr.item,c=r.mjImages&&r.mjImages.length>0?r.mjImages[r.selectedMjImageIndex||0]||r.mjImages[0]:r.url||r.mjOriginalUrl;c&&(Yr.nodeId&&Yr.shotId?Vt(Yr.nodeId,Yr.shotId,{image_url:c}):alert(""),Ss({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null}))},children:[i.jsx(ml,{size:14,className:Yr.nodeId&&Yr.shotId?"text-orange-500":"text-zinc-400"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const r=vr.item;if(r!=null&&r.url){const c=(vr.worldX||0)+340,f=vr.worldY||0;Qa(r.url,{originX:c,originY:f})}Ss({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null})},children:[i.jsx(lp,{size:14,className:"text-blue-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:async()=>{const r=vr.item;if(r!=null&&r.url){try{const f=r.type==="video"||r.url.includes("/video/")||r.url.includes("video_mp4")?"mp4":"png",p=`${(r.prompt||"download").replace(/[\\/:*?"<>|]/g,"_").slice(0,50)}.${f}`,_=await(await fetch(r.url)).blob(),M=window.URL.createObjectURL(_),C=document.createElement("a");C.href=M,C.download=p,C.click(),window.URL.revokeObjectURL(M),console.log(" :",p)}catch(c){console.error(":",c),alert("")}Ss({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null})}},children:[i.jsx(Qo,{size:14,className:"text-green-500"})," ",((uh=vr.item)==null?void 0:uh.type)==="video"?"":""]})]}),Ai.visible&&i.jsxs("div",{className:`fixed z-[110] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:Ai.x,top:Ai.y},children:[i.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:H1,children:[i.jsx(na,{size:14,className:"text-purple-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:W1,children:[i.jsx(qo,{size:14,className:"text-blue-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:V1,children:[i.jsx(Ms,{size:14,className:"text-emerald-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:K1,children:[i.jsx(qc,{size:14,className:X?"text-green-500":"text-zinc-400"})," "]})]}),Pi.visible&&i.jsxs("div",{className:`fixed z-[110] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:Pi.x,top:Pi.y},onMouseLeave:xo,children:[i.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:J1,children:[i.jsx(na,{size:14,className:"text-purple-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:Z1,children:[i.jsx(qo,{size:14,className:"text-blue-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const r=Pi.item;r!=null&&r.url&&Se({url:r.url,type:r.type||"image",prompt:r.prompt||"",mjImages:r.mjImages,selectedMjImageIndex:r.selectedMjImageIndex||0}),xo()},children:[i.jsx(Ms,{size:14,className:"text-green-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const r=Pi.item;if(r!=null&&r.url){const c=Fs.current;if(c&&c.size===9)Qa(r.url,{replaceSelected:!0});else{const h=r.sourceNode,p=h?h.x+h.width+20:void 0,m=h?h.y:void 0;Qa(r.url,{originX:p,originY:m})}}xo()},children:[i.jsx(lp,{size:14,className:"text-blue-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:async()=>{const r=Pi.item;if(!(r!=null&&r.url)){xo();return}try{const f=r.type==="video"||r.url.includes("/video/")||r.url.includes("video_mp4")?"mp4":"png",p=`${(r.prompt||"download").replace(/[\\/:*?"<>|]/g,"_").slice(0,50)}_${Date.now()}.${f}`;if(r.url.startsWith("data:")){const m=document.createElement("a");m.href=r.url,m.download=p,document.body.appendChild(m),m.click(),document.body.removeChild(m)}else{const _=await(await fetch(r.url)).blob(),M=window.URL.createObjectURL(_),C=document.createElement("a");C.href=M,C.download=p,C.click(),window.URL.revokeObjectURL(M)}console.log(" :",p)}catch(c){console.error(":",c),o("","error")}xo()},children:[i.jsx(Qo,{size:14,className:"text-cyan-500"})," "]})]}),Ra.visible&&i.jsxs("div",{className:`fixed z-[110] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:Ra.x,top:Ra.y},onMouseLeave:Cd,children:[i.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:Q1,children:[i.jsx(na,{size:14,className:"text-purple-500"})," "]}),i.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const r=Ra.nodeId,c=Xt.get(r);if(!c||!c.content)return;const f=Fs.current;if(f&&f.size===9)Qa(c.content,{replaceSelected:!0});else{const p=c.x+c.width+20,m=c.y;Qa(c.content,{originX:p,originY:m})}Cd()},children:[i.jsx(lp,{size:14,className:"text-blue-500"})," "]})]}),i.jsx(Nk,{item:Y,onClose:()=>Se(null),onNavigate:r=>{var f;const c=lt.current;if(console.log("[onNavigate Debug] Called with:",{newIndex:r,currentItemMjLength:(f=c==null?void 0:c.mjImages)==null?void 0:f.length,hasStoryboard:!!(c!=null&&c.storyboardContext),selectedIdx:c==null?void 0:c.selectedMjImageIndex}),c&&c.mjImages&&c.mjImages.length>r&&r>=0){const h=Math.max(0,Math.min(r,c.mjImages.length-1));c.id&&!c.storyboardContext&&St(p=>p.map(m=>m.id===c.id?{...m,url:c.mjImages[h],selectedMjImageIndex:h}:m)),Se({...c,url:c.mjImages[h],selectedMjImageIndex:h})}},onShotNavigate:(r,c)=>{const f=lt.current;if(!(f!=null&&f.storyboardContext)||!c)return;const h=f.storyboardContext.shotIndex,p=r>h?1:-1;let m=r,_=null;for(;m>=0&&m<c.length;){const T=c[m];if(((T==null?void 0:T.output_images)||[]).length>0){_=T;break}m+=p}if(!_)return;const M=_.output_images||[],C=0;Se({url:M[C],type:"image",mjImages:M,selectedMjImageIndex:C,prompt:_.prompt,storyboardContext:{...f.storyboardContext,shotId:_.id,shotIndex:m}})},onHistoryNavigate:r=>{const c=lt.current;if(!c||c.storyboardContext)return;const f=kt.findIndex(p=>p.id===c.id);if(f===-1)return;let h=f+r;for(;h>=0&&h<kt.length;){const p=kt[h];if(p.url&&p.status==="completed"){Se({...p,url:p.mjImages&&p.mjImages.length>1?p.mjImages[0]:p.url,selectedMjImageIndex:0,storyboardContext:null});return}h+=r}}}),i.jsxs(_k,{isOpen:Oy,onClose:()=>li(!1),title:"",theme:e,children:[i.jsx("div",{className:"p-4 space-y-3",children:i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"Global API Key Key"}),i.jsx("div",{className:"mt-1 flex gap-2",children:i.jsx("input",{type:"password",value:nn,onChange:r=>$t(r.target.value),className:`flex-1 rounded px-2 py-1 text-xs outline-none focus:border-blue-600/50 border ${e==="dark"?"bg-zinc-900 border-zinc-800 text-zinc-300":"bg-white border-zinc-300 text-zinc-900"}`,placeholder:" Key Key"})})]})}),i.jsxs("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"V2.6.1 "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),i.jsxs("select",{value:er,onChange:r=>{const c=r.target.value;dn(c),localStorage.setItem("tapnow_performance_mode",c)},className:`text-xs rounded px-2 py-0.5 border outline-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300"}`,children:[i.jsx("option",{value:"off",children:" ()"}),i.jsx("option",{value:"normal",children:" ()"}),i.jsx("option",{value:"ultra",children:" ()"})]})]}),i.jsx("p",{className:"text-[9px] text-zinc-500",children:""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),i.jsx("input",{type:"text",value:tr,onChange:r=>{const c=r.target.value;Nr(c),localStorage.setItem("tapnow_local_server_url",c)},placeholder:"http://127.0.0.1:9527",className:`w-full text-xs rounded px-2 py-1 border outline-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300"}`})]}),i.jsx("p",{className:"text-[9px] text-zinc-500 mt-1",children:""})]})]})]}),i.jsxs("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"API "}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsxs("button",{onClick:()=>{const r={version:"3.4.23",exportTime:new Date().toISOString(),globalApiKey:nn,providers:Ne,apiConfigs:Te.map(({key:I,url:D,...R})=>R)},c=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),f=URL.createObjectURL(c),h=document.createElement("a");h.href=f;const p=new Date,m=p.getFullYear().toString().slice(2),_=(p.getMonth()+1).toString().padStart(2,"0"),M=p.getDate().toString().padStart(2,"0"),C=p.getHours().toString().padStart(2,"0"),T=p.getMinutes().toString().padStart(2,"0");h.download=`tapnow-api-keys-${m}${_}${M}-${C}${T}.json`,h.click(),URL.revokeObjectURL(f)},className:`flex-1 px-3 py-2 text-xs rounded flex items-center justify-center gap-2 transition-colors ${e==="dark"?"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 border border-blue-500/30":"bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200"}`,children:[i.jsx(Qo,{size:14})," API Keys"]}),i.jsxs("button",{onClick:()=>{const r=document.createElement("input");r.type="file",r.accept=".json",r.onchange=async c=>{const f=c.target.files[0];if(f)try{const h=await f.text(),p=JSON.parse(h);if(p.globalApiKey&&($t(p.globalApiKey),localStorage.setItem("tapnow_global_key",p.globalApiKey)),p.providers&&At(m=>({...m,...p.providers})),p.apiConfigs&&Array.isArray(p.apiConfigs)){const m=p.apiConfigs.map(_=>{if(_.modelName&&_.modelName!==_.id)return{id:_.modelName,provider:_.provider,type:_.type,..._.durations?{durations:_.durations}:{}};const{displayName:M,modelName:C,isCustom:T,key:I,url:D,...R}=_;return R});Ye(m)}alert("API ")}catch(h){alert(": "+h.message)}},r.click()},className:`flex-1 px-3 py-2 text-xs rounded flex items-center justify-center gap-2 transition-colors ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700 border border-zinc-700":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 border border-zinc-300"}`,children:[i.jsx(ea,{size:14})," API Keys"]})]}),i.jsx("p",{className:"text-[9px] text-zinc-500 mt-1",children:" KeyProvider  Key"})]}),i.jsxs("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"API "}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[i.jsxs("button",{onClick:()=>{_n({}),sn.current={},alert("")},className:`px-2 py-1.5 text-[10px] rounded flex items-center justify-center gap-1 transition-colors ${e==="dark"?"bg-red-600/20 text-red-400 hover:bg-red-600/30 border border-red-500/30":"bg-red-50 text-red-600 hover:bg-red-100 border border-red-200"}`,children:[i.jsx(R2,{size:12}),"",Object.keys(Dt).length>0&&i.jsx("span",{className:"ml-1 px-1 rounded bg-red-500/30 text-[9px]",children:Object.keys(Dt).length})]}),i.jsxs("button",{onClick:()=>{b({}),alert("")},className:`px-2 py-1.5 text-[10px] rounded flex items-center justify-center gap-1 transition-colors ${e==="dark"?"bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 border border-amber-500/30":"bg-amber-50 text-amber-600 hover:bg-amber-100 border border-amber-200"}`,children:[i.jsx(B2,{size:12}),"",Object.keys(kn).length>0&&i.jsx("span",{className:"ml-1 px-1 rounded bg-amber-500/30 text-[9px]",children:Object.keys(kn).length})]}),i.jsxs("button",{onClick:()=>{U.current=[],alert("")},className:`px-2 py-1.5 text-[10px] rounded flex items-center justify-center gap-1 transition-colors ${e==="dark"?"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 border border-blue-500/30":"bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200"}`,children:[i.jsx(up,{size:12}),""]})]}),i.jsx("p",{className:"text-[9px] text-zinc-500 mt-1",children:" =  = 60 = 1006"})]}),i.jsx("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"/"}),i.jsx("p",{className:`text-[10px] mt-0.5 ${e==="dark"?"text-zinc-600":"text-zinc-500"}`,children:" ()"})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[i.jsx("input",{type:"range",min:"1",max:"30",value:g,onChange:r=>{const c=parseInt(r.target.value)||5;j(c),localStorage.setItem("tapnow_max_undo_steps",String(c))},className:"w-20",onMouseDown:r=>r.stopPropagation()}),i.jsx("span",{className:`text-xs font-mono w-6 text-center ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:g})]})]})}),i.jsx("div",{className:"mb-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:""}),i.jsx("p",{className:`text-[10px] mt-0.5 ${e==="dark"?"text-zinc-600":"text-zinc-500"}`,children:"FormDataURL"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-3",children:[i.jsx("input",{type:"checkbox",checked:Re,onChange:r=>{const c=r.target.checked;nt(c),localStorage.setItem("tapnow_jimeng_use_local_file",String(c))},className:"sr-only peer"}),i.jsx("div",{className:`w-11 h-6 rounded-full peer peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 ${Re?"bg-blue-600":e==="dark"?"bg-zinc-700":"bg-zinc-300"} peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all`})]})]})}),i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:""}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{const r=Object.values(Ua).some(f=>f),c={};r||Object.keys(cs).forEach(f=>c[f]=!0),gd(c)},className:`p-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,title:Object.values(Ua).some(r=>r)?"":"",children:i.jsx(U2,{size:14,className:`transition-transform ${Object.values(Ua).some(r=>r)?"":"rotate-180"}`})}),i.jsxs(eu,{className:"h-7 text-xs px-3 bg-blue-600 hover:bg-blue-500",onClick:()=>{const r=`custom-${Date.now()}`,c="New Provider";At(f=>({...f,[r]:{name:c,key:"",url:"",enabled:!0}})),gd(f=>({...f,[r]:!0})),gc({key:r,tempName:c})},children:[i.jsx(Hi,{size:14,className:"mr-1"})," "]})]})]}),i.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1",children:Object.entries(cs).map(([r,c])=>{var f,h,p;return i.jsxs("div",{className:`group rounded-lg border ${e==="dark"?"bg-[#18181b] border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[i.jsx("button",{onClick:()=>gd(m=>({...m,[r]:!m[r]})),className:`w-full flex items-center justify-between px-3 py-2.5 text-left transition-colors ${e==="dark"?"hover:bg-zinc-800/50":"hover:bg-zinc-100"}`,children:Wy===r?i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("span",{className:`text-sm font-semibold ${e==="dark"?"text-zinc-100":"text-zinc-800"}`,children:[" ",c.name,"?"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:m=>{m.stopPropagation(),At(_=>{const M={..._};return delete M[r],M}),xd(null)},className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded",children:""}),i.jsx("button",{onClick:m=>{m.stopPropagation(),xd(null)},className:`text-xs px-2 py-1 rounded ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-700"}`,children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${((f=Ne[r])==null?void 0:f.enabled)!==!1?"bg-green-500":"bg-zinc-500"}`}),(Yo==null?void 0:Yo.key)===r?i.jsx("input",{type:"text",value:Yo.tempName,onChange:m=>gc(_=>({..._,tempName:m.target.value})),onBlur:()=>{const m=Yo.tempName.trim(),_=r;m&&m!==_&&(At(M=>{const{[_]:C,...T}=M;return{...T,[m]:C}}),Ye(M=>M.map(C=>C.provider===_?{...C,provider:m}:C))),gc(null)},onKeyDown:m=>{m.key==="Enter"&&m.target.blur(),m.stopPropagation()},onClick:m=>m.stopPropagation(),autoFocus:!0,className:`text-sm font-semibold bg-transparent border-b border-blue-500 outline-none w-full ${e==="dark"?"text-zinc-100":"text-zinc-800"}`}):i.jsx("span",{className:`text-sm font-semibold ${e==="dark"?"text-zinc-100":"text-zinc-800"}`,children:c.name}),i.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${e==="dark"?"bg-zinc-800 text-zinc-500":"bg-zinc-200 text-zinc-500"}`,children:[c.models.length," "]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!Yo&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:m=>{m.stopPropagation(),gc({key:r,tempName:c.name})},className:"p-1 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors opacity-0 group-hover:opacity-100",title:"",children:i.jsx(q2,{size:12,className:e==="dark"?"text-zinc-400":"text-zinc-500"})}),i.jsx("button",{onClick:m=>{m.stopPropagation(),xd(r)},className:"p-1 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors opacity-0 group-hover:opacity-100",title:"",children:i.jsx(Ys,{size:12,className:e==="dark"?"text-zinc-400 hover:text-red-400":"text-zinc-500 hover:text-red-500"})})]}),i.jsx(mi,{size:16,className:`transition-transform ${Ua[r]?"rotate-180":""} ${e==="dark"?"text-zinc-500":"text-zinc-400"}`})]})]})}),Ua[r]&&i.jsxs("div",{className:`px-3 pb-3 border-t ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[i.jsxs("div",{className:"pt-3 pb-2 space-y-2",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider text-right ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"API Key"}),i.jsx("input",{type:"password",value:((h=Ne[r])==null?void 0:h.key)||"",onChange:m=>At(_=>({..._,[r]:{..._[r],key:m.target.value}})),className:`col-span-3 w-full rounded px-2 py-1 text-xs outline-none focus:border-blue-600/50 border ${e==="dark"?"bg-zinc-900 border-zinc-800 text-zinc-300":"bg-white border-zinc-300 text-zinc-900"}`,placeholder:"sk-..."})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[i.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider text-right ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"Base URL"}),i.jsx("input",{type:"text",value:((p=Ne[r])==null?void 0:p.url)||"",onChange:m=>At(_=>({..._,[r]:{..._[r],url:m.target.value}})),className:`col-span-3 w-full rounded px-2 py-1 text-xs outline-none focus:border-blue-600/50 border ${e==="dark"?"bg-zinc-900 border-zinc-800 text-zinc-300":"bg-white border-zinc-300 text-zinc-900"}`,placeholder:"https://..."})]})]}),i.jsxs("div",{className:`mt-2 pt-2 border-t ${e==="dark"?"border-zinc-800/50":"border-zinc-200"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:""}),i.jsxs("button",{onClick:()=>{const m=`${r}-${Date.now()}`;Ye(_=>[..._,{id:m,provider:r,type:"Chat"}])},className:`text-[9px] px-1.5 py-0.5 rounded flex items-center gap-1 ${e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-200 text-zinc-600 hover:bg-zinc-300"}`,children:[i.jsx(Hi,{size:10})," "]})]}),i.jsx("div",{className:"space-y-1.5",children:c.models.map(m=>i.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 rounded ${e==="dark"?"bg-zinc-900/50 hover:bg-zinc-800/50":"bg-white hover:bg-zinc-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Oi(m.id)}`}),i.jsx("input",{type:"text",value:m.id||"",onChange:_=>V0(m.id,{id:_.target.value},m.id),className:`text-xs bg-transparent border-b border-transparent hover:border-zinc-600 focus:border-blue-500 outline-none flex-1 font-mono ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,placeholder:"model-id",title:` ID: ${m.id}`}),i.jsxs("select",{value:m.type||"Chat",onChange:_=>V0(m.id,{type:_.target.value}),className:`text-[9px] px-1 rounded cursor-pointer outline-none ${e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-200 text-zinc-500 hover:bg-zinc-300"}`,children:[i.jsx("option",{value:"Chat",children:"Chat"}),i.jsx("option",{value:"Image",children:"Image"}),i.jsx("option",{value:"Video",children:"Video"})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>c1(m.id),disabled:C0===m.id,className:`px-1.5 py-0.5 rounded text-[9px] ${vd[m.id]==="success"?"text-green-500":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-400 hover:text-zinc-600"}`,children:C0===m.id?i.jsx(gi,{size:10,className:"animate-spin"}):vd[m.id]==="success"?i.jsx(zl,{size:10}):i.jsx(gl,{size:10})}),i.jsx("button",{onClick:()=>l1(m.id),className:`px-1 ${e==="dark"?"text-zinc-600 hover:text-red-500":"text-zinc-400 hover:text-red-500"}`,children:i.jsx(Ys,{size:10})})]})]},m.id))})]})]})]},r)})}),i.jsx("div",{className:`pt-2 flex justify-end gap-2 border-t mt-3 ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:i.jsx(eu,{variant:"secondary",onClick:()=>li(!1),children:""})})]}),Fy&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>{mc(!1),ho(new Set)}}),i.jsxs("div",{className:`relative w-[90vw] h-[85vh] max-w-7xl rounded-lg shadow-2xl flex flex-col ${e==="dark"?"bg-[#121214] border border-zinc-800":"bg-white border border-zinc-200"}`,children:[i.jsxs("div",{className:`p-4 border-b flex items-center justify-between ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:`text-lg font-bold ${e==="dark"?"text-zinc-100":"text-zinc-900"}`,children:""}),i.jsxs("span",{className:`text-sm ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:[" ",Or.size," "]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{Or.size===kt.length?ho(new Set):ho(new Set(kt.map(r=>r.id)))},className:`px-3 py-1.5 text-xs rounded transition-colors ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200"}`,children:Or.size===kt.length?"":""}),i.jsxs("button",{onClick:()=>{Or.size!==0&&confirm(` ${Or.size} `)&&(St(r=>{const c=r.filter(f=>!Or.has(f.id));try{localStorage.setItem("tapnow_history",JSON.stringify(c))}catch(f){console.error(":",f)}return c}),ho(new Set))},disabled:Or.size===0,className:`px-3 py-1.5 text-xs rounded transition-colors flex items-center gap-1.5 ${Or.size===0?e==="dark"?"bg-zinc-800/50 text-zinc-600 cursor-not-allowed":"bg-zinc-100 text-zinc-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:[i.jsx(Ys,{size:14}),""]}),i.jsxs("button",{onClick:async()=>{if(Or.size===0)return;const r=kt.filter(p=>Or.has(p.id)&&p.url);if(r.length===0){alert("");return}const c=xn(window.innerWidth/2,window.innerHeight/2),f=c.x,h=c.y;r.forEach((p,m)=>{const _=m%5*20,M=Math.floor(m/5)*20;let C=p.url;p.type==="video"&&!pr(C)&&(C+=(C.includes("?")?"&":"?")+"force_video_display=true"),p.type==="image"?(async()=>{try{const T=await Ur(C);Es("input-image",f+_,h+M,null,C,T)}catch{Es("input-image",f+_,h+M,null,C)}})():p.type==="video"&&Es("video-input",f+_,h+M,null,C)}),mc(!1),ho(new Set)},disabled:Or.size===0,className:`px-3 py-1.5 text-xs rounded transition-colors flex items-center gap-1.5 ${Or.size===0?e==="dark"?"bg-zinc-800/50 text-zinc-600 cursor-not-allowed":"bg-zinc-100 text-zinc-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[i.jsx(qc,{size:14}),""]}),i.jsx("button",{onClick:()=>{mc(!1),ho(new Set)},className:`p-1.5 rounded transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,children:i.jsx(hs,{size:18})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:i.jsx("div",{className:"grid grid-cols-4 gap-4",children:kt.map(r=>{var h,p;const c=Or.has(r.id),f=r.mjImages&&r.mjImages.length>1?r.mjImages[r.selectedMjImageIndex||0]||r.mjImages[0]:r.url;return i.jsxs("div",{onClick:()=>{const m=new Set(Or);c?m.delete(r.id):m.add(r.id),ho(m)},onDoubleClick:m=>{m.stopPropagation();const _={...r,url:f,selectedMjImageIndex:r.mjImages&&r.mjImages.length>1?r.selectedMjImageIndex||0:void 0};Se(_)},className:`relative rounded-lg overflow-hidden border-2 cursor-pointer transition-all ${c?"border-blue-500 shadow-lg shadow-blue-500/20":e==="dark"?"border-zinc-800 hover:border-zinc-700":"border-zinc-200 hover:border-zinc-300"}`,children:[i.jsxs("div",{className:"absolute top-2 right-2 z-10 flex items-center gap-1.5",children:[c&&i.jsx("div",{className:"bg-blue-500 rounded-full p-1",children:i.jsx(jl,{size:16,className:"text-white"})}),r.status==="completed"&&f&&i.jsx("button",{onClick:m=>{m.stopPropagation();const _={...r,url:f,selectedMjImageIndex:r.mjImages&&r.mjImages.length>1?r.selectedMjImageIndex||0:void 0};Se(_)},className:`p-1.5 rounded-full transition-colors backdrop-blur-sm ${e==="dark"?"bg-black/60 text-white hover:bg-black/80":"bg-white/80 text-zinc-700 hover:bg-white"}`,title:" ()",children:i.jsx(Ms,{size:14})})]}),i.jsx("div",{className:`relative ${r.mjImages&&(r.mjImages.length===4||r.mjImages.length>1)||r.mjNeedsSplit&&((p=(h=r.apiConfig)==null?void 0:h.modelId)!=null&&p.includes("mj"))?(()=>{const m=r.mjRatio||"1:1";return m==="16:9"?"aspect-video":m==="9:16"?"aspect-[9/16]":m==="4:3"?"aspect-[4/3]":m==="3:4"?"aspect-[3/4]":m==="21:9"?"aspect-[21/9]":"aspect-square"})():"aspect-video"} ${e==="dark"?"bg-zinc-900":"bg-zinc-100"}`,children:r.status==="completed"&&f?r.type==="video"||pr(f)?i.jsx("video",{src:f,className:"w-full h-full object-contain",controls:!0,playsInline:!0,preload:"metadata"}):i.jsx(sr,{src:f,className:"w-full h-full object-contain",alt:"",onError:m=>{m.target.style.display="none"}}):i.jsx("div",{className:`w-full h-full flex items-center justify-center ${e==="dark"?"text-zinc-600":"text-zinc-400"}`,children:r.status==="generating"?i.jsx(gi,{size:24,className:"animate-spin"}):i.jsx(H2,{size:24})})}),i.jsxs("div",{className:`p-2 text-xs ${e==="dark"?"bg-zinc-900 text-zinc-300":"bg-zinc-50 text-zinc-700"}`,children:[i.jsx("div",{className:"truncate font-medium",children:r.prompt||""}),i.jsxs("div",{className:"text-[10px] opacity-70 mt-0.5",children:[r.id||"","  ",r.time]})]})]},r.id)})})})]})]})]})]})]}),i.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[9999] flex flex-col gap-2 pointer-events-none",children:n.map(r=>i.jsx("div",{className:`px-4 py-2 rounded-lg shadow-lg text-sm font-medium pointer-events-auto animate-pulse ${r.type==="success"?"bg-green-600 text-white":r.type==="error"?"bg-red-600 text-white":r.type==="warning"?"bg-yellow-500 text-black":"bg-zinc-800 text-white"}`,children:r.message},r.id))})]})}hp.createRoot(document.getElementById("root")).render(i.jsx(Wu.StrictMode,{children:i.jsx(Sk,{})}));</script>
  <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.\!visible{visibility:visible!important}.visible{visibility:visible}.collapse{visibility:collapse}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-bottom-0\.5{bottom:-.125rem}.-bottom-1\.5{bottom:-.375rem}.-left-1{left:-.25rem}.-right-0\.5{right:-.125rem}.-right-1{right:-.25rem}.-right-2\.5{right:-.625rem}.-top-1{top:-.25rem}.-top-1\.5{top:-.375rem}.-top-10{top:-2.5rem}.-top-2\.5{top:-.625rem}.bottom-0{bottom:0}.bottom-1{bottom:.25rem}.bottom-2{bottom:.5rem}.bottom-4{bottom:1rem}.bottom-8{bottom:2rem}.bottom-full{bottom:100%}.left-0{left:0}.left-1{left:.25rem}.left-1\/2{left:50%}.left-2{left:.5rem}.left-4{left:1rem}.left-6{left:1.5rem}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-1{top:.25rem}.top-1\/2{top:50%}.top-12{top:3rem}.top-2{top:.5rem}.top-20{top:5rem}.top-4{top:1rem}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\[100\]{z-index:100}.z-\[110\]{z-index:110}.z-\[200\]{z-index:200}.z-\[60\]{z-index:60}.z-\[9999\]{z-index:9999}.col-span-3{grid-column:span 3 / span 3}.col-span-full{grid-column:1 / -1}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-mb-1{margin-bottom:-.25rem}.-mt-1{margin-top:-.25rem}.mb-0\.5{margin-bottom:.125rem}.mb-1{margin-bottom:.25rem}.mb-1\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-auto{margin-bottom:auto}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-auto{margin-left:auto}.mr-0{margin-right:0}.mr-1{margin-right:.25rem}.mr-1\.5{margin-right:.375rem}.mr-2{margin-right:.5rem}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-auto{margin-top:auto}.line-clamp-1{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-\[21\/9\]{aspect-ratio:21/9}.aspect-\[3\/4\]{aspect-ratio:3/4}.aspect-\[4\/3\]{aspect-ratio:4/3}.aspect-\[9\/16\]{aspect-ratio:9/16}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.h-0{height:0px}.h-1{height:.25rem}.h-1\.5{height:.375rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\.5{height:.875rem}.h-4{height:1rem}.h-40{height:10rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-\[2px\]{height:2px}.h-\[85vh\]{height:85vh}.h-\[90px\]{height:90px}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-32{max-height:8rem}.max-h-36{max-height:9rem}.max-h-64{max-height:16rem}.max-h-80{max-height:20rem}.max-h-\[140px\]{max-height:140px}.max-h-\[300px\]{max-height:300px}.max-h-\[50vh\]{max-height:50vh}.max-h-\[85vh\]{max-height:85vh}.max-h-\[90vh\]{max-height:90vh}.max-h-full{max-height:100%}.min-h-0{min-height:0px}.min-h-\[100px\]{min-height:100px}.min-h-\[14rem\]{min-height:14rem}.min-h-\[70px\]{min-height:70px}.min-h-\[80px\]{min-height:80px}.w-0{width:0px}.w-0\.5{width:.125rem}.w-1{width:.25rem}.w-1\.5{width:.375rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\.5{width:.875rem}.w-32{width:8rem}.w-36{width:9rem}.w-4{width:1rem}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-52{width:13rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-96{width:24rem}.w-\[160px\]{width:160px}.w-\[500px\]{width:500px}.w-\[680px\]{width:680px}.w-\[90vw\]{width:90vw}.w-auto{width:auto}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[100px\]{min-width:100px}.min-w-\[300px\]{min-width:300px}.max-w-7xl{max-width:80rem}.max-w-\[200px\]{max-width:200px}.max-w-\[360px\]{max-width:360px}.max-w-\[85\%\]{max-width:85%}.max-w-\[90vw\]{max-width:90vw}.max-w-full{max-width:100%}.max-w-xl{max-width:36rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.origin-top-left{transform-origin:top left}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-75{--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}.animate-bounce{animation:bounce 1s infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.cursor-col-resize{cursor:col-resize}.cursor-default{cursor:default}.cursor-ew-resize{cursor:ew-resize}.cursor-move{cursor:move}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.resize-none{resize:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.content-start{align-content:flex-start}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0{gap:0px}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(-.5rem * var(--tw-space-x-reverse));margin-left:calc(-.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-bl{border-bottom-left-radius:.25rem}.rounded-br{border-bottom-right-radius:.25rem}.rounded-tl-none{border-top-left-radius:0}.rounded-tr{border-top-right-radius:.25rem}.rounded-tr-none{border-top-right-radius:0}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-\[\#18181b\]{--tw-border-opacity: 1;border-color:rgb(24 24 27 / var(--tw-border-opacity, 1))}.border-amber-200{--tw-border-opacity: 1;border-color:rgb(253 230 138 / var(--tw-border-opacity, 1))}.border-amber-500\/30{border-color:#f59e0b4d}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-500\/30{border-color:#3b82f64d}.border-blue-800{--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-purple-200{--tw-border-opacity: 1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.border-purple-500\/20{border-color:#a855f733}.border-purple-800{--tw-border-opacity: 1;border-color:rgb(107 33 168 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-red-500\/30{border-color:#ef44444d}.border-red-500\/50{border-color:#ef444480}.border-red-800{--tw-border-opacity: 1;border-color:rgb(153 27 27 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-violet-200{--tw-border-opacity: 1;border-color:rgb(221 214 254 / var(--tw-border-opacity, 1))}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\/10{border-color:#ffffff1a}.border-white\/60{border-color:#fff9}.border-white\/70{border-color:#ffffffb3}.border-white\/80{border-color:#fffc}.border-zinc-200{--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity, 1))}.border-zinc-300{--tw-border-opacity: 1;border-color:rgb(212 212 216 / var(--tw-border-opacity, 1))}.border-zinc-400{--tw-border-opacity: 1;border-color:rgb(161 161 170 / var(--tw-border-opacity, 1))}.border-zinc-600{--tw-border-opacity: 1;border-color:rgb(82 82 91 / var(--tw-border-opacity, 1))}.border-zinc-700{--tw-border-opacity: 1;border-color:rgb(63 63 70 / var(--tw-border-opacity, 1))}.border-zinc-700\/50{border-color:#3f3f4680}.border-zinc-800{--tw-border-opacity: 1;border-color:rgb(39 39 42 / var(--tw-border-opacity, 1))}.border-zinc-800\/50{border-color:#27272a80}.bg-\[\#09090b\]{--tw-bg-opacity: 1;background-color:rgb(9 9 11 / var(--tw-bg-opacity, 1))}.bg-\[\#09090b\]\/90{background-color:#09090be6}.bg-\[\#121214\]{--tw-bg-opacity: 1;background-color:rgb(18 18 20 / var(--tw-bg-opacity, 1))}.bg-\[\#18181b\]{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.bg-amber-50{--tw-bg-opacity: 1;background-color:rgb(255 251 235 / var(--tw-bg-opacity, 1))}.bg-amber-500\/30{background-color:#f59e0b4d}.bg-amber-600\/20{background-color:#d9770633}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/40{background-color:#0006}.bg-black\/50{background-color:#00000080}.bg-black\/60{background-color:#0009}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\/10{background-color:#3b82f61a}.bg-blue-500\/20{background-color:#3b82f633}.bg-blue-500\/30{background-color:#3b82f64d}.bg-blue-500\/5{background-color:#3b82f60d}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-600\/20{background-color:#2563eb33}.bg-blue-600\/30{background-color:#2563eb4d}.bg-blue-600\/80{background-color:#2563ebcc}.bg-blue-900\/20{background-color:#1e3a8a33}.bg-blue-900\/30{background-color:#1e3a8a4d}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-600\/40{background-color:#16a34a66}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-purple-900\/30{background-color:#581c874d}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\/10{background-color:#ef44441a}.bg-red-500\/30{background-color:#ef44444d}.bg-red-500\/80{background-color:#ef4444cc}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-red-600\/20{background-color:#dc262633}.bg-red-600\/30{background-color:#dc26264d}.bg-red-600\/80{background-color:#dc2626cc}.bg-red-900\/30{background-color:#7f1d1d4d}.bg-transparent{background-color:transparent}.bg-violet-50{--tw-bg-opacity: 1;background-color:rgb(245 243 255 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/10{background-color:#ffffff1a}.bg-white\/40{background-color:#fff6}.bg-white\/80{background-color:#fffc}.bg-white\/90{background-color:#ffffffe6}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-yellow-600{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.bg-zinc-100{--tw-bg-opacity: 1;background-color:rgb(244 244 245 / var(--tw-bg-opacity, 1))}.bg-zinc-200{--tw-bg-opacity: 1;background-color:rgb(228 228 231 / var(--tw-bg-opacity, 1))}.bg-zinc-300{--tw-bg-opacity: 1;background-color:rgb(212 212 216 / var(--tw-bg-opacity, 1))}.bg-zinc-400{--tw-bg-opacity: 1;background-color:rgb(161 161 170 / var(--tw-bg-opacity, 1))}.bg-zinc-50{--tw-bg-opacity: 1;background-color:rgb(250 250 250 / var(--tw-bg-opacity, 1))}.bg-zinc-50\/50{background-color:#fafafa80}.bg-zinc-500{--tw-bg-opacity: 1;background-color:rgb(113 113 122 / var(--tw-bg-opacity, 1))}.bg-zinc-600{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.bg-zinc-700{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.bg-zinc-700\/50{background-color:#3f3f4680}.bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.bg-zinc-800\/40{background-color:#27272a66}.bg-zinc-800\/50{background-color:#27272a80}.bg-zinc-900{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.bg-zinc-900\/30{background-color:#18181b4d}.bg-zinc-900\/50{background-color:#18181b80}.bg-zinc-900\/80{background-color:#18181bcc}.bg-zinc-900\/90{background-color:#18181be6}.bg-zinc-950{--tw-bg-opacity: 1;background-color:rgb(9 9 11 / var(--tw-bg-opacity, 1))}.bg-zinc-950\/50{background-color:#09090b80}.bg-opacity-50{--tw-bg-opacity: .5}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-blue-600{--tw-gradient-from: #2563eb var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from: #9333ea var(--tw-gradient-from-position);--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-indigo-600{--tw-gradient-to: #4f46e5 var(--tw-gradient-to-position)}.fill-current{fill:currentColor}.object-contain{-o-object-fit:contain;object-fit:contain}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-0\.5{padding:.125rem}.p-1{padding:.25rem}.p-1\.5{padding:.375rem}.p-2{padding:.5rem}.p-2\.5{padding:.625rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-8{padding:2rem}.px-0\.5{padding-left:.125rem;padding-right:.125rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-1{padding-bottom:.25rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pl-1{padding-left:.25rem}.pl-2{padding-left:.5rem}.pl-8{padding-left:2rem}.pr-1{padding-right:.25rem}.pr-2{padding-right:.5rem}.pr-8{padding-right:2rem}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.text-\[7px\]{font-size:7px}.text-\[8px\]{font-size:8px}.text-\[9px\]{font-size:9px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-none{line-height:1}.tracking-\[0\.3em\]{letter-spacing:.3em}.tracking-tighter{letter-spacing:-.05em}.tracking-wide{letter-spacing:.025em}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-amber-400{--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-cyan-500{--tw-text-opacity: 1;color:rgb(6 182 212 / var(--tw-text-opacity, 1))}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity, 1))}.text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.text-green-300{--tw-text-opacity: 1;color:rgb(134 239 172 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-purple-300{--tw-text-opacity: 1;color:rgb(216 180 254 / var(--tw-text-opacity, 1))}.text-purple-400{--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity: 1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-200{--tw-text-opacity: 1;color:rgb(254 202 202 / var(--tw-text-opacity, 1))}.text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/70{color:#ffffffb3}.text-yellow-300{--tw-text-opacity: 1;color:rgb(253 224 71 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-zinc-100{--tw-text-opacity: 1;color:rgb(244 244 245 / var(--tw-text-opacity, 1))}.text-zinc-200{--tw-text-opacity: 1;color:rgb(228 228 231 / var(--tw-text-opacity, 1))}.text-zinc-300{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}.text-zinc-400{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.text-zinc-500{--tw-text-opacity: 1;color:rgb(113 113 122 / var(--tw-text-opacity, 1))}.text-zinc-600{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.text-zinc-700{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.text-zinc-800{--tw-text-opacity: 1;color:rgb(39 39 42 / var(--tw-text-opacity, 1))}.text-zinc-900{--tw-text-opacity: 1;color:rgb(24 24 27 / var(--tw-text-opacity, 1))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.placeholder-zinc-400::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(161 161 170 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-400::placeholder{--tw-placeholder-opacity: 1;color:rgb(161 161 170 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-500::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(113 113 122 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-500::placeholder{--tw-placeholder-opacity: 1;color:rgb(113 113 122 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-600::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(82 82 91 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-600::placeholder{--tw-placeholder-opacity: 1;color:rgb(82 82 91 / var(--tw-placeholder-opacity, 1))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-20{opacity:.2}.opacity-30{opacity:.3}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_10px_rgba\(0\,0\,0\,0\.5\)\]{--tw-shadow: 0 0 10px rgba(0,0,0,.5);--tw-shadow-colored: 0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_10px_rgba\(255\,255\,255\,0\.5\)\]{--tw-shadow: 0 0 10px rgba(255,255,255,.5);--tw-shadow-colored: 0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(239\,68\,68\,0\.8\)\]{--tw-shadow: 0 0 8px rgba(239,68,68,.8);--tw-shadow-colored: 0 0 8px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(34\,197\,94\,0\.6\)\]{--tw-shadow: 0 0 8px rgba(34,197,94,.6);--tw-shadow-colored: 0 0 8px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(34\,197\,94\,0\.8\)\]{--tw-shadow: 0 0 8px rgba(34,197,94,.8);--tw-shadow-colored: 0 0 8px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-black\/10{--tw-shadow-color: rgb(0 0 0 / .1);--tw-shadow: var(--tw-shadow-colored)}.shadow-black\/40{--tw-shadow-color: rgb(0 0 0 / .4);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-300\/30{--tw-shadow-color: rgb(147 197 253 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-500\/20{--tw-shadow-color: rgb(59 130 246 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-900\/20{--tw-shadow-color: rgb(30 58 138 / .2);--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-300\/60{--tw-ring-color: rgb(147 197 253 / .6)}.ring-blue-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.ring-blue-500\/30{--tw-ring-color: rgb(59 130 246 / .3)}.ring-blue-500\/50{--tw-ring-color: rgb(59 130 246 / .5)}.ring-green-500\/50{--tw-ring-color: rgb(34 197 94 / .5)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\[50px\]{--tw-blur: blur(50px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.grayscale{--tw-grayscale: grayscale(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-\[2px\]{--tw-backdrop-blur: blur(2px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur: blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-xl{--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}.will-change-transform{will-change:transform}body{margin:0;padding:0;background-color:#09090b}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.select-text{-webkit-user-select:text;-moz-user-select:text;user-select:text}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.art-loader-container{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#09090b;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:#e4e4e7}.art-center-group{display:flex;flex-direction:column;align-items:center;transform:translateY(-20px)}.art-visual{position:relative;width:60px;height:60px;margin-bottom:30px}.art-ring-outer{position:absolute;top:0;right:0;bottom:0;left:0;border:1px solid rgba(255,255,255,.1);border-radius:50%;animation:art-breathe 4s ease-in-out infinite}.art-ring-inner{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:50%;border:1px solid transparent;border-top-color:#fff;border-left-color:#ffffff4d;opacity:.8;animation:art-spin 2s cubic-bezier(.4,0,.2,1) infinite}.art-dot{position:absolute;top:50%;left:50%;width:4px;height:4px;background-color:#fff;border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px #ffffff80}.art-title{font-size:12px;font-weight:300;text-transform:uppercase;letter-spacing:.3em;opacity:.9;margin-bottom:8px}.art-status{font-family:Courier New,monospace;font-size:10px;color:#71717a;letter-spacing:.1em;animation:art-pulse 2s ease-in-out infinite}.art-footer{position:absolute;bottom:40px;display:flex;flex-direction:column;align-items:center;text-align:center;gap:12px;opacity:0;animation:art-fade-up 1s ease-out .5s forwards}.footer-author{display:flex;flex-direction:column;gap:4px}.footer-author .label{font-size:9px;color:#52525b;text-transform:uppercase;letter-spacing:.2em}.footer-author .name{font-size:14px;font-weight:500;letter-spacing:.5em;color:#fff;text-indent:.5em}.footer-divider{width:20px;height:1px;background-color:#27272a}.footer-thanks{display:flex;flex-direction:column;gap:2px}.footer-thanks .label{font-size:8px;color:#3f3f46;text-transform:uppercase;letter-spacing:.1em}.footer-thanks .content{font-size:10px;color:#71717a;font-family:Courier New,monospace}.footer-thanks .highlight{color:#a1a1aa;font-weight:600}@keyframes art-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes art-breathe{0%,to{transform:scale(1);opacity:.5}50%{transform:scale(1.1);opacity:.2}}@keyframes art-pulse{0%,to{opacity:.4}50%{opacity:.8}}@keyframes art-fade-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.markdown-body{line-height:1.5}.markdown-body p{margin:0}.markdown-body p+p{margin-top:.5em}.markdown-body ul,.markdown-body ol{margin:.5em 0;padding-left:1.5em}.markdown-body pre{margin:.5em 0;padding:.5em;border-radius:.5em;overflow-x:auto}.markdown-body code{font-size:.875em}.placeholder\:text-zinc-400::-moz-placeholder{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-400::placeholder{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-600::-moz-placeholder{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-600::placeholder{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-700::-moz-placeholder{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-700::placeholder{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.placeholder\:text-opacity-50::-moz-placeholder{--tw-text-opacity: .5}.placeholder\:text-opacity-50::placeholder{--tw-text-opacity: .5}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:left-\[2px\]:after{content:var(--tw-content);left:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.focus-within\:border-blue-500\/30:focus-within{border-color:#3b82f64d}.focus-within\:border-blue-500\/50:focus-within{border-color:#3b82f680}.hover\:h-6:hover{height:1.5rem}.hover\:scale-100:hover{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-blue-300:hover{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.hover\:border-blue-400:hover{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.hover\:border-blue-500:hover{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.hover\:border-blue-500\/30:hover{border-color:#3b82f64d}.hover\:border-blue-500\/50:hover{border-color:#3b82f680}.hover\:border-green-400:hover{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.hover\:border-green-500:hover{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.hover\:border-zinc-300:hover{--tw-border-opacity: 1;border-color:rgb(212 212 216 / var(--tw-border-opacity, 1))}.hover\:border-zinc-400:hover{--tw-border-opacity: 1;border-color:rgb(161 161 170 / var(--tw-border-opacity, 1))}.hover\:border-zinc-500:hover{--tw-border-opacity: 1;border-color:rgb(113 113 122 / var(--tw-border-opacity, 1))}.hover\:border-zinc-600:hover{--tw-border-opacity: 1;border-color:rgb(82 82 91 / var(--tw-border-opacity, 1))}.hover\:border-zinc-700:hover{--tw-border-opacity: 1;border-color:rgb(63 63 70 / var(--tw-border-opacity, 1))}.hover\:bg-amber-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 243 199 / var(--tw-bg-opacity, 1))}.hover\:bg-amber-600\/30:hover{background-color:#d977064d}.hover\:bg-black\/70:hover{background-color:#000000b3}.hover\:bg-black\/80:hover{background-color:#000c}.hover\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-200:hover{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-400:hover{--tw-bg-opacity: 1;background-color:rgb(96 165 250 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-400\/30:hover{background-color:#60a5fa4d}.hover\:bg-blue-500:hover{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-500\/30:hover{background-color:#3b82f64d}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-600\/30:hover{background-color:#2563eb4d}.hover\:bg-blue-600\/50:hover{background-color:#2563eb80}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-green-400:hover{--tw-bg-opacity: 1;background-color:rgb(74 222 128 / var(--tw-bg-opacity, 1))}.hover\:bg-green-500:hover{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600\/60:hover{background-color:#16a34a99}.hover\:bg-purple-400:hover{--tw-bg-opacity: 1;background-color:rgb(192 132 252 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-500:hover{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.hover\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover\:bg-red-200:hover{--tw-bg-opacity: 1;background-color:rgb(254 202 202 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-500:hover{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.hover\:bg-red-500\/10:hover{background-color:#ef44441a}.hover\:bg-red-600:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600\/30:hover{background-color:#dc26264d}.hover\:bg-red-600\/50:hover{background-color:#dc262680}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity, 1))}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/20:hover{background-color:#fff3}.hover\:bg-yellow-400:hover{--tw-bg-opacity: 1;background-color:rgb(250 204 21 / var(--tw-bg-opacity, 1))}.hover\:bg-yellow-500:hover{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-100:hover{--tw-bg-opacity: 1;background-color:rgb(244 244 245 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-200:hover{--tw-bg-opacity: 1;background-color:rgb(228 228 231 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-300:hover{--tw-bg-opacity: 1;background-color:rgb(212 212 216 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-700:hover{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-800:hover{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-800\/50:hover{background-color:#27272a80}.hover\:from-purple-500:hover{--tw-gradient-from: #a855f7 var(--tw-gradient-from-position);--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-indigo-500:hover{--tw-gradient-to: #6366f1 var(--tw-gradient-to-position)}.hover\:text-blue-300:hover{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.hover\:text-blue-400:hover{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.hover\:text-blue-500:hover{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.hover\:text-green-600:hover{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.hover\:text-red-400:hover{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.hover\:text-red-500:hover{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:text-zinc-200:hover{--tw-text-opacity: 1;color:rgb(228 228 231 / var(--tw-text-opacity, 1))}.hover\:text-zinc-300:hover{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}.hover\:text-zinc-600:hover{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.hover\:text-zinc-700:hover{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.hover\:text-zinc-800:hover{--tw-text-opacity: 1;color:rgb(39 39 42 / var(--tw-text-opacity, 1))}.hover\:text-zinc-900:hover{--tw-text-opacity: 1;color:rgb(24 24 27 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:border-blue-500:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:border-blue-500\/50:focus{border-color:#3b82f680}.focus\:border-blue-600\/50:focus{border-color:#2563eb80}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500\/50:focus{--tw-ring-color: rgb(59 130 246 / .5)}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.group\/insert:hover .group-hover\/insert\:scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\:bg-zinc-200{--tw-bg-opacity: 1;background-color:rgb(228 228 231 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\:bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.group\/cell:hover .group-hover\/cell\:opacity-100,.group\/insert:hover .group-hover\/insert\:opacity-100,.group\/main:hover .group-hover\/main\:opacity-100,.group\/preview:hover .group-hover\/preview\:opacity-100,.group:hover .group-hover\:opacity-100{opacity:1}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:focus~.peer-focus\:ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.peer:focus~.peer-focus\:ring-blue-500\/50{--tw-ring-color: rgb(59 130 246 / .5)}@media (prefers-color-scheme: dark){.dark\:border-zinc-700{--tw-border-opacity: 1;border-color:rgb(63 63 70 / var(--tw-border-opacity, 1))}.dark\:bg-blue-900\/30{background-color:#1e3a8a4d}.dark\:bg-zinc-700{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.dark\:bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.dark\:text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\:text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-zinc-200{--tw-text-opacity: 1;color:rgb(228 228 231 / var(--tw-text-opacity, 1))}.dark\:text-zinc-300{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}.dark\:text-zinc-400{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.dark\:hover\:bg-blue-900\/30:hover{background-color:#1e3a8a4d}.dark\:hover\:bg-zinc-700:hover{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-zinc-800:hover{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.dark\:hover\:text-zinc-300:hover{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}}</style>
</head>

<body style="margin: 0; padding: 0; background-color: #09090b;">
    <div id="root"></div>
</body>

</html>