<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tapnow Studio</title>
  <script type="module" crossorigin>var N1=Object.defineProperty;var Ah=e=>{throw TypeError(e)};var S1=(e,t,n)=>t in e?N1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gn=(e,t,n)=>S1(e,typeof t!="symbol"?t+"":t,n),C1=(e,t,n)=>t.has(e)||Ah("Cannot "+n);var Ph=(e,t,n)=>t.has(e)?Ah("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var tc=(e,t,n)=>(C1(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Em={exports:{}},gu={},Im={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),E1=Symbol.for("react.portal"),I1=Symbol.for("react.fragment"),T1=Symbol.for("react.strict_mode"),M1=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),R1=Symbol.for("react.suspense"),D1=Symbol.for("react.memo"),L1=Symbol.for("react.lazy"),Rh=Symbol.iterator;function O1(e){return e===null||typeof e!="object"?null:(e=Rh&&e[Rh]||e["@@iterator"],typeof e=="function"?e:null)}var Tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mm=Object.assign,$m={};function ea(e,t,n){this.props=e,this.context=t,this.refs=$m,this.updater=n||Tm}ea.prototype.isReactComponent={};ea.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ea.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Am(){}Am.prototype=ea.prototype;function Ff(e,t,n){this.props=e,this.context=t,this.refs=$m,this.updater=n||Tm}var Bf=Ff.prototype=new Am;Bf.constructor=Ff;Mm(Bf,ea.prototype);Bf.isPureReactComponent=!0;var Dh=Array.isArray,Pm=Object.prototype.hasOwnProperty,Hf={current:null},Rm={key:!0,ref:!0,__self:!0,__source:!0};function Dm(e,t,n){var r,i={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Pm.call(t,r)&&!Rm.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),y=0;y<c;y++)d[y]=arguments[y+2];i.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:_l,type:e,key:a,ref:l,props:i,_owner:Hf.current}}function U1(e,t){return{$$typeof:_l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wf(e){return typeof e=="object"&&e!==null&&e.$$typeof===_l}function F1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lh=/\/+/g;function nd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F1(""+e.key):t.toString(36)}function Ic(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case _l:case E1:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+nd(l,0):r,Dh(i)?(n="",e!=null&&(n=e.replace(Lh,"$&/")+"/"),Ic(i,t,n,"",function(y){return y})):i!=null&&(Wf(i)&&(i=U1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Lh,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Dh(e))for(var c=0;c<e.length;c++){a=e[c];var d=r+nd(a,c);l+=Ic(a,t,n,d,i)}else if(d=O1(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=r+nd(a,c++),l+=Ic(a,t,n,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function nc(e,t,n){if(e==null)return e;var r=[],i=0;return Ic(e,r,"","",function(a){return t.call(n,a,i++)}),r}function B1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vr={current:null},Tc={transition:null},H1={ReactCurrentDispatcher:vr,ReactCurrentBatchConfig:Tc,ReactCurrentOwner:Hf};function Lm(){throw Error("act(...) is not supported in production builds of React.")}Bt.Children={map:nc,forEach:function(e,t,n){nc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return nc(e,function(){t++}),t},toArray:function(e){return nc(e,function(t){return t})||[]},only:function(e){if(!Wf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Bt.Component=ea;Bt.Fragment=I1;Bt.Profiler=M1;Bt.PureComponent=Ff;Bt.StrictMode=T1;Bt.Suspense=R1;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H1;Bt.act=Lm;Bt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Mm({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Hf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Pm.call(t,d)&&!Rm.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var y=0;y<d;y++)c[y]=arguments[y+2];r.children=c}return{$$typeof:_l,type:e.type,key:i,ref:a,props:r,_owner:l}};Bt.createContext=function(e){return e={$$typeof:A1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$1,_context:e},e.Consumer=e};Bt.createElement=Dm;Bt.createFactory=function(e){var t=Dm.bind(null,e);return t.type=e,t};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(e){return{$$typeof:P1,render:e}};Bt.isValidElement=Wf;Bt.lazy=function(e){return{$$typeof:L1,_payload:{_status:-1,_result:e},_init:B1}};Bt.memo=function(e,t){return{$$typeof:D1,type:e,compare:t===void 0?null:t}};Bt.startTransition=function(e){var t=Tc.transition;Tc.transition={};try{e()}finally{Tc.transition=t}};Bt.unstable_act=Lm;Bt.useCallback=function(e,t){return vr.current.useCallback(e,t)};Bt.useContext=function(e){return vr.current.useContext(e)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(e){return vr.current.useDeferredValue(e)};Bt.useEffect=function(e,t){return vr.current.useEffect(e,t)};Bt.useId=function(){return vr.current.useId()};Bt.useImperativeHandle=function(e,t,n){return vr.current.useImperativeHandle(e,t,n)};Bt.useInsertionEffect=function(e,t){return vr.current.useInsertionEffect(e,t)};Bt.useLayoutEffect=function(e,t){return vr.current.useLayoutEffect(e,t)};Bt.useMemo=function(e,t){return vr.current.useMemo(e,t)};Bt.useReducer=function(e,t,n){return vr.current.useReducer(e,t,n)};Bt.useRef=function(e){return vr.current.useRef(e)};Bt.useState=function(e){return vr.current.useState(e)};Bt.useSyncExternalStore=function(e,t,n){return vr.current.useSyncExternalStore(e,t,n)};Bt.useTransition=function(){return vr.current.useTransition()};Bt.version="18.3.1";Im.exports=Bt;var B=Im.exports;const xu=Cm(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1=B,V1=Symbol.for("react.element"),K1=Symbol.for("react.fragment"),Y1=Object.prototype.hasOwnProperty,G1=W1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X1={key:!0,ref:!0,__self:!0,__source:!0};function Om(e,t,n){var r,i={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Y1.call(t,r)&&!X1.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:V1,type:e,key:a,ref:l,props:i,_owner:G1.current}}gu.Fragment=K1;gu.jsx=Om;gu.jsxs=Om;Em.exports=gu;var o=Em.exports,Fd={},Um={exports:{}},Br={},Fm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(be,ae){var Ae=be.length;be.push(ae);e:for(;0<Ae;){var X=Ae-1>>>1,oe=be[X];if(0<i(oe,ae))be[X]=ae,be[Ae]=oe,Ae=X;else break e}}function n(be){return be.length===0?null:be[0]}function r(be){if(be.length===0)return null;var ae=be[0],Ae=be.pop();if(Ae!==ae){be[0]=Ae;e:for(var X=0,oe=be.length,We=oe>>>1;X<We;){var Ye=2*(X+1)-1,Ee=be[Ye],Ot=Ye+1,Xt=be[Ot];if(0>i(Ee,Ae))Ot<oe&&0>i(Xt,Ee)?(be[X]=Xt,be[Ot]=Ae,X=Ot):(be[X]=Ee,be[Ye]=Ae,X=Ye);else if(Ot<oe&&0>i(Xt,Ae))be[X]=Xt,be[Ot]=Ae,X=Ot;else break e}}return ae}function i(be,ae){var Ae=be.sortIndex-ae.sortIndex;return Ae!==0?Ae:be.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],y=[],j=1,_=null,k=3,b=!1,E=!1,z=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(be){for(var ae=n(y);ae!==null;){if(ae.callback===null)r(y);else if(ae.startTime<=be)r(y),ae.sortIndex=ae.expirationTime,t(d,ae);else break;ae=n(y)}}function R(be){if(z=!1,N(be),!E)if(n(d)!==null)E=!0,tt(F);else{var ae=n(y);ae!==null&&ze(R,ae.startTime-be)}}function F(be,ae){E=!1,z&&(z=!1,x(ue),ue=-1),b=!0;var Ae=k;try{for(N(ae),_=n(d);_!==null&&(!(_.expirationTime>ae)||be&&!Fe());){var X=_.callback;if(typeof X=="function"){_.callback=null,k=_.priorityLevel;var oe=X(_.expirationTime<=ae);ae=e.unstable_now(),typeof oe=="function"?_.callback=oe:_===n(d)&&r(d),N(ae)}else r(d);_=n(d)}if(_!==null)var We=!0;else{var Ye=n(y);Ye!==null&&ze(R,Ye.startTime-ae),We=!1}return We}finally{_=null,k=Ae,b=!1}}var ie=!1,J=null,ue=-1,le=5,me=-1;function Fe(){return!(e.unstable_now()-me<le)}function V(){if(J!==null){var be=e.unstable_now();me=be;var ae=!0;try{ae=J(!0,be)}finally{ae?xe():(ie=!1,J=null)}}else ie=!1}var xe;if(typeof g=="function")xe=function(){g(V)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,ge=v.port2;v.port1.onmessage=V,xe=function(){ge.postMessage(null)}}else xe=function(){A(V,0)};function tt(be){J=be,ie||(ie=!0,xe())}function ze(be,ae){ue=A(function(){be(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(be){be.callback=null},e.unstable_continueExecution=function(){E||b||(E=!0,tt(F))},e.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<be?Math.floor(1e3/be):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(be){switch(k){case 1:case 2:case 3:var ae=3;break;default:ae=k}var Ae=k;k=ae;try{return be()}finally{k=Ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(be,ae){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var Ae=k;k=be;try{return ae()}finally{k=Ae}},e.unstable_scheduleCallback=function(be,ae,Ae){var X=e.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?X+Ae:X):Ae=X,be){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Ae+oe,be={id:j++,callback:ae,priorityLevel:be,startTime:Ae,expirationTime:oe,sortIndex:-1},Ae>X?(be.sortIndex=Ae,t(y,be),n(d)===null&&be===n(y)&&(z?(x(ue),ue=-1):z=!0,ze(R,Ae-X))):(be.sortIndex=oe,t(d,be),E||b||(E=!0,tt(F))),be},e.unstable_shouldYield=Fe,e.unstable_wrapCallback=function(be){var ae=k;return function(){var Ae=k;k=ae;try{return be.apply(this,arguments)}finally{k=Ae}}}})(Bm);Fm.exports=Bm;var Z1=Fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1=B,Fr=Z1;function De(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hm=new Set,ll={};function ao(e,t){Yo(e,t),Yo(e+"Capture",t)}function Yo(e,t){for(ll[e]=t,e=0;e<t.length;e++)Hm.add(t[e])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=Object.prototype.hasOwnProperty,q1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oh={},Uh={};function Q1(e){return Bd.call(Uh,e)?!0:Bd.call(Oh,e)?!1:q1.test(e)?Uh[e]=!0:(Oh[e]=!0,!1)}function ev(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tv(e,t,n,r){if(t===null||typeof t>"u"||ev(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function br(e,t,n,r,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rr[e]=new br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rr[t]=new br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rr[e]=new br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rr[e]=new br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rr[e]=new br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rr[e]=new br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rr[e]=new br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rr[e]=new br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rr[e]=new br(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vf=/[\-:]([a-z])/g;function Kf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vf,Kf);rr[t]=new br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vf,Kf);rr[t]=new br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vf,Kf);rr[t]=new br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rr[e]=new br(e,1,!1,e.toLowerCase(),null,!1,!1)});rr.xlinkHref=new br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rr[e]=new br(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yf(e,t,n,r){var i=rr.hasOwnProperty(t)?rr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tv(t,n,i,r)&&(n=null),r||i===null?Q1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ii=J1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rc=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),Io=Symbol.for("react.fragment"),Gf=Symbol.for("react.strict_mode"),Hd=Symbol.for("react.profiler"),Wm=Symbol.for("react.provider"),Vm=Symbol.for("react.context"),Xf=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),Vd=Symbol.for("react.suspense_list"),Zf=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),Km=Symbol.for("react.offscreen"),Fh=Symbol.iterator;function Sa(e){return e===null||typeof e!="object"?null:(e=Fh&&e[Fh]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,rd;function Va(e){if(rd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rd=t&&t[1]||""}return`
`+rd+e}var sd=!1;function id(e,t){if(!e||sd)return"";sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var i=y.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,c=a.length-1;1<=l&&0<=c&&i[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==a[c]){var d=`
`+i[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=c);break}}}finally{sd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Va(e):""}function nv(e){switch(e.tag){case 5:return Va(e.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 2:case 15:return e=id(e.type,!1),e;case 11:return e=id(e.type.render,!1),e;case 1:return e=id(e.type,!0),e;default:return""}}function Kd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Io:return"Fragment";case Eo:return"Portal";case Hd:return"Profiler";case Gf:return"StrictMode";case Wd:return"Suspense";case Vd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Vm:return(e.displayName||"Context")+".Consumer";case Wm:return(e._context.displayName||"Context")+".Provider";case Xf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zf:return t=e.displayName||null,t!==null?t:Kd(e.type)||"Memo";case ki:t=e._payload,e=e._init;try{return Kd(e(t))}catch{}}return null}function rv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kd(t);case 8:return t===Gf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Di(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ym(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sv(e){var t=Ym(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sc(e){e._valueTracker||(e._valueTracker=sv(e))}function Gm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ym(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Hc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yd(e,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Di(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xm(e,t){t=t.checked,t!=null&&Yf(e,"checked",t,!1)}function Gd(e,t){Xm(e,t);var n=Di(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xd(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xd(e,t.type,Di(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xd(e,t,n){(t!=="number"||Hc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ka=Array.isArray;function Fo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Di(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Zd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(De(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(De(92));if(Ka(n)){if(1<n.length)throw Error(De(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Di(n)}}function Zm(e,t){var n=Di(t.value),r=Di(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Vh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ic,qm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iv=["Webkit","ms","Moz","O"];Object.keys(Ja).forEach(function(e){iv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ja[t]=Ja[e]})});function Qm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ja.hasOwnProperty(e)&&Ja[e]?(""+t).trim():t+"px"}function eg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var ov=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qd(e,t){if(t){if(ov[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(De(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(De(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(De(61))}if(t.style!=null&&typeof t.style!="object")throw Error(De(62))}}function Qd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function Jf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tf=null,Bo=null,Ho=null;function Kh(e){if(e=Cl(e)){if(typeof tf!="function")throw Error(De(280));var t=e.stateNode;t&&(t=ku(t),tf(e.stateNode,e.type,t))}}function tg(e){Bo?Ho?Ho.push(e):Ho=[e]:Bo=e}function ng(){if(Bo){var e=Bo,t=Ho;if(Ho=Bo=null,Kh(e),t)for(e=0;e<t.length;e++)Kh(t[e])}}function rg(e,t){return e(t)}function sg(){}var od=!1;function ig(e,t,n){if(od)return e(t,n);od=!0;try{return rg(e,t,n)}finally{od=!1,(Bo!==null||Ho!==null)&&(sg(),ng())}}function ul(e,t){var n=e.stateNode;if(n===null)return null;var r=ku(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(De(231,t,typeof n));return n}var nf=!1;if(ti)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){nf=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{nf=!1}function av(e,t,n,r,i,a,l,c,d){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(j){this.onError(j)}}var qa=!1,Wc=null,Vc=!1,rf=null,lv={onError:function(e){qa=!0,Wc=e}};function cv(e,t,n,r,i,a,l,c,d){qa=!1,Wc=null,av.apply(lv,arguments)}function uv(e,t,n,r,i,a,l,c,d){if(cv.apply(this,arguments),qa){if(qa){var y=Wc;qa=!1,Wc=null}else throw Error(De(198));Vc||(Vc=!0,rf=y)}}function lo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function og(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yh(e){if(lo(e)!==e)throw Error(De(188))}function dv(e){var t=e.alternate;if(!t){if(t=lo(e),t===null)throw Error(De(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Yh(i),e;if(a===r)return Yh(i),t;a=a.sibling}throw Error(De(188))}if(n.return!==r.return)n=i,r=a;else{for(var l=!1,c=i.child;c;){if(c===n){l=!0,n=i,r=a;break}if(c===r){l=!0,r=i,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,r=i;break}if(c===r){l=!0,r=a,n=i;break}c=c.sibling}if(!l)throw Error(De(189))}}if(n.alternate!==r)throw Error(De(190))}if(n.tag!==3)throw Error(De(188));return n.stateNode.current===n?e:t}function ag(e){return e=dv(e),e!==null?lg(e):null}function lg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lg(e);if(t!==null)return t;e=e.sibling}return null}var cg=Fr.unstable_scheduleCallback,Gh=Fr.unstable_cancelCallback,fv=Fr.unstable_shouldYield,pv=Fr.unstable_requestPaint,Dn=Fr.unstable_now,hv=Fr.unstable_getCurrentPriorityLevel,qf=Fr.unstable_ImmediatePriority,ug=Fr.unstable_UserBlockingPriority,Kc=Fr.unstable_NormalPriority,mv=Fr.unstable_LowPriority,dg=Fr.unstable_IdlePriority,yu=null,$s=null;function gv(e){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(yu,e,void 0,(e.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:vv,xv=Math.log,yv=Math.LN2;function vv(e){return e>>>=0,e===0?32:31-(xv(e)/yv|0)|0}var oc=64,ac=4194304;function Ya(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~i;c!==0?r=Ya(c):(a&=l,a!==0&&(r=Ya(a)))}else l=n&~i,l!==0?r=Ya(l):a!==0&&(r=Ya(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xs(t),i=1<<n,r|=e[n],t&=~i;return r}function bv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wv(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-xs(a),c=1<<l,d=i[l];d===-1?(!(c&n)||c&r)&&(i[l]=bv(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function sf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fg(){var e=oc;return oc<<=1,!(oc&4194240)&&(oc=64),e}function ad(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xs(t),e[t]=n}function kv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xs(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Qf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var sn=0;function pg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hg,ep,mg,gg,xg,of=!1,lc=[],Ei=null,Ii=null,Ti=null,dl=new Map,fl=new Map,ji=[],zv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xh(e,t){switch(e){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":dl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(t.pointerId)}}function Ea(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Cl(t),t!==null&&ep(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function jv(e,t,n,r,i){switch(t){case"focusin":return Ei=Ea(Ei,e,t,n,r,i),!0;case"dragenter":return Ii=Ea(Ii,e,t,n,r,i),!0;case"mouseover":return Ti=Ea(Ti,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return dl.set(a,Ea(dl.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,fl.set(a,Ea(fl.get(a)||null,e,t,n,r,i)),!0}return!1}function yg(e){var t=Xi(e.target);if(t!==null){var n=lo(t);if(n!==null){if(t=n.tag,t===13){if(t=og(n),t!==null){e.blockedOn=t,xg(e.priority,function(){mg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=af(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ef=r,n.target.dispatchEvent(r),ef=null}else return t=Cl(n),t!==null&&ep(t),e.blockedOn=n,!1;t.shift()}return!0}function Zh(e,t,n){Mc(e)&&n.delete(t)}function _v(){of=!1,Ei!==null&&Mc(Ei)&&(Ei=null),Ii!==null&&Mc(Ii)&&(Ii=null),Ti!==null&&Mc(Ti)&&(Ti=null),dl.forEach(Zh),fl.forEach(Zh)}function Ia(e,t){e.blockedOn===t&&(e.blockedOn=null,of||(of=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,_v)))}function pl(e){function t(i){return Ia(i,e)}if(0<lc.length){Ia(lc[0],e);for(var n=1;n<lc.length;n++){var r=lc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ei!==null&&Ia(Ei,e),Ii!==null&&Ia(Ii,e),Ti!==null&&Ia(Ti,e),dl.forEach(t),fl.forEach(t),n=0;n<ji.length;n++)r=ji[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ji.length&&(n=ji[0],n.blockedOn===null);)yg(n),n.blockedOn===null&&ji.shift()}var Wo=ii.ReactCurrentBatchConfig,Gc=!0;function Nv(e,t,n,r){var i=sn,a=Wo.transition;Wo.transition=null;try{sn=1,tp(e,t,n,r)}finally{sn=i,Wo.transition=a}}function Sv(e,t,n,r){var i=sn,a=Wo.transition;Wo.transition=null;try{sn=4,tp(e,t,n,r)}finally{sn=i,Wo.transition=a}}function tp(e,t,n,r){if(Gc){var i=af(e,t,n,r);if(i===null)xd(e,t,r,Xc,n),Xh(e,r);else if(jv(i,e,t,n,r))r.stopPropagation();else if(Xh(e,r),t&4&&-1<zv.indexOf(e)){for(;i!==null;){var a=Cl(i);if(a!==null&&hg(a),a=af(e,t,n,r),a===null&&xd(e,t,r,Xc,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else xd(e,t,r,null,n)}}var Xc=null;function af(e,t,n,r){if(Xc=null,e=Jf(r),e=Xi(e),e!==null)if(t=lo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=og(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xc=e,null}function vg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hv()){case qf:return 1;case ug:return 4;case Kc:case mv:return 16;case dg:return 536870912;default:return 16}default:return 16}}var Ni=null,np=null,$c=null;function bg(){if($c)return $c;var e,t=np,n=t.length,r,i="value"in Ni?Ni.value:Ni.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[a-r];r++);return $c=i.slice(e,1<r?1-r:void 0)}function Ac(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cc(){return!0}function Jh(){return!1}function Hr(e){function t(n,r,i,a,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?cc:Jh,this.isPropagationStopped=Jh,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),t}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=Hr(ta),Sl=_n({},ta,{view:0,detail:0}),Cv=Hr(Sl),ld,cd,Ta,vu=_n({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ta&&(Ta&&e.type==="mousemove"?(ld=e.screenX-Ta.screenX,cd=e.screenY-Ta.screenY):cd=ld=0,Ta=e),ld)},movementY:function(e){return"movementY"in e?e.movementY:cd}}),qh=Hr(vu),Ev=_n({},vu,{dataTransfer:0}),Iv=Hr(Ev),Tv=_n({},Sl,{relatedTarget:0}),ud=Hr(Tv),Mv=_n({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),$v=Hr(Mv),Av=_n({},ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pv=Hr(Av),Rv=_n({},ta,{data:0}),Qh=Hr(Rv),Dv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ov={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ov[e])?!!t[e]:!1}function sp(){return Uv}var Fv=_n({},Sl,{key:function(e){if(e.key){var t=Dv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ac(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sp,charCode:function(e){return e.type==="keypress"?Ac(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ac(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bv=Hr(Fv),Hv=_n({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=Hr(Hv),Wv=_n({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sp}),Vv=Hr(Wv),Kv=_n({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yv=Hr(Kv),Gv=_n({},vu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xv=Hr(Gv),Zv=[9,13,27,32],ip=ti&&"CompositionEvent"in window,Qa=null;ti&&"documentMode"in document&&(Qa=document.documentMode);var Jv=ti&&"TextEvent"in window&&!Qa,wg=ti&&(!ip||Qa&&8<Qa&&11>=Qa),t0=" ",n0=!1;function kg(e,t){switch(e){case"keyup":return Zv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var To=!1;function qv(e,t){switch(e){case"compositionend":return zg(t);case"keypress":return t.which!==32?null:(n0=!0,t0);case"textInput":return e=t.data,e===t0&&n0?null:e;default:return null}}function Qv(e,t){if(To)return e==="compositionend"||!ip&&kg(e,t)?(e=bg(),$c=np=Ni=null,To=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wg&&t.locale!=="ko"?null:t.data;default:return null}}var eb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eb[e.type]:t==="textarea"}function jg(e,t,n,r){tg(r),t=Zc(t,"onChange"),0<t.length&&(n=new rp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var el=null,hl=null;function tb(e){Pg(e,0)}function bu(e){var t=Ao(e);if(Gm(t))return e}function nb(e,t){if(e==="change")return t}var _g=!1;if(ti){var dd;if(ti){var fd="oninput"in document;if(!fd){var s0=document.createElement("div");s0.setAttribute("oninput","return;"),fd=typeof s0.oninput=="function"}dd=fd}else dd=!1;_g=dd&&(!document.documentMode||9<document.documentMode)}function i0(){el&&(el.detachEvent("onpropertychange",Ng),hl=el=null)}function Ng(e){if(e.propertyName==="value"&&bu(hl)){var t=[];jg(t,hl,e,Jf(e)),ig(tb,t)}}function rb(e,t,n){e==="focusin"?(i0(),el=t,hl=n,el.attachEvent("onpropertychange",Ng)):e==="focusout"&&i0()}function sb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bu(hl)}function ib(e,t){if(e==="click")return bu(t)}function ob(e,t){if(e==="input"||e==="change")return bu(t)}function ab(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:ab;function ml(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bd.call(t,i)||!vs(e[i],t[i]))return!1}return!0}function o0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a0(e,t){var n=o0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o0(n)}}function Sg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cg(){for(var e=window,t=Hc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Hc(e.document)}return t}function op(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lb(e){var t=Cg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Sg(n.ownerDocument.documentElement,n)){if(r!==null&&op(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=a0(n,a);var l=a0(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cb=ti&&"documentMode"in document&&11>=document.documentMode,Mo=null,lf=null,tl=null,cf=!1;function l0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cf||Mo==null||Mo!==Hc(r)||(r=Mo,"selectionStart"in r&&op(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tl&&ml(tl,r)||(tl=r,r=Zc(lf,"onSelect"),0<r.length&&(t=new rp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Mo)))}function uc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $o={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},pd={},Eg={};ti&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function wu(e){if(pd[e])return pd[e];if(!$o[e])return e;var t=$o[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Eg)return pd[e]=t[n];return e}var Ig=wu("animationend"),Tg=wu("animationiteration"),Mg=wu("animationstart"),$g=wu("transitionend"),Ag=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(e,t){Ag.set(e,t),ao(t,[e])}for(var hd=0;hd<c0.length;hd++){var md=c0[hd],ub=md.toLowerCase(),db=md[0].toUpperCase()+md.slice(1);Oi(ub,"on"+db)}Oi(Ig,"onAnimationEnd");Oi(Tg,"onAnimationIteration");Oi(Mg,"onAnimationStart");Oi("dblclick","onDoubleClick");Oi("focusin","onFocus");Oi("focusout","onBlur");Oi($g,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function u0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,uv(r,t,void 0,e),e.currentTarget=null}function Pg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,y=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;u0(i,c,y),a=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,y=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;u0(i,c,y),a=d}}}if(Vc)throw e=rf,Vc=!1,rf=null,e}function xn(e,t){var n=t[hf];n===void 0&&(n=t[hf]=new Set);var r=e+"__bubble";n.has(r)||(Rg(t,e,2,!1),n.add(r))}function gd(e,t,n){var r=0;t&&(r|=4),Rg(n,e,r,t)}var dc="_reactListening"+Math.random().toString(36).slice(2);function gl(e){if(!e[dc]){e[dc]=!0,Hm.forEach(function(n){n!=="selectionchange"&&(fb.has(n)||gd(n,!1,e),gd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dc]||(t[dc]=!0,gd("selectionchange",!1,t))}}function Rg(e,t,n,r){switch(vg(t)){case 1:var i=Nv;break;case 4:i=Sv;break;default:i=tp}n=i.bind(null,t,n,e),i=void 0,!nf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function xd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=Xi(c),l===null)return;if(d=l.tag,d===5||d===6){r=a=l;continue e}c=c.parentNode}}r=r.return}ig(function(){var y=a,j=Jf(n),_=[];e:{var k=Ag.get(e);if(k!==void 0){var b=rp,E=e;switch(e){case"keypress":if(Ac(n)===0)break e;case"keydown":case"keyup":b=Bv;break;case"focusin":E="focus",b=ud;break;case"focusout":E="blur",b=ud;break;case"beforeblur":case"afterblur":b=ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Vv;break;case Ig:case Tg:case Mg:b=$v;break;case $g:b=Yv;break;case"scroll":b=Cv;break;case"wheel":b=Xv;break;case"copy":case"cut":case"paste":b=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=e0}var z=(t&4)!==0,A=!z&&e==="scroll",x=z?k!==null?k+"Capture":null:k;z=[];for(var g=y,N;g!==null;){N=g;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,x!==null&&(R=ul(g,x),R!=null&&z.push(xl(g,R,N)))),A)break;g=g.return}0<z.length&&(k=new b(k,E,null,n,j),_.push({event:k,listeners:z}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",k&&n!==ef&&(E=n.relatedTarget||n.fromElement)&&(Xi(E)||E[ni]))break e;if((b||k)&&(k=j.window===j?j:(k=j.ownerDocument)?k.defaultView||k.parentWindow:window,b?(E=n.relatedTarget||n.toElement,b=y,E=E?Xi(E):null,E!==null&&(A=lo(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(b=null,E=y),b!==E)){if(z=qh,R="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(z=e0,R="onPointerLeave",x="onPointerEnter",g="pointer"),A=b==null?k:Ao(b),N=E==null?k:Ao(E),k=new z(R,g+"leave",b,n,j),k.target=A,k.relatedTarget=N,R=null,Xi(j)===y&&(z=new z(x,g+"enter",E,n,j),z.target=N,z.relatedTarget=A,R=z),A=R,b&&E)t:{for(z=b,x=E,g=0,N=z;N;N=No(N))g++;for(N=0,R=x;R;R=No(R))N++;for(;0<g-N;)z=No(z),g--;for(;0<N-g;)x=No(x),N--;for(;g--;){if(z===x||x!==null&&z===x.alternate)break t;z=No(z),x=No(x)}z=null}else z=null;b!==null&&d0(_,k,b,z,!1),E!==null&&A!==null&&d0(_,A,E,z,!0)}}e:{if(k=y?Ao(y):window,b=k.nodeName&&k.nodeName.toLowerCase(),b==="select"||b==="input"&&k.type==="file")var F=nb;else if(r0(k))if(_g)F=ob;else{F=sb;var ie=rb}else(b=k.nodeName)&&b.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(F=ib);if(F&&(F=F(e,y))){jg(_,F,n,j);break e}ie&&ie(e,k,y),e==="focusout"&&(ie=k._wrapperState)&&ie.controlled&&k.type==="number"&&Xd(k,"number",k.value)}switch(ie=y?Ao(y):window,e){case"focusin":(r0(ie)||ie.contentEditable==="true")&&(Mo=ie,lf=y,tl=null);break;case"focusout":tl=lf=Mo=null;break;case"mousedown":cf=!0;break;case"contextmenu":case"mouseup":case"dragend":cf=!1,l0(_,n,j);break;case"selectionchange":if(cb)break;case"keydown":case"keyup":l0(_,n,j)}var J;if(ip)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else To?kg(e,n)&&(ue="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ue="onCompositionStart");ue&&(wg&&n.locale!=="ko"&&(To||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&To&&(J=bg()):(Ni=j,np="value"in Ni?Ni.value:Ni.textContent,To=!0)),ie=Zc(y,ue),0<ie.length&&(ue=new Qh(ue,e,null,n,j),_.push({event:ue,listeners:ie}),J?ue.data=J:(J=zg(n),J!==null&&(ue.data=J)))),(J=Jv?qv(e,n):Qv(e,n))&&(y=Zc(y,"onBeforeInput"),0<y.length&&(j=new Qh("onBeforeInput","beforeinput",null,n,j),_.push({event:j,listeners:y}),j.data=J))}Pg(_,t)})}function xl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zc(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ul(e,n),a!=null&&r.unshift(xl(e,a,i)),a=ul(e,t),a!=null&&r.push(xl(e,a,i))),e=e.return}return r}function No(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d0(e,t,n,r,i){for(var a=t._reactName,l=[];n!==null&&n!==r;){var c=n,d=c.alternate,y=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&y!==null&&(c=y,i?(d=ul(n,a),d!=null&&l.unshift(xl(n,d,c))):i||(d=ul(n,a),d!=null&&l.push(xl(n,d,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var pb=/\r\n?/g,hb=/\u0000|\uFFFD/g;function f0(e){return(typeof e=="string"?e:""+e).replace(pb,`
`).replace(hb,"")}function fc(e,t,n){if(t=f0(t),f0(e)!==t&&n)throw Error(De(425))}function Jc(){}var uf=null,df=null;function ff(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pf=typeof setTimeout=="function"?setTimeout:void 0,mb=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(e){return p0.resolve(null).then(e).catch(xb)}:pf;function xb(e){setTimeout(function(){throw e})}function yd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),pl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pl(t)}function Mi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function h0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var na=Math.random().toString(36).slice(2),Is="__reactFiber$"+na,yl="__reactProps$"+na,ni="__reactContainer$"+na,hf="__reactEvents$"+na,yb="__reactListeners$"+na,vb="__reactHandles$"+na;function Xi(e){var t=e[Is];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ni]||n[Is]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=h0(e);e!==null;){if(n=e[Is])return n;e=h0(e)}return t}e=n,n=e.parentNode}return null}function Cl(e){return e=e[Is]||e[ni],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ao(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(De(33))}function ku(e){return e[yl]||null}var mf=[],Po=-1;function Ui(e){return{current:e}}function yn(e){0>Po||(e.current=mf[Po],mf[Po]=null,Po--)}function pn(e,t){Po++,mf[Po]=e.current,e.current=t}var Li={},ur=Ui(Li),Tr=Ui(!1),eo=Li;function Go(e,t){var n=e.type.contextTypes;if(!n)return Li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mr(e){return e=e.childContextTypes,e!=null}function qc(){yn(Tr),yn(ur)}function m0(e,t,n){if(ur.current!==Li)throw Error(De(168));pn(ur,t),pn(Tr,n)}function Dg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(De(108,rv(e)||"Unknown",i));return _n({},n,r)}function Qc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Li,eo=ur.current,pn(ur,e),pn(Tr,Tr.current),!0}function g0(e,t,n){var r=e.stateNode;if(!r)throw Error(De(169));n?(e=Dg(e,t,eo),r.__reactInternalMemoizedMergedChildContext=e,yn(Tr),yn(ur),pn(ur,e)):yn(Tr),pn(Tr,n)}var Zs=null,zu=!1,vd=!1;function Lg(e){Zs===null?Zs=[e]:Zs.push(e)}function bb(e){zu=!0,Lg(e)}function Fi(){if(!vd&&Zs!==null){vd=!0;var e=0,t=sn;try{var n=Zs;for(sn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zs=null,zu=!1}catch(i){throw Zs!==null&&(Zs=Zs.slice(e+1)),cg(qf,Fi),i}finally{sn=t,vd=!1}}return null}var Ro=[],Do=0,eu=null,tu=0,Qr=[],es=0,to=null,qs=1,Qs="";function Yi(e,t){Ro[Do++]=tu,Ro[Do++]=eu,eu=e,tu=t}function Og(e,t,n){Qr[es++]=qs,Qr[es++]=Qs,Qr[es++]=to,to=e;var r=qs;e=Qs;var i=32-xs(r)-1;r&=~(1<<i),n+=1;var a=32-xs(t)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,qs=1<<32-xs(t)+i|n<<i|r,Qs=a+e}else qs=1<<a|n<<i|r,Qs=e}function ap(e){e.return!==null&&(Yi(e,1),Og(e,1,0))}function lp(e){for(;e===eu;)eu=Ro[--Do],Ro[Do]=null,tu=Ro[--Do],Ro[Do]=null;for(;e===to;)to=Qr[--es],Qr[es]=null,Qs=Qr[--es],Qr[es]=null,qs=Qr[--es],Qr[es]=null}var Ur=null,Or=null,wn=!1,gs=null;function Ug(e,t){var n=ts(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function x0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ur=e,Or=Mi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ur=e,Or=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=to!==null?{id:qs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ts(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ur=e,Or=null,!0):!1;default:return!1}}function gf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xf(e){if(wn){var t=Or;if(t){var n=t;if(!x0(e,t)){if(gf(e))throw Error(De(418));t=Mi(n.nextSibling);var r=Ur;t&&x0(e,t)?Ug(r,n):(e.flags=e.flags&-4097|2,wn=!1,Ur=e)}}else{if(gf(e))throw Error(De(418));e.flags=e.flags&-4097|2,wn=!1,Ur=e}}}function y0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ur=e}function pc(e){if(e!==Ur)return!1;if(!wn)return y0(e),wn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ff(e.type,e.memoizedProps)),t&&(t=Or)){if(gf(e))throw Fg(),Error(De(418));for(;t;)Ug(e,t),t=Mi(t.nextSibling)}if(y0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(De(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Or=Mi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Or=null}}else Or=Ur?Mi(e.stateNode.nextSibling):null;return!0}function Fg(){for(var e=Or;e;)e=Mi(e.nextSibling)}function Xo(){Or=Ur=null,wn=!1}function cp(e){gs===null?gs=[e]:gs.push(e)}var wb=ii.ReactCurrentBatchConfig;function Ma(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(De(309));var r=n.stateNode}if(!r)throw Error(De(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var c=i.refs;l===null?delete c[a]:c[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(De(284));if(!n._owner)throw Error(De(290,e))}return e}function hc(e,t){throw e=Object.prototype.toString.call(t),Error(De(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function v0(e){var t=e._init;return t(e._payload)}function Bg(e){function t(x,g){if(e){var N=x.deletions;N===null?(x.deletions=[g],x.flags|=16):N.push(g)}}function n(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function i(x,g){return x=Ri(x,g),x.index=0,x.sibling=null,x}function a(x,g,N){return x.index=N,e?(N=x.alternate,N!==null?(N=N.index,N<g?(x.flags|=2,g):N):(x.flags|=2,g)):(x.flags|=1048576,g)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,g,N,R){return g===null||g.tag!==6?(g=Nd(N,x.mode,R),g.return=x,g):(g=i(g,N),g.return=x,g)}function d(x,g,N,R){var F=N.type;return F===Io?j(x,g,N.props.children,R,N.key):g!==null&&(g.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ki&&v0(F)===g.type)?(R=i(g,N.props),R.ref=Ma(x,g,N),R.return=x,R):(R=Fc(N.type,N.key,N.props,null,x.mode,R),R.ref=Ma(x,g,N),R.return=x,R)}function y(x,g,N,R){return g===null||g.tag!==4||g.stateNode.containerInfo!==N.containerInfo||g.stateNode.implementation!==N.implementation?(g=Sd(N,x.mode,R),g.return=x,g):(g=i(g,N.children||[]),g.return=x,g)}function j(x,g,N,R,F){return g===null||g.tag!==7?(g=Qi(N,x.mode,R,F),g.return=x,g):(g=i(g,N),g.return=x,g)}function _(x,g,N){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Nd(""+g,x.mode,N),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case rc:return N=Fc(g.type,g.key,g.props,null,x.mode,N),N.ref=Ma(x,null,g),N.return=x,N;case Eo:return g=Sd(g,x.mode,N),g.return=x,g;case ki:var R=g._init;return _(x,R(g._payload),N)}if(Ka(g)||Sa(g))return g=Qi(g,x.mode,N,null),g.return=x,g;hc(x,g)}return null}function k(x,g,N,R){var F=g!==null?g.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return F!==null?null:c(x,g,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case rc:return N.key===F?d(x,g,N,R):null;case Eo:return N.key===F?y(x,g,N,R):null;case ki:return F=N._init,k(x,g,F(N._payload),R)}if(Ka(N)||Sa(N))return F!==null?null:j(x,g,N,R,null);hc(x,N)}return null}function b(x,g,N,R,F){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(N)||null,c(g,x,""+R,F);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case rc:return x=x.get(R.key===null?N:R.key)||null,d(g,x,R,F);case Eo:return x=x.get(R.key===null?N:R.key)||null,y(g,x,R,F);case ki:var ie=R._init;return b(x,g,N,ie(R._payload),F)}if(Ka(R)||Sa(R))return x=x.get(N)||null,j(g,x,R,F,null);hc(g,R)}return null}function E(x,g,N,R){for(var F=null,ie=null,J=g,ue=g=0,le=null;J!==null&&ue<N.length;ue++){J.index>ue?(le=J,J=null):le=J.sibling;var me=k(x,J,N[ue],R);if(me===null){J===null&&(J=le);break}e&&J&&me.alternate===null&&t(x,J),g=a(me,g,ue),ie===null?F=me:ie.sibling=me,ie=me,J=le}if(ue===N.length)return n(x,J),wn&&Yi(x,ue),F;if(J===null){for(;ue<N.length;ue++)J=_(x,N[ue],R),J!==null&&(g=a(J,g,ue),ie===null?F=J:ie.sibling=J,ie=J);return wn&&Yi(x,ue),F}for(J=r(x,J);ue<N.length;ue++)le=b(J,x,ue,N[ue],R),le!==null&&(e&&le.alternate!==null&&J.delete(le.key===null?ue:le.key),g=a(le,g,ue),ie===null?F=le:ie.sibling=le,ie=le);return e&&J.forEach(function(Fe){return t(x,Fe)}),wn&&Yi(x,ue),F}function z(x,g,N,R){var F=Sa(N);if(typeof F!="function")throw Error(De(150));if(N=F.call(N),N==null)throw Error(De(151));for(var ie=F=null,J=g,ue=g=0,le=null,me=N.next();J!==null&&!me.done;ue++,me=N.next()){J.index>ue?(le=J,J=null):le=J.sibling;var Fe=k(x,J,me.value,R);if(Fe===null){J===null&&(J=le);break}e&&J&&Fe.alternate===null&&t(x,J),g=a(Fe,g,ue),ie===null?F=Fe:ie.sibling=Fe,ie=Fe,J=le}if(me.done)return n(x,J),wn&&Yi(x,ue),F;if(J===null){for(;!me.done;ue++,me=N.next())me=_(x,me.value,R),me!==null&&(g=a(me,g,ue),ie===null?F=me:ie.sibling=me,ie=me);return wn&&Yi(x,ue),F}for(J=r(x,J);!me.done;ue++,me=N.next())me=b(J,x,ue,me.value,R),me!==null&&(e&&me.alternate!==null&&J.delete(me.key===null?ue:me.key),g=a(me,g,ue),ie===null?F=me:ie.sibling=me,ie=me);return e&&J.forEach(function(V){return t(x,V)}),wn&&Yi(x,ue),F}function A(x,g,N,R){if(typeof N=="object"&&N!==null&&N.type===Io&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case rc:e:{for(var F=N.key,ie=g;ie!==null;){if(ie.key===F){if(F=N.type,F===Io){if(ie.tag===7){n(x,ie.sibling),g=i(ie,N.props.children),g.return=x,x=g;break e}}else if(ie.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ki&&v0(F)===ie.type){n(x,ie.sibling),g=i(ie,N.props),g.ref=Ma(x,ie,N),g.return=x,x=g;break e}n(x,ie);break}else t(x,ie);ie=ie.sibling}N.type===Io?(g=Qi(N.props.children,x.mode,R,N.key),g.return=x,x=g):(R=Fc(N.type,N.key,N.props,null,x.mode,R),R.ref=Ma(x,g,N),R.return=x,x=R)}return l(x);case Eo:e:{for(ie=N.key;g!==null;){if(g.key===ie)if(g.tag===4&&g.stateNode.containerInfo===N.containerInfo&&g.stateNode.implementation===N.implementation){n(x,g.sibling),g=i(g,N.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else t(x,g);g=g.sibling}g=Sd(N,x.mode,R),g.return=x,x=g}return l(x);case ki:return ie=N._init,A(x,g,ie(N._payload),R)}if(Ka(N))return E(x,g,N,R);if(Sa(N))return z(x,g,N,R);hc(x,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,g!==null&&g.tag===6?(n(x,g.sibling),g=i(g,N),g.return=x,x=g):(n(x,g),g=Nd(N,x.mode,R),g.return=x,x=g),l(x)):n(x,g)}return A}var Zo=Bg(!0),Hg=Bg(!1),nu=Ui(null),ru=null,Lo=null,up=null;function dp(){up=Lo=ru=null}function fp(e){var t=nu.current;yn(nu),e._currentValue=t}function yf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vo(e,t){ru=e,up=Lo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ir=!0),e.firstContext=null)}function rs(e){var t=e._currentValue;if(up!==e)if(e={context:e,memoizedValue:t,next:null},Lo===null){if(ru===null)throw Error(De(308));Lo=e,ru.dependencies={lanes:0,firstContext:e}}else Lo=Lo.next=e;return t}var Zi=null;function pp(e){Zi===null?Zi=[e]:Zi.push(e)}function Wg(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,pp(t)):(n.next=i.next,i.next=n),t.interleaved=n,ri(e,r)}function ri(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zi=!1;function hp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ei(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $i(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ri(e,n)}return i=r.interleaved,i===null?(t.next=t,pp(r)):(t.next=i.next,i.next=t),r.interleaved=t,ri(e,n)}function Pc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qf(e,n)}}function b0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function su(e,t,n,r){var i=e.updateQueue;zi=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,y=d.next;d.next=null,l===null?a=y:l.next=y,l=d;var j=e.alternate;j!==null&&(j=j.updateQueue,c=j.lastBaseUpdate,c!==l&&(c===null?j.firstBaseUpdate=y:c.next=y,j.lastBaseUpdate=d))}if(a!==null){var _=i.baseState;l=0,j=y=d=null,c=a;do{var k=c.lane,b=c.eventTime;if((r&k)===k){j!==null&&(j=j.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=e,z=c;switch(k=t,b=n,z.tag){case 1:if(E=z.payload,typeof E=="function"){_=E.call(b,_,k);break e}_=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=z.payload,k=typeof E=="function"?E.call(b,_,k):E,k==null)break e;_=_n({},_,k);break e;case 2:zi=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,k=i.effects,k===null?i.effects=[c]:k.push(c))}else b={eventTime:b,lane:k,tag:c.tag,payload:c.payload,callback:c.callback,next:null},j===null?(y=j=b,d=_):j=j.next=b,l|=k;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;k=c,c=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(!0);if(j===null&&(d=_),i.baseState=d,i.firstBaseUpdate=y,i.lastBaseUpdate=j,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);ro|=l,e.lanes=l,e.memoizedState=_}}function w0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(De(191,i));i.call(r)}}}var El={},As=Ui(El),vl=Ui(El),bl=Ui(El);function Ji(e){if(e===El)throw Error(De(174));return e}function mp(e,t){switch(pn(bl,t),pn(vl,e),pn(As,El),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jd(t,e)}yn(As),pn(As,t)}function Jo(){yn(As),yn(vl),yn(bl)}function Kg(e){Ji(bl.current);var t=Ji(As.current),n=Jd(t,e.type);t!==n&&(pn(vl,e),pn(As,n))}function gp(e){vl.current===e&&(yn(As),yn(vl))}var zn=Ui(0);function iu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bd=[];function xp(){for(var e=0;e<bd.length;e++)bd[e]._workInProgressVersionPrimary=null;bd.length=0}var Rc=ii.ReactCurrentDispatcher,wd=ii.ReactCurrentBatchConfig,no=0,jn=null,Hn=null,Xn=null,ou=!1,nl=!1,wl=0,kb=0;function ar(){throw Error(De(321))}function yp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vs(e[n],t[n]))return!1;return!0}function vp(e,t,n,r,i,a){if(no=a,jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rc.current=e===null||e.memoizedState===null?Nb:Sb,e=n(r,i),nl){a=0;do{if(nl=!1,wl=0,25<=a)throw Error(De(301));a+=1,Xn=Hn=null,t.updateQueue=null,Rc.current=Cb,e=n(r,i)}while(nl)}if(Rc.current=au,t=Hn!==null&&Hn.next!==null,no=0,Xn=Hn=jn=null,ou=!1,t)throw Error(De(300));return e}function bp(){var e=wl!==0;return wl=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?jn.memoizedState=Xn=e:Xn=Xn.next=e,Xn}function ss(){if(Hn===null){var e=jn.alternate;e=e!==null?e.memoizedState:null}else e=Hn.next;var t=Xn===null?jn.memoizedState:Xn.next;if(t!==null)Xn=t,Hn=e;else{if(e===null)throw Error(De(310));Hn=e,e={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},Xn===null?jn.memoizedState=Xn=e:Xn=Xn.next=e}return Xn}function kl(e,t){return typeof t=="function"?t(e):t}function kd(e){var t=ss(),n=t.queue;if(n===null)throw Error(De(311));n.lastRenderedReducer=e;var r=Hn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=l=null,d=null,y=a;do{var j=y.lane;if((no&j)===j)d!==null&&(d=d.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var _={lane:j,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};d===null?(c=d=_,l=r):d=d.next=_,jn.lanes|=j,ro|=j}y=y.next}while(y!==null&&y!==a);d===null?l=r:d.next=c,vs(r,t.memoizedState)||(Ir=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,jn.lanes|=a,ro|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zd(e){var t=ss(),n=t.queue;if(n===null)throw Error(De(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);vs(a,t.memoizedState)||(Ir=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Yg(){}function Gg(e,t){var n=jn,r=ss(),i=t(),a=!vs(r.memoizedState,i);if(a&&(r.memoizedState=i,Ir=!0),r=r.queue,wp(Jg.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Xn!==null&&Xn.memoizedState.tag&1){if(n.flags|=2048,zl(9,Zg.bind(null,n,r,i,t),void 0,null),Zn===null)throw Error(De(349));no&30||Xg(n,t,i)}return i}function Xg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Zg(e,t,n,r){t.value=n,t.getSnapshot=r,qg(t)&&Qg(e)}function Jg(e,t,n){return n(function(){qg(t)&&Qg(e)})}function qg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vs(e,n)}catch{return!0}}function Qg(e){var t=ri(e,1);t!==null&&ys(t,e,1,-1)}function k0(e){var t=Es();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:e},t.queue=e,e=e.dispatch=_b.bind(null,jn,e),[t.memoizedState,e]}function zl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ex(){return ss().memoizedState}function Dc(e,t,n,r){var i=Es();jn.flags|=e,i.memoizedState=zl(1|t,n,void 0,r===void 0?null:r)}function ju(e,t,n,r){var i=ss();r=r===void 0?null:r;var a=void 0;if(Hn!==null){var l=Hn.memoizedState;if(a=l.destroy,r!==null&&yp(r,l.deps)){i.memoizedState=zl(t,n,a,r);return}}jn.flags|=e,i.memoizedState=zl(1|t,n,a,r)}function z0(e,t){return Dc(8390656,8,e,t)}function wp(e,t){return ju(2048,8,e,t)}function tx(e,t){return ju(4,2,e,t)}function nx(e,t){return ju(4,4,e,t)}function rx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sx(e,t,n){return n=n!=null?n.concat([e]):null,ju(4,4,rx.bind(null,t,e),n)}function kp(){}function ix(e,t){var n=ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ox(e,t){var n=ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ax(e,t,n){return no&21?(vs(n,t)||(n=fg(),jn.lanes|=n,ro|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ir=!0),e.memoizedState=n)}function zb(e,t){var n=sn;sn=n!==0&&4>n?n:4,e(!0);var r=wd.transition;wd.transition={};try{e(!1),t()}finally{sn=n,wd.transition=r}}function lx(){return ss().memoizedState}function jb(e,t,n){var r=Pi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cx(e))ux(t,n);else if(n=Wg(e,t,n,r),n!==null){var i=gr();ys(n,e,r,i),dx(n,t,r)}}function _b(e,t,n){var r=Pi(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cx(e))ux(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,c=a(l,n);if(i.hasEagerState=!0,i.eagerState=c,vs(c,l)){var d=t.interleaved;d===null?(i.next=i,pp(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=Wg(e,t,i,r),n!==null&&(i=gr(),ys(n,e,r,i),dx(n,t,r))}}function cx(e){var t=e.alternate;return e===jn||t!==null&&t===jn}function ux(e,t){nl=ou=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dx(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qf(e,n)}}var au={readContext:rs,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},Nb={readContext:rs,useCallback:function(e,t){return Es().memoizedState=[e,t===void 0?null:t],e},useContext:rs,useEffect:z0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Dc(4194308,4,rx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Dc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dc(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=jb.bind(null,jn,e),[r.memoizedState,e]},useRef:function(e){var t=Es();return e={current:e},t.memoizedState=e},useState:k0,useDebugValue:kp,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=k0(!1),t=e[0];return e=zb.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jn,i=Es();if(wn){if(n===void 0)throw Error(De(407));n=n()}else{if(n=t(),Zn===null)throw Error(De(349));no&30||Xg(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,z0(Jg.bind(null,r,a,e),[e]),r.flags|=2048,zl(9,Zg.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Es(),t=Zn.identifierPrefix;if(wn){var n=Qs,r=qs;n=(r&~(1<<32-xs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=wl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sb={readContext:rs,useCallback:ix,useContext:rs,useEffect:wp,useImperativeHandle:sx,useInsertionEffect:tx,useLayoutEffect:nx,useMemo:ox,useReducer:kd,useRef:ex,useState:function(){return kd(kl)},useDebugValue:kp,useDeferredValue:function(e){var t=ss();return ax(t,Hn.memoizedState,e)},useTransition:function(){var e=kd(kl)[0],t=ss().memoizedState;return[e,t]},useMutableSource:Yg,useSyncExternalStore:Gg,useId:lx,unstable_isNewReconciler:!1},Cb={readContext:rs,useCallback:ix,useContext:rs,useEffect:wp,useImperativeHandle:sx,useInsertionEffect:tx,useLayoutEffect:nx,useMemo:ox,useReducer:zd,useRef:ex,useState:function(){return zd(kl)},useDebugValue:kp,useDeferredValue:function(e){var t=ss();return Hn===null?t.memoizedState=e:ax(t,Hn.memoizedState,e)},useTransition:function(){var e=zd(kl)[0],t=ss().memoizedState;return[e,t]},useMutableSource:Yg,useSyncExternalStore:Gg,useId:lx,unstable_isNewReconciler:!1};function hs(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _u={isMounted:function(e){return(e=e._reactInternals)?lo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gr(),i=Pi(e),a=ei(r,i);a.payload=t,n!=null&&(a.callback=n),t=$i(e,a,i),t!==null&&(ys(t,e,i,r),Pc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gr(),i=Pi(e),a=ei(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=$i(e,a,i),t!==null&&(ys(t,e,i,r),Pc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gr(),r=Pi(e),i=ei(n,r);i.tag=2,t!=null&&(i.callback=t),t=$i(e,i,r),t!==null&&(ys(t,e,r,n),Pc(t,e,r))}};function j0(e,t,n,r,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!ml(n,r)||!ml(i,a):!0}function fx(e,t,n){var r=!1,i=Li,a=t.contextType;return typeof a=="object"&&a!==null?a=rs(a):(i=Mr(t)?eo:ur.current,r=t.contextTypes,a=(r=r!=null)?Go(e,i):Li),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_u,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_u.enqueueReplaceState(t,t.state,null)}function bf(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},hp(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=rs(a):(a=Mr(t)?eo:ur.current,i.context=Go(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(vf(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_u.enqueueReplaceState(i,i.state,null),su(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qo(e,t){try{var n="",r=t;do n+=nv(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function jd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Eb=typeof WeakMap=="function"?WeakMap:Map;function px(e,t,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cu||(cu=!0,Tf=r),wf(e,t)},n}function hx(e,t,n){n=ei(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){wf(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){wf(e,t),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function N0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Eb;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Hb.bind(null,e,t,n),t.then(e,e))}function S0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function C0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ei(-1,1),t.tag=2,$i(n,t,1))),n.lanes|=1),e)}var Ib=ii.ReactCurrentOwner,Ir=!1;function mr(e,t,n,r){t.child=e===null?Hg(t,null,n,r):Zo(t,e.child,n,r)}function E0(e,t,n,r,i){n=n.render;var a=t.ref;return Vo(t,i),r=vp(e,t,n,r,a,i),n=bp(),e!==null&&!Ir?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,si(e,t,i)):(wn&&n&&ap(t),t.flags|=1,mr(e,t,r,i),t.child)}function I0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Ip(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,mx(e,t,a,r,i)):(e=Fc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:ml,n(l,r)&&e.ref===t.ref)return si(e,t,i)}return t.flags|=1,e=Ri(a,r),e.ref=t.ref,e.return=t,t.child=e}function mx(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(ml(a,r)&&e.ref===t.ref)if(Ir=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Ir=!0);else return t.lanes=e.lanes,si(e,t,i)}return kf(e,t,n,r,i)}function gx(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(Uo,Dr),Dr|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pn(Uo,Dr),Dr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,pn(Uo,Dr),Dr|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,pn(Uo,Dr),Dr|=r;return mr(e,t,i,n),t.child}function xx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kf(e,t,n,r,i){var a=Mr(n)?eo:ur.current;return a=Go(t,a),Vo(t,i),n=vp(e,t,n,r,a,i),r=bp(),e!==null&&!Ir?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,si(e,t,i)):(wn&&r&&ap(t),t.flags|=1,mr(e,t,n,i),t.child)}function T0(e,t,n,r,i){if(Mr(n)){var a=!0;Qc(t)}else a=!1;if(Vo(t,i),t.stateNode===null)Lc(e,t),fx(t,n,r),bf(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var d=l.context,y=n.contextType;typeof y=="object"&&y!==null?y=rs(y):(y=Mr(n)?eo:ur.current,y=Go(t,y));var j=n.getDerivedStateFromProps,_=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function";_||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==y)&&_0(t,l,r,y),zi=!1;var k=t.memoizedState;l.state=k,su(t,r,l,i),d=t.memoizedState,c!==r||k!==d||Tr.current||zi?(typeof j=="function"&&(vf(t,n,j,r),d=t.memoizedState),(c=zi||j0(t,n,c,r,k,d,y))?(_||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=y,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Vg(e,t),c=t.memoizedProps,y=t.type===t.elementType?c:hs(t.type,c),l.props=y,_=t.pendingProps,k=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=rs(d):(d=Mr(n)?eo:ur.current,d=Go(t,d));var b=n.getDerivedStateFromProps;(j=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==_||k!==d)&&_0(t,l,r,d),zi=!1,k=t.memoizedState,l.state=k,su(t,r,l,i);var E=t.memoizedState;c!==_||k!==E||Tr.current||zi?(typeof b=="function"&&(vf(t,n,b,r),E=t.memoizedState),(y=zi||j0(t,n,y,r,k,E,d)||!1)?(j||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,E,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,E,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=E),l.props=r,l.state=E,l.context=d,r=y):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),r=!1)}return zf(e,t,n,r,a,i)}function zf(e,t,n,r,i,a){xx(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&g0(t,n,!1),si(e,t,a);r=t.stateNode,Ib.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Zo(t,e.child,null,a),t.child=Zo(t,null,c,a)):mr(e,t,c,a),t.memoizedState=r.state,i&&g0(t,n,!0),t.child}function yx(e){var t=e.stateNode;t.pendingContext?m0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&m0(e,t.context,!1),mp(e,t.containerInfo)}function M0(e,t,n,r,i){return Xo(),cp(i),t.flags|=256,mr(e,t,n,r),t.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function _f(e){return{baseLanes:e,cachePool:null,transitions:null}}function vx(e,t,n){var r=t.pendingProps,i=zn.current,a=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),pn(zn,i&1),e===null)return xf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Cu(l,r,0,null),e=Qi(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=_f(n),t.memoizedState=jf,e):zp(t,l));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return Tb(e,t,l,r,c,i,n);if(a){a=r.fallback,l=t.mode,i=e.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Ri(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Ri(c,a):(a=Qi(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?_f(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=jf,r}return a=e.child,e=a.sibling,r=Ri(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zp(e,t){return t=Cu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mc(e,t,n,r){return r!==null&&cp(r),Zo(t,e.child,null,n),e=zp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tb(e,t,n,r,i,a,l){if(n)return t.flags&256?(t.flags&=-257,r=jd(Error(De(422))),mc(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Cu({mode:"visible",children:r.children},i,0,null),a=Qi(a,i,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Zo(t,e.child,null,l),t.child.memoizedState=_f(l),t.memoizedState=jf,a);if(!(t.mode&1))return mc(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(De(419)),r=jd(a,r,void 0),mc(e,t,l,r)}if(c=(l&e.childLanes)!==0,Ir||c){if(r=Zn,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ri(e,i),ys(r,e,i,-1))}return Ep(),r=jd(Error(De(421))),mc(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Wb.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Or=Mi(i.nextSibling),Ur=t,wn=!0,gs=null,e!==null&&(Qr[es++]=qs,Qr[es++]=Qs,Qr[es++]=to,qs=e.id,Qs=e.overflow,to=t),t=zp(t,r.children),t.flags|=4096,t)}function $0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yf(e.return,t,n)}function _d(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function bx(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(mr(e,t,r.children,n),r=zn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$0(e,n,t);else if(e.tag===19)$0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pn(zn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&iu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),_d(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&iu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}_d(t,!0,n,null,a);break;case"together":_d(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function si(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ro|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(De(153));if(t.child!==null){for(e=t.child,n=Ri(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ri(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Mb(e,t,n){switch(t.tag){case 3:yx(t),Xo();break;case 5:Kg(t);break;case 1:Mr(t.type)&&Qc(t);break;case 4:mp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;pn(nu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pn(zn,zn.current&1),t.flags|=128,null):n&t.child.childLanes?vx(e,t,n):(pn(zn,zn.current&1),e=si(e,t,n),e!==null?e.sibling:null);pn(zn,zn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bx(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pn(zn,zn.current),r)break;return null;case 22:case 23:return t.lanes=0,gx(e,t,n)}return si(e,t,n)}var wx,Nf,kx,zx;wx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nf=function(){};kx=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ji(As.current);var a=null;switch(n){case"input":i=Yd(e,i),r=Yd(e,r),a=[];break;case"select":i=_n({},i,{value:void 0}),r=_n({},r,{value:void 0}),a=[];break;case"textarea":i=Zd(e,i),r=Zd(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jc)}qd(n,r);var l;n=null;for(y in i)if(!r.hasOwnProperty(y)&&i.hasOwnProperty(y)&&i[y]!=null)if(y==="style"){var c=i[y];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(ll.hasOwnProperty(y)?a||(a=[]):(a=a||[]).push(y,null));for(y in r){var d=r[y];if(c=i!=null?i[y]:void 0,r.hasOwnProperty(y)&&d!==c&&(d!=null||c!=null))if(y==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(y,n)),n=d;else y==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(y,d)):y==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(y,""+d):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(ll.hasOwnProperty(y)?(d!=null&&y==="onScroll"&&xn("scroll",e),a||c===d||(a=[])):(a=a||[]).push(y,d))}n&&(a=a||[]).push("style",n);var y=a;(t.updateQueue=y)&&(t.flags|=4)}};zx=function(e,t,n,r){n!==r&&(t.flags|=4)};function $a(e,t){if(!wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $b(e,t,n){var r=t.pendingProps;switch(lp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return Mr(t.type)&&qc(),lr(t),null;case 3:return r=t.stateNode,Jo(),yn(Tr),yn(ur),xp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gs!==null&&(Af(gs),gs=null))),Nf(e,t),lr(t),null;case 5:gp(t);var i=Ji(bl.current);if(n=t.type,e!==null&&t.stateNode!=null)kx(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(De(166));return lr(t),null}if(e=Ji(As.current),pc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Is]=t,r[yl]=a,e=(t.mode&1)!==0,n){case"dialog":xn("cancel",r),xn("close",r);break;case"iframe":case"object":case"embed":xn("load",r);break;case"video":case"audio":for(i=0;i<Ga.length;i++)xn(Ga[i],r);break;case"source":xn("error",r);break;case"img":case"image":case"link":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"input":Bh(r,a),xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},xn("invalid",r);break;case"textarea":Wh(r,a),xn("invalid",r)}qd(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&fc(r.textContent,c,e),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&fc(r.textContent,c,e),i=["children",""+c]):ll.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&xn("scroll",r)}switch(n){case"input":sc(r),Hh(r,a,!0);break;case"textarea":sc(r),Vh(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Jc)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Is]=t,e[yl]=r,wx(e,t,!1,!1),t.stateNode=e;e:{switch(l=Qd(n,r),n){case"dialog":xn("cancel",e),xn("close",e),i=r;break;case"iframe":case"object":case"embed":xn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ga.length;i++)xn(Ga[i],e);i=r;break;case"source":xn("error",e),i=r;break;case"img":case"image":case"link":xn("error",e),xn("load",e),i=r;break;case"details":xn("toggle",e),i=r;break;case"input":Bh(e,r),i=Yd(e,r),xn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_n({},r,{value:void 0}),xn("invalid",e);break;case"textarea":Wh(e,r),i=Zd(e,r),xn("invalid",e);break;default:i=r}qd(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?eg(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&qm(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&cl(e,d):typeof d=="number"&&cl(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ll.hasOwnProperty(a)?d!=null&&a==="onScroll"&&xn("scroll",e):d!=null&&Yf(e,a,d,l))}switch(n){case"input":sc(e),Hh(e,r,!1);break;case"textarea":sc(e),Vh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Di(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Fo(e,!!r.multiple,a,!1):r.defaultValue!=null&&Fo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)zx(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(De(166));if(n=Ji(bl.current),Ji(As.current),pc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Is]=t,(a=r.nodeValue!==n)&&(e=Ur,e!==null))switch(e.tag){case 3:fc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Is]=t,t.stateNode=r}return lr(t),null;case 13:if(yn(zn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wn&&Or!==null&&t.mode&1&&!(t.flags&128))Fg(),Xo(),t.flags|=98560,a=!1;else if(a=pc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(De(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(De(317));a[Is]=t}else Xo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),a=!1}else gs!==null&&(Af(gs),gs=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||zn.current&1?Wn===0&&(Wn=3):Ep())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return Jo(),Nf(e,t),e===null&&gl(t.stateNode.containerInfo),lr(t),null;case 10:return fp(t.type._context),lr(t),null;case 17:return Mr(t.type)&&qc(),lr(t),null;case 19:if(yn(zn),a=t.memoizedState,a===null)return lr(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)$a(a,!1);else{if(Wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=iu(e),l!==null){for(t.flags|=128,$a(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pn(zn,zn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Dn()>Qo&&(t.flags|=128,r=!0,$a(a,!1),t.lanes=4194304)}else{if(!r)if(e=iu(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$a(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!wn)return lr(t),null}else 2*Dn()-a.renderingStartTime>Qo&&n!==1073741824&&(t.flags|=128,r=!0,$a(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Dn(),t.sibling=null,n=zn.current,pn(zn,r?n&1|2:n&1),t):(lr(t),null);case 22:case 23:return Cp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dr&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(De(156,t.tag))}function Ab(e,t){switch(lp(t),t.tag){case 1:return Mr(t.type)&&qc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(),yn(Tr),yn(ur),xp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gp(t),null;case 13:if(yn(zn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(De(340));Xo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yn(zn),null;case 4:return Jo(),null;case 10:return fp(t.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var gc=!1,cr=!1,Pb=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Oo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tn(e,t,r)}else n.current=null}function Sf(e,t,n){try{n()}catch(r){Tn(e,t,r)}}var A0=!1;function Rb(e,t){if(uf=Gc,e=Cg(),op(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,y=0,j=0,_=e,k=null;t:for(;;){for(var b;_!==n||i!==0&&_.nodeType!==3||(c=l+i),_!==a||r!==0&&_.nodeType!==3||(d=l+r),_.nodeType===3&&(l+=_.nodeValue.length),(b=_.firstChild)!==null;)k=_,_=b;for(;;){if(_===e)break t;if(k===n&&++y===i&&(c=l),k===a&&++j===r&&(d=l),(b=_.nextSibling)!==null)break;_=k,k=_.parentNode}_=b}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(df={focusedElem:e,selectionRange:n},Gc=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){t=ot;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var z=E.memoizedProps,A=E.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?z:hs(t.type,z),A);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(R){Tn(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}return E=A0,A0=!1,E}function rl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Sf(t,n,a)}i=i.next}while(i!==r)}}function Nu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Cf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jx(e){var t=e.alternate;t!==null&&(e.alternate=null,jx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Is],delete t[yl],delete t[hf],delete t[yb],delete t[vb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _x(e){return e.tag===5||e.tag===3||e.tag===4}function P0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_x(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ef(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jc));else if(r!==4&&(e=e.child,e!==null))for(Ef(e,t,n),e=e.sibling;e!==null;)Ef(e,t,n),e=e.sibling}function If(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(If(e,t,n),e=e.sibling;e!==null;)If(e,t,n),e=e.sibling}var tr=null,ms=!1;function bi(e,t,n){for(n=n.child;n!==null;)Nx(e,t,n),n=n.sibling}function Nx(e,t,n){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:cr||Oo(n,t);case 6:var r=tr,i=ms;tr=null,bi(e,t,n),tr=r,ms=i,tr!==null&&(ms?(e=tr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):tr.removeChild(n.stateNode));break;case 18:tr!==null&&(ms?(e=tr,n=n.stateNode,e.nodeType===8?yd(e.parentNode,n):e.nodeType===1&&yd(e,n),pl(e)):yd(tr,n.stateNode));break;case 4:r=tr,i=ms,tr=n.stateNode.containerInfo,ms=!0,bi(e,t,n),tr=r,ms=i;break;case 0:case 11:case 14:case 15:if(!cr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Sf(n,t,l),i=i.next}while(i!==r)}bi(e,t,n);break;case 1:if(!cr&&(Oo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Tn(n,t,c)}bi(e,t,n);break;case 21:bi(e,t,n);break;case 22:n.mode&1?(cr=(r=cr)||n.memoizedState!==null,bi(e,t,n),cr=r):bi(e,t,n);break;default:bi(e,t,n)}}function R0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pb),t.forEach(function(r){var i=Vb.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:tr=c.stateNode,ms=!1;break e;case 3:tr=c.stateNode.containerInfo,ms=!0;break e;case 4:tr=c.stateNode.containerInfo,ms=!0;break e}c=c.return}if(tr===null)throw Error(De(160));Nx(a,l,i),tr=null,ms=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(y){Tn(i,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sx(t,e),t=t.sibling}function Sx(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fs(t,e),_s(e),r&4){try{rl(3,e,e.return),Nu(3,e)}catch(z){Tn(e,e.return,z)}try{rl(5,e,e.return)}catch(z){Tn(e,e.return,z)}}break;case 1:fs(t,e),_s(e),r&512&&n!==null&&Oo(n,n.return);break;case 5:if(fs(t,e),_s(e),r&512&&n!==null&&Oo(n,n.return),e.flags&32){var i=e.stateNode;try{cl(i,"")}catch(z){Tn(e,e.return,z)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Xm(i,a),Qd(c,l);var y=Qd(c,a);for(l=0;l<d.length;l+=2){var j=d[l],_=d[l+1];j==="style"?eg(i,_):j==="dangerouslySetInnerHTML"?qm(i,_):j==="children"?cl(i,_):Yf(i,j,_,y)}switch(c){case"input":Gd(i,a);break;case"textarea":Zm(i,a);break;case"select":var k=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Fo(i,!!a.multiple,b,!1):k!==!!a.multiple&&(a.defaultValue!=null?Fo(i,!!a.multiple,a.defaultValue,!0):Fo(i,!!a.multiple,a.multiple?[]:"",!1))}i[yl]=a}catch(z){Tn(e,e.return,z)}}break;case 6:if(fs(t,e),_s(e),r&4){if(e.stateNode===null)throw Error(De(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(z){Tn(e,e.return,z)}}break;case 3:if(fs(t,e),_s(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pl(t.containerInfo)}catch(z){Tn(e,e.return,z)}break;case 4:fs(t,e),_s(e);break;case 13:fs(t,e),_s(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Np=Dn())),r&4&&R0(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(cr=(y=cr)||j,fs(t,e),cr=y):fs(t,e),_s(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!j&&e.mode&1)for(ot=e,j=e.child;j!==null;){for(_=ot=j;ot!==null;){switch(k=ot,b=k.child,k.tag){case 0:case 11:case 14:case 15:rl(4,k,k.return);break;case 1:Oo(k,k.return);var E=k.stateNode;if(typeof E.componentWillUnmount=="function"){r=k,n=k.return;try{t=r,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(z){Tn(r,n,z)}}break;case 5:Oo(k,k.return);break;case 22:if(k.memoizedState!==null){L0(_);continue}}b!==null?(b.return=k,ot=b):L0(_)}j=j.sibling}e:for(j=null,_=e;;){if(_.tag===5){if(j===null){j=_;try{i=_.stateNode,y?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=_.stateNode,d=_.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Qm("display",l))}catch(z){Tn(e,e.return,z)}}}else if(_.tag===6){if(j===null)try{_.stateNode.nodeValue=y?"":_.memoizedProps}catch(z){Tn(e,e.return,z)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;j===_&&(j=null),_=_.return}j===_&&(j=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:fs(t,e),_s(e),r&4&&R0(e);break;case 21:break;default:fs(t,e),_s(e)}}function _s(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_x(n)){var r=n;break e}n=n.return}throw Error(De(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cl(i,""),r.flags&=-33);var a=P0(e);If(e,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=P0(e);Ef(e,c,l);break;default:throw Error(De(161))}}catch(d){Tn(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Db(e,t,n){ot=e,Cx(e)}function Cx(e,t,n){for(var r=(e.mode&1)!==0;ot!==null;){var i=ot,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||gc;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||cr;c=gc;var y=cr;if(gc=l,(cr=d)&&!y)for(ot=i;ot!==null;)l=ot,d=l.child,l.tag===22&&l.memoizedState!==null?O0(i):d!==null?(d.return=l,ot=d):O0(i);for(;a!==null;)ot=a,Cx(a),a=a.sibling;ot=i,gc=c,cr=y}D0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ot=a):D0(e)}}function D0(e){for(;ot!==null;){var t=ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cr||Nu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!cr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:hs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&w0(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}w0(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var j=y.memoizedState;if(j!==null){var _=j.dehydrated;_!==null&&pl(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}cr||t.flags&512&&Cf(t)}catch(k){Tn(t,t.return,k)}}if(t===e){ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,ot=n;break}ot=t.return}}function L0(e){for(;ot!==null;){var t=ot;if(t===e){ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ot=n;break}ot=t.return}}function O0(e){for(;ot!==null;){var t=ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nu(4,t)}catch(d){Tn(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Tn(t,i,d)}}var a=t.return;try{Cf(t)}catch(d){Tn(t,a,d)}break;case 5:var l=t.return;try{Cf(t)}catch(d){Tn(t,l,d)}}}catch(d){Tn(t,t.return,d)}if(t===e){ot=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ot=c;break}ot=t.return}}var Lb=Math.ceil,lu=ii.ReactCurrentDispatcher,jp=ii.ReactCurrentOwner,ns=ii.ReactCurrentBatchConfig,Gt=0,Zn=null,On=null,nr=0,Dr=0,Uo=Ui(0),Wn=0,jl=null,ro=0,Su=0,_p=0,sl=null,Er=null,Np=0,Qo=1/0,Xs=null,cu=!1,Tf=null,Ai=null,xc=!1,Si=null,uu=0,il=0,Mf=null,Oc=-1,Uc=0;function gr(){return Gt&6?Dn():Oc!==-1?Oc:Oc=Dn()}function Pi(e){return e.mode&1?Gt&2&&nr!==0?nr&-nr:wb.transition!==null?(Uc===0&&(Uc=fg()),Uc):(e=sn,e!==0||(e=window.event,e=e===void 0?16:vg(e.type)),e):1}function ys(e,t,n,r){if(50<il)throw il=0,Mf=null,Error(De(185));Nl(e,n,r),(!(Gt&2)||e!==Zn)&&(e===Zn&&(!(Gt&2)&&(Su|=n),Wn===4&&_i(e,nr)),$r(e,r),n===1&&Gt===0&&!(t.mode&1)&&(Qo=Dn()+500,zu&&Fi()))}function $r(e,t){var n=e.callbackNode;wv(e,t);var r=Yc(e,e===Zn?nr:0);if(r===0)n!==null&&Gh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gh(n),t===1)e.tag===0?bb(U0.bind(null,e)):Lg(U0.bind(null,e)),gb(function(){!(Gt&6)&&Fi()}),n=null;else{switch(pg(r)){case 1:n=qf;break;case 4:n=ug;break;case 16:n=Kc;break;case 536870912:n=dg;break;default:n=Kc}n=Rx(n,Ex.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ex(e,t){if(Oc=-1,Uc=0,Gt&6)throw Error(De(327));var n=e.callbackNode;if(Ko()&&e.callbackNode!==n)return null;var r=Yc(e,e===Zn?nr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=du(e,r);else{t=r;var i=Gt;Gt|=2;var a=Tx();(Zn!==e||nr!==t)&&(Xs=null,Qo=Dn()+500,qi(e,t));do try{Fb();break}catch(c){Ix(e,c)}while(!0);dp(),lu.current=a,Gt=i,On!==null?t=0:(Zn=null,nr=0,t=Wn)}if(t!==0){if(t===2&&(i=sf(e),i!==0&&(r=i,t=$f(e,i))),t===1)throw n=jl,qi(e,0),_i(e,r),$r(e,Dn()),n;if(t===6)_i(e,r);else{if(i=e.current.alternate,!(r&30)&&!Ob(i)&&(t=du(e,r),t===2&&(a=sf(e),a!==0&&(r=a,t=$f(e,a))),t===1))throw n=jl,qi(e,0),_i(e,r),$r(e,Dn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(De(345));case 2:Gi(e,Er,Xs);break;case 3:if(_i(e,r),(r&130023424)===r&&(t=Np+500-Dn(),10<t)){if(Yc(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){gr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=pf(Gi.bind(null,e,Er,Xs),t);break}Gi(e,Er,Xs);break;case 4:if(_i(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-xs(r);a=1<<l,l=t[l],l>i&&(i=l),r&=~a}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lb(r/1960))-r,10<r){e.timeoutHandle=pf(Gi.bind(null,e,Er,Xs),r);break}Gi(e,Er,Xs);break;case 5:Gi(e,Er,Xs);break;default:throw Error(De(329))}}}return $r(e,Dn()),e.callbackNode===n?Ex.bind(null,e):null}function $f(e,t){var n=sl;return e.current.memoizedState.isDehydrated&&(qi(e,t).flags|=256),e=du(e,t),e!==2&&(t=Er,Er=n,t!==null&&Af(t)),e}function Af(e){Er===null?Er=e:Er.push.apply(Er,e)}function Ob(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!vs(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _i(e,t){for(t&=~_p,t&=~Su,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xs(t),r=1<<n;e[n]=-1,t&=~r}}function U0(e){if(Gt&6)throw Error(De(327));Ko();var t=Yc(e,0);if(!(t&1))return $r(e,Dn()),null;var n=du(e,t);if(e.tag!==0&&n===2){var r=sf(e);r!==0&&(t=r,n=$f(e,r))}if(n===1)throw n=jl,qi(e,0),_i(e,t),$r(e,Dn()),n;if(n===6)throw Error(De(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gi(e,Er,Xs),$r(e,Dn()),null}function Sp(e,t){var n=Gt;Gt|=1;try{return e(t)}finally{Gt=n,Gt===0&&(Qo=Dn()+500,zu&&Fi())}}function so(e){Si!==null&&Si.tag===0&&!(Gt&6)&&Ko();var t=Gt;Gt|=1;var n=ns.transition,r=sn;try{if(ns.transition=null,sn=1,e)return e()}finally{sn=r,ns.transition=n,Gt=t,!(Gt&6)&&Fi()}}function Cp(){Dr=Uo.current,yn(Uo)}function qi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mb(n)),On!==null)for(n=On.return;n!==null;){var r=n;switch(lp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qc();break;case 3:Jo(),yn(Tr),yn(ur),xp();break;case 5:gp(r);break;case 4:Jo();break;case 13:yn(zn);break;case 19:yn(zn);break;case 10:fp(r.type._context);break;case 22:case 23:Cp()}n=n.return}if(Zn=e,On=e=Ri(e.current,null),nr=Dr=t,Wn=0,jl=null,_p=Su=ro=0,Er=sl=null,Zi!==null){for(t=0;t<Zi.length;t++)if(n=Zi[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}n.pending=r}Zi=null}return e}function Ix(e,t){do{var n=On;try{if(dp(),Rc.current=au,ou){for(var r=jn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ou=!1}if(no=0,Xn=Hn=jn=null,nl=!1,wl=0,jp.current=null,n===null||n.return===null){Wn=1,jl=t,On=null;break}e:{var a=e,l=n.return,c=n,d=t;if(t=nr,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var y=d,j=c,_=j.tag;if(!(j.mode&1)&&(_===0||_===11||_===15)){var k=j.alternate;k?(j.updateQueue=k.updateQueue,j.memoizedState=k.memoizedState,j.lanes=k.lanes):(j.updateQueue=null,j.memoizedState=null)}var b=S0(l);if(b!==null){b.flags&=-257,C0(b,l,c,a,t),b.mode&1&&N0(a,y,t),t=b,d=y;var E=t.updateQueue;if(E===null){var z=new Set;z.add(d),t.updateQueue=z}else E.add(d);break e}else{if(!(t&1)){N0(a,y,t),Ep();break e}d=Error(De(426))}}else if(wn&&c.mode&1){var A=S0(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),C0(A,l,c,a,t),cp(qo(d,c));break e}}a=d=qo(d,c),Wn!==4&&(Wn=2),sl===null?sl=[a]:sl.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=px(a,d,t);b0(a,x);break e;case 1:c=d;var g=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ai===null||!Ai.has(N)))){a.flags|=65536,t&=-t,a.lanes|=t;var R=hx(a,c,t);b0(a,R);break e}}a=a.return}while(a!==null)}$x(n)}catch(F){t=F,On===n&&n!==null&&(On=n=n.return);continue}break}while(!0)}function Tx(){var e=lu.current;return lu.current=au,e===null?au:e}function Ep(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),Zn===null||!(ro&268435455)&&!(Su&268435455)||_i(Zn,nr)}function du(e,t){var n=Gt;Gt|=2;var r=Tx();(Zn!==e||nr!==t)&&(Xs=null,qi(e,t));do try{Ub();break}catch(i){Ix(e,i)}while(!0);if(dp(),Gt=n,lu.current=r,On!==null)throw Error(De(261));return Zn=null,nr=0,Wn}function Ub(){for(;On!==null;)Mx(On)}function Fb(){for(;On!==null&&!fv();)Mx(On)}function Mx(e){var t=Px(e.alternate,e,Dr);e.memoizedProps=e.pendingProps,t===null?$x(e):On=t,jp.current=null}function $x(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ab(n,t),n!==null){n.flags&=32767,On=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wn=6,On=null;return}}else if(n=$b(n,t,Dr),n!==null){On=n;return}if(t=t.sibling,t!==null){On=t;return}On=t=e}while(t!==null);Wn===0&&(Wn=5)}function Gi(e,t,n){var r=sn,i=ns.transition;try{ns.transition=null,sn=1,Bb(e,t,n,r)}finally{ns.transition=i,sn=r}return null}function Bb(e,t,n,r){do Ko();while(Si!==null);if(Gt&6)throw Error(De(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(De(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(kv(e,a),e===Zn&&(On=Zn=null,nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xc||(xc=!0,Rx(Kc,function(){return Ko(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ns.transition,ns.transition=null;var l=sn;sn=1;var c=Gt;Gt|=4,jp.current=null,Rb(e,n),Sx(n,e),lb(df),Gc=!!uf,df=uf=null,e.current=n,Db(n),pv(),Gt=c,sn=l,ns.transition=a}else e.current=n;if(xc&&(xc=!1,Si=e,uu=i),a=e.pendingLanes,a===0&&(Ai=null),gv(n.stateNode),$r(e,Dn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cu)throw cu=!1,e=Tf,Tf=null,e;return uu&1&&e.tag!==0&&Ko(),a=e.pendingLanes,a&1?e===Mf?il++:(il=0,Mf=e):il=0,Fi(),null}function Ko(){if(Si!==null){var e=pg(uu),t=ns.transition,n=sn;try{if(ns.transition=null,sn=16>e?16:e,Si===null)var r=!1;else{if(e=Si,Si=null,uu=0,Gt&6)throw Error(De(331));var i=Gt;for(Gt|=4,ot=e.current;ot!==null;){var a=ot,l=a.child;if(ot.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var y=c[d];for(ot=y;ot!==null;){var j=ot;switch(j.tag){case 0:case 11:case 15:rl(8,j,a)}var _=j.child;if(_!==null)_.return=j,ot=_;else for(;ot!==null;){j=ot;var k=j.sibling,b=j.return;if(jx(j),j===y){ot=null;break}if(k!==null){k.return=b,ot=k;break}ot=b}}}var E=a.alternate;if(E!==null){var z=E.child;if(z!==null){E.child=null;do{var A=z.sibling;z.sibling=null,z=A}while(z!==null)}}ot=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,ot=l;else e:for(;ot!==null;){if(a=ot,a.flags&2048)switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ot=x;break e}ot=a.return}}var g=e.current;for(ot=g;ot!==null;){l=ot;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,ot=N;else e:for(l=g;ot!==null;){if(c=ot,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Nu(9,c)}}catch(F){Tn(c,c.return,F)}if(c===l){ot=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,ot=R;break e}ot=c.return}}if(Gt=i,Fi(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(yu,e)}catch{}r=!0}return r}finally{sn=n,ns.transition=t}}return!1}function F0(e,t,n){t=qo(n,t),t=px(e,t,1),e=$i(e,t,1),t=gr(),e!==null&&(Nl(e,1,t),$r(e,t))}function Tn(e,t,n){if(e.tag===3)F0(e,e,n);else for(;t!==null;){if(t.tag===3){F0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){e=qo(n,e),e=hx(t,e,1),t=$i(t,e,1),e=gr(),t!==null&&(Nl(t,1,e),$r(t,e));break}}t=t.return}}function Hb(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gr(),e.pingedLanes|=e.suspendedLanes&n,Zn===e&&(nr&n)===n&&(Wn===4||Wn===3&&(nr&130023424)===nr&&500>Dn()-Np?qi(e,0):_p|=n),$r(e,t)}function Ax(e,t){t===0&&(e.mode&1?(t=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):t=1);var n=gr();e=ri(e,t),e!==null&&(Nl(e,t,n),$r(e,n))}function Wb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ax(e,n)}function Vb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(De(314))}r!==null&&r.delete(t),Ax(e,n)}var Px;Px=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tr.current)Ir=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ir=!1,Mb(e,t,n);Ir=!!(e.flags&131072)}else Ir=!1,wn&&t.flags&1048576&&Og(t,tu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lc(e,t),e=t.pendingProps;var i=Go(t,ur.current);Vo(t,n),i=vp(null,t,r,e,i,n);var a=bp();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(r)?(a=!0,Qc(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hp(t),i.updater=_u,t.stateNode=i,i._reactInternals=t,bf(t,r,e,n),t=zf(null,t,r,!0,a,n)):(t.tag=0,wn&&a&&ap(t),mr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Lc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Yb(r),e=hs(r,e),i){case 0:t=kf(null,t,r,e,n);break e;case 1:t=T0(null,t,r,e,n);break e;case 11:t=E0(null,t,r,e,n);break e;case 14:t=I0(null,t,r,hs(r.type,e),n);break e}throw Error(De(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hs(r,i),kf(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hs(r,i),T0(e,t,r,i,n);case 3:e:{if(yx(t),e===null)throw Error(De(387));r=t.pendingProps,a=t.memoizedState,i=a.element,Vg(e,t),su(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=qo(Error(De(423)),t),t=M0(e,t,r,n,i);break e}else if(r!==i){i=qo(Error(De(424)),t),t=M0(e,t,r,n,i);break e}else for(Or=Mi(t.stateNode.containerInfo.firstChild),Ur=t,wn=!0,gs=null,n=Hg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xo(),r===i){t=si(e,t,n);break e}mr(e,t,r,n)}t=t.child}return t;case 5:return Kg(t),e===null&&xf(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,ff(r,i)?l=null:a!==null&&ff(r,a)&&(t.flags|=32),xx(e,t),mr(e,t,l,n),t.child;case 6:return e===null&&xf(t),null;case 13:return vx(e,t,n);case 4:return mp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zo(t,null,r,n):mr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hs(r,i),E0(e,t,r,i,n);case 7:return mr(e,t,t.pendingProps,n),t.child;case 8:return mr(e,t,t.pendingProps.children,n),t.child;case 12:return mr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,pn(nu,r._currentValue),r._currentValue=l,a!==null)if(vs(a.value,l)){if(a.children===i.children&&!Tr.current){t=si(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=ei(-1,n&-n),d.tag=2;var y=a.updateQueue;if(y!==null){y=y.shared;var j=y.pending;j===null?d.next=d:(d.next=j.next,j.next=d),y.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),yf(a.return,n,t),c.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(De(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),yf(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}mr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vo(t,n),i=rs(i),r=r(i),t.flags|=1,mr(e,t,r,n),t.child;case 14:return r=t.type,i=hs(r,t.pendingProps),i=hs(r.type,i),I0(e,t,r,i,n);case 15:return mx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hs(r,i),Lc(e,t),t.tag=1,Mr(r)?(e=!0,Qc(t)):e=!1,Vo(t,n),fx(t,r,i),bf(t,r,i,n),zf(null,t,r,!0,e,n);case 19:return bx(e,t,n);case 22:return gx(e,t,n)}throw Error(De(156,t.tag))};function Rx(e,t){return cg(e,t)}function Kb(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(e,t,n,r){return new Kb(e,t,n,r)}function Ip(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yb(e){if(typeof e=="function")return Ip(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xf)return 11;if(e===Zf)return 14}return 2}function Ri(e,t){var n=e.alternate;return n===null?(n=ts(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,i,a){var l=2;if(r=e,typeof e=="function")Ip(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Io:return Qi(n.children,i,a,t);case Gf:l=8,i|=8;break;case Hd:return e=ts(12,n,t,i|2),e.elementType=Hd,e.lanes=a,e;case Wd:return e=ts(13,n,t,i),e.elementType=Wd,e.lanes=a,e;case Vd:return e=ts(19,n,t,i),e.elementType=Vd,e.lanes=a,e;case Km:return Cu(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wm:l=10;break e;case Vm:l=9;break e;case Xf:l=11;break e;case Zf:l=14;break e;case ki:l=16,r=null;break e}throw Error(De(130,e==null?e:typeof e,""))}return t=ts(l,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Qi(e,t,n,r){return e=ts(7,e,r,t),e.lanes=n,e}function Cu(e,t,n,r){return e=ts(22,e,r,t),e.elementType=Km,e.lanes=n,e.stateNode={isHidden:!1},e}function Nd(e,t,n){return e=ts(6,e,null,t),e.lanes=n,e}function Sd(e,t,n){return t=ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gb(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ad(0),this.expirationTimes=ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ad(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tp(e,t,n,r,i,a,l,c,d){return e=new Gb(e,t,n,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ts(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(a),e}function Xb(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Dx(e){if(!e)return Li;e=e._reactInternals;e:{if(lo(e)!==e||e.tag!==1)throw Error(De(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(De(171))}if(e.tag===1){var n=e.type;if(Mr(n))return Dg(e,n,t)}return t}function Lx(e,t,n,r,i,a,l,c,d){return e=Tp(n,r,!0,e,i,a,l,c,d),e.context=Dx(null),n=e.current,r=gr(),i=Pi(n),a=ei(r,i),a.callback=t??null,$i(n,a,i),e.current.lanes=i,Nl(e,i,r),$r(e,r),e}function Eu(e,t,n,r){var i=t.current,a=gr(),l=Pi(i);return n=Dx(n),t.context===null?t.context=n:t.pendingContext=n,t=ei(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$i(i,t,l),e!==null&&(ys(e,i,l,a),Pc(e,i,l)),l}function fu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function B0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mp(e,t){B0(e,t),(e=e.alternate)&&B0(e,t)}function Zb(){return null}var Ox=typeof reportError=="function"?reportError:function(e){console.error(e)};function $p(e){this._internalRoot=e}Iu.prototype.render=$p.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(De(409));Eu(e,t,null,null)};Iu.prototype.unmount=$p.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;so(function(){Eu(null,e,null,null)}),t[ni]=null}};function Iu(e){this._internalRoot=e}Iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=gg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ji.length&&t!==0&&t<ji[n].priority;n++);ji.splice(n,0,e),n===0&&yg(e)}};function Ap(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H0(){}function Jb(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var y=fu(l);a.call(y)}}var l=Lx(t,r,e,0,null,!1,!1,"",H0);return e._reactRootContainer=l,e[ni]=l.current,gl(e.nodeType===8?e.parentNode:e),so(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var y=fu(d);c.call(y)}}var d=Tp(e,0,!1,null,null,!1,!1,"",H0);return e._reactRootContainer=d,e[ni]=d.current,gl(e.nodeType===8?e.parentNode:e),so(function(){Eu(t,d,n,r)}),d}function Mu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var c=i;i=function(){var d=fu(l);c.call(d)}}Eu(t,l,e,i)}else l=Jb(n,t,e,i,r);return fu(l)}hg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ya(t.pendingLanes);n!==0&&(Qf(t,n|1),$r(t,Dn()),!(Gt&6)&&(Qo=Dn()+500,Fi()))}break;case 13:so(function(){var r=ri(e,1);if(r!==null){var i=gr();ys(r,e,1,i)}}),Mp(e,1)}};ep=function(e){if(e.tag===13){var t=ri(e,134217728);if(t!==null){var n=gr();ys(t,e,134217728,n)}Mp(e,134217728)}};mg=function(e){if(e.tag===13){var t=Pi(e),n=ri(e,t);if(n!==null){var r=gr();ys(n,e,t,r)}Mp(e,t)}};gg=function(){return sn};xg=function(e,t){var n=sn;try{return sn=e,t()}finally{sn=n}};tf=function(e,t,n){switch(t){case"input":if(Gd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ku(r);if(!i)throw Error(De(90));Gm(r),Gd(r,i)}}}break;case"textarea":Zm(e,n);break;case"select":t=n.value,t!=null&&Fo(e,!!n.multiple,t,!1)}};rg=Sp;sg=so;var qb={usingClientEntryPoint:!1,Events:[Cl,Ao,ku,tg,ng,Sp]},Aa={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qb={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ag(e),e===null?null:e.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||Zb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{yu=yc.inject(Qb),$s=yc}catch{}}Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;Br.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ap(t))throw Error(De(200));return Xb(e,t,null,n)};Br.createRoot=function(e,t){if(!Ap(e))throw Error(De(299));var n=!1,r="",i=Ox;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Tp(e,1,!1,null,null,n,!1,r,i),e[ni]=t.current,gl(e.nodeType===8?e.parentNode:e),new $p(t)};Br.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(De(188)):(e=Object.keys(e).join(","),Error(De(268,e)));return e=ag(t),e=e===null?null:e.stateNode,e};Br.flushSync=function(e){return so(e)};Br.hydrate=function(e,t,n){if(!Tu(t))throw Error(De(200));return Mu(null,e,t,!0,n)};Br.hydrateRoot=function(e,t,n){if(!Ap(e))throw Error(De(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",l=Ox;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Lx(t,null,e,1,n??null,i,!1,a,l),e[ni]=t.current,gl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Iu(t)};Br.render=function(e,t,n){if(!Tu(t))throw Error(De(200));return Mu(null,e,t,!1,n)};Br.unmountComponentAtNode=function(e){if(!Tu(e))throw Error(De(40));return e._reactRootContainer?(so(function(){Mu(null,null,e,!1,function(){e._reactRootContainer=null,e[ni]=null})}),!0):!1};Br.unstable_batchedUpdates=Sp;Br.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Tu(n))throw Error(De(200));if(e==null||e._reactInternals===void 0)throw Error(De(38));return Mu(e,t,n,!1,r)};Br.version="18.3.1-next-f1338f8080-20240426";function Ux(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ux)}catch(e){console.error(e)}}Ux(),Um.exports=Br;var ew=Um.exports,W0=ew;Fd.createRoot=W0.createRoot,Fd.hydrateRoot=W0.hydrateRoot;function Pp(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let co=Pp();function Fx(e){co=e}const Bx=/[&<>"']/,tw=new RegExp(Bx.source,"g"),Hx=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,nw=new RegExp(Hx.source,"g"),rw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V0=e=>rw[e];function Lr(e,t){if(t){if(Bx.test(e))return e.replace(tw,V0)}else if(Hx.test(e))return e.replace(nw,V0);return e}const sw=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function iw(e){return e.replace(sw,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const ow=/(^|[^\[])\^/g;function ln(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const r={replace:(i,a)=>{let l=typeof a=="string"?a:a.source;return l=l.replace(ow,"$1"),n=n.replace(i,l),r},getRegex:()=>new RegExp(n,t)};return r}function K0(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const ol={exec:()=>null};function Y0(e,t){const n=e.replace(/\|/g,(a,l,c)=>{let d=!1,y=l;for(;--y>=0&&c[y]==="\\";)d=!d;return d?"|":" |"}),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function vc(e,t,n){const r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function aw(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function G0(e,t,n,r){const i=t.href,a=t.title?Lr(t.title):null,l=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const c={type:"link",raw:n,href:i,title:a,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,c}return{type:"image",raw:n,href:i,title:a,text:Lr(l)}}function lw(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(i=>{const a=i.match(/^\s+/);if(a===null)return i;const[l]=a;return l.length>=r.length?i.slice(r.length):i}).join(`
`)}class pu{constructor(t){gn(this,"options");gn(this,"rules");gn(this,"lexer");this.options=t||co}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:vc(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],i=lw(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const i=vc(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let r=n[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=vc(r.replace(/^ *>[ \t]?/gm,""),`
`);const i=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:n[0],tokens:a,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const i=r.length>1,a={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const l=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let c="",d="",y=!1;for(;t;){let j=!1;if(!(n=l.exec(t))||this.rules.block.hr.test(t))break;c=n[0],t=t.substring(c.length);let _=n[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),k=t.split(`
`,1)[0],b=0;this.options.pedantic?(b=2,d=_.trimStart()):(b=n[2].search(/[^ ]/),b=b>4?1:b,d=_.slice(b),b+=n[1].length);let E=!1;if(!_&&/^ *$/.test(k)&&(c+=k+`
`,t=t.substring(k.length+1),j=!0),!j){const x=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),g=new RegExp(`^ {0,${Math.min(3,b-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),N=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,b-1)}}#`);for(;t;){const F=t.split(`
`,1)[0];if(k=F,this.options.pedantic&&(k=k.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),N.test(k)||R.test(k)||x.test(k)||g.test(t))break;if(k.search(/[^ ]/)>=b||!k.trim())d+=`
`+k.slice(b);else{if(E||_.search(/[^ ]/)>=4||N.test(_)||R.test(_)||g.test(_))break;d+=`
`+k}!E&&!k.trim()&&(E=!0),c+=F+`
`,t=t.substring(F.length+1),_=k.slice(b)}}a.loose||(y?a.loose=!0:/\n *\n *$/.test(c)&&(y=!0));let z=null,A;this.options.gfm&&(z=/^\[[ xX]\] /.exec(d),z&&(A=z[0]!=="[ ] ",d=d.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:c,task:!!z,checked:A,loose:!1,text:d,tokens:[]}),a.raw+=c}a.items[a.items.length-1].raw=c.trimEnd(),a.items[a.items.length-1].text=d.trimEnd(),a.raw=a.raw.trimEnd();for(let j=0;j<a.items.length;j++)if(this.lexer.state.top=!1,a.items[j].tokens=this.lexer.blockTokens(a.items[j].text,[]),!a.loose){const _=a.items[j].tokens.filter(b=>b.type==="space"),k=_.length>0&&_.some(b=>/\n.*\n/.test(b.raw));a.loose=k}if(a.loose)for(let j=0;j<a.items.length;j++)a.items[j].loose=!0;return a}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),i=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:a}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const r=Y0(n[1]),i=n[2].replace(/^\||\| *$/g,"").split("|"),a=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],l={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const c of i)/^ *-+: *$/.test(c)?l.align.push("right"):/^ *:-+: *$/.test(c)?l.align.push("center"):/^ *:-+ *$/.test(c)?l.align.push("left"):l.align.push(null);for(const c of r)l.header.push({text:c,tokens:this.lexer.inline(c)});for(const c of a)l.rows.push(Y0(c,l.header.length).map(d=>({text:d,tokens:this.lexer.inline(d)})));return l}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Lr(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const l=vc(r.slice(0,-1),"\\");if((r.length-l.length)%2===0)return}else{const l=aw(n[2],"()");if(l>-1){const d=(n[0].indexOf("!")===0?5:4)+n[1].length+l;n[2]=n[2].substring(0,l),n[0]=n[0].substring(0,d).trim(),n[3]=""}}let i=n[2],a="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);l&&(i=l[1],a=l[3])}else a=n[3]?n[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),G0(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const i=(r[2]||r[1]).replace(/\s+/g," "),a=n[i.toLowerCase()];if(!a){const l=r[0].charAt(0);return{type:"text",raw:l,text:l}}return G0(r,a,r[0],this.lexer)}}emStrong(t,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const l=[...i[0]].length-1;let c,d,y=l,j=0;const _=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(_.lastIndex=0,n=n.slice(-1*t.length+l);(i=_.exec(n))!=null;){if(c=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!c)continue;if(d=[...c].length,i[3]||i[4]){y+=d;continue}else if((i[5]||i[6])&&l%3&&!((l+d)%3)){j+=d;continue}if(y-=d,y>0)continue;d=Math.min(d,d+y+j);const k=[...i[0]][0].length,b=t.slice(0,l+i.index+k+d);if(Math.min(l,d)%2){const z=b.slice(1,-1);return{type:"em",raw:b,text:z,tokens:this.lexer.inlineTokens(z)}}const E=b.slice(2,-2);return{type:"strong",raw:b,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const i=/[^ ]/.test(r),a=/^ /.test(r)&&/ $/.test(r);return i&&a&&(r=r.substring(1,r.length-1)),r=Lr(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,i;return n[2]==="@"?(r=Lr(n[1]),i="mailto:"+r):(r=Lr(n[1]),i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let i,a;if(n[2]==="@")i=Lr(n[0]),a="mailto:"+i;else{let l;do l=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(l!==n[0]);i=Lr(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=Lr(n[0]),{type:"text",raw:n[0],text:r}}}}const cw=/^(?: *(?:\n|$))+/,uw=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,dw=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Il=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fw=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Wx=/(?:[*+-]|\d{1,9}[.)])/,Vx=ln(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Wx).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Rp=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,pw=/^[^\n]+/,Dp=/(?!\s*\])(?:\\.|[^\[\]\\])+/,hw=ln(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Dp).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),mw=ln(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Wx).getRegex(),$u="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Lp=/\x3C!--(?:-?>|[\s\S]*?(?:-->|$))/,gw=ln("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Lp).replace("tag",$u).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Kx=ln(Rp).replace("hr",Il).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$u).getRegex(),xw=ln(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Kx).getRegex(),Op={blockquote:xw,code:uw,def:hw,fences:dw,heading:fw,hr:Il,html:gw,lheading:Vx,list:mw,newline:cw,paragraph:Kx,table:ol,text:pw},X0=ln("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Il).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$u).getRegex(),yw={...Op,table:X0,paragraph:ln(Rp).replace("hr",Il).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",X0).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$u).getRegex()},vw={...Op,html:ln(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Lp).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ol,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ln(Rp).replace("hr",Il).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Vx).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Yx=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,bw=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Gx=/^( {2,}|\\)\n(?!\s*$)/,ww=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Tl="\\p{P}\\p{S}",kw=ln(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Tl).getRegex(),zw=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,jw=ln(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Tl).getRegex(),_w=ln("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Tl).getRegex(),Nw=ln("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Tl).getRegex(),Sw=ln(/\\([punct])/,"gu").replace(/punct/g,Tl).getRegex(),Cw=ln(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ew=ln(Lp).replace("(?:-->|$)","-->").getRegex(),Iw=ln("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ew).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),hu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Tw=ln(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",hu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Xx=ln(/^!?\[(label)\]\[(ref)\]/).replace("label",hu).replace("ref",Dp).getRegex(),Zx=ln(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dp).getRegex(),Mw=ln("reflink|nolink(?!\\()","g").replace("reflink",Xx).replace("nolink",Zx).getRegex(),Up={_backpedal:ol,anyPunctuation:Sw,autolink:Cw,blockSkip:zw,br:Gx,code:bw,del:ol,emStrongLDelim:jw,emStrongRDelimAst:_w,emStrongRDelimUnd:Nw,escape:Yx,link:Tw,nolink:Zx,punctuation:kw,reflink:Xx,reflinkSearch:Mw,tag:Iw,text:ww,url:ol},$w={...Up,link:ln(/^!?\[(label)\]\((.*?)\)/).replace("label",hu).getRegex(),reflink:ln(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hu).getRegex()},Pf={...Up,escape:ln(Yx).replace("])","~|])").getRegex(),url:ln(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Aw={...Pf,br:ln(Gx).replace("{2,}","*").getRegex(),text:ln(Pf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},bc={normal:Op,gfm:yw,pedantic:vw},Pa={normal:Up,gfm:Pf,breaks:Aw,pedantic:$w};class Ts{constructor(t){gn(this,"tokens");gn(this,"options");gn(this,"state");gn(this,"tokenizer");gn(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||co,this.options.tokenizer=this.options.tokenizer||new pu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:bc.normal,inline:Pa.normal};this.options.pedantic?(n.block=bc.pedantic,n.inline=Pa.pedantic):this.options.gfm&&(n.block=bc.gfm,this.options.breaks?n.inline=Pa.breaks:n.inline=Pa.gfm),this.tokenizer.rules=n}static get rules(){return{block:bc,inline:Pa}}static lex(t,n){return new Ts(n).lex(t)}static lexInline(t,n){return new Ts(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(c,d,y)=>d+"    ".repeat(y.length));let r,i,a,l;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(c=>(r=c.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(a=t,this.options.extensions&&this.options.extensions.startBlock){let c=1/0;const d=t.slice(1);let y;this.options.extensions.startBlock.forEach(j=>{y=j.call({lexer:this},d),typeof y=="number"&&y>=0&&(c=Math.min(c,y))}),c<1/0&&c>=0&&(a=t.substring(0,c+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){i=n[n.length-1],l&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r),l=a.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,i,a,l=t,c,d,y;if(this.tokens.links){const j=Object.keys(this.tokens.links);if(j.length>0)for(;(c=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)j.includes(c[0].slice(c[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,c.index)+"["+"a".repeat(c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(c=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,c.index)+"["+"a".repeat(c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(c=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,c.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(d||(y=""),d=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(j=>(r=j.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,l,y)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),n.push(r);continue}if(a=t,this.options.extensions&&this.options.extensions.startInline){let j=1/0;const _=t.slice(1);let k;this.options.extensions.startInline.forEach(b=>{k=b.call({lexer:this},_),typeof k=="number"&&k>=0&&(j=Math.min(j,k))}),j<1/0&&j>=0&&(a=t.substring(0,j+1))}if(r=this.tokenizer.inlineText(a)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(y=r.raw.slice(-1)),d=!0,i=n[n.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(t){const j="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(j);break}else throw new Error(j)}}return n}}class mu{constructor(t){gn(this,"options");this.options=t||co}code(t,n,r){var a;const i=(a=(n||"").match(/^\S*/))==null?void 0:a[0];return t=t.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Lr(i)+'">'+(r?t:Lr(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:Lr(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,r){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,r){const i=n?"ol":"ul",a=n&&r!==1?' start="'+r+'"':"";return"<"+i+a+`>
`+t+"</"+i+`>
`}listitem(t,n,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){const i=K0(t);if(i===null)return r;t=i;let a='<a href="'+t+'"';return n&&(a+=' title="'+n+'"'),a+=">"+r+"</a>",a}image(t,n,r){const i=K0(t);if(i===null)return r;t=i;let a=`<img src="${t}" alt="${r}"`;return n&&(a+=` title="${n}"`),a+=">",a}text(t){return t}}class Fp{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class Ms{constructor(t){gn(this,"options");gn(this,"renderer");gn(this,"textRenderer");this.options=t||co,this.options.renderer=this.options.renderer||new mu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Fp}static parse(t,n){return new Ms(n).parse(t)}static parseInline(t,n){return new Ms(n).parseInline(t)}parse(t,n=!0){let r="";for(let i=0;i<t.length;i++){const a=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const l=a,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){r+=c||"";continue}}switch(a.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const l=a;r+=this.renderer.heading(this.parseInline(l.tokens),l.depth,iw(this.parseInline(l.tokens,this.textRenderer)));continue}case"code":{const l=a;r+=this.renderer.code(l.text,l.lang,!!l.escaped);continue}case"table":{const l=a;let c="",d="";for(let j=0;j<l.header.length;j++)d+=this.renderer.tablecell(this.parseInline(l.header[j].tokens),{header:!0,align:l.align[j]});c+=this.renderer.tablerow(d);let y="";for(let j=0;j<l.rows.length;j++){const _=l.rows[j];d="";for(let k=0;k<_.length;k++)d+=this.renderer.tablecell(this.parseInline(_[k].tokens),{header:!1,align:l.align[k]});y+=this.renderer.tablerow(d)}r+=this.renderer.table(c,y);continue}case"blockquote":{const l=a,c=this.parse(l.tokens);r+=this.renderer.blockquote(c);continue}case"list":{const l=a,c=l.ordered,d=l.start,y=l.loose;let j="";for(let _=0;_<l.items.length;_++){const k=l.items[_],b=k.checked,E=k.task;let z="";if(k.task){const A=this.renderer.checkbox(!!b);y?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=A+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=A+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:A+" "}):z+=A+" "}z+=this.parse(k.tokens,y),j+=this.renderer.listitem(z,E,!!b)}r+=this.renderer.list(j,c,d);continue}case"html":{const l=a;r+=this.renderer.html(l.text,l.block);continue}case"paragraph":{const l=a;r+=this.renderer.paragraph(this.parseInline(l.tokens));continue}case"text":{let l=a,c=l.tokens?this.parseInline(l.tokens):l.text;for(;i+1<t.length&&t[i+1].type==="text";)l=t[++i],c+=`
`+(l.tokens?this.parseInline(l.tokens):l.text);r+=n?this.renderer.paragraph(c):c;continue}default:{const l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}parseInline(t,n){n=n||this.renderer;let r="";for(let i=0;i<t.length;i++){const a=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=l||"";continue}}switch(a.type){case"escape":{const l=a;r+=n.text(l.text);break}case"html":{const l=a;r+=n.html(l.text);break}case"link":{const l=a;r+=n.link(l.href,l.title,this.parseInline(l.tokens,n));break}case"image":{const l=a;r+=n.image(l.href,l.title,l.text);break}case"strong":{const l=a;r+=n.strong(this.parseInline(l.tokens,n));break}case"em":{const l=a;r+=n.em(this.parseInline(l.tokens,n));break}case"codespan":{const l=a;r+=n.codespan(l.text);break}case"br":{r+=n.br();break}case"del":{const l=a;r+=n.del(this.parseInline(l.tokens,n));break}case"text":{const l=a;r+=n.text(l.text);break}default:{const l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}}class al{constructor(t){gn(this,"options");this.options=t||co}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}gn(al,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var oo,Rf,Jx;class Pw{constructor(...t){Ph(this,oo);gn(this,"defaults",Pp());gn(this,"options",this.setOptions);gn(this,"parse",tc(this,oo,Rf).call(this,Ts.lex,Ms.parse));gn(this,"parseInline",tc(this,oo,Rf).call(this,Ts.lexInline,Ms.parseInline));gn(this,"Parser",Ms);gn(this,"Renderer",mu);gn(this,"TextRenderer",Fp);gn(this,"Lexer",Ts);gn(this,"Tokenizer",pu);gn(this,"Hooks",al);this.use(...t)}walkTokens(t,n){var i,a;let r=[];for(const l of t)switch(r=r.concat(n.call(this,l)),l.type){case"table":{const c=l;for(const d of c.header)r=r.concat(this.walkTokens(d.tokens,n));for(const d of c.rows)for(const y of d)r=r.concat(this.walkTokens(y.tokens,n));break}case"list":{const c=l;r=r.concat(this.walkTokens(c.items,n));break}default:{const c=l;(a=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&a[c.type]?this.defaults.extensions.childTokens[c.type].forEach(d=>{const y=c[d].flat(1/0);r=r.concat(this.walkTokens(y,n))}):c.tokens&&(r=r.concat(this.walkTokens(c.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const l=n.renderers[a.name];l?n.renderers[a.name]=function(...c){let d=a.renderer.apply(this,c);return d===!1&&(d=l.apply(this,c)),d}:n.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const l=n[a.level];l?l.unshift(a.tokenizer):n[a.level]=[a.tokenizer],a.start&&(a.level==="block"?n.startBlock?n.startBlock.push(a.start):n.startBlock=[a.start]:a.level==="inline"&&(n.startInline?n.startInline.push(a.start):n.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(n.childTokens[a.name]=a.childTokens)}),i.extensions=n),r.renderer){const a=this.defaults.renderer||new mu(this.defaults);for(const l in r.renderer){if(!(l in a))throw new Error(`renderer '${l}' does not exist`);if(l==="options")continue;const c=l,d=r.renderer[c],y=a[c];a[c]=(...j)=>{let _=d.apply(a,j);return _===!1&&(_=y.apply(a,j)),_||""}}i.renderer=a}if(r.tokenizer){const a=this.defaults.tokenizer||new pu(this.defaults);for(const l in r.tokenizer){if(!(l in a))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;const c=l,d=r.tokenizer[c],y=a[c];a[c]=(...j)=>{let _=d.apply(a,j);return _===!1&&(_=y.apply(a,j)),_}}i.tokenizer=a}if(r.hooks){const a=this.defaults.hooks||new al;for(const l in r.hooks){if(!(l in a))throw new Error(`hook '${l}' does not exist`);if(l==="options")continue;const c=l,d=r.hooks[c],y=a[c];al.passThroughHooks.has(l)?a[c]=j=>{if(this.defaults.async)return Promise.resolve(d.call(a,j)).then(k=>y.call(a,k));const _=d.call(a,j);return y.call(a,_)}:a[c]=(...j)=>{let _=d.apply(a,j);return _===!1&&(_=y.apply(a,j)),_}}i.hooks=a}if(r.walkTokens){const a=this.defaults.walkTokens,l=r.walkTokens;i.walkTokens=function(c){let d=[];return d.push(l.call(this,c)),a&&(d=d.concat(a.call(this,c))),d}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Ts.lex(t,n??this.defaults)}parser(t,n){return Ms.parse(t,n??this.defaults)}}oo=new WeakSet,Rf=function(t,n){return(r,i)=>{const a={...i},l={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(l.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),l.async=!0);const c=tc(this,oo,Jx).call(this,!!l.silent,!!l.async);if(typeof r>"u"||r===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(l.hooks&&(l.hooks.options=l),l.async)return Promise.resolve(l.hooks?l.hooks.preprocess(r):r).then(d=>t(d,l)).then(d=>l.hooks?l.hooks.processAllTokens(d):d).then(d=>l.walkTokens?Promise.all(this.walkTokens(d,l.walkTokens)).then(()=>d):d).then(d=>n(d,l)).then(d=>l.hooks?l.hooks.postprocess(d):d).catch(c);try{l.hooks&&(r=l.hooks.preprocess(r));let d=t(r,l);l.hooks&&(d=l.hooks.processAllTokens(d)),l.walkTokens&&this.walkTokens(d,l.walkTokens);let y=n(d,l);return l.hooks&&(y=l.hooks.postprocess(y)),y}catch(d){return c(d)}}},Jx=function(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+Lr(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}};const io=new Pw;function rn(e,t){return io.parse(e,t)}rn.options=rn.setOptions=function(e){return io.setOptions(e),rn.defaults=io.defaults,Fx(rn.defaults),rn};rn.getDefaults=Pp;rn.defaults=co;rn.use=function(...e){return io.use(...e),rn.defaults=io.defaults,Fx(rn.defaults),rn};rn.walkTokens=function(e,t){return io.walkTokens(e,t)};rn.parseInline=io.parseInline;rn.Parser=Ms;rn.parser=Ms.parse;rn.Renderer=mu;rn.TextRenderer=Fp;rn.Lexer=Ts;rn.lexer=Ts.lex;rn.Tokenizer=pu;rn.Hooks=al;rn.parse=rn;rn.options;rn.setOptions;rn.use;rn.walkTokens;rn.parseInline;Ms.parse;Ts.lex;/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:qx,setPrototypeOf:Z0,isFrozen:Rw,getPrototypeOf:Dw,getOwnPropertyDescriptor:Lw}=Object;let{freeze:xr,seal:is,create:Df}=Object,{apply:Lf,construct:Of}=typeof Reflect<"u"&&Reflect;xr||(xr=function(t){return t});is||(is=function(t){return t});Lf||(Lf=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return t.apply(n,i)});Of||(Of=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new t(...r)});const wc=yr(Array.prototype.forEach),Ow=yr(Array.prototype.lastIndexOf),J0=yr(Array.prototype.pop),Ra=yr(Array.prototype.push),Uw=yr(Array.prototype.splice),Bc=yr(String.prototype.toLowerCase),Cd=yr(String.prototype.toString),Ed=yr(String.prototype.match),Da=yr(String.prototype.replace),Fw=yr(String.prototype.indexOf),Bw=yr(String.prototype.trim),ps=yr(Object.prototype.hasOwnProperty),pr=yr(RegExp.prototype.test),La=Hw(TypeError);function yr(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Lf(e,t,r)}}function Hw(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Of(e,n)}}function Lt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bc;Z0&&Z0(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const a=n(i);a!==i&&(Rw(t)||(t[r]=a),i=a)}e[i]=!0}return e}function Ww(e){for(let t=0;t<e.length;t++)ps(e,t)||(e[t]=null);return e}function Ns(e){const t=Df(null);for(const[n,r]of qx(e))ps(e,n)&&(Array.isArray(r)?t[n]=Ww(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Ns(r):t[n]=r);return t}function Oa(e,t){for(;e!==null;){const r=Lw(e,t);if(r){if(r.get)return yr(r.get);if(typeof r.value=="function")return yr(r.value)}e=Dw(e)}function n(){return null}return n}const q0=xr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Id=xr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Td=xr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Vw=xr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Md=xr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Kw=xr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Q0=xr(["#text"]),em=xr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$d=xr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tm=xr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),kc=xr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Yw=is(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Gw=is(/<%[\w\W]*|[\w\W]*%>/gm),Xw=is(/\$\{[\w\W]*/gm),Zw=is(/^data-[\-\w.\u00B7-\uFFFF]+$/),Jw=is(/^aria-[\-\w]+$/),Qx=is(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qw=is(/^(?:\w+script|data):/i),Qw=is(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ey=is(/^html$/i),e2=is(/^[a-z][.\w]*(-[.\w]+)+$/i);var nm=Object.freeze({__proto__:null,ARIA_ATTR:Jw,ATTR_WHITESPACE:Qw,CUSTOM_ELEMENT:e2,DATA_ATTR:Zw,DOCTYPE_NAME:ey,ERB_EXPR:Gw,IS_ALLOWED_URI:Qx,IS_SCRIPT_OR_DATA:qw,MUSTACHE_EXPR:Yw,TMPLIT_EXPR:Xw});const Ua={element:1,text:3,progressingInstruction:7,comment:8,document:9},t2=function(){return typeof window>"u"?null:window},n2=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},rm=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ty(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t2();const t=pt=>ty(pt);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Ua.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:l,Node:c,Element:d,NodeFilter:y,NamedNodeMap:j=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:_,DOMParser:k,trustedTypes:b}=e,E=d.prototype,z=Oa(E,"cloneNode"),A=Oa(E,"remove"),x=Oa(E,"nextSibling"),g=Oa(E,"childNodes"),N=Oa(E,"parentNode");if(typeof l=="function"){const pt=n.createElement("template");pt.content&&pt.content.ownerDocument&&(n=pt.content.ownerDocument)}let R,F="";const{implementation:ie,createNodeIterator:J,createDocumentFragment:ue,getElementsByTagName:le}=n,{importNode:me}=r;let Fe=rm();t.isSupported=typeof qx=="function"&&typeof N=="function"&&ie&&ie.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:xe,TMPLIT_EXPR:v,DATA_ATTR:ge,ARIA_ATTR:tt,IS_SCRIPT_OR_DATA:ze,ATTR_WHITESPACE:be,CUSTOM_ELEMENT:ae}=nm;let{IS_ALLOWED_URI:Ae}=nm,X=null;const oe=Lt({},[...q0,...Id,...Td,...Md,...Q0]);let We=null;const Ye=Lt({},[...em,...$d,...tm,...kc]);let Ee=Object.seal(Df(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ot=null,Xt=null;const St=Object.seal(Df(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ht=!0,vn=!0,Vt=!1,Jn=!0,Ln=!1,w=!0,je=!1,he=!1,U=!1,D=!1,ee=!1,_e=!1,Ie=!0,q=!1;const ye="user-content-";let Ze=!0,Pe=!1,st={},bt=null;const Et=Lt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let sr=null;const Ps=Lt({},["audio","video","img","source","image","track"]);let dr=null;const Rs=Lt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Mt="http://www.w3.org/1998/Math/MathML",qn="http://www.w3.org/2000/svg",Nn="http://www.w3.org/1999/xhtml";let Sn=Nn,Ar=!1,oi=null;const Ds=Lt({},[Mt,qn,Nn],Cd);let wr=Lt({},["mi","mo","mn","ms","mtext"]),Ls=Lt({},["annotation-xml"]);const Os=Lt({},["title","style","font","a","script"]);let Qn=null;const bs=["application/xhtml+xml","text/html"],ai="text/html";let Mn=null,os=null;const Ml=n.createElement("form"),kr=function(H){return H instanceof RegExp||H instanceof Function},Un=function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(os&&os===H)){if((!H||typeof H!="object")&&(H={}),H=Ns(H),Qn=bs.indexOf(H.PARSER_MEDIA_TYPE)===-1?ai:H.PARSER_MEDIA_TYPE,Mn=Qn==="application/xhtml+xml"?Cd:Bc,X=ps(H,"ALLOWED_TAGS")?Lt({},H.ALLOWED_TAGS,Mn):oe,We=ps(H,"ALLOWED_ATTR")?Lt({},H.ALLOWED_ATTR,Mn):Ye,oi=ps(H,"ALLOWED_NAMESPACES")?Lt({},H.ALLOWED_NAMESPACES,Cd):Ds,dr=ps(H,"ADD_URI_SAFE_ATTR")?Lt(Ns(Rs),H.ADD_URI_SAFE_ATTR,Mn):Rs,sr=ps(H,"ADD_DATA_URI_TAGS")?Lt(Ns(Ps),H.ADD_DATA_URI_TAGS,Mn):Ps,bt=ps(H,"FORBID_CONTENTS")?Lt({},H.FORBID_CONTENTS,Mn):Et,Ot=ps(H,"FORBID_TAGS")?Lt({},H.FORBID_TAGS,Mn):Ns({}),Xt=ps(H,"FORBID_ATTR")?Lt({},H.FORBID_ATTR,Mn):Ns({}),st=ps(H,"USE_PROFILES")?H.USE_PROFILES:!1,Ht=H.ALLOW_ARIA_ATTR!==!1,vn=H.ALLOW_DATA_ATTR!==!1,Vt=H.ALLOW_UNKNOWN_PROTOCOLS||!1,Jn=H.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ln=H.SAFE_FOR_TEMPLATES||!1,w=H.SAFE_FOR_XML!==!1,je=H.WHOLE_DOCUMENT||!1,D=H.RETURN_DOM||!1,ee=H.RETURN_DOM_FRAGMENT||!1,_e=H.RETURN_TRUSTED_TYPE||!1,U=H.FORCE_BODY||!1,Ie=H.SANITIZE_DOM!==!1,q=H.SANITIZE_NAMED_PROPS||!1,Ze=H.KEEP_CONTENT!==!1,Pe=H.IN_PLACE||!1,Ae=H.ALLOWED_URI_REGEXP||Qx,Sn=H.NAMESPACE||Nn,wr=H.MATHML_TEXT_INTEGRATION_POINTS||wr,Ls=H.HTML_INTEGRATION_POINTS||Ls,Ee=H.CUSTOM_ELEMENT_HANDLING||{},H.CUSTOM_ELEMENT_HANDLING&&kr(H.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ee.tagNameCheck=H.CUSTOM_ELEMENT_HANDLING.tagNameCheck),H.CUSTOM_ELEMENT_HANDLING&&kr(H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ee.attributeNameCheck=H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),H.CUSTOM_ELEMENT_HANDLING&&typeof H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ee.allowCustomizedBuiltInElements=H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ln&&(vn=!1),ee&&(D=!0),st&&(X=Lt({},Q0),We=[],st.html===!0&&(Lt(X,q0),Lt(We,em)),st.svg===!0&&(Lt(X,Id),Lt(We,$d),Lt(We,kc)),st.svgFilters===!0&&(Lt(X,Td),Lt(We,$d),Lt(We,kc)),st.mathMl===!0&&(Lt(X,Md),Lt(We,tm),Lt(We,kc))),H.ADD_TAGS&&(typeof H.ADD_TAGS=="function"?St.tagCheck=H.ADD_TAGS:(X===oe&&(X=Ns(X)),Lt(X,H.ADD_TAGS,Mn))),H.ADD_ATTR&&(typeof H.ADD_ATTR=="function"?St.attributeCheck=H.ADD_ATTR:(We===Ye&&(We=Ns(We)),Lt(We,H.ADD_ATTR,Mn))),H.ADD_URI_SAFE_ATTR&&Lt(dr,H.ADD_URI_SAFE_ATTR,Mn),H.FORBID_CONTENTS&&(bt===Et&&(bt=Ns(bt)),Lt(bt,H.FORBID_CONTENTS,Mn)),H.ADD_FORBID_CONTENTS&&(bt===Et&&(bt=Ns(bt)),Lt(bt,H.ADD_FORBID_CONTENTS,Mn)),Ze&&(X["#text"]=!0),je&&Lt(X,["html","head","body"]),X.table&&(Lt(X,["tbody"]),delete Ot.tbody),H.TRUSTED_TYPES_POLICY){if(typeof H.TRUSTED_TYPES_POLICY.createHTML!="function")throw La('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof H.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw La('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=H.TRUSTED_TYPES_POLICY,F=R.createHTML("")}else R===void 0&&(R=n2(b,i)),R!==null&&typeof F=="string"&&(F=R.createHTML(""));xr&&xr(H),os=H}},li=Lt({},[...Id,...Td,...Vw]),ra=Lt({},[...Md,...Kw]),uo=function(H){let $e=N(H);(!$e||!$e.tagName)&&($e={namespaceURI:Sn,tagName:"template"});const Le=Bc(H.tagName),Ut=Bc($e.tagName);return oi[H.namespaceURI]?H.namespaceURI===qn?$e.namespaceURI===Nn?Le==="svg":$e.namespaceURI===Mt?Le==="svg"&&(Ut==="annotation-xml"||wr[Ut]):!!li[Le]:H.namespaceURI===Mt?$e.namespaceURI===Nn?Le==="math":$e.namespaceURI===qn?Le==="math"&&Ls[Ut]:!!ra[Le]:H.namespaceURI===Nn?$e.namespaceURI===qn&&!Ls[Ut]||$e.namespaceURI===Mt&&!wr[Ut]?!1:!ra[Le]&&(Os[Le]||!li[Le]):!!(Qn==="application/xhtml+xml"&&oi[H.namespaceURI]):!1},zr=function(H){Ra(t.removed,{element:H});try{N(H).removeChild(H)}catch{A(H)}},ws=function(H,$e){try{Ra(t.removed,{attribute:$e.getAttributeNode(H),from:$e})}catch{Ra(t.removed,{attribute:null,from:$e})}if($e.removeAttribute(H),H==="is")if(D||ee)try{zr($e)}catch{}else try{$e.setAttribute(H,"")}catch{}},$l=function(H){let $e=null,Le=null;if(U)H="<remove></remove>"+H;else{const Kt=Ed(H,/^[\r\n\t ]+/);Le=Kt&&Kt[0]}Qn==="application/xhtml+xml"&&Sn===Nn&&(H='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+H+"</body></html>");const Ut=R?R.createHTML(H):H;if(Sn===Nn)try{$e=new k().parseFromString(Ut,Qn)}catch{}if(!$e||!$e.documentElement){$e=ie.createDocument(Sn,"template",null);try{$e.documentElement.innerHTML=Ar?F:Ut}catch{}}const Qt=$e.body||$e.documentElement;return H&&Le&&Qt.insertBefore(n.createTextNode(Le),Qt.childNodes[0]||null),Sn===Nn?le.call($e,je?"html":"body")[0]:je?$e.documentElement:Qt},fo=function(H){return J.call(H.ownerDocument||H,H,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},sa=function(H){return H instanceof _&&(typeof H.nodeName!="string"||typeof H.textContent!="string"||typeof H.removeChild!="function"||!(H.attributes instanceof j)||typeof H.removeAttribute!="function"||typeof H.setAttribute!="function"||typeof H.namespaceURI!="string"||typeof H.insertBefore!="function"||typeof H.hasChildNodes!="function")},Us=function(H){return typeof c=="function"&&H instanceof c};function fr(pt,H,$e){wc(pt,Le=>{Le.call(t,H,$e,os)})}const po=function(H){let $e=null;if(fr(Fe.beforeSanitizeElements,H,null),sa(H))return zr(H),!0;const Le=Mn(H.nodeName);if(fr(Fe.uponSanitizeElement,H,{tagName:Le,allowedTags:X}),w&&H.hasChildNodes()&&!Us(H.firstElementChild)&&pr(/<[/\w!]/g,H.innerHTML)&&pr(/<[/\w!]/g,H.textContent)||H.nodeType===Ua.progressingInstruction||w&&H.nodeType===Ua.comment&&pr(/<[/\w]/g,H.data))return zr(H),!0;if(!(St.tagCheck instanceof Function&&St.tagCheck(Le))&&(!X[Le]||Ot[Le])){if(!Ot[Le]&&er(Le)&&(Ee.tagNameCheck instanceof RegExp&&pr(Ee.tagNameCheck,Le)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Le)))return!1;if(Ze&&!bt[Le]){const Ut=N(H)||H.parentNode,Qt=g(H)||H.childNodes;if(Qt&&Ut){const Kt=Qt.length;for(let Vn=Kt-1;Vn>=0;--Vn){const $n=z(Qt[Vn],!0);$n.__removalCount=(H.__removalCount||0)+1,Ut.insertBefore($n,x(H))}}}return zr(H),!0}return H instanceof d&&!uo(H)||(Le==="noscript"||Le==="noembed"||Le==="noframes")&&pr(/<\/no(script|embed|frames)/i,H.innerHTML)?(zr(H),!0):(Ln&&H.nodeType===Ua.text&&($e=H.textContent,wc([V,xe,v],Ut=>{$e=Da($e,Ut," ")}),H.textContent!==$e&&(Ra(t.removed,{element:H.cloneNode()}),H.textContent=$e)),fr(Fe.afterSanitizeElements,H,null),!1)},ci=function(H,$e,Le){if(Ie&&($e==="id"||$e==="name")&&(Le in n||Le in Ml))return!1;if(!(vn&&!Xt[$e]&&pr(ge,$e))){if(!(Ht&&pr(tt,$e))){if(!(St.attributeCheck instanceof Function&&St.attributeCheck($e,H))){if(!We[$e]||Xt[$e]){if(!(er(H)&&(Ee.tagNameCheck instanceof RegExp&&pr(Ee.tagNameCheck,H)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(H))&&(Ee.attributeNameCheck instanceof RegExp&&pr(Ee.attributeNameCheck,$e)||Ee.attributeNameCheck instanceof Function&&Ee.attributeNameCheck($e,H))||$e==="is"&&Ee.allowCustomizedBuiltInElements&&(Ee.tagNameCheck instanceof RegExp&&pr(Ee.tagNameCheck,Le)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Le))))return!1}else if(!dr[$e]){if(!pr(Ae,Da(Le,be,""))){if(!(($e==="src"||$e==="xlink:href"||$e==="href")&&H!=="script"&&Fw(Le,"data:")===0&&sr[H])){if(!(Vt&&!pr(ze,Da(Le,be,"")))){if(Le)return!1}}}}}}}return!0},er=function(H){return H!=="annotation-xml"&&Ed(H,ae)},ui=function(H){fr(Fe.beforeSanitizeAttributes,H,null);const{attributes:$e}=H;if(!$e||sa(H))return;const Le={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:We,forceKeepAttr:void 0};let Ut=$e.length;for(;Ut--;){const Qt=$e[Ut],{name:Kt,namespaceURI:Vn,value:$n}=Qt,Pr=Mn(Kt),Wr=$n;let Kn=Kt==="value"?Wr:Bw(Wr);if(Le.attrName=Pr,Le.attrValue=Kn,Le.keepAttr=!0,Le.forceKeepAttr=void 0,fr(Fe.uponSanitizeAttribute,H,Le),Kn=Le.attrValue,q&&(Pr==="id"||Pr==="name")&&(ws(Kt,H),Kn=ye+Kn),w&&pr(/((--!?|])>)|<\/(style|title|textarea)/i,Kn)){ws(Kt,H);continue}if(Pr==="attributename"&&Ed(Kn,"href")){ws(Kt,H);continue}if(Le.forceKeepAttr)continue;if(!Le.keepAttr){ws(Kt,H);continue}if(!Jn&&pr(/\/>/i,Kn)){ws(Kt,H);continue}Ln&&wc([V,xe,v],as=>{Kn=Da(Kn,as," ")});const ia=Mn(H.nodeName);if(!ci(ia,Pr,Kn)){ws(Kt,H);continue}if(R&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Vn)switch(b.getAttributeType(ia,Pr)){case"TrustedHTML":{Kn=R.createHTML(Kn);break}case"TrustedScriptURL":{Kn=R.createScriptURL(Kn);break}}if(Kn!==Wr)try{Vn?H.setAttributeNS(Vn,Kt,Kn):H.setAttribute(Kt,Kn),sa(H)?zr(H):J0(t.removed)}catch{ws(Kt,H)}}fr(Fe.afterSanitizeAttributes,H,null)},di=function pt(H){let $e=null;const Le=fo(H);for(fr(Fe.beforeSanitizeShadowDOM,H,null);$e=Le.nextNode();)fr(Fe.uponSanitizeShadowNode,$e,null),po($e),ui($e),$e.content instanceof a&&pt($e.content);fr(Fe.afterSanitizeShadowDOM,H,null)};return t.sanitize=function(pt){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$e=null,Le=null,Ut=null,Qt=null;if(Ar=!pt,Ar&&(pt="\x3C!-->"),typeof pt!="string"&&!Us(pt))if(typeof pt.toString=="function"){if(pt=pt.toString(),typeof pt!="string")throw La("dirty is not a string, aborting")}else throw La("toString is not a function");if(!t.isSupported)return pt;if(he||Un(H),t.removed=[],typeof pt=="string"&&(Pe=!1),Pe){if(pt.nodeName){const $n=Mn(pt.nodeName);if(!X[$n]||Ot[$n])throw La("root node is forbidden and cannot be sanitized in-place")}}else if(pt instanceof c)$e=$l("\x3C!---->"),Le=$e.ownerDocument.importNode(pt,!0),Le.nodeType===Ua.element&&Le.nodeName==="BODY"||Le.nodeName==="HTML"?$e=Le:$e.appendChild(Le);else{if(!D&&!Ln&&!je&&pt.indexOf("<")===-1)return R&&_e?R.createHTML(pt):pt;if($e=$l(pt),!$e)return D?null:_e?F:""}$e&&U&&zr($e.firstChild);const Kt=fo(Pe?pt:$e);for(;Ut=Kt.nextNode();)po(Ut),ui(Ut),Ut.content instanceof a&&di(Ut.content);if(Pe)return pt;if(D){if(ee)for(Qt=ue.call($e.ownerDocument);$e.firstChild;)Qt.appendChild($e.firstChild);else Qt=$e;return(We.shadowroot||We.shadowrootmode)&&(Qt=me.call(r,Qt,!0)),Qt}let Vn=je?$e.outerHTML:$e.innerHTML;return je&&X["!doctype"]&&$e.ownerDocument&&$e.ownerDocument.doctype&&$e.ownerDocument.doctype.name&&pr(ey,$e.ownerDocument.doctype.name)&&(Vn="<!DOCTYPE "+$e.ownerDocument.doctype.name+`>
`+Vn),Ln&&wc([V,xe,v],$n=>{Vn=Da(Vn,$n," ")}),R&&_e?R.createHTML(Vn):Vn},t.setConfig=function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Un(pt),he=!0},t.clearConfig=function(){os=null,he=!1},t.isValidAttribute=function(pt,H,$e){os||Un({});const Le=Mn(pt),Ut=Mn(H);return ci(Le,Ut,$e)},t.addHook=function(pt,H){typeof H=="function"&&Ra(Fe[pt],H)},t.removeHook=function(pt,H){if(H!==void 0){const $e=Ow(Fe[pt],H);return $e===-1?void 0:Uw(Fe[pt],$e,1)[0]}return J0(Fe[pt])},t.removeHooks=function(pt){Fe[pt]=[]},t.removeAllHooks=function(){Fe=rm()},t}var r2=ty();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),lt=(e,t)=>{const n=B.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:d,...y},j)=>B.createElement("svg",{ref:j,...s2,width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${i2(e)}`,c].join(" "),...y},[...t.map(([_,k])=>B.createElement(_,k)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=lt("ArrowRightSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=lt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=lt("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=lt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=lt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=lt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=lt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=lt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=lt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=lt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=lt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=lt("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=lt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=lt("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=lt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=lt("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=lt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=lt("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=lt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=lt("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=lt("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=lt("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"1vg67v"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=lt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=lt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=lt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=lt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=lt("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=lt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=lt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=lt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=lt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=lt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=lt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=lt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=lt("Mic2",[["path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12",key:"zoua8r"}],["circle",{cx:"17",cy:"7",r:"5",key:"1fomce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=lt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=lt("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=lt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=lt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=lt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=lt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=lt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=lt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=lt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=lt("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=lt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=lt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=lt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=lt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=lt("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=lt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=lt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=lt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=lt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=lt("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=lt("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=lt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=lt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=lt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Sc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sy={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,a){function l(y,j){if(!i[y]){if(!r[y]){var _=typeof Sc=="function"&&Sc;if(!j&&_)return _(y,!0);if(c)return c(y,!0);var k=new Error("Cannot find module '"+y+"'");throw k.code="MODULE_NOT_FOUND",k}var b=i[y]={exports:{}};r[y][0].call(b.exports,function(E){var z=r[y][1][E];return l(z||E)},b,b.exports,n,r,i,a)}return i[y].exports}for(var c=typeof Sc=="function"&&Sc,d=0;d<a.length;d++)l(a[d]);return l}({1:[function(n,r,i){var a=n("./utils"),l=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(d){for(var y,j,_,k,b,E,z,A=[],x=0,g=d.length,N=g,R=a.getTypeOf(d)!=="string";x<d.length;)N=g-x,_=R?(y=d[x++],j=x<g?d[x++]:0,x<g?d[x++]:0):(y=d.charCodeAt(x++),j=x<g?d.charCodeAt(x++):0,x<g?d.charCodeAt(x++):0),k=y>>2,b=(3&y)<<4|j>>4,E=1<N?(15&j)<<2|_>>6:64,z=2<N?63&_:64,A.push(c.charAt(k)+c.charAt(b)+c.charAt(E)+c.charAt(z));return A.join("")},i.decode=function(d){var y,j,_,k,b,E,z=0,A=0,x="data:";if(d.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var g,N=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&N--,d.charAt(d.length-2)===c.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=l.uint8array?new Uint8Array(0|N):new Array(0|N);z<d.length;)y=c.indexOf(d.charAt(z++))<<2|(k=c.indexOf(d.charAt(z++)))>>4,j=(15&k)<<4|(b=c.indexOf(d.charAt(z++)))>>2,_=(3&b)<<6|(E=c.indexOf(d.charAt(z++))),g[A++]=y,b!==64&&(g[A++]=j),E!==64&&(g[A++]=_);return g}},{"./support":30,"./utils":32}],2:[function(n,r,i){var a=n("./external"),l=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function y(j,_,k,b,E){this.compressedSize=j,this.uncompressedSize=_,this.crc32=k,this.compression=b,this.compressedContent=E}y.prototype={getContentWorker:function(){var j=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),_=this;return j.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),j},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(j,_,k){return j.pipe(new c).pipe(new d("uncompressedSize")).pipe(_.compressWorker(k)).pipe(new d("compressedSize")).withStreamInfo("compression",_)},r.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var a=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var a=n("./utils"),l=function(){for(var c,d=[],y=0;y<256;y++){c=y;for(var j=0;j<8;j++)c=1&c?3988292384^c>>>1:c>>>1;d[y]=c}return d}();r.exports=function(c,d){return c!==void 0&&c.length?a.getTypeOf(c)!=="string"?function(y,j,_,k){var b=l,E=k+_;y^=-1;for(var z=k;z<E;z++)y=y>>>8^b[255&(y^j[z])];return-1^y}(0|d,c,c.length,0):function(y,j,_,k){var b=l,E=k+_;y^=-1;for(var z=k;z<E;z++)y=y>>>8^b[255&(y^j.charCodeAt(z))];return-1^y}(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var a=null;a=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:a}},{lie:37}],7:[function(n,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),c=n("./utils"),d=n("./stream/GenericWorker"),y=a?"uint8array":"array";function j(_,k){d.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=k,this.meta={}}i.magic="\b\0",c.inherits(j,d),j.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(y,_.data),!1)},j.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},j.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},j.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(k){_.push({data:k,meta:_.meta})}},i.compressWorker=function(_){return new j("Deflate",_)},i.uncompressWorker=function(){return new j("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function a(b,E){var z,A="";for(z=0;z<E;z++)A+=String.fromCharCode(255&b),b>>>=8;return A}function l(b,E,z,A,x,g){var N,R,F=b.file,ie=b.compression,J=g!==y.utf8encode,ue=c.transformTo("string",g(F.name)),le=c.transformTo("string",y.utf8encode(F.name)),me=F.comment,Fe=c.transformTo("string",g(me)),V=c.transformTo("string",y.utf8encode(me)),xe=le.length!==F.name.length,v=V.length!==me.length,ge="",tt="",ze="",be=F.dir,ae=F.date,Ae={crc32:0,compressedSize:0,uncompressedSize:0};E&&!z||(Ae.crc32=b.crc32,Ae.compressedSize=b.compressedSize,Ae.uncompressedSize=b.uncompressedSize);var X=0;E&&(X|=8),J||!xe&&!v||(X|=2048);var oe=0,We=0;be&&(oe|=16),x==="UNIX"?(We=798,oe|=function(Ee,Ot){var Xt=Ee;return Ee||(Xt=Ot?16893:33204),(65535&Xt)<<16}(F.unixPermissions,be)):(We=20,oe|=function(Ee){return 63&(Ee||0)}(F.dosPermissions)),N=ae.getUTCHours(),N<<=6,N|=ae.getUTCMinutes(),N<<=5,N|=ae.getUTCSeconds()/2,R=ae.getUTCFullYear()-1980,R<<=4,R|=ae.getUTCMonth()+1,R<<=5,R|=ae.getUTCDate(),xe&&(tt=a(1,1)+a(j(ue),4)+le,ge+="up"+a(tt.length,2)+tt),v&&(ze=a(1,1)+a(j(Fe),4)+V,ge+="uc"+a(ze.length,2)+ze);var Ye="";return Ye+=`
\0`,Ye+=a(X,2),Ye+=ie.magic,Ye+=a(N,2),Ye+=a(R,2),Ye+=a(Ae.crc32,4),Ye+=a(Ae.compressedSize,4),Ye+=a(Ae.uncompressedSize,4),Ye+=a(ue.length,2),Ye+=a(ge.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Ye+ue+ge,dirRecord:_.CENTRAL_FILE_HEADER+a(We,2)+Ye+a(Fe.length,2)+"\0\0\0\0"+a(oe,4)+a(A,4)+ue+ge+Fe}}var c=n("../utils"),d=n("../stream/GenericWorker"),y=n("../utf8"),j=n("../crc32"),_=n("../signature");function k(b,E,z,A){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=z,this.encodeFileName=A,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(k,d),k.prototype.push=function(b){var E=b.meta.percent||0,z=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,d.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:z?(E+100*(z-A-1))/z:100}}))},k.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var E=this.streamFiles&&!b.file.dir;if(E){var z=l(b,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:z.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(b){this.accumulate=!1;var E=this.streamFiles&&!b.file.dir,z=l(b,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(z.dirRecord),E)this.push({data:function(A){return _.DATA_DESCRIPTOR+a(A.crc32,4)+a(A.compressedSize,4)+a(A.uncompressedSize,4)}(b),meta:{percent:100}});else for(this.push({data:z.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var b=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var z=this.bytesWritten-b,A=function(x,g,N,R,F){var ie=c.transformTo("string",F(R));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(x,2)+a(x,2)+a(g,4)+a(N,4)+a(ie.length,2)+ie}(this.dirRecords.length,z,b,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(b){this._sources.push(b);var E=this;return b.on("data",function(z){E.processChunk(z)}),b.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),b.on("error",function(z){E.error(z)}),this},k.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(b){var E=this._sources;if(!d.prototype.error.call(this,b))return!1;for(var z=0;z<E.length;z++)try{E[z].error(b)}catch{}return!0},k.prototype.lock=function(){d.prototype.lock.call(this);for(var b=this._sources,E=0;E<b.length;E++)b[E].lock()},r.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var a=n("../compressions"),l=n("./ZipFileWorker");i.generateWorker=function(c,d,y){var j=new l(d.streamFiles,y,d.platform,d.encodeFileName),_=0;try{c.forEach(function(k,b){_++;var E=function(g,N){var R=g||N,F=a[R];if(!F)throw new Error(R+" is not a valid compression method !");return F}(b.options.compression,d.compression),z=b.options.compressionOptions||d.compressionOptions||{},A=b.dir,x=b.date;b._compressWorker(E,z).withStreamInfo("file",{name:k,dir:A,date:x,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(j)}),j.entriesCount=_}catch(k){j.error(k)}return j}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(a.prototype=n("./object")).loadAsync=n("./load"),a.support=n("./support"),a.defaults=n("./defaults"),a.version="3.10.1",a.loadAsync=function(l,c){return new a().loadAsync(l,c)},a.external=n("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var a=n("./utils"),l=n("./external"),c=n("./utf8"),d=n("./zipEntries"),y=n("./stream/Crc32Probe"),j=n("./nodejsUtils");function _(k){return new l.Promise(function(b,E){var z=k.decompressed.getContentWorker().pipe(new y);z.on("error",function(A){E(A)}).on("end",function(){z.streamInfo.crc32!==k.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}r.exports=function(k,b){var E=this;return b=a.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),j.isNode&&j.isStream(k)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",k,!0,b.optimizedBinaryString,b.base64).then(function(z){var A=new d(b);return A.load(z),A}).then(function(z){var A=[l.Promise.resolve(z)],x=z.files;if(b.checkCRC32)for(var g=0;g<x.length;g++)A.push(_(x[g]));return l.Promise.all(A)}).then(function(z){for(var A=z.shift(),x=A.files,g=0;g<x.length;g++){var N=x[g],R=N.fileNameStr,F=a.resolve(N.fileNameStr);E.file(F,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:b.createFolders}),N.dir||(E.file(F).unsafeOriginalName=R)}return A.zipComment.length&&(E.comment=A.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var a=n("../utils"),l=n("../stream/GenericWorker");function c(d,y){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(y)}a.inherits(c,l),c.prototype._bindStream=function(d){var y=this;(this._stream=d).pause(),d.on("data",function(j){y.push({data:j,meta:{percent:0}})}).on("error",function(j){y.isPaused?this.generatedError=j:y.error(j)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var a=n("readable-stream").Readable;function l(c,d,y){a.call(this,d),this._helper=c;var j=this;c.on("data",function(_,k){j.push(_)||j._helper.pause(),y&&y(k)}).on("error",function(_){j.emit("error",_)}).on("end",function(){j.push(null)})}n("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},r.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(n,r,i){function a(F,ie,J){var ue,le=c.getTypeOf(ie),me=c.extend(J||{},j);me.date=me.date||new Date,me.compression!==null&&(me.compression=me.compression.toUpperCase()),typeof me.unixPermissions=="string"&&(me.unixPermissions=parseInt(me.unixPermissions,8)),me.unixPermissions&&16384&me.unixPermissions&&(me.dir=!0),me.dosPermissions&&16&me.dosPermissions&&(me.dir=!0),me.dir&&(F=x(F)),me.createFolders&&(ue=A(F))&&g.call(this,ue,!0);var Fe=le==="string"&&me.binary===!1&&me.base64===!1;J&&J.binary!==void 0||(me.binary=!Fe),(ie instanceof _&&ie.uncompressedSize===0||me.dir||!ie||ie.length===0)&&(me.base64=!1,me.binary=!0,ie="",me.compression="STORE",le="string");var V=null;V=ie instanceof _||ie instanceof d?ie:E.isNode&&E.isStream(ie)?new z(F,ie):c.prepareContent(F,ie,me.binary,me.optimizedBinaryString,me.base64);var xe=new k(F,V,me);this.files[F]=xe}var l=n("./utf8"),c=n("./utils"),d=n("./stream/GenericWorker"),y=n("./stream/StreamHelper"),j=n("./defaults"),_=n("./compressedObject"),k=n("./zipObject"),b=n("./generate"),E=n("./nodejsUtils"),z=n("./nodejs/NodejsStreamInputAdapter"),A=function(F){F.slice(-1)==="/"&&(F=F.substring(0,F.length-1));var ie=F.lastIndexOf("/");return 0<ie?F.substring(0,ie):""},x=function(F){return F.slice(-1)!=="/"&&(F+="/"),F},g=function(F,ie){return ie=ie!==void 0?ie:j.createFolders,F=x(F),this.files[F]||a.call(this,F,null,{dir:!0,createFolders:ie}),this.files[F]};function N(F){return Object.prototype.toString.call(F)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(F){var ie,J,ue;for(ie in this.files)ue=this.files[ie],(J=ie.slice(this.root.length,ie.length))&&ie.slice(0,this.root.length)===this.root&&F(J,ue)},filter:function(F){var ie=[];return this.forEach(function(J,ue){F(J,ue)&&ie.push(ue)}),ie},file:function(F,ie,J){if(arguments.length!==1)return F=this.root+F,a.call(this,F,ie,J),this;if(N(F)){var ue=F;return this.filter(function(me,Fe){return!Fe.dir&&ue.test(me)})}var le=this.files[this.root+F];return le&&!le.dir?le:null},folder:function(F){if(!F)return this;if(N(F))return this.filter(function(le,me){return me.dir&&F.test(le)});var ie=this.root+F,J=g.call(this,ie),ue=this.clone();return ue.root=J.name,ue},remove:function(F){F=this.root+F;var ie=this.files[F];if(ie||(F.slice(-1)!=="/"&&(F+="/"),ie=this.files[F]),ie&&!ie.dir)delete this.files[F];else for(var J=this.filter(function(le,me){return me.name.slice(0,F.length)===F}),ue=0;ue<J.length;ue++)delete this.files[J[ue].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(F){var ie,J={};try{if((J=c.extend(F||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=J.type.toLowerCase(),J.compression=J.compression.toUpperCase(),J.type==="binarystring"&&(J.type="string"),!J.type)throw new Error("No output type specified.");c.checkSupport(J.type),J.platform!=="darwin"&&J.platform!=="freebsd"&&J.platform!=="linux"&&J.platform!=="sunos"||(J.platform="UNIX"),J.platform==="win32"&&(J.platform="DOS");var ue=J.comment||this.comment||"";ie=b.generateWorker(this,J,ue)}catch(le){(ie=new d("error")).error(le)}return new y(ie,J.type||"string",J.mimeType)},generateAsync:function(F,ie){return this.generateInternalStream(F).accumulate(ie)},generateNodeStream:function(F,ie){return(F=F||{}).type||(F.type="nodebuffer"),this.generateInternalStream(F).toNodejsStream(ie)}};r.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var a=n("./DataReader");function l(c){a.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}n("../utils").inherits(l,a),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),y=c.charCodeAt(1),j=c.charCodeAt(2),_=c.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===d&&this.data[k+1]===y&&this.data[k+2]===j&&this.data[k+3]===_)return k-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),y=c.charCodeAt(1),j=c.charCodeAt(2),_=c.charCodeAt(3),k=this.readData(4);return d===k[0]&&y===k[1]&&j===k[2]&&_===k[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var a=n("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,y=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)y=(y<<8)+this.byteAt(d);return this.index+=c,y},readString:function(c){return a.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=l},{"../utils":32}],19:[function(n,r,i){var a=n("./Uint8ArrayReader");function l(c){a.call(this,c)}n("../utils").inherits(l,a),l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var a=n("./DataReader");function l(c){a.call(this,c)}n("../utils").inherits(l,a),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var a=n("./ArrayReader");function l(c){a.call(this,c)}n("../utils").inherits(l,a),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var a=n("../utils"),l=n("../support"),c=n("./ArrayReader"),d=n("./StringReader"),y=n("./NodeBufferReader"),j=n("./Uint8ArrayReader");r.exports=function(_){var k=a.getTypeOf(_);return a.checkSupport(k),k!=="string"||l.uint8array?k==="nodebuffer"?new y(_):l.uint8array?new j(a.transformTo("uint8array",_)):new c(a.transformTo("array",_)):new d(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var a=n("./GenericWorker"),l=n("../utils");function c(d){a.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(c,a),c.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var a=n("./GenericWorker"),l=n("../crc32");function c(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,a),c.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var a=n("../utils"),l=n("./GenericWorker");function c(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}a.inherits(c,l),c.prototype.processChunk=function(d){if(d){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+d.data.length}l.prototype.processChunk.call(this,d)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var a=n("../utils"),l=n("./GenericWorker");function c(d){l.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(j){y.dataIsReady=!0,y.data=j,y.max=j&&j.length||0,y.type=a.getTypeOf(j),y.isPaused||y._tickAndRepeat()},function(j){y.error(j)})}a.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,y);break;case"uint8array":d=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":d=this.data.slice(this.index,y)}return this.index=y,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(d){c.processChunk(d)}),l.on("end",function(){c.end()}),l.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},r.exports=a},{}],29:[function(n,r,i){var a=n("../utils"),l=n("./ConvertWorker"),c=n("./GenericWorker"),d=n("../base64"),y=n("../support"),j=n("../external"),_=null;if(y.nodestream)try{_=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(E,z){return new j.Promise(function(A,x){var g=[],N=E._internalType,R=E._outputType,F=E._mimeType;E.on("data",function(ie,J){g.push(ie),z&&z(J)}).on("error",function(ie){g=[],x(ie)}).on("end",function(){try{var ie=function(J,ue,le){switch(J){case"blob":return a.newBlob(a.transformTo("arraybuffer",ue),le);case"base64":return d.encode(ue);default:return a.transformTo(J,ue)}}(R,function(J,ue){var le,me=0,Fe=null,V=0;for(le=0;le<ue.length;le++)V+=ue[le].length;switch(J){case"string":return ue.join("");case"array":return Array.prototype.concat.apply([],ue);case"uint8array":for(Fe=new Uint8Array(V),le=0;le<ue.length;le++)Fe.set(ue[le],me),me+=ue[le].length;return Fe;case"nodebuffer":return Buffer.concat(ue);default:throw new Error("concat : unsupported type '"+J+"'")}}(N,g),F);A(ie)}catch(J){x(J)}g=[]}).resume()})}function b(E,z,A){var x=z;switch(z){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=z,this._mimeType=A,a.checkSupport(x),this._worker=E.pipe(new l(x)),E.lock()}catch(g){this._worker=new c("error"),this._worker.error(g)}}b.prototype={accumulate:function(E){return k(this,E)},on:function(E,z){var A=this;return E==="data"?this._worker.on(E,function(x){z.call(A,x.data,x.meta)}):this._worker.on(E,function(){a.delay(z,arguments,A)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),i.blob=l.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var a=n("./utils"),l=n("./support"),c=n("./nodejsUtils"),d=n("./stream/GenericWorker"),y=new Array(256),j=0;j<256;j++)y[j]=252<=j?6:248<=j?5:240<=j?4:224<=j?3:192<=j?2:1;y[254]=y[254]=1;function _(){d.call(this,"utf-8 decode"),this.leftOver=null}function k(){d.call(this,"utf-8 encode")}i.utf8encode=function(b){return l.nodebuffer?c.newBufferFrom(b,"utf-8"):function(E){var z,A,x,g,N,R=E.length,F=0;for(g=0;g<R;g++)(64512&(A=E.charCodeAt(g)))==55296&&g+1<R&&(64512&(x=E.charCodeAt(g+1)))==56320&&(A=65536+(A-55296<<10)+(x-56320),g++),F+=A<128?1:A<2048?2:A<65536?3:4;for(z=l.uint8array?new Uint8Array(F):new Array(F),g=N=0;N<F;g++)(64512&(A=E.charCodeAt(g)))==55296&&g+1<R&&(64512&(x=E.charCodeAt(g+1)))==56320&&(A=65536+(A-55296<<10)+(x-56320),g++),A<128?z[N++]=A:(A<2048?z[N++]=192|A>>>6:(A<65536?z[N++]=224|A>>>12:(z[N++]=240|A>>>18,z[N++]=128|A>>>12&63),z[N++]=128|A>>>6&63),z[N++]=128|63&A);return z}(b)},i.utf8decode=function(b){return l.nodebuffer?a.transformTo("nodebuffer",b).toString("utf-8"):function(E){var z,A,x,g,N=E.length,R=new Array(2*N);for(z=A=0;z<N;)if((x=E[z++])<128)R[A++]=x;else if(4<(g=y[x]))R[A++]=65533,z+=g-1;else{for(x&=g===2?31:g===3?15:7;1<g&&z<N;)x=x<<6|63&E[z++],g--;1<g?R[A++]=65533:x<65536?R[A++]=x:(x-=65536,R[A++]=55296|x>>10&1023,R[A++]=56320|1023&x)}return R.length!==A&&(R.subarray?R=R.subarray(0,A):R.length=A),a.applyFromCharCode(R)}(b=a.transformTo(l.uint8array?"uint8array":"array",b))},a.inherits(_,d),_.prototype.processChunk=function(b){var E=a.transformTo(l.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var z=E;(E=new Uint8Array(z.length+this.leftOver.length)).set(this.leftOver,0),E.set(z,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var A=function(g,N){var R;for((N=N||g.length)>g.length&&(N=g.length),R=N-1;0<=R&&(192&g[R])==128;)R--;return R<0||R===0?N:R+y[g[R]]>N?R:N}(E),x=E;A!==E.length&&(l.uint8array?(x=E.subarray(0,A),this.leftOver=E.subarray(A,E.length)):(x=E.slice(0,A),this.leftOver=E.slice(A,E.length))),this.push({data:i.utf8decode(x),meta:b.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=_,a.inherits(k,d),k.prototype.processChunk=function(b){this.push({data:i.utf8encode(b.data),meta:b.meta})},i.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var a=n("./support"),l=n("./base64"),c=n("./nodejsUtils"),d=n("./external");function y(z){return z}function j(z,A){for(var x=0;x<z.length;++x)A[x]=255&z.charCodeAt(x);return A}n("setimmediate"),i.newBlob=function(z,A){i.checkSupport("blob");try{return new Blob([z],{type:A})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(z),x.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(z,A,x){var g=[],N=0,R=z.length;if(R<=x)return String.fromCharCode.apply(null,z);for(;N<R;)A==="array"||A==="nodebuffer"?g.push(String.fromCharCode.apply(null,z.slice(N,Math.min(N+x,R)))):g.push(String.fromCharCode.apply(null,z.subarray(N,Math.min(N+x,R)))),N+=x;return g.join("")},stringifyByChar:function(z){for(var A="",x=0;x<z.length;x++)A+=String.fromCharCode(z[x]);return A},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}}()}};function k(z){var A=65536,x=i.getTypeOf(z),g=!0;if(x==="uint8array"?g=_.applyCanBeUsed.uint8array:x==="nodebuffer"&&(g=_.applyCanBeUsed.nodebuffer),g)for(;1<A;)try{return _.stringifyByChunk(z,x,A)}catch{A=Math.floor(A/2)}return _.stringifyByChar(z)}function b(z,A){for(var x=0;x<z.length;x++)A[x]=z[x];return A}i.applyFromCharCode=k;var E={};E.string={string:y,array:function(z){return j(z,new Array(z.length))},arraybuffer:function(z){return E.string.uint8array(z).buffer},uint8array:function(z){return j(z,new Uint8Array(z.length))},nodebuffer:function(z){return j(z,c.allocBuffer(z.length))}},E.array={string:k,array:y,arraybuffer:function(z){return new Uint8Array(z).buffer},uint8array:function(z){return new Uint8Array(z)},nodebuffer:function(z){return c.newBufferFrom(z)}},E.arraybuffer={string:function(z){return k(new Uint8Array(z))},array:function(z){return b(new Uint8Array(z),new Array(z.byteLength))},arraybuffer:y,uint8array:function(z){return new Uint8Array(z)},nodebuffer:function(z){return c.newBufferFrom(new Uint8Array(z))}},E.uint8array={string:k,array:function(z){return b(z,new Array(z.length))},arraybuffer:function(z){return z.buffer},uint8array:y,nodebuffer:function(z){return c.newBufferFrom(z)}},E.nodebuffer={string:k,array:function(z){return b(z,new Array(z.length))},arraybuffer:function(z){return E.nodebuffer.uint8array(z).buffer},uint8array:function(z){return b(z,new Uint8Array(z.length))},nodebuffer:y},i.transformTo=function(z,A){if(A=A||"",!z)return A;i.checkSupport(z);var x=i.getTypeOf(A);return E[x][z](A)},i.resolve=function(z){for(var A=z.split("/"),x=[],g=0;g<A.length;g++){var N=A[g];N==="."||N===""&&g!==0&&g!==A.length-1||(N===".."?x.pop():x.push(N))}return x.join("/")},i.getTypeOf=function(z){return typeof z=="string"?"string":Object.prototype.toString.call(z)==="[object Array]"?"array":a.nodebuffer&&c.isBuffer(z)?"nodebuffer":a.uint8array&&z instanceof Uint8Array?"uint8array":a.arraybuffer&&z instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(z){if(!a[z.toLowerCase()])throw new Error(z+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(z){var A,x,g="";for(x=0;x<(z||"").length;x++)g+="\\x"+((A=z.charCodeAt(x))<16?"0":"")+A.toString(16).toUpperCase();return g},i.delay=function(z,A,x){setImmediate(function(){z.apply(x||null,A||[])})},i.inherits=function(z,A){function x(){}x.prototype=A.prototype,z.prototype=new x},i.extend=function(){var z,A,x={};for(z=0;z<arguments.length;z++)for(A in arguments[z])Object.prototype.hasOwnProperty.call(arguments[z],A)&&x[A]===void 0&&(x[A]=arguments[z][A]);return x},i.prepareContent=function(z,A,x,g,N){return d.Promise.resolve(A).then(function(R){return a.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new d.Promise(function(F,ie){var J=new FileReader;J.onload=function(ue){F(ue.target.result)},J.onerror=function(ue){ie(ue.target.error)},J.readAsArrayBuffer(R)}):R}).then(function(R){var F=i.getTypeOf(R);return F?(F==="arraybuffer"?R=i.transformTo("uint8array",R):F==="string"&&(N?R=l.decode(R):x&&g!==!0&&(R=function(ie){return j(ie,a.uint8array?new Uint8Array(ie.length):new Array(ie.length))}(R))),R):d.Promise.reject(new Error("Can't read the data of '"+z+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var a=n("./reader/readerFor"),l=n("./utils"),c=n("./signature"),d=n("./zipEntry"),y=n("./support");function j(_){this.files=[],this.loadOptions=_}j.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(k)+", expected "+l.pretty(_)+")")}},isSignature:function(_,k){var b=this.reader.index;this.reader.setIndex(_);var E=this.reader.readString(4)===k;return this.reader.setIndex(b),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),k=y.uint8array?"uint8array":"array",b=l.transformTo(k,_);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,k,b,E=this.zip64EndOfCentralSize-44;0<E;)_=this.reader.readInt(2),k=this.reader.readInt(4),b=this.reader.readData(k),this.zip64ExtensibleData[_]={id:_,length:k,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,k;for(_=0;_<this.files.length;_++)k=this.files[_],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(_=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var k=_;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var E=k-b;if(0<E)this.isSignature(k,c.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(_){this.reader=a(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=j},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var a=n("./reader/readerFor"),l=n("./utils"),c=n("./compressedObject"),d=n("./crc32"),y=n("./utf8"),j=n("./compressions"),_=n("./support");function k(b,E){this.options=b,this.loadOptions=E}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var E,z;if(b.skip(22),this.fileNameLength=b.readInt(2),z=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(z),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(A){for(var x in j)if(Object.prototype.hasOwnProperty.call(j,x)&&j[x].magic===A)return j[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,E,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var E=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(E),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var E,z,A,x=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<x;)E=b.readInt(2),z=b.readInt(2),A=b.readData(z),this.extraFields[E]={id:E,length:z,value:A};b.setIndex(x)},handleUTF8:function(){var b=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var z=l.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(z)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var x=l.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var E=a(b.value);return E.readInt(1)!==1||d(this.fileName)!==E.readInt(4)?null:y.utf8decode(E.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var E=a(b.value);return E.readInt(1)!==1||d(this.fileComment)!==E.readInt(4)?null:y.utf8decode(E.readData(b.length-5))}return null}},r.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function a(E,z,A){this.name=E,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=z,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var l=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),d=n("./utf8"),y=n("./compressedObject"),j=n("./stream/GenericWorker");a.prototype={internalStream:function(E){var z=null,A="string";try{if(!E)throw new Error("No output type specified.");var x=(A=E.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),z=this._decompressWorker();var g=!this._dataBinary;g&&!x&&(z=z.pipe(new d.Utf8EncodeWorker)),!g&&x&&(z=z.pipe(new d.Utf8DecodeWorker))}catch(N){(z=new j("error")).error(N)}return new l(z,A,"")},async:function(E,z){return this.internalStream(E).accumulate(z)},nodeStream:function(E,z){return this.internalStream(E||"nodebuffer").toNodejsStream(z)},_compressWorker:function(E,z){if(this._data instanceof y&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new d.Utf8EncodeWorker)),y.createWorkerFrom(A,E,z)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof j?this._data:new c(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<_.length;b++)a.prototype[_[b]]=k;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(a){var l,c,d=a.MutationObserver||a.WebKitMutationObserver;if(d){var y=0,j=new d(E),_=a.document.createTextNode("");j.observe(_,{characterData:!0}),l=function(){_.data=y=++y%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var z=a.document.createElement("script");z.onreadystatechange=function(){E(),z.onreadystatechange=null,z.parentNode.removeChild(z),z=null},a.document.documentElement.appendChild(z)}:function(){setTimeout(E,0)};else{var k=new a.MessageChannel;k.port1.onmessage=E,l=function(){k.port2.postMessage(0)}}var b=[];function E(){var z,A;c=!0;for(var x=b.length;x;){for(A=b,b=[],z=-1;++z<x;)A[z]();x=b.length}c=!1}r.exports=function(z){b.push(z)!==1||c||l()}}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var a=n("immediate");function l(){}var c={},d=["REJECTED"],y=["FULFILLED"],j=["PENDING"];function _(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,x!==l&&z(this,x)}function k(x,g,N){this.promise=x,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function b(x,g,N){a(function(){var R;try{R=g(N)}catch(F){return c.reject(x,F)}R===x?c.reject(x,new TypeError("Cannot resolve promise with itself")):c.resolve(x,R)})}function E(x){var g=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof g=="function")return function(){g.apply(x,arguments)}}function z(x,g){var N=!1;function R(J){N||(N=!0,c.reject(x,J))}function F(J){N||(N=!0,c.resolve(x,J))}var ie=A(function(){g(F,R)});ie.status==="error"&&R(ie.value)}function A(x,g){var N={};try{N.value=x(g),N.status="success"}catch(R){N.status="error",N.value=R}return N}(r.exports=_).prototype.finally=function(x){if(typeof x!="function")return this;var g=this.constructor;return this.then(function(N){return g.resolve(x()).then(function(){return N})},function(N){return g.resolve(x()).then(function(){throw N})})},_.prototype.catch=function(x){return this.then(null,x)},_.prototype.then=function(x,g){if(typeof x!="function"&&this.state===y||typeof g!="function"&&this.state===d)return this;var N=new this.constructor(l);return this.state!==j?b(N,this.state===y?x:g,this.outcome):this.queue.push(new k(N,x,g)),N},k.prototype.callFulfilled=function(x){c.resolve(this.promise,x)},k.prototype.otherCallFulfilled=function(x){b(this.promise,this.onFulfilled,x)},k.prototype.callRejected=function(x){c.reject(this.promise,x)},k.prototype.otherCallRejected=function(x){b(this.promise,this.onRejected,x)},c.resolve=function(x,g){var N=A(E,g);if(N.status==="error")return c.reject(x,N.value);var R=N.value;if(R)z(x,R);else{x.state=y,x.outcome=g;for(var F=-1,ie=x.queue.length;++F<ie;)x.queue[F].callFulfilled(g)}return x},c.reject=function(x,g){x.state=d,x.outcome=g;for(var N=-1,R=x.queue.length;++N<R;)x.queue[N].callRejected(g);return x},_.resolve=function(x){return x instanceof this?x:c.resolve(new this(l),x)},_.reject=function(x){var g=new this(l);return c.reject(g,x)},_.all=function(x){var g=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=x.length,R=!1;if(!N)return this.resolve([]);for(var F=new Array(N),ie=0,J=-1,ue=new this(l);++J<N;)le(x[J],J);return ue;function le(me,Fe){g.resolve(me).then(function(V){F[Fe]=V,++ie!==N||R||(R=!0,c.resolve(ue,F))},function(V){R||(R=!0,c.reject(ue,V))})}},_.race=function(x){var g=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=x.length,R=!1;if(!N)return this.resolve([]);for(var F=-1,ie=new this(l);++F<N;)J=x[F],g.resolve(J).then(function(ue){R||(R=!0,c.resolve(ie,ue))},function(ue){R||(R=!0,c.reject(ie,ue))});var J;return ie}},{immediate:36}],38:[function(n,r,i){var a={};(0,n("./lib/utils/common").assign)(a,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var a=n("./zlib/deflate"),l=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/messages"),y=n("./zlib/zstream"),j=Object.prototype.toString,_=0,k=-1,b=0,E=8;function z(x){if(!(this instanceof z))return new z(x);this.options=l.assign({level:k,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},x||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var N=a.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(N!==_)throw new Error(d[N]);if(g.header&&a.deflateSetHeader(this.strm,g.header),g.dictionary){var R;if(R=typeof g.dictionary=="string"?c.string2buf(g.dictionary):j.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(N=a.deflateSetDictionary(this.strm,R))!==_)throw new Error(d[N]);this._dict_set=!0}}function A(x,g){var N=new z(g);if(N.push(x,!0),N.err)throw N.msg||d[N.err];return N.result}z.prototype.push=function(x,g){var N,R,F=this.strm,ie=this.options.chunkSize;if(this.ended)return!1;R=g===~~g?g:g===!0?4:0,typeof x=="string"?F.input=c.string2buf(x):j.call(x)==="[object ArrayBuffer]"?F.input=new Uint8Array(x):F.input=x,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new l.Buf8(ie),F.next_out=0,F.avail_out=ie),(N=a.deflate(F,R))!==1&&N!==_)return this.onEnd(N),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(F.output,F.next_out))):this.onData(l.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&N!==1);return R===4?(N=a.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===_):R!==2||(this.onEnd(_),!(F.avail_out=0))},z.prototype.onData=function(x){this.chunks.push(x)},z.prototype.onEnd=function(x){x===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=z,i.deflate=A,i.deflateRaw=function(x,g){return(g=g||{}).raw=!0,A(x,g)},i.gzip=function(x,g){return(g=g||{}).gzip=!0,A(x,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var a=n("./zlib/inflate"),l=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/constants"),y=n("./zlib/messages"),j=n("./zlib/zstream"),_=n("./zlib/gzheader"),k=Object.prototype.toString;function b(z){if(!(this instanceof b))return new b(z);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},z||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||z&&z.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&!(15&A.windowBits)&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var x=a.inflateInit2(this.strm,A.windowBits);if(x!==d.Z_OK)throw new Error(y[x]);this.header=new _,a.inflateGetHeader(this.strm,this.header)}function E(z,A){var x=new b(A);if(x.push(z,!0),x.err)throw x.msg||y[x.err];return x.result}b.prototype.push=function(z,A){var x,g,N,R,F,ie,J=this.strm,ue=this.options.chunkSize,le=this.options.dictionary,me=!1;if(this.ended)return!1;g=A===~~A?A:A===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof z=="string"?J.input=c.binstring2buf(z):k.call(z)==="[object ArrayBuffer]"?J.input=new Uint8Array(z):J.input=z,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new l.Buf8(ue),J.next_out=0,J.avail_out=ue),(x=a.inflate(J,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&le&&(ie=typeof le=="string"?c.string2buf(le):k.call(le)==="[object ArrayBuffer]"?new Uint8Array(le):le,x=a.inflateSetDictionary(this.strm,ie)),x===d.Z_BUF_ERROR&&me===!0&&(x=d.Z_OK,me=!1),x!==d.Z_STREAM_END&&x!==d.Z_OK)return this.onEnd(x),!(this.ended=!0);J.next_out&&(J.avail_out!==0&&x!==d.Z_STREAM_END&&(J.avail_in!==0||g!==d.Z_FINISH&&g!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=c.utf8border(J.output,J.next_out),R=J.next_out-N,F=c.buf2string(J.output,N),J.next_out=R,J.avail_out=ue-R,R&&l.arraySet(J.output,J.output,N,R,0),this.onData(F)):this.onData(l.shrinkBuf(J.output,J.next_out)))),J.avail_in===0&&J.avail_out===0&&(me=!0)}while((0<J.avail_in||J.avail_out===0)&&x!==d.Z_STREAM_END);return x===d.Z_STREAM_END&&(g=d.Z_FINISH),g===d.Z_FINISH?(x=a.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===d.Z_OK):g!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(J.avail_out=0))},b.prototype.onData=function(z){this.chunks.push(z)},b.prototype.onEnd=function(z){z===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},i.Inflate=b,i.inflate=E,i.inflateRaw=function(z,A){return(A=A||{}).raw=!0,E(z,A)},i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(d){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var j=y.shift();if(j){if(typeof j!="object")throw new TypeError(j+"must be non-object");for(var _ in j)j.hasOwnProperty(_)&&(d[_]=j[_])}}return d},i.shrinkBuf=function(d,y){return d.length===y?d:d.subarray?d.subarray(0,y):(d.length=y,d)};var l={arraySet:function(d,y,j,_,k){if(y.subarray&&d.subarray)d.set(y.subarray(j,j+_),k);else for(var b=0;b<_;b++)d[k+b]=y[j+b]},flattenChunks:function(d){var y,j,_,k,b,E;for(y=_=0,j=d.length;y<j;y++)_+=d[y].length;for(E=new Uint8Array(_),y=k=0,j=d.length;y<j;y++)b=d[y],E.set(b,k),k+=b.length;return E}},c={arraySet:function(d,y,j,_,k){for(var b=0;b<_;b++)d[k+b]=y[j+b]},flattenChunks:function(d){return[].concat.apply([],d)}};i.setTyped=function(d){d?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,l)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,c))},i.setTyped(a)},{}],42:[function(n,r,i){var a=n("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new a.Buf8(256),y=0;y<256;y++)d[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function j(_,k){if(k<65537&&(_.subarray&&c||!_.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(_,k));for(var b="",E=0;E<k;E++)b+=String.fromCharCode(_[E]);return b}d[254]=d[254]=1,i.string2buf=function(_){var k,b,E,z,A,x=_.length,g=0;for(z=0;z<x;z++)(64512&(b=_.charCodeAt(z)))==55296&&z+1<x&&(64512&(E=_.charCodeAt(z+1)))==56320&&(b=65536+(b-55296<<10)+(E-56320),z++),g+=b<128?1:b<2048?2:b<65536?3:4;for(k=new a.Buf8(g),z=A=0;A<g;z++)(64512&(b=_.charCodeAt(z)))==55296&&z+1<x&&(64512&(E=_.charCodeAt(z+1)))==56320&&(b=65536+(b-55296<<10)+(E-56320),z++),b<128?k[A++]=b:(b<2048?k[A++]=192|b>>>6:(b<65536?k[A++]=224|b>>>12:(k[A++]=240|b>>>18,k[A++]=128|b>>>12&63),k[A++]=128|b>>>6&63),k[A++]=128|63&b);return k},i.buf2binstring=function(_){return j(_,_.length)},i.binstring2buf=function(_){for(var k=new a.Buf8(_.length),b=0,E=k.length;b<E;b++)k[b]=_.charCodeAt(b);return k},i.buf2string=function(_,k){var b,E,z,A,x=k||_.length,g=new Array(2*x);for(b=E=0;b<x;)if((z=_[b++])<128)g[E++]=z;else if(4<(A=d[z]))g[E++]=65533,b+=A-1;else{for(z&=A===2?31:A===3?15:7;1<A&&b<x;)z=z<<6|63&_[b++],A--;1<A?g[E++]=65533:z<65536?g[E++]=z:(z-=65536,g[E++]=55296|z>>10&1023,g[E++]=56320|1023&z)}return j(g,E)},i.utf8border=function(_,k){var b;for((k=k||_.length)>_.length&&(k=_.length),b=k-1;0<=b&&(192&_[b])==128;)b--;return b<0||b===0?k:b+d[_[b]]>k?b:k}},{"./common":41}],43:[function(n,r,i){r.exports=function(a,l,c,d){for(var y=65535&a|0,j=a>>>16&65535|0,_=0;c!==0;){for(c-=_=2e3<c?2e3:c;j=j+(y=y+l[d++]|0)|0,--_;);y%=65521,j%=65521}return y|j<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var a=function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c}();r.exports=function(l,c,d,y){var j=a,_=y+d;l^=-1;for(var k=y;k<_;k++)l=l>>>8^j[255&(l^c[k])];return-1^l}},{}],46:[function(n,r,i){var a,l=n("../utils/common"),c=n("./trees"),d=n("./adler32"),y=n("./crc32"),j=n("./messages"),_=0,k=4,b=0,E=-2,z=-1,A=4,x=2,g=8,N=9,R=286,F=30,ie=19,J=2*R+1,ue=15,le=3,me=258,Fe=me+le+1,V=42,xe=113,v=1,ge=2,tt=3,ze=4;function be(w,je){return w.msg=j[je],je}function ae(w){return(w<<1)-(4<w?9:0)}function Ae(w){for(var je=w.length;0<=--je;)w[je]=0}function X(w){var je=w.state,he=je.pending;he>w.avail_out&&(he=w.avail_out),he!==0&&(l.arraySet(w.output,je.pending_buf,je.pending_out,he,w.next_out),w.next_out+=he,je.pending_out+=he,w.total_out+=he,w.avail_out-=he,je.pending-=he,je.pending===0&&(je.pending_out=0))}function oe(w,je){c._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,je),w.block_start=w.strstart,X(w.strm)}function We(w,je){w.pending_buf[w.pending++]=je}function Ye(w,je){w.pending_buf[w.pending++]=je>>>8&255,w.pending_buf[w.pending++]=255&je}function Ee(w,je){var he,U,D=w.max_chain_length,ee=w.strstart,_e=w.prev_length,Ie=w.nice_match,q=w.strstart>w.w_size-Fe?w.strstart-(w.w_size-Fe):0,ye=w.window,Ze=w.w_mask,Pe=w.prev,st=w.strstart+me,bt=ye[ee+_e-1],Et=ye[ee+_e];w.prev_length>=w.good_match&&(D>>=2),Ie>w.lookahead&&(Ie=w.lookahead);do if(ye[(he=je)+_e]===Et&&ye[he+_e-1]===bt&&ye[he]===ye[ee]&&ye[++he]===ye[ee+1]){ee+=2,he++;do;while(ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ye[++ee]===ye[++he]&&ee<st);if(U=me-(st-ee),ee=st-me,_e<U){if(w.match_start=je,Ie<=(_e=U))break;bt=ye[ee+_e-1],Et=ye[ee+_e]}}while((je=Pe[je&Ze])>q&&--D!=0);return _e<=w.lookahead?_e:w.lookahead}function Ot(w){var je,he,U,D,ee,_e,Ie,q,ye,Ze,Pe=w.w_size;do{if(D=w.window_size-w.lookahead-w.strstart,w.strstart>=Pe+(Pe-Fe)){for(l.arraySet(w.window,w.window,Pe,Pe,0),w.match_start-=Pe,w.strstart-=Pe,w.block_start-=Pe,je=he=w.hash_size;U=w.head[--je],w.head[je]=Pe<=U?U-Pe:0,--he;);for(je=he=Pe;U=w.prev[--je],w.prev[je]=Pe<=U?U-Pe:0,--he;);D+=Pe}if(w.strm.avail_in===0)break;if(_e=w.strm,Ie=w.window,q=w.strstart+w.lookahead,ye=D,Ze=void 0,Ze=_e.avail_in,ye<Ze&&(Ze=ye),he=Ze===0?0:(_e.avail_in-=Ze,l.arraySet(Ie,_e.input,_e.next_in,Ze,q),_e.state.wrap===1?_e.adler=d(_e.adler,Ie,Ze,q):_e.state.wrap===2&&(_e.adler=y(_e.adler,Ie,Ze,q)),_e.next_in+=Ze,_e.total_in+=Ze,Ze),w.lookahead+=he,w.lookahead+w.insert>=le)for(ee=w.strstart-w.insert,w.ins_h=w.window[ee],w.ins_h=(w.ins_h<<w.hash_shift^w.window[ee+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[ee+le-1])&w.hash_mask,w.prev[ee&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=ee,ee++,w.insert--,!(w.lookahead+w.insert<le)););}while(w.lookahead<Fe&&w.strm.avail_in!==0)}function Xt(w,je){for(var he,U;;){if(w.lookahead<Fe){if(Ot(w),w.lookahead<Fe&&je===_)return v;if(w.lookahead===0)break}if(he=0,w.lookahead>=le&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+le-1])&w.hash_mask,he=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),he!==0&&w.strstart-he<=w.w_size-Fe&&(w.match_length=Ee(w,he)),w.match_length>=le)if(U=c._tr_tally(w,w.strstart-w.match_start,w.match_length-le),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=le){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+le-1])&w.hash_mask,he=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else U=c._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(U&&(oe(w,!1),w.strm.avail_out===0))return v}return w.insert=w.strstart<le-1?w.strstart:le-1,je===k?(oe(w,!0),w.strm.avail_out===0?tt:ze):w.last_lit&&(oe(w,!1),w.strm.avail_out===0)?v:ge}function St(w,je){for(var he,U,D;;){if(w.lookahead<Fe){if(Ot(w),w.lookahead<Fe&&je===_)return v;if(w.lookahead===0)break}if(he=0,w.lookahead>=le&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+le-1])&w.hash_mask,he=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=le-1,he!==0&&w.prev_length<w.max_lazy_match&&w.strstart-he<=w.w_size-Fe&&(w.match_length=Ee(w,he),w.match_length<=5&&(w.strategy===1||w.match_length===le&&4096<w.strstart-w.match_start)&&(w.match_length=le-1)),w.prev_length>=le&&w.match_length<=w.prev_length){for(D=w.strstart+w.lookahead-le,U=c._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-le),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=D&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+le-1])&w.hash_mask,he=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=le-1,w.strstart++,U&&(oe(w,!1),w.strm.avail_out===0))return v}else if(w.match_available){if((U=c._tr_tally(w,0,w.window[w.strstart-1]))&&oe(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return v}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(U=c._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<le-1?w.strstart:le-1,je===k?(oe(w,!0),w.strm.avail_out===0?tt:ze):w.last_lit&&(oe(w,!1),w.strm.avail_out===0)?v:ge}function Ht(w,je,he,U,D){this.good_length=w,this.max_lazy=je,this.nice_length=he,this.max_chain=U,this.func=D}function vn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*J),this.dyn_dtree=new l.Buf16(2*(2*F+1)),this.bl_tree=new l.Buf16(2*(2*ie+1)),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(ue+1),this.heap=new l.Buf16(2*R+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*R+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Vt(w){var je;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=x,(je=w.state).pending=0,je.pending_out=0,je.wrap<0&&(je.wrap=-je.wrap),je.status=je.wrap?V:xe,w.adler=je.wrap===2?0:1,je.last_flush=_,c._tr_init(je),b):be(w,E)}function Jn(w){var je=Vt(w);return je===b&&function(he){he.window_size=2*he.w_size,Ae(he.head),he.max_lazy_match=a[he.level].max_lazy,he.good_match=a[he.level].good_length,he.nice_match=a[he.level].nice_length,he.max_chain_length=a[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=le-1,he.match_available=0,he.ins_h=0}(w.state),je}function Ln(w,je,he,U,D,ee){if(!w)return E;var _e=1;if(je===z&&(je=6),U<0?(_e=0,U=-U):15<U&&(_e=2,U-=16),D<1||N<D||he!==g||U<8||15<U||je<0||9<je||ee<0||A<ee)return be(w,E);U===8&&(U=9);var Ie=new vn;return(w.state=Ie).strm=w,Ie.wrap=_e,Ie.gzhead=null,Ie.w_bits=U,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=D+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+le-1)/le),Ie.window=new l.Buf8(2*Ie.w_size),Ie.head=new l.Buf16(Ie.hash_size),Ie.prev=new l.Buf16(Ie.w_size),Ie.lit_bufsize=1<<D+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new l.Buf8(Ie.pending_buf_size),Ie.d_buf=1*Ie.lit_bufsize,Ie.l_buf=3*Ie.lit_bufsize,Ie.level=je,Ie.strategy=ee,Ie.method=he,Jn(w)}a=[new Ht(0,0,0,0,function(w,je){var he=65535;for(he>w.pending_buf_size-5&&(he=w.pending_buf_size-5);;){if(w.lookahead<=1){if(Ot(w),w.lookahead===0&&je===_)return v;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var U=w.block_start+he;if((w.strstart===0||w.strstart>=U)&&(w.lookahead=w.strstart-U,w.strstart=U,oe(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-Fe&&(oe(w,!1),w.strm.avail_out===0))return v}return w.insert=0,je===k?(oe(w,!0),w.strm.avail_out===0?tt:ze):(w.strstart>w.block_start&&(oe(w,!1),w.strm.avail_out),v)}),new Ht(4,4,8,4,Xt),new Ht(4,5,16,8,Xt),new Ht(4,6,32,32,Xt),new Ht(4,4,16,16,St),new Ht(8,16,32,32,St),new Ht(8,16,128,128,St),new Ht(8,32,128,256,St),new Ht(32,128,258,1024,St),new Ht(32,258,258,4096,St)],i.deflateInit=function(w,je){return Ln(w,je,g,15,8,0)},i.deflateInit2=Ln,i.deflateReset=Jn,i.deflateResetKeep=Vt,i.deflateSetHeader=function(w,je){return w&&w.state?w.state.wrap!==2?E:(w.state.gzhead=je,b):E},i.deflate=function(w,je){var he,U,D,ee;if(!w||!w.state||5<je||je<0)return w?be(w,E):E;if(U=w.state,!w.output||!w.input&&w.avail_in!==0||U.status===666&&je!==k)return be(w,w.avail_out===0?-5:E);if(U.strm=w,he=U.last_flush,U.last_flush=je,U.status===V)if(U.wrap===2)w.adler=0,We(U,31),We(U,139),We(U,8),U.gzhead?(We(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),We(U,255&U.gzhead.time),We(U,U.gzhead.time>>8&255),We(U,U.gzhead.time>>16&255),We(U,U.gzhead.time>>24&255),We(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),We(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(We(U,255&U.gzhead.extra.length),We(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(w.adler=y(w.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(We(U,0),We(U,0),We(U,0),We(U,0),We(U,0),We(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),We(U,3),U.status=xe);else{var _e=g+(U.w_bits-8<<4)<<8;_e|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(_e|=32),_e+=31-_e%31,U.status=xe,Ye(U,_e),U.strstart!==0&&(Ye(U,w.adler>>>16),Ye(U,65535&w.adler)),w.adler=1}if(U.status===69)if(U.gzhead.extra){for(D=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>D&&(w.adler=y(w.adler,U.pending_buf,U.pending-D,D)),X(w),D=U.pending,U.pending!==U.pending_buf_size));)We(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>D&&(w.adler=y(w.adler,U.pending_buf,U.pending-D,D)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){D=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>D&&(w.adler=y(w.adler,U.pending_buf,U.pending-D,D)),X(w),D=U.pending,U.pending===U.pending_buf_size)){ee=1;break}ee=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,We(U,ee)}while(ee!==0);U.gzhead.hcrc&&U.pending>D&&(w.adler=y(w.adler,U.pending_buf,U.pending-D,D)),ee===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){D=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>D&&(w.adler=y(w.adler,U.pending_buf,U.pending-D,D)),X(w),D=U.pending,U.pending===U.pending_buf_size)){ee=1;break}ee=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,We(U,ee)}while(ee!==0);U.gzhead.hcrc&&U.pending>D&&(w.adler=y(w.adler,U.pending_buf,U.pending-D,D)),ee===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&X(w),U.pending+2<=U.pending_buf_size&&(We(U,255&w.adler),We(U,w.adler>>8&255),w.adler=0,U.status=xe)):U.status=xe),U.pending!==0){if(X(w),w.avail_out===0)return U.last_flush=-1,b}else if(w.avail_in===0&&ae(je)<=ae(he)&&je!==k)return be(w,-5);if(U.status===666&&w.avail_in!==0)return be(w,-5);if(w.avail_in!==0||U.lookahead!==0||je!==_&&U.status!==666){var Ie=U.strategy===2?function(q,ye){for(var Ze;;){if(q.lookahead===0&&(Ot(q),q.lookahead===0)){if(ye===_)return v;break}if(q.match_length=0,Ze=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,Ze&&(oe(q,!1),q.strm.avail_out===0))return v}return q.insert=0,ye===k?(oe(q,!0),q.strm.avail_out===0?tt:ze):q.last_lit&&(oe(q,!1),q.strm.avail_out===0)?v:ge}(U,je):U.strategy===3?function(q,ye){for(var Ze,Pe,st,bt,Et=q.window;;){if(q.lookahead<=me){if(Ot(q),q.lookahead<=me&&ye===_)return v;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=le&&0<q.strstart&&(Pe=Et[st=q.strstart-1])===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]){bt=q.strstart+me;do;while(Pe===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]&&Pe===Et[++st]&&st<bt);q.match_length=me-(bt-st),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=le?(Ze=c._tr_tally(q,1,q.match_length-le),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(Ze=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),Ze&&(oe(q,!1),q.strm.avail_out===0))return v}return q.insert=0,ye===k?(oe(q,!0),q.strm.avail_out===0?tt:ze):q.last_lit&&(oe(q,!1),q.strm.avail_out===0)?v:ge}(U,je):a[U.level].func(U,je);if(Ie!==tt&&Ie!==ze||(U.status=666),Ie===v||Ie===tt)return w.avail_out===0&&(U.last_flush=-1),b;if(Ie===ge&&(je===1?c._tr_align(U):je!==5&&(c._tr_stored_block(U,0,0,!1),je===3&&(Ae(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),X(w),w.avail_out===0))return U.last_flush=-1,b}return je!==k?b:U.wrap<=0?1:(U.wrap===2?(We(U,255&w.adler),We(U,w.adler>>8&255),We(U,w.adler>>16&255),We(U,w.adler>>24&255),We(U,255&w.total_in),We(U,w.total_in>>8&255),We(U,w.total_in>>16&255),We(U,w.total_in>>24&255)):(Ye(U,w.adler>>>16),Ye(U,65535&w.adler)),X(w),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?b:1)},i.deflateEnd=function(w){var je;return w&&w.state?(je=w.state.status)!==V&&je!==69&&je!==73&&je!==91&&je!==103&&je!==xe&&je!==666?be(w,E):(w.state=null,je===xe?be(w,-3):b):E},i.deflateSetDictionary=function(w,je){var he,U,D,ee,_e,Ie,q,ye,Ze=je.length;if(!w||!w.state||(ee=(he=w.state).wrap)===2||ee===1&&he.status!==V||he.lookahead)return E;for(ee===1&&(w.adler=d(w.adler,je,Ze,0)),he.wrap=0,Ze>=he.w_size&&(ee===0&&(Ae(he.head),he.strstart=0,he.block_start=0,he.insert=0),ye=new l.Buf8(he.w_size),l.arraySet(ye,je,Ze-he.w_size,he.w_size,0),je=ye,Ze=he.w_size),_e=w.avail_in,Ie=w.next_in,q=w.input,w.avail_in=Ze,w.next_in=0,w.input=je,Ot(he);he.lookahead>=le;){for(U=he.strstart,D=he.lookahead-(le-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[U+le-1])&he.hash_mask,he.prev[U&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=U,U++,--D;);he.strstart=U,he.lookahead=le-1,Ot(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=le-1,he.match_available=0,w.next_in=Ie,w.input=q,w.avail_in=_e,he.wrap=ee,b},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(a,l){var c,d,y,j,_,k,b,E,z,A,x,g,N,R,F,ie,J,ue,le,me,Fe,V,xe,v,ge;c=a.state,d=a.next_in,v=a.input,y=d+(a.avail_in-5),j=a.next_out,ge=a.output,_=j-(l-a.avail_out),k=j+(a.avail_out-257),b=c.dmax,E=c.wsize,z=c.whave,A=c.wnext,x=c.window,g=c.hold,N=c.bits,R=c.lencode,F=c.distcode,ie=(1<<c.lenbits)-1,J=(1<<c.distbits)-1;e:do{N<15&&(g+=v[d++]<<N,N+=8,g+=v[d++]<<N,N+=8),ue=R[g&ie];t:for(;;){if(g>>>=le=ue>>>24,N-=le,(le=ue>>>16&255)===0)ge[j++]=65535&ue;else{if(!(16&le)){if(!(64&le)){ue=R[(65535&ue)+(g&(1<<le)-1)];continue t}if(32&le){c.mode=12;break e}a.msg="invalid literal/length code",c.mode=30;break e}me=65535&ue,(le&=15)&&(N<le&&(g+=v[d++]<<N,N+=8),me+=g&(1<<le)-1,g>>>=le,N-=le),N<15&&(g+=v[d++]<<N,N+=8,g+=v[d++]<<N,N+=8),ue=F[g&J];n:for(;;){if(g>>>=le=ue>>>24,N-=le,!(16&(le=ue>>>16&255))){if(!(64&le)){ue=F[(65535&ue)+(g&(1<<le)-1)];continue n}a.msg="invalid distance code",c.mode=30;break e}if(Fe=65535&ue,N<(le&=15)&&(g+=v[d++]<<N,(N+=8)<le&&(g+=v[d++]<<N,N+=8)),b<(Fe+=g&(1<<le)-1)){a.msg="invalid distance too far back",c.mode=30;break e}if(g>>>=le,N-=le,(le=j-_)<Fe){if(z<(le=Fe-le)&&c.sane){a.msg="invalid distance too far back",c.mode=30;break e}if(xe=x,(V=0)===A){if(V+=E-le,le<me){for(me-=le;ge[j++]=x[V++],--le;);V=j-Fe,xe=ge}}else if(A<le){if(V+=E+A-le,(le-=A)<me){for(me-=le;ge[j++]=x[V++],--le;);if(V=0,A<me){for(me-=le=A;ge[j++]=x[V++],--le;);V=j-Fe,xe=ge}}}else if(V+=A-le,le<me){for(me-=le;ge[j++]=x[V++],--le;);V=j-Fe,xe=ge}for(;2<me;)ge[j++]=xe[V++],ge[j++]=xe[V++],ge[j++]=xe[V++],me-=3;me&&(ge[j++]=xe[V++],1<me&&(ge[j++]=xe[V++]))}else{for(V=j-Fe;ge[j++]=ge[V++],ge[j++]=ge[V++],ge[j++]=ge[V++],2<(me-=3););me&&(ge[j++]=ge[V++],1<me&&(ge[j++]=ge[V++]))}break}}break}}while(d<y&&j<k);d-=me=N>>3,g&=(1<<(N-=me<<3))-1,a.next_in=d,a.next_out=j,a.avail_in=d<y?y-d+5:5-(d-y),a.avail_out=j<k?k-j+257:257-(j-k),c.hold=g,c.bits=N}},{}],49:[function(n,r,i){var a=n("../utils/common"),l=n("./adler32"),c=n("./crc32"),d=n("./inffast"),y=n("./inftrees"),j=1,_=2,k=0,b=-2,E=1,z=852,A=592;function x(V){return(V>>>24&255)+(V>>>8&65280)+((65280&V)<<8)+((255&V)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(V){var xe;return V&&V.state?(xe=V.state,V.total_in=V.total_out=xe.total=0,V.msg="",xe.wrap&&(V.adler=1&xe.wrap),xe.mode=E,xe.last=0,xe.havedict=0,xe.dmax=32768,xe.head=null,xe.hold=0,xe.bits=0,xe.lencode=xe.lendyn=new a.Buf32(z),xe.distcode=xe.distdyn=new a.Buf32(A),xe.sane=1,xe.back=-1,k):b}function R(V){var xe;return V&&V.state?((xe=V.state).wsize=0,xe.whave=0,xe.wnext=0,N(V)):b}function F(V,xe){var v,ge;return V&&V.state?(ge=V.state,xe<0?(v=0,xe=-xe):(v=1+(xe>>4),xe<48&&(xe&=15)),xe&&(xe<8||15<xe)?b:(ge.window!==null&&ge.wbits!==xe&&(ge.window=null),ge.wrap=v,ge.wbits=xe,R(V))):b}function ie(V,xe){var v,ge;return V?(ge=new g,(V.state=ge).window=null,(v=F(V,xe))!==k&&(V.state=null),v):b}var J,ue,le=!0;function me(V){if(le){var xe;for(J=new a.Buf32(512),ue=new a.Buf32(32),xe=0;xe<144;)V.lens[xe++]=8;for(;xe<256;)V.lens[xe++]=9;for(;xe<280;)V.lens[xe++]=7;for(;xe<288;)V.lens[xe++]=8;for(y(j,V.lens,0,288,J,0,V.work,{bits:9}),xe=0;xe<32;)V.lens[xe++]=5;y(_,V.lens,0,32,ue,0,V.work,{bits:5}),le=!1}V.lencode=J,V.lenbits=9,V.distcode=ue,V.distbits=5}function Fe(V,xe,v,ge){var tt,ze=V.state;return ze.window===null&&(ze.wsize=1<<ze.wbits,ze.wnext=0,ze.whave=0,ze.window=new a.Buf8(ze.wsize)),ge>=ze.wsize?(a.arraySet(ze.window,xe,v-ze.wsize,ze.wsize,0),ze.wnext=0,ze.whave=ze.wsize):(ge<(tt=ze.wsize-ze.wnext)&&(tt=ge),a.arraySet(ze.window,xe,v-ge,tt,ze.wnext),(ge-=tt)?(a.arraySet(ze.window,xe,v-ge,ge,0),ze.wnext=ge,ze.whave=ze.wsize):(ze.wnext+=tt,ze.wnext===ze.wsize&&(ze.wnext=0),ze.whave<ze.wsize&&(ze.whave+=tt))),0}i.inflateReset=R,i.inflateReset2=F,i.inflateResetKeep=N,i.inflateInit=function(V){return ie(V,15)},i.inflateInit2=ie,i.inflate=function(V,xe){var v,ge,tt,ze,be,ae,Ae,X,oe,We,Ye,Ee,Ot,Xt,St,Ht,vn,Vt,Jn,Ln,w,je,he,U,D=0,ee=new a.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return b;(v=V.state).mode===12&&(v.mode=13),be=V.next_out,tt=V.output,Ae=V.avail_out,ze=V.next_in,ge=V.input,ae=V.avail_in,X=v.hold,oe=v.bits,We=ae,Ye=Ae,je=k;e:for(;;)switch(v.mode){case E:if(v.wrap===0){v.mode=13;break}for(;oe<16;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(2&v.wrap&&X===35615){ee[v.check=0]=255&X,ee[1]=X>>>8&255,v.check=c(v.check,ee,2,0),oe=X=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&X)<<8)+(X>>8))%31){V.msg="incorrect header check",v.mode=30;break}if((15&X)!=8){V.msg="unknown compression method",v.mode=30;break}if(oe-=4,w=8+(15&(X>>>=4)),v.wbits===0)v.wbits=w;else if(w>v.wbits){V.msg="invalid window size",v.mode=30;break}v.dmax=1<<w,V.adler=v.check=1,v.mode=512&X?10:12,oe=X=0;break;case 2:for(;oe<16;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(v.flags=X,(255&v.flags)!=8){V.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){V.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=X>>8&1),512&v.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,v.check=c(v.check,ee,2,0)),oe=X=0,v.mode=3;case 3:for(;oe<32;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}v.head&&(v.head.time=X),512&v.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,ee[2]=X>>>16&255,ee[3]=X>>>24&255,v.check=c(v.check,ee,4,0)),oe=X=0,v.mode=4;case 4:for(;oe<16;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}v.head&&(v.head.xflags=255&X,v.head.os=X>>8),512&v.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,v.check=c(v.check,ee,2,0)),oe=X=0,v.mode=5;case 5:if(1024&v.flags){for(;oe<16;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}v.length=X,v.head&&(v.head.extra_len=X),512&v.flags&&(ee[0]=255&X,ee[1]=X>>>8&255,v.check=c(v.check,ee,2,0)),oe=X=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(ae<(Ee=v.length)&&(Ee=ae),Ee&&(v.head&&(w=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),a.arraySet(v.head.extra,ge,ze,Ee,w)),512&v.flags&&(v.check=c(v.check,ge,Ee,ze)),ae-=Ee,ze+=Ee,v.length-=Ee),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(ae===0)break e;for(Ee=0;w=ge[ze+Ee++],v.head&&w&&v.length<65536&&(v.head.name+=String.fromCharCode(w)),w&&Ee<ae;);if(512&v.flags&&(v.check=c(v.check,ge,Ee,ze)),ae-=Ee,ze+=Ee,w)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(ae===0)break e;for(Ee=0;w=ge[ze+Ee++],v.head&&w&&v.length<65536&&(v.head.comment+=String.fromCharCode(w)),w&&Ee<ae;);if(512&v.flags&&(v.check=c(v.check,ge,Ee,ze)),ae-=Ee,ze+=Ee,w)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;oe<16;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(X!==(65535&v.check)){V.msg="header crc mismatch",v.mode=30;break}oe=X=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),V.adler=v.check=0,v.mode=12;break;case 10:for(;oe<32;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}V.adler=v.check=x(X),oe=X=0,v.mode=11;case 11:if(v.havedict===0)return V.next_out=be,V.avail_out=Ae,V.next_in=ze,V.avail_in=ae,v.hold=X,v.bits=oe,2;V.adler=v.check=1,v.mode=12;case 12:if(xe===5||xe===6)break e;case 13:if(v.last){X>>>=7&oe,oe-=7&oe,v.mode=27;break}for(;oe<3;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}switch(v.last=1&X,oe-=1,3&(X>>>=1)){case 0:v.mode=14;break;case 1:if(me(v),v.mode=20,xe!==6)break;X>>>=2,oe-=2;break e;case 2:v.mode=17;break;case 3:V.msg="invalid block type",v.mode=30}X>>>=2,oe-=2;break;case 14:for(X>>>=7&oe,oe-=7&oe;oe<32;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if((65535&X)!=(X>>>16^65535)){V.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&X,oe=X=0,v.mode=15,xe===6)break e;case 15:v.mode=16;case 16:if(Ee=v.length){if(ae<Ee&&(Ee=ae),Ae<Ee&&(Ee=Ae),Ee===0)break e;a.arraySet(tt,ge,ze,Ee,be),ae-=Ee,ze+=Ee,Ae-=Ee,be+=Ee,v.length-=Ee;break}v.mode=12;break;case 17:for(;oe<14;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(v.nlen=257+(31&X),X>>>=5,oe-=5,v.ndist=1+(31&X),X>>>=5,oe-=5,v.ncode=4+(15&X),X>>>=4,oe-=4,286<v.nlen||30<v.ndist){V.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;oe<3;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}v.lens[_e[v.have++]]=7&X,X>>>=3,oe-=3}for(;v.have<19;)v.lens[_e[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,he={bits:v.lenbits},je=y(0,v.lens,0,19,v.lencode,0,v.work,he),v.lenbits=he.bits,je){V.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;Ht=(D=v.lencode[X&(1<<v.lenbits)-1])>>>16&255,vn=65535&D,!((St=D>>>24)<=oe);){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(vn<16)X>>>=St,oe-=St,v.lens[v.have++]=vn;else{if(vn===16){for(U=St+2;oe<U;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(X>>>=St,oe-=St,v.have===0){V.msg="invalid bit length repeat",v.mode=30;break}w=v.lens[v.have-1],Ee=3+(3&X),X>>>=2,oe-=2}else if(vn===17){for(U=St+3;oe<U;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}oe-=St,w=0,Ee=3+(7&(X>>>=St)),X>>>=3,oe-=3}else{for(U=St+7;oe<U;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}oe-=St,w=0,Ee=11+(127&(X>>>=St)),X>>>=7,oe-=7}if(v.have+Ee>v.nlen+v.ndist){V.msg="invalid bit length repeat",v.mode=30;break}for(;Ee--;)v.lens[v.have++]=w}}if(v.mode===30)break;if(v.lens[256]===0){V.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,he={bits:v.lenbits},je=y(j,v.lens,0,v.nlen,v.lencode,0,v.work,he),v.lenbits=he.bits,je){V.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,he={bits:v.distbits},je=y(_,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,he),v.distbits=he.bits,je){V.msg="invalid distances set",v.mode=30;break}if(v.mode=20,xe===6)break e;case 20:v.mode=21;case 21:if(6<=ae&&258<=Ae){V.next_out=be,V.avail_out=Ae,V.next_in=ze,V.avail_in=ae,v.hold=X,v.bits=oe,d(V,Ye),be=V.next_out,tt=V.output,Ae=V.avail_out,ze=V.next_in,ge=V.input,ae=V.avail_in,X=v.hold,oe=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;Ht=(D=v.lencode[X&(1<<v.lenbits)-1])>>>16&255,vn=65535&D,!((St=D>>>24)<=oe);){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(Ht&&!(240&Ht)){for(Vt=St,Jn=Ht,Ln=vn;Ht=(D=v.lencode[Ln+((X&(1<<Vt+Jn)-1)>>Vt)])>>>16&255,vn=65535&D,!(Vt+(St=D>>>24)<=oe);){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}X>>>=Vt,oe-=Vt,v.back+=Vt}if(X>>>=St,oe-=St,v.back+=St,v.length=vn,Ht===0){v.mode=26;break}if(32&Ht){v.back=-1,v.mode=12;break}if(64&Ht){V.msg="invalid literal/length code",v.mode=30;break}v.extra=15&Ht,v.mode=22;case 22:if(v.extra){for(U=v.extra;oe<U;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}v.length+=X&(1<<v.extra)-1,X>>>=v.extra,oe-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;Ht=(D=v.distcode[X&(1<<v.distbits)-1])>>>16&255,vn=65535&D,!((St=D>>>24)<=oe);){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(!(240&Ht)){for(Vt=St,Jn=Ht,Ln=vn;Ht=(D=v.distcode[Ln+((X&(1<<Vt+Jn)-1)>>Vt)])>>>16&255,vn=65535&D,!(Vt+(St=D>>>24)<=oe);){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}X>>>=Vt,oe-=Vt,v.back+=Vt}if(X>>>=St,oe-=St,v.back+=St,64&Ht){V.msg="invalid distance code",v.mode=30;break}v.offset=vn,v.extra=15&Ht,v.mode=24;case 24:if(v.extra){for(U=v.extra;oe<U;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}v.offset+=X&(1<<v.extra)-1,X>>>=v.extra,oe-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){V.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(Ae===0)break e;if(Ee=Ye-Ae,v.offset>Ee){if((Ee=v.offset-Ee)>v.whave&&v.sane){V.msg="invalid distance too far back",v.mode=30;break}Ot=Ee>v.wnext?(Ee-=v.wnext,v.wsize-Ee):v.wnext-Ee,Ee>v.length&&(Ee=v.length),Xt=v.window}else Xt=tt,Ot=be-v.offset,Ee=v.length;for(Ae<Ee&&(Ee=Ae),Ae-=Ee,v.length-=Ee;tt[be++]=Xt[Ot++],--Ee;);v.length===0&&(v.mode=21);break;case 26:if(Ae===0)break e;tt[be++]=v.length,Ae--,v.mode=21;break;case 27:if(v.wrap){for(;oe<32;){if(ae===0)break e;ae--,X|=ge[ze++]<<oe,oe+=8}if(Ye-=Ae,V.total_out+=Ye,v.total+=Ye,Ye&&(V.adler=v.check=v.flags?c(v.check,tt,Ye,be-Ye):l(v.check,tt,Ye,be-Ye)),Ye=Ae,(v.flags?X:x(X))!==v.check){V.msg="incorrect data check",v.mode=30;break}oe=X=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;oe<32;){if(ae===0)break e;ae--,X+=ge[ze++]<<oe,oe+=8}if(X!==(4294967295&v.total)){V.msg="incorrect length check",v.mode=30;break}oe=X=0}v.mode=29;case 29:je=1;break e;case 30:je=-3;break e;case 31:return-4;case 32:default:return b}return V.next_out=be,V.avail_out=Ae,V.next_in=ze,V.avail_in=ae,v.hold=X,v.bits=oe,(v.wsize||Ye!==V.avail_out&&v.mode<30&&(v.mode<27||xe!==4))&&Fe(V,V.output,V.next_out,Ye-V.avail_out)?(v.mode=31,-4):(We-=V.avail_in,Ye-=V.avail_out,V.total_in+=We,V.total_out+=Ye,v.total+=Ye,v.wrap&&Ye&&(V.adler=v.check=v.flags?c(v.check,tt,Ye,V.next_out-Ye):l(v.check,tt,Ye,V.next_out-Ye)),V.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(We==0&&Ye===0||xe===4)&&je===k&&(je=-5),je)},i.inflateEnd=function(V){if(!V||!V.state)return b;var xe=V.state;return xe.window&&(xe.window=null),V.state=null,k},i.inflateGetHeader=function(V,xe){var v;return V&&V.state&&2&(v=V.state).wrap?((v.head=xe).done=!1,k):b},i.inflateSetDictionary=function(V,xe){var v,ge=xe.length;return V&&V.state?(v=V.state).wrap!==0&&v.mode!==11?b:v.mode===11&&l(1,xe,ge,0)!==v.check?-3:Fe(V,xe,ge,ge)?(v.mode=31,-4):(v.havedict=1,k):b},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var a=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(j,_,k,b,E,z,A,x){var g,N,R,F,ie,J,ue,le,me,Fe=x.bits,V=0,xe=0,v=0,ge=0,tt=0,ze=0,be=0,ae=0,Ae=0,X=0,oe=null,We=0,Ye=new a.Buf16(16),Ee=new a.Buf16(16),Ot=null,Xt=0;for(V=0;V<=15;V++)Ye[V]=0;for(xe=0;xe<b;xe++)Ye[_[k+xe]]++;for(tt=Fe,ge=15;1<=ge&&Ye[ge]===0;ge--);if(ge<tt&&(tt=ge),ge===0)return E[z++]=20971520,E[z++]=20971520,x.bits=1,0;for(v=1;v<ge&&Ye[v]===0;v++);for(tt<v&&(tt=v),V=ae=1;V<=15;V++)if(ae<<=1,(ae-=Ye[V])<0)return-1;if(0<ae&&(j===0||ge!==1))return-1;for(Ee[1]=0,V=1;V<15;V++)Ee[V+1]=Ee[V]+Ye[V];for(xe=0;xe<b;xe++)_[k+xe]!==0&&(A[Ee[_[k+xe]]++]=xe);if(J=j===0?(oe=Ot=A,19):j===1?(oe=l,We-=257,Ot=c,Xt-=257,256):(oe=d,Ot=y,-1),V=v,ie=z,be=xe=X=0,R=-1,F=(Ae=1<<(ze=tt))-1,j===1&&852<Ae||j===2&&592<Ae)return 1;for(;;){for(ue=V-be,me=A[xe]<J?(le=0,A[xe]):A[xe]>J?(le=Ot[Xt+A[xe]],oe[We+A[xe]]):(le=96,0),g=1<<V-be,v=N=1<<ze;E[ie+(X>>be)+(N-=g)]=ue<<24|le<<16|me|0,N!==0;);for(g=1<<V-1;X&g;)g>>=1;if(g!==0?(X&=g-1,X+=g):X=0,xe++,--Ye[V]==0){if(V===ge)break;V=_[k+A[xe]]}if(tt<V&&(X&F)!==R){for(be===0&&(be=tt),ie+=v,ae=1<<(ze=V-be);ze+be<ge&&!((ae-=Ye[ze+be])<=0);)ze++,ae<<=1;if(Ae+=1<<ze,j===1&&852<Ae||j===2&&592<Ae)return 1;E[R=X&F]=tt<<24|ze<<16|ie-z|0}}return X!==0&&(E[ie+X]=V-be<<24|64<<16|0),x.bits=tt,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var a=n("../utils/common"),l=0,c=1;function d(D){for(var ee=D.length;0<=--ee;)D[ee]=0}var y=0,j=29,_=256,k=_+1+j,b=30,E=19,z=2*k+1,A=15,x=16,g=7,N=256,R=16,F=17,ie=18,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ue=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Fe=new Array(2*(k+2));d(Fe);var V=new Array(2*b);d(V);var xe=new Array(512);d(xe);var v=new Array(256);d(v);var ge=new Array(j);d(ge);var tt,ze,be,ae=new Array(b);function Ae(D,ee,_e,Ie,q){this.static_tree=D,this.extra_bits=ee,this.extra_base=_e,this.elems=Ie,this.max_length=q,this.has_stree=D&&D.length}function X(D,ee){this.dyn_tree=D,this.max_code=0,this.stat_desc=ee}function oe(D){return D<256?xe[D]:xe[256+(D>>>7)]}function We(D,ee){D.pending_buf[D.pending++]=255&ee,D.pending_buf[D.pending++]=ee>>>8&255}function Ye(D,ee,_e){D.bi_valid>x-_e?(D.bi_buf|=ee<<D.bi_valid&65535,We(D,D.bi_buf),D.bi_buf=ee>>x-D.bi_valid,D.bi_valid+=_e-x):(D.bi_buf|=ee<<D.bi_valid&65535,D.bi_valid+=_e)}function Ee(D,ee,_e){Ye(D,_e[2*ee],_e[2*ee+1])}function Ot(D,ee){for(var _e=0;_e|=1&D,D>>>=1,_e<<=1,0<--ee;);return _e>>>1}function Xt(D,ee,_e){var Ie,q,ye=new Array(A+1),Ze=0;for(Ie=1;Ie<=A;Ie++)ye[Ie]=Ze=Ze+_e[Ie-1]<<1;for(q=0;q<=ee;q++){var Pe=D[2*q+1];Pe!==0&&(D[2*q]=Ot(ye[Pe]++,Pe))}}function St(D){var ee;for(ee=0;ee<k;ee++)D.dyn_ltree[2*ee]=0;for(ee=0;ee<b;ee++)D.dyn_dtree[2*ee]=0;for(ee=0;ee<E;ee++)D.bl_tree[2*ee]=0;D.dyn_ltree[2*N]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function Ht(D){8<D.bi_valid?We(D,D.bi_buf):0<D.bi_valid&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function vn(D,ee,_e,Ie){var q=2*ee,ye=2*_e;return D[q]<D[ye]||D[q]===D[ye]&&Ie[ee]<=Ie[_e]}function Vt(D,ee,_e){for(var Ie=D.heap[_e],q=_e<<1;q<=D.heap_len&&(q<D.heap_len&&vn(ee,D.heap[q+1],D.heap[q],D.depth)&&q++,!vn(ee,Ie,D.heap[q],D.depth));)D.heap[_e]=D.heap[q],_e=q,q<<=1;D.heap[_e]=Ie}function Jn(D,ee,_e){var Ie,q,ye,Ze,Pe=0;if(D.last_lit!==0)for(;Ie=D.pending_buf[D.d_buf+2*Pe]<<8|D.pending_buf[D.d_buf+2*Pe+1],q=D.pending_buf[D.l_buf+Pe],Pe++,Ie===0?Ee(D,q,ee):(Ee(D,(ye=v[q])+_+1,ee),(Ze=J[ye])!==0&&Ye(D,q-=ge[ye],Ze),Ee(D,ye=oe(--Ie),_e),(Ze=ue[ye])!==0&&Ye(D,Ie-=ae[ye],Ze)),Pe<D.last_lit;);Ee(D,N,ee)}function Ln(D,ee){var _e,Ie,q,ye=ee.dyn_tree,Ze=ee.stat_desc.static_tree,Pe=ee.stat_desc.has_stree,st=ee.stat_desc.elems,bt=-1;for(D.heap_len=0,D.heap_max=z,_e=0;_e<st;_e++)ye[2*_e]!==0?(D.heap[++D.heap_len]=bt=_e,D.depth[_e]=0):ye[2*_e+1]=0;for(;D.heap_len<2;)ye[2*(q=D.heap[++D.heap_len]=bt<2?++bt:0)]=1,D.depth[q]=0,D.opt_len--,Pe&&(D.static_len-=Ze[2*q+1]);for(ee.max_code=bt,_e=D.heap_len>>1;1<=_e;_e--)Vt(D,ye,_e);for(q=st;_e=D.heap[1],D.heap[1]=D.heap[D.heap_len--],Vt(D,ye,1),Ie=D.heap[1],D.heap[--D.heap_max]=_e,D.heap[--D.heap_max]=Ie,ye[2*q]=ye[2*_e]+ye[2*Ie],D.depth[q]=(D.depth[_e]>=D.depth[Ie]?D.depth[_e]:D.depth[Ie])+1,ye[2*_e+1]=ye[2*Ie+1]=q,D.heap[1]=q++,Vt(D,ye,1),2<=D.heap_len;);D.heap[--D.heap_max]=D.heap[1],function(Et,sr){var Ps,dr,Rs,Mt,qn,Nn,Sn=sr.dyn_tree,Ar=sr.max_code,oi=sr.stat_desc.static_tree,Ds=sr.stat_desc.has_stree,wr=sr.stat_desc.extra_bits,Ls=sr.stat_desc.extra_base,Os=sr.stat_desc.max_length,Qn=0;for(Mt=0;Mt<=A;Mt++)Et.bl_count[Mt]=0;for(Sn[2*Et.heap[Et.heap_max]+1]=0,Ps=Et.heap_max+1;Ps<z;Ps++)Os<(Mt=Sn[2*Sn[2*(dr=Et.heap[Ps])+1]+1]+1)&&(Mt=Os,Qn++),Sn[2*dr+1]=Mt,Ar<dr||(Et.bl_count[Mt]++,qn=0,Ls<=dr&&(qn=wr[dr-Ls]),Nn=Sn[2*dr],Et.opt_len+=Nn*(Mt+qn),Ds&&(Et.static_len+=Nn*(oi[2*dr+1]+qn)));if(Qn!==0){do{for(Mt=Os-1;Et.bl_count[Mt]===0;)Mt--;Et.bl_count[Mt]--,Et.bl_count[Mt+1]+=2,Et.bl_count[Os]--,Qn-=2}while(0<Qn);for(Mt=Os;Mt!==0;Mt--)for(dr=Et.bl_count[Mt];dr!==0;)Ar<(Rs=Et.heap[--Ps])||(Sn[2*Rs+1]!==Mt&&(Et.opt_len+=(Mt-Sn[2*Rs+1])*Sn[2*Rs],Sn[2*Rs+1]=Mt),dr--)}}(D,ee),Xt(ye,bt,D.bl_count)}function w(D,ee,_e){var Ie,q,ye=-1,Ze=ee[1],Pe=0,st=7,bt=4;for(Ze===0&&(st=138,bt=3),ee[2*(_e+1)+1]=65535,Ie=0;Ie<=_e;Ie++)q=Ze,Ze=ee[2*(Ie+1)+1],++Pe<st&&q===Ze||(Pe<bt?D.bl_tree[2*q]+=Pe:q!==0?(q!==ye&&D.bl_tree[2*q]++,D.bl_tree[2*R]++):Pe<=10?D.bl_tree[2*F]++:D.bl_tree[2*ie]++,ye=q,bt=(Pe=0)===Ze?(st=138,3):q===Ze?(st=6,3):(st=7,4))}function je(D,ee,_e){var Ie,q,ye=-1,Ze=ee[1],Pe=0,st=7,bt=4;for(Ze===0&&(st=138,bt=3),Ie=0;Ie<=_e;Ie++)if(q=Ze,Ze=ee[2*(Ie+1)+1],!(++Pe<st&&q===Ze)){if(Pe<bt)for(;Ee(D,q,D.bl_tree),--Pe!=0;);else q!==0?(q!==ye&&(Ee(D,q,D.bl_tree),Pe--),Ee(D,R,D.bl_tree),Ye(D,Pe-3,2)):Pe<=10?(Ee(D,F,D.bl_tree),Ye(D,Pe-3,3)):(Ee(D,ie,D.bl_tree),Ye(D,Pe-11,7));ye=q,bt=(Pe=0)===Ze?(st=138,3):q===Ze?(st=6,3):(st=7,4)}}d(ae);var he=!1;function U(D,ee,_e,Ie){Ye(D,(y<<1)+(Ie?1:0),3),function(q,ye,Ze,Pe){Ht(q),We(q,Ze),We(q,~Ze),a.arraySet(q.pending_buf,q.window,ye,Ze,q.pending),q.pending+=Ze}(D,ee,_e)}i._tr_init=function(D){he||(function(){var ee,_e,Ie,q,ye,Ze=new Array(A+1);for(q=Ie=0;q<j-1;q++)for(ge[q]=Ie,ee=0;ee<1<<J[q];ee++)v[Ie++]=q;for(v[Ie-1]=q,q=ye=0;q<16;q++)for(ae[q]=ye,ee=0;ee<1<<ue[q];ee++)xe[ye++]=q;for(ye>>=7;q<b;q++)for(ae[q]=ye<<7,ee=0;ee<1<<ue[q]-7;ee++)xe[256+ye++]=q;for(_e=0;_e<=A;_e++)Ze[_e]=0;for(ee=0;ee<=143;)Fe[2*ee+1]=8,ee++,Ze[8]++;for(;ee<=255;)Fe[2*ee+1]=9,ee++,Ze[9]++;for(;ee<=279;)Fe[2*ee+1]=7,ee++,Ze[7]++;for(;ee<=287;)Fe[2*ee+1]=8,ee++,Ze[8]++;for(Xt(Fe,k+1,Ze),ee=0;ee<b;ee++)V[2*ee+1]=5,V[2*ee]=Ot(ee,5);tt=new Ae(Fe,J,_+1,k,A),ze=new Ae(V,ue,0,b,A),be=new Ae(new Array(0),le,0,E,g)}(),he=!0),D.l_desc=new X(D.dyn_ltree,tt),D.d_desc=new X(D.dyn_dtree,ze),D.bl_desc=new X(D.bl_tree,be),D.bi_buf=0,D.bi_valid=0,St(D)},i._tr_stored_block=U,i._tr_flush_block=function(D,ee,_e,Ie){var q,ye,Ze=0;0<D.level?(D.strm.data_type===2&&(D.strm.data_type=function(Pe){var st,bt=4093624447;for(st=0;st<=31;st++,bt>>>=1)if(1&bt&&Pe.dyn_ltree[2*st]!==0)return l;if(Pe.dyn_ltree[18]!==0||Pe.dyn_ltree[20]!==0||Pe.dyn_ltree[26]!==0)return c;for(st=32;st<_;st++)if(Pe.dyn_ltree[2*st]!==0)return c;return l}(D)),Ln(D,D.l_desc),Ln(D,D.d_desc),Ze=function(Pe){var st;for(w(Pe,Pe.dyn_ltree,Pe.l_desc.max_code),w(Pe,Pe.dyn_dtree,Pe.d_desc.max_code),Ln(Pe,Pe.bl_desc),st=E-1;3<=st&&Pe.bl_tree[2*me[st]+1]===0;st--);return Pe.opt_len+=3*(st+1)+5+5+4,st}(D),q=D.opt_len+3+7>>>3,(ye=D.static_len+3+7>>>3)<=q&&(q=ye)):q=ye=_e+5,_e+4<=q&&ee!==-1?U(D,ee,_e,Ie):D.strategy===4||ye===q?(Ye(D,2+(Ie?1:0),3),Jn(D,Fe,V)):(Ye(D,4+(Ie?1:0),3),function(Pe,st,bt,Et){var sr;for(Ye(Pe,st-257,5),Ye(Pe,bt-1,5),Ye(Pe,Et-4,4),sr=0;sr<Et;sr++)Ye(Pe,Pe.bl_tree[2*me[sr]+1],3);je(Pe,Pe.dyn_ltree,st-1),je(Pe,Pe.dyn_dtree,bt-1)}(D,D.l_desc.max_code+1,D.d_desc.max_code+1,Ze+1),Jn(D,D.dyn_ltree,D.dyn_dtree)),St(D),Ie&&Ht(D)},i._tr_tally=function(D,ee,_e){return D.pending_buf[D.d_buf+2*D.last_lit]=ee>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&ee,D.pending_buf[D.l_buf+D.last_lit]=255&_e,D.last_lit++,ee===0?D.dyn_ltree[2*_e]++:(D.matches++,ee--,D.dyn_ltree[2*(v[_e]+_+1)]++,D.dyn_dtree[2*oe(ee)]++),D.last_lit===D.lit_bufsize-1},i._tr_align=function(D){Ye(D,2,3),Ee(D,N,Fe),function(ee){ee.bi_valid===16?(We(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(D)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(a){(function(l,c){if(!l.setImmediate){var d,y,j,_,k=1,b={},E=!1,z=l.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(l);A=A&&A.setTimeout?A:l,d={}.toString.call(l.process)==="[object process]"?function(R){process.nextTick(function(){g(R)})}:function(){if(l.postMessage&&!l.importScripts){var R=!0,F=l.onmessage;return l.onmessage=function(){R=!1},l.postMessage("","*"),l.onmessage=F,R}}()?(_="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",N,!1):l.attachEvent("onmessage",N),function(R){l.postMessage(_+R,"*")}):l.MessageChannel?((j=new MessageChannel).port1.onmessage=function(R){g(R.data)},function(R){j.port2.postMessage(R)}):z&&"onreadystatechange"in z.createElement("script")?(y=z.documentElement,function(R){var F=z.createElement("script");F.onreadystatechange=function(){g(R),F.onreadystatechange=null,y.removeChild(F),F=null},y.appendChild(F)}):function(R){setTimeout(g,0,R)},A.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var F=new Array(arguments.length-1),ie=0;ie<F.length;ie++)F[ie]=arguments[ie+1];var J={callback:R,args:F};return b[k]=J,d(k),k++},A.clearImmediate=x}function x(R){delete b[R]}function g(R){if(E)setTimeout(g,0,R);else{var F=b[R];if(F){E=!0;try{(function(ie){var J=ie.callback,ue=ie.args;switch(ue.length){case 0:J();break;case 1:J(ue[0]);break;case 2:J(ue[0],ue[1]);break;case 3:J(ue[0],ue[1],ue[2]);break;default:J.apply(c,ue)}})(F)}finally{x(R),E=!1}}}}function N(R){R.source===l&&typeof R.data=="string"&&R.data.indexOf(_)===0&&g(+R.data.slice(_.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(sy);var T2=sy.exports;const M2=Cm(T2);var iy={exports:{}};(function(e,t){(function(n,r){r()})(Js,function(){function n(y,j){return typeof j>"u"?j={autoBom:!1}:typeof j!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),j={autoBom:!j}),j.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function r(y,j,_){var k=new XMLHttpRequest;k.open("GET",y),k.responseType="blob",k.onload=function(){d(k.response,j,_)},k.onerror=function(){console.error("could not download file")},k.send()}function i(y){var j=new XMLHttpRequest;j.open("HEAD",y,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function a(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(j)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Js=="object"&&Js.global===Js?Js:void 0,c=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(y,j,_){var k=l.URL||l.webkitURL,b=document.createElement("a");j=j||y.name||"download",b.download=j,b.rel="noopener",typeof y=="string"?(b.href=y,b.origin===location.origin?a(b):i(b.href)?r(y,j,_):a(b,b.target="_blank")):(b.href=k.createObjectURL(y),setTimeout(function(){k.revokeObjectURL(b.href)},4e4),setTimeout(function(){a(b)},0))}:"msSaveOrOpenBlob"in navigator?function(y,j,_){if(j=j||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(n(y,_),j);else if(i(y))r(y,j,_);else{var k=document.createElement("a");k.href=y,k.target="_blank",setTimeout(function(){a(k)})}}:function(y,j,_,k){if(k=k||open("","_blank"),k&&(k.document.title=k.document.body.innerText="downloading..."),typeof y=="string")return r(y,j,_);var b=y.type==="application/octet-stream",E=/constructor/i.test(l.HTMLElement)||l.safari,z=/CriOS\/[\d]+/.test(navigator.userAgent);if((z||b&&E||c)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var N=A.result;N=z?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=N:location=N,k=null},A.readAsDataURL(y)}else{var x=l.URL||l.webkitURL,g=x.createObjectURL(y);k?k.location=g:location.href=g,k=null,setTimeout(function(){x.revokeObjectURL(g)},4e4)}});l.saveAs=d.saveAs=d,e.exports=d})})(iy);var $2=iy.exports;(function(){const e=console.error,t=console.warn,n=console.log,r=i=>{for(let a of i){let l="";if(typeof a=="string"?l=a:a&&typeof a=="object"?a.message?l=a.message:a.toString?l=a.toString():l=JSON.stringify(a):a!=null&&(l=String(a)),l.includes("Unable to preventDefault inside passive event listener")||l.includes("passive event listener invocation")||l.includes("preventDefault")&&l.includes("passive"))return!0}return!1};console.error=function(...i){r(i)||e.apply(console,i)},console.warn=function(...i){r(i)||t.apply(console,i)},console.log=function(...i){r(i)||n.apply(console,i)}})();const A2=({canvasRef:e,isDrawing:t})=>{const[n,r]=B.useState(""),i=B.useRef(null),a=B.useCallback(()=>{e.current&&r(e.current.toDataURL())},[e]);return B.useEffect(()=>{e.current&&a()},[e,a]),B.useEffect(()=>{if(!t){a();return}const l=()=>{a(),t&&(i.current=requestAnimationFrame(l))};return i.current=requestAnimationFrame(l),()=>{i.current&&cancelAnimationFrame(i.current)}},[t,a]),n?o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(255, 0, 0, 0.3)",mixBlendMode:"multiply",WebkitMaskImage:`url(${n})`,maskImage:`url(${n})`,WebkitMaskSize:"100% 100%",maskSize:"100% 100%",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}}):null},Ci=(()=>{const e="tapnow_images_db",n="images";let r=null,i=null;const a=new Map,l=()=>i||(i=new Promise((b,E)=>{if(!window.indexedDB){console.warn("[LocalImageManager] IndexedDB not supported, falling back to memory"),b(null);return}const z=indexedDB.open(e,1);z.onerror=A=>{console.error("[LocalImageManager] IndexedDB init failed:",A.target.error),b(null)},z.onsuccess=A=>{r=A.target.result,console.log("[LocalImageManager] IndexedDB initialized"),b(r)},z.onupgradeneeded=A=>{const x=A.target.result;x.objectStoreNames.contains(n)||(x.createObjectStore(n,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("[LocalImageManager] Object store created"))}}),i),c=()=>`img_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,d=async(b,E=null)=>{const z=await l();if(!z)return null;const A=E||c();return new Promise((x,g)=>{var N;try{let R;if(typeof b=="string"&&b.startsWith("data:")){const le=b.split(","),me=((N=le[0].match(/:(.*?);/))==null?void 0:N[1])||"image/png",Fe=atob(le[1]),V=new Uint8Array(Fe.length);for(let xe=0;xe<Fe.length;xe++)V[xe]=Fe.charCodeAt(xe);R=new Blob([V],{type:me})}else if(b instanceof Blob)R=b;else{console.warn("[LocalImageManager] Invalid data type for saveImage"),x(null);return}const ie=z.transaction([n],"readwrite").objectStore(n),J={id:A,blob:R,timestamp:Date.now(),size:R.size},ue=ie.put(J);ue.onsuccess=()=>{console.log(`[LocalImageManager] Saved image: ${A} (${(R.size/1024).toFixed(1)}KB)`),x(A)},ue.onerror=le=>{console.error("[LocalImageManager] Save failed:",le.target.error),x(null)}}catch(R){console.error("[LocalImageManager] Save error:",R),x(null)}})},y=async b=>{if(a.has(b))return a.get(b);const E=await l();return E?new Promise(z=>{try{const g=E.transaction([n],"readonly").objectStore(n).get(b);g.onsuccess=()=>{const N=g.result;if(N&&N.blob){const R=URL.createObjectURL(N.blob);a.set(b,R),z(R)}else z(null)},g.onerror=()=>z(null)}catch(A){console.error("[LocalImageManager] Get error:",A),z(null)}}):null},j=async b=>{const E=await l();return E?(a.has(b)&&(URL.revokeObjectURL(a.get(b)),a.delete(b)),new Promise(z=>{const g=E.transaction([n],"readwrite").objectStore(n).delete(b);g.onsuccess=()=>z(!0),g.onerror=()=>z(!1)})):!1},_=async()=>{const b=await l();return b?new Promise(E=>{const x=b.transaction([n],"readonly").objectStore(n).getAll();x.onsuccess=()=>{const g=x.result||[],N=g.reduce((R,F)=>R+(F.size||0),0);E({count:g.length,totalSize:N})},x.onerror=()=>E({count:0,totalSize:0})}):{count:0,totalSize:0}},k=b=>typeof b=="string"&&b.startsWith("img_");return l(),{saveImage:d,getImage:y,deleteImage:j,getStats:_,isImageId:k,initDB:l}})();window.LocalImageManager=Ci;const qr=({src:e,className:t,alt:n,onError:r,onLoad:i,...a})=>{const[l,c]=B.useState(null),[d,y]=B.useState(!1),[j,_]=B.useState(!1),k=B.useRef(null);return B.useEffect(()=>{if(!e||e.startsWith("blob:")||e.startsWith("http://")||e.startsWith("https://")){c(e),_(!1);return}if(Ci.isImageId(e)){_(!0),(async()=>{try{const E=await Ci.getImage(e);E?(k.current=E,c(E)):(console.warn(`[LazyBase64Image] Image not found in IDB: ${e}`),y(!0))}catch(E){console.error("[LazyBase64Image] IDB resolve failed:",E),y(!0)}_(!1)})();return}return e.startsWith("data:")?(async()=>{try{const z=await(await fetch(e)).blob(),A=URL.createObjectURL(z);k.current=A,c(A)}catch(E){console.error("Base64Blob",E),y(!0),c(e)}})():c(e),()=>{k.current&&k.current.startsWith("blob:")&&(URL.revokeObjectURL(k.current),k.current=null)}},[e]),j||d&&!l||!l||Ci.isImageId(l)?null:o.jsx("img",{src:l,className:t,alt:n,onError:r,onLoad:i,...a})},P2=({visible:e,progress:t,status:n,type:r})=>e?o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-300 pointer-events-none select-none",children:o.jsxs("div",{className:"relative bg-[#09090b]/90 border border-white/10 rounded-2xl p-8 shadow-2xl flex flex-col items-center min-w-[300px] backdrop-blur-xl",children:[o.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 w-20 h-20 bg-blue-500/20 blur-[50px] rounded-full pointer-events-none"}),o.jsxs("div",{className:"flex flex-col items-center gap-1 mb-6 z-10",children:[o.jsx("span",{className:"font-mono text-[10px] tracking-[0.3em] uppercase text-zinc-500",children:r==="import"?"DATA INGESTION":"SYSTEM ARCHIVING"}),o.jsxs("div",{className:"text-4xl font-bold text-zinc-200 tracking-tighter font-sans",children:[t.toFixed(0),o.jsx("span",{className:"text-sm text-zinc-500 ml-1",children:"%"})]})]}),o.jsx("div",{className:"relative w-full h-[2px] bg-zinc-800 rounded-full overflow-hidden mb-4",children:o.jsx("div",{className:"absolute top-0 left-0 h-full bg-white shadow-[0_0_10px_rgba(255,255,255,0.5)] transition-all duration-100 ease-linear",style:{width:`${t}%`}})}),o.jsx("span",{className:"text-[10px] font-mono text-zinc-400 tracking-widest uppercase animate-pulse",children:n})]})}):null,gm=B.memo(({item:e,theme:t,lightboxItem:n,onDelete:r,onClick:i,onContextMenu:a,onImageClick:l,onImageContextMenu:c,onRefresh:d,performanceMode:y,localServerUrl:j,isSelected:_,onSelect:k,providers:b,defaultProviders:E})=>{var z,A,x;return o.jsxs("div",{className:`group rounded-lg overflow-hidden border relative cursor-pointer transition-colors ${_?"border-blue-500 ring-2 ring-blue-500/30":t==="dark"?"bg-zinc-900 border-zinc-800 hover:border-blue-500/50":"bg-white border-zinc-200 hover:border-blue-500/50"}`,style:{contentVisibility:"auto",containIntrinsicSize:"1px 300px"},onClick:i,onContextMenu:a,children:[k&&o.jsx("button",{onClick:g=>{g.stopPropagation(),g.preventDefault(),console.log("[V3.5.1 Debug] Selection button clicked for:",e.id,"current isSelected:",_),k(e.id)},className:`absolute bottom-2 right-2 z-20 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${_?"bg-green-500 border-green-400 opacity-100":"border-white/60 bg-black/50 opacity-100 hover:bg-black/70"}`,title:_?"":"",children:_&&o.jsx(Xa,{size:16,className:"text-white"})}),o.jsxs("div",{className:`bg-black relative ${e.mjImages&&(e.mjImages.length===4||e.mjImages.length>1)||e.mjNeedsSplit&&((A=(z=e.apiConfig)==null?void 0:z.modelId)!=null&&A.includes("mj"))?(()=>{const g=e.mjRatio||"1:1";return g==="16:9"?"aspect-video":g==="9:16"?"aspect-[9/16]":g==="4:3"?"aspect-[4/3]":g==="3:4"?"aspect-[3/4]":g==="21:9"?"aspect-[21/9]":"aspect-square"})():"aspect-video"}`,children:[e.status==="completed"?e.mjImages&&(e.mjImages.length===4||e.mjImages.length>1)?o.jsx("div",{className:`w-full h-full grid gap-0.5 p-0.5 ${e.mjImages.length===4?"grid-cols-2 grid-rows-2":"grid-cols-2"}`,children:e.mjImages.map((g,N)=>(e.mjImageInfo&&e.mjImageInfo[N],o.jsxs("div",{onClick:R=>l&&l(R,e,g,N),onContextMenu:R=>c&&c(R,e,g,N),className:`relative w-full h-full cursor-pointer border-2 transition-all overflow-hidden ${e.selectedMjImageIndex===N&&n&&n.id===e.id?"border-blue-500 scale-95":"border-transparent hover:border-blue-500/50"}`,children:[o.jsx(qr,{src:g,loading:"lazy",className:"w-full h-full object-contain",alt:` ${N+1}`,onError:R=>{console.error(` ${N+1} `),R.target.style.display="none"}}),e.selectedMjImageIndex===N&&n&&n.id===e.id&&o.jsx("div",{className:"absolute top-1 right-1 w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center z-10",children:o.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},N)))}):e.type==="image"?o.jsx(qr,{src:e.url||e.mjOriginalUrl,loading:"lazy",className:"w-full h-full object-cover",alt:e.prompt||"",onError:g=>{console.error(":",e.url||e.mjOriginalUrl),g.target.style.display="none"}}):o.jsx("video",{src:e.url,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,preload:"metadata",onError:g=>{console.error(":",e.url)}}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Ss,{className:"animate-spin text-zinc-600"})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-zinc-800",children:o.jsx("div",{className:"h-full bg-blue-500 transition-all",style:{width:`${e.progress}%`}})})]}),o.jsxs("div",{className:"p-2",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("p",{className:`text-[10px] line-clamp-1 flex-1 ${t==="dark"?"text-zinc-400":"text-zinc-600"}`,children:e.prompt}),o.jsx("button",{onClick:g=>{g.stopPropagation(),r&&r(e.id)},className:`shrink-0 p-0.5 mr-1 ${t==="dark"?"text-zinc-500 hover:text-red-500":"text-zinc-400 hover:text-red-500"}`,title:"",children:o.jsx(Cs,{size:12})}),e.type==="video"&&(e.status==="generating"||e.status==="failed")&&o.jsx("button",{onClick:g=>{g.stopPropagation(),d&&d(e)},className:`shrink-0 p-0.5 ${t==="dark"?"text-zinc-500 hover:text-white":"text-zinc-400 hover:text-zinc-900"}`,title:"",children:o.jsx(Uf,{size:12})})]}),e.status==="failed"&&e.errorMsg&&o.jsx("p",{className:"text-[9px] text-red-500 mt-1 break-words whitespace-pre-wrap",children:e.errorMsg.split(`
`).map((g,N)=>o.jsxs("span",{children:[g,N<e.errorMsg.split(`
`).length-1&&o.jsx("br",{})]},N))}),e.status==="generating"&&o.jsx("p",{className:"text-[9px] text-blue-500 mt-1",children:e.errorMsg||"..."})]}),o.jsx("div",{className:"flex items-center justify-between px-3 py-2 text-[11px]",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:t==="dark"?"text-zinc-300":"text-zinc-700",children:[((x=e.prompt)==null?void 0:x.slice(0,40))||"Untitled",e.prompt&&e.prompt.length>40?"":""]}),o.jsxs("span",{className:t==="dark"?"text-zinc-500":"text-zinc-400",title:`${e.provider||"Provider"} - ${e.id}`,children:[e.time,"  ",o.jsx("span",{title:e.provider,children:e.id}),typeof e.durationMs=="number"&&e.durationMs>0&&o.jsxs(o.Fragment,{children:["   ",(e.durationMs/1e3).toFixed(1),"s"]})]})]})})]})},(e,t)=>{var n,r;return e.item===t.item&&e.theme===t.theme&&((n=e.lightboxItem)==null?void 0:n.id)===((r=t.lightboxItem)==null?void 0:r.id)&&e.isSelected===t.isSelected}),R2=({nodeId:e,imageUrl:t,imageDimensions:n,isActive:r,onClose:i,onSave:a,theme:l,view:c,maskContent:d,onUpdateNode:y})=>{const j=B.useRef(null),_=B.useRef(null),[k,b]=B.useState(30),[E,z]=B.useState(!1),[A,x]=B.useState([]),[g,N]=B.useState(-1),R=10;B.useEffect(()=>{if(!r||!j.current||!n)return;const v=j.current,ge=v.getContext("2d");if(_.current=ge,v.width=n.w,v.height=n.h,ge.clearRect(0,0,v.width,v.height),d){const tt=new Image;tt.onload=()=>{ge.drawImage(tt,0,0),F()},tt.src=d}else F()},[r,n,e,d]);const F=()=>{if(!j.current||!_.current)return;const v=j.current,tt=_.current.getImageData(0,0,v.width,v.height),ze=A.slice(0,g+1);ze.push(tt),ze.length>R&&ze.shift(),x(ze),N(ze.length-1)},ie=v=>{if(!j.current)return null;const ge=j.current,tt=ge.getBoundingClientRect(),ze=v.clientX-tt.left,be=v.clientY-tt.top,ae=ge.width/tt.width,Ae=ge.height/tt.height;return{x:Math.round(ze*ae),y:Math.round(be*Ae)}},J=v=>{if(!E||!j.current||!_.current)return;const ge=ie(v);if(!ge)return;const tt=_.current;tt.globalCompositeOperation="source-over",tt.fillStyle="#FFFFFF",tt.beginPath(),tt.arc(ge.x,ge.y,k/2,0,Math.PI*2),tt.fill()},ue=v=>{v.button===0&&(v.preventDefault(),v.stopPropagation(),z(!0),F(),J(v))},le=v=>{E&&(v.preventDefault(),v.stopPropagation(),J(v))},me=v=>{E&&(v.preventDefault(),v.stopPropagation(),z(!1),F())},Fe=()=>{if(g<=0||!j.current||!_.current)return;const v=g-1;N(v),_.current.putImageData(A[v],0,0)},V=()=>{if(!j.current||!_.current)return;_.current.clearRect(0,0,j.current.width,j.current.height),F()},xe=()=>{if(!j.current)return;const ge=j.current.toDataURL("image/png");y&&y(e,{maskContent:ge,isMasking:!1}),a&&a(ge),i&&i()};return B.useEffect(()=>{if(!r)return;const v=ge=>{(ge.ctrlKey||ge.metaKey)&&ge.key==="z"&&!ge.shiftKey&&(ge.preventDefault(),Fe())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[r,g,A]),!r||!t||!n?null:o.jsxs("div",{className:"absolute inset-0 z-50 pointer-events-auto",style:{mixBlendMode:"normal"},onMouseDown:v=>v.stopPropagation(),onMouseMove:v=>v.stopPropagation(),onMouseUp:v=>v.stopPropagation(),children:[o.jsx("canvas",{ref:j,className:"absolute inset-0 w-full h-full",style:{opacity:.5,mixBlendMode:"multiply",cursor:"crosshair",pointerEvents:"auto",imageRendering:"pixelated"},onMouseDown:ue,onMouseMove:le,onMouseUp:me,onMouseLeave:me}),o.jsx(A2,{canvasRef:j,isDrawing:E}),o.jsxs("div",{className:`absolute bottom-4 left-1/2 -translate-x-1/2 flex flex-row items-center gap-4 p-2 rounded-full border backdrop-blur-md shadow-xl ${l==="dark"?"bg-zinc-900/90 border-zinc-700 text-zinc-200":"bg-white/90 border-zinc-300 text-zinc-800"}`,onMouseDown:v=>v.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:""}),o.jsx("input",{type:"range",min:"10",max:"100",value:k,onChange:v=>b(Number(v.target.value)),className:"w-20",onMouseDown:v=>v.stopPropagation()}),o.jsxs("span",{className:"text-[10px] w-8 text-right whitespace-nowrap",children:[k,"px"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:Fe,disabled:g<=0,className:`p-1.5 rounded-full transition-colors ${l==="dark"?"hover:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed":"hover:bg-zinc-100 disabled:opacity-50 disabled:cursor-not-allowed"}`,title:" (Ctrl+Z)",children:o.jsx(S2,{size:14})}),o.jsx("button",{onClick:V,className:`p-1.5 rounded-full transition-colors ${l==="dark"?"hover:bg-zinc-800":"hover:bg-zinc-100"}`,title:"",children:o.jsx(ry,{size:14})}),o.jsx("button",{onClick:xe,className:"p-1.5 rounded-full bg-blue-600 hover:bg-blue-500 text-white transition-colors",title:"/",children:o.jsx(ny,{size:14})})]})]})]})},D2=`
        /*  */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        /*  */
        #canvas-bg {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }
        
        /*  */
        #canvas-bg > div[style*="transform"] {
            transform: translateZ(0);
            will-change: transform;
        }
        
        /*  */
        .node-wrapper {
            transform: translateZ(0);
            backface-visibility: hidden;
            contain: layout style;
            will-change: transform, left, top;
        }
        
        /*  -  */
        .node-wrapper img,
        .node-wrapper video {
            image-rendering: auto;
            image-rendering: -webkit-optimize-contrast;
            transform: translateZ(0);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            pointer-events: none;
        }
        
        /*  */
        svg {
            shape-rendering: geometricPrecision;
            text-rendering: optimizeLegibility;
        }
        
        /*  */
        .perf-mode .node-wrapper {
            box-shadow: none !important;
            backdrop-filter: none !important;
            border-radius: 0 !important;
            transition: none !important;
        }
        .perf-mode .connection-group {
            opacity: 1 !important;
        }
        
        /*  */
        .interacting .node-wrapper img {
            image-rendering: pixelated;
        }
        .interacting .connection-group {
            display: none;
            pointer-events: none;
        }
        
        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 2px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #52525b; }
        .resize-handle { cursor: nwse-resize; opacity: 0; transition: opacity 0.2s; }
        .node-wrapper:hover .resize-handle { opacity: 1; }
        
        /*  */
        .connector { position: absolute; top: 50%; transform: translateY(-50%); width: 0.9rem; height: 0.9rem; background-color: #27272a; border: 1px solid #71717a; color: #a1a1aa; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: crosshair; transition: all 0.2s; z-index: 30; opacity: 0; pointer-events: auto; }
        .node-wrapper:hover .connector { opacity: 1; }
        .connector:hover, .connector.active { background-color: #d4d4d8; border-color: #fff; transform: translateY(-50%) scale(1.2); opacity: 1; color: #000; }
        .connector-right { right: -0.45rem; }
        
        /*  */
        .input-point { position: absolute; top: 50%; transform: translateY(-50%); left: -0.25rem; width: 0.5rem; height: 0.5rem; background-color: #52525b; border-radius: 50%; border: 1px solid #18181b; transition: all 0.2s; z-index: 20; cursor: crosshair; }
        .node-wrapper:hover .input-point { background-color: #a1a1aa; }
        .input-point.connected { background-color: #60a5fa; box-shadow: 0 0 6px #60a5fa; }
        .input-point.active { background-color: #60a5fa; border-color: #fff; transform: translateY(-50%) scale(1.3); box-shadow: 0 0 8px #60a5fa; }

        /* Lightbox & Overlay */
        .lightbox-overlay { background-color: rgba(0, 0, 0, 0.95); backdrop-filter: blur(5px); }
        
        /* Stack Items */
        .thumb-stack-item {
             transition: transform 0.2s, z-index 0.2s;
        }
        .thumb-stack-item:hover {
            transform: scale(1.1) translateY(-2px);
            z-index: 10 !important;
            border-color: #60a5fa;
        }

        /*  */
        .connection-delete {
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: auto; /*  */
        }
        /*  */
        .connection-group:hover .connection-delete {
            opacity: 1;
        }

        /*  */
        .drop-zone {
            border: 2px dashed transparent;
            transition: all 0.3s;
        }
        .drop-zone.drag-over {
            border-color: #60a5fa;
            background-color: rgba(96, 165, 250, 0.1);
        }

        /* Markdown Styles for Chat */
        .markdown-body { font-size: 13px; line-height: 1.5; color: #e4e4e7; word-wrap: break-word; user-select: text !important; cursor: text; }
        .markdown-body * { user-select: text !important; cursor: text; }
        .markdown-body pre { background: #27272a; padding: 10px; border-radius: 6px; overflow-x: auto; margin: 8px 0; white-space: pre-wrap; word-wrap: break-word; user-select: text !important; cursor: text; }
        .markdown-body code { font-family: monospace; background: #3f3f46; padding: 2px 4px; border-radius: 4px; font-size: 12px; user-select: text !important; cursor: text; }
        .markdown-body pre code { background: transparent; padding: 0; color: #a1a1aa; user-select: text !important; cursor: text; }
        .markdown-body p { margin-bottom: 8px; user-select: text !important; cursor: text; }
        .markdown-body ul, .markdown-body ol { margin-left: 20px; margin-bottom: 8px; list-style: disc; user-select: text !important; cursor: text; }
        .markdown-body li { user-select: text !important; cursor: text; }
        .markdown-body video { max-width: 100%; border-radius: 0.5rem; margin-top: 0.5rem; }
        .markdown-body table { border-collapse: collapse; width: 100%; margin: 12px 0; }
        .markdown-body table th, .markdown-body table td { border: 1px solid #3f3f46; padding: 8px 12px; text-align: left; }
        .markdown-body table th { background-color: #3f3f46; font-weight: 600; }
        .markdown-body table tr:nth-child(even) { background-color: #27272a; }
        .theme-light .markdown-body table th, .theme-light .markdown-body table td { border-color: #d4d4d8; }
        .theme-light .markdown-body table th { background-color: #e4e4e7; }
        .theme-light .markdown-body table tr:nth-child(even) { background-color: #f4f4f5; }
        .theme-light .markdown-body { color: #18181b; }
        .theme-light .markdown-body pre { background: #f4f4f5; color: #18181b; }
        .theme-light .markdown-body code { background: #e4e4e7; color: #18181b; }
        .theme-light .markdown-body pre code { color: #18181b; }
        `,L2=4e3,O2=4e3,hr="https://ai.comfly.chat",U2="http://localhost:5100",Od={openai:{key:"",url:hr},google:{key:"",url:hr},deepseek:{key:"",url:hr},flux:{key:"",url:hr},midjourney:{key:"",url:"https://api.midjourney.com"},jimeng:{key:"",url:U2},grok:{key:"",url:"https://ai.t8star.cn"}},F2=[{id:"gpt-5.1",provider:"openai",type:"Chat"},{id:"gpt-5.2",provider:"openai",type:"Chat"},{id:"gpt-4o",provider:"openai",type:"Chat"},{id:"deepseek-v3-1-250821",provider:"deepseek",type:"Chat"},{id:"gemini-3-pro-preview",provider:"google",type:"Chat"},{id:"MJ V6",provider:"midjourney",type:"Image"},{id:"flux-kontext-pro",provider:"flux",type:"Image"},{id:"gpt-4o-image",provider:"openai",type:"Image"},{id:"jimeng-4.5",provider:"jimeng",type:"Image"},{id:"jimeng-4.1",provider:"jimeng",type:"Image"},{id:"jimeng-4.0",provider:"jimeng",type:"Image"},{id:"jimeng-3.1",provider:"jimeng",type:"Image"},{id:"jimeng-3.0",provider:"jimeng",type:"Image"},{id:"jimeng-2.1",provider:"jimeng",type:"Image"},{id:"jimeng-xl-pro",provider:"jimeng",type:"Image"},{id:"nanobananapro",provider:"jimeng",type:"Image"},{id:"nanobanana",provider:"jimeng",type:"Image"},{id:"sora-2",provider:"openai",type:"Video",durations:["5s","10s"]},{id:"sora-2-pro",provider:"openai",type:"Video",durations:["15s","25s"]},{id:"jimeng-video-3.5-pro",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-veo3",provider:"jimeng",type:"Video",durations:["8s"]},{id:"jimeng-video-veo3.1",provider:"jimeng",type:"Video",durations:["8s"]},{id:"jimeng-video-sora2",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-3.0-pro",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-3.0",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-3.0-fast",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-2.0-pro",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"jimeng-video-2.0",provider:"jimeng",type:"Video",durations:["5s","10s"]},{id:"grok-video-3",provider:"grok",type:"Video",durations:["8s","5s"]}],xm=["Auto","1:1","16:9","9:16","4:3","3:4","21:9","3:2","2:3"],B2=["3:2","2:3","1:1"],H2=["1080P","720P"],ym="tapnow_prompt_library",vm="3x3 gridKeep character strictly consistent9Character Sheet",bm="UpscaleSharpeningDenoisingBest quality, 8k, masterpiece, highres, ultra detailed, sharp focus, image restoration, upscale, faithful to original.",wm=`you are a veteran Hollywood storyboard artist with years of experience. You have the ability to accurately analyze character features and scene characteristics based on images. Provide me with the most suitable camera angles and storyboards. Strictly base this on the uploaded character and scene images, while maintaining a consistent visual style.

MANDATORY LAYOUT: Create a precise 3x3 GRID containing exactly 9 distinct panels.

- The output image MUST be a single image divided into a 3 (rows) by 3 (columns) matrix.
- There must be EXACTLY 3 horizontal rows and 3 vertical columns.
- Each panel must be completely separated by a thin, distinct, solid black line.
- DO NOT create a collage. DO NOT overlap images. DO NOT create random sizes. 
- The grid structure must be perfectly aligned for slicing.

Subject Content: "[]"

Styling Instructions:
- Each panel shows the SAME subject/scene from a DIFFERENT angle (e.g., Front, Side, Back, Action, Close-up).
- Maintain perfect consistency of the character/object across all panels.
- Cinematic lighting, high fidelity, 8k resolution.

Negative Constraints:
- No text, no captions, no UI elements.
- No watermarks.
- No broken grid lines.`,km=`(strictly mimic source image art style:1.5), (same visual style:1.4),
score_9, score_8_up, masterpiece, best quality, (character sheet:1.4), (reference sheet:1.3), (consistent art style:1.3), matching visual style, 

[Structure & General Annotations]:
multiple views, full body central figure, clean background, 
(heavy annotation:1.4), (text labels with arrows:1.3), handwriting, data readout,

[SPECIAL CHARACTER DESCRIPTION AREA]:
(prominent character profile text box:1.6), (dedicated biography section:1.5), large descriptive text block,
[],

[Clothing Breakdown]:
(clothing breakdown:1.5), (outfit decomposition:1.4), garment analysis, (floating apparel:1.3), 
displaying outerwear, displaying upper body garment, displaying lower body garment, 

[Footwear Focus]:
(detailed footwear display:1.5), (floating shoes:1.4), shoe design breakdown, focus on shoes, 

[Inventory & Details]:
(inventory knolling:1.2), open container, personal accessories, organized items display, expression panels`,zm=`# Directive: Create a "Rich Narrative Mood Board" (8-Grid Layout)

## 1. PROJECT INPUT 

**A. [Story & Concept / ]**
> []

**B. [Key Symbols /  (Optional)]**
> []

**C. [Color Preferences /  (Optional)]**
> []

**D. [Reference Images / ]**
> (See attached images / )

---

## 2. Role Definition
Act as a **Senior Art Director**. Synthesize the Input above into a single, cohesive, high-density **Visual Mood Board** using a complex **8-Panel Asymmetrical Grid Layout**.

## 3. Layout Mapping (Strict Adherence)
You must design a visual composition that tells the story through **8 distinct panels** within one image. **Do not** generate random grids. Map the content exactly as follows:

* **Panel 1 (The World):** A wide, cinematic establishing shot of the environment (based on Input A).
* **Panel 2 (The Protagonist):** A portrait close-up (based on reference images), focusing on micro-expressions.
* **Panel 3 (The Metaphor):** An **abstract symbolic object** representing the core theme (based on Input B).
* **Panel 4 (The Palette):** A graphical **Color Palette Strip** showcasing 5 specific colors extracted from the scene.
* **Panel 5 (The Texture):** Extreme macro close-up of a material surface (e.g., rust, skin, fabric) to add tactile richness.
* **Panel 6 (The Motion):** A motion-blurred or long-exposure shot representing time/chaos.
* **Panel 7 (The Detail):** A focused shot of a specific prop or accessory relevant to the plot.
* **Panel 8 (The AI Art Interpretation - CRITICAL):** This is your **free creative space**. Generate an artistic, surreal, or abstract re-interpretation of the story's emotion. **Do not just copy the inputs.** Create a "Vibe Image" (e.g., Double Exposure, Oil Painting style, or abstract geometry) that captures the *soul* of the narrative.

## 4. Execution Requirements
* **Composition Style:** High-end Editorial / Magazine Layout. Clean, thin white borders.
* **Visual Unity:** All panels must share the same lighting conditions and color grading logic (Unified Aesthetic).
* **Task:** Provide the **Final English Image Prompt** that explicitly describes this 8-grid layout, ensuring Panel 8 stands out as an artistic variation.`,jm=["gemini-image","qwen-image","doubao-seedream","jimeng","hailuo-02","kling-v1-6","wan-2.5"],W2=e=>e&&e.includes("grok")?B2:xm,_m=["Auto","1K","2K","4K"],Nm=e=>e&&e.includes("jimeng-4.5")?["2K","4K"]:_m,Ud=[{label:"MJ V7",value:"--v 7"},{label:"MJ V6.1",value:"--v 6.1"},{label:"MJ V6",value:"--v 6"},{label:"MJ V5.2",value:"--v 5.2"},{label:"MJ V5.1",value:"--v 5.1"},{label:"Niji V6",value:"--niji 6"},{label:"Niji V5",value:"--niji 5"},{label:"Niji V4",value:"--niji 4"}],oy=(e,t)=>{let n=1024,r=1024;if(t==="1080P"?(n=1920,r=1080):t==="720P"?(n=1280,r=720):t==="2K"?(n=2048,r=2048):t==="4K"&&(n=3840,r=2160),e==="Auto")return{str:`${n}x${r}`,w:n,h:r};const[i,a]=e.split(":").map(Number);if(!i||!a)return{str:"1024x1024",w:1024,h:1024};let l,c;return Math.abs(i-a)<.1?(l=n,c=r):i>a?(l=t==="Auto"||t==="1K"?1280:n,c=Math.round(l*(a/i))):(c=t==="Auto"||t==="1K"?1280:n,l=Math.round(c*(i/a))),l=Math.round(l/16)*16,c=Math.round(c/16)*16,{str:`${l}x${c}`,w:l,h:c}},V2=(e,t,n)=>{const{str:r,w:i,h:a}=oy(t,n);return e.includes("minimax")?{sizeStr:n==="4K"?"1080p":"720p",w:i,h:a}:e.includes("jimeng")||e.includes("veo")?{sizeStr:t,w:i,h:a}:e.includes("grok")?{sizeStr:t,w:i,h:a}:{sizeStr:r,w:i,h:a}},Sr=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>t({w:r.naturalWidth,h:r.naturalHeight}),r.onerror=()=>n(new Error("Failed to load image")),r.src=e}),Gn=e=>{if(!e)return!1;if(e.startsWith("data:video")||e.includes("force_video_display=true"))return!0;const t=e.split(".").pop().split("?")[0].toLowerCase();return["mp4","webm","ogg","mov"].includes(t)},Sm=e=>new Promise((t,n)=>{const r=document.createElement("video");r.preload="metadata",r.muted=!0,r.playsInline=!0,r.onloadedmetadata=()=>{t({duration:Number(r.duration)||0,w:r.videoWidth||0,h:r.videoHeight||0})},r.onerror=()=>n(new Error("")),r.src=e}),K2=(e,{fps:t=2}={})=>new Promise((n,r)=>{const i=document.createElement("video"),a=document.createElement("canvas"),l=a.getContext("2d");i.muted=!0,i.playsInline=!0,i.crossOrigin="anonymous",i.src=e;const c=[],d=()=>r(new Error(""));i.onerror=d,i.onloadedmetadata=()=>{const y=Number(i.duration)||0;if(!y||!isFinite(y)){r(new Error(""));return}a.width=i.videoWidth||1280,a.height=i.videoHeight||720;const j=1/Math.max(.1,t);let _=0;const k=()=>{l.drawImage(i,0,0,a.width,a.height),c.push({time:Number(_.toFixed(2)),url:a.toDataURL("image/jpeg",.82)}),_+=j,_<=y?i.currentTime=Math.min(_,y):n(c)};i.onseeked=k,i.currentTime=0}}),Y2=xu.memo(({img1:e,img2:t})=>{const[n,r]=B.useState(50),i=B.useRef(null),[a,l]=B.useState(!1),c=B.useRef(),d=B.useCallback(_=>{i.current&&(c.current||(c.current=requestAnimationFrame(()=>{if(!i.current)return;const k=i.current.getBoundingClientRect(),b=_.touches?_.touches[0].clientX:_.clientX,E=Math.max(0,Math.min(b-k.left,k.width));r(E/k.width*100),c.current=null})))},[]);B.useEffect(()=>()=>{c.current&&cancelAnimationFrame(c.current)},[]);const y=e,j=t||e;return y?o.jsxs("div",{ref:i,className:"relative w-full h-full cursor-col-resize overflow-hidden group rounded-lg select-none shadow-2xl border border-zinc-800 bg-[#09090b]",onMouseMove:d,onTouchMove:d,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[o.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:"conic-gradient(#333 90deg, transparent 90deg), conic-gradient(transparent 90deg, #333 90deg)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 10px 10px"}}),o.jsx("img",{src:y,loading:"lazy",decoding:"async",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),o.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden pointer-events-none select-none",style:{clipPath:`inset(0 0 0 ${n}%)`},children:o.jsx("img",{src:j,loading:"lazy",decoding:"async",className:"absolute inset-0 w-full h-full object-contain",draggable:!1})}),o.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/80 shadow-[0_0_10px_rgba(0,0,0,0.5)] pointer-events-none",style:{left:`${n}%`},children:o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-white rounded-full shadow-lg flex items-center justify-center text-black",children:o.jsx(fm,{size:12,className:"rotate-90"})})}),o.jsx("div",{className:`absolute bottom-2 left-2 bg-black/70 text-white text-[10px] font-medium px-2 py-0.5 rounded border border-white/10 transition-opacity duration-200 pointer-events-none ${a?"opacity-100":"opacity-60"}`,children:""}),o.jsx("div",{className:`absolute bottom-2 right-2 bg-blue-600/80 text-white text-[10px] font-medium px-2 py-0.5 rounded border border-white/10 transition-opacity duration-200 pointer-events-none ${a?"opacity-100":"opacity-60"}`,children:""})]}):o.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-zinc-500 bg-zinc-900/50 rounded-lg border border-zinc-800 border-dashed pointer-events-none",children:[o.jsx(fm,{size:24,className:"mb-2 opacity-50"}),o.jsx("span",{className:"text-xs font-medium",children:""})]})}),Cc=xu.memo(({children:e,onClick:t,className:n="",variant:r="primary",icon:i,disabled:a=!1,title:l=""})=>{const c="flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 font-medium text-xs select-none disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 active:scale-95",secondary:"bg-zinc-800 hover:bg-zinc-700 text-zinc-300 border border-zinc-700 active:scale-95",ghost:"bg-transparent hover:bg-zinc-800 text-zinc-400 hover:text-white",danger:"bg-red-900/30 hover:bg-red-800 text-red-200 border border-red-800 active:scale-95"};return o.jsxs("button",{onClick:t,disabled:a,className:`${c} ${d[r]} ${n}`,title:l,children:[i&&o.jsx(i,{size:14,className:e?"mr-1.5":""}),e]})}),Ec=(e,t)=>{let n;return function(...i){const a=()=>{clearTimeout(n),e(...i)};clearTimeout(n),n=setTimeout(a,t)}},G2=({isOpen:e,onClose:t,title:n,children:r,theme:i="dark"})=>{if(!e)return null;const a=i==="dark";return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm",onMouseDown:t,children:o.jsxs("div",{className:`rounded-xl shadow-2xl w-[680px] max-w-[90vw] overflow-hidden animate-in fade-in zoom-in-95 duration-200 flex flex-col max-h-[85vh] border ${a?"bg-[#09090b] border-zinc-800":"bg-white border-zinc-200"}`,onMouseDown:l=>l.stopPropagation(),onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:`flex items-center justify-between p-5 border-b shrink-0 ${a?"border-zinc-800/50":"border-zinc-200"}`,children:[o.jsx("h3",{className:`font-bold text-lg ${a?"text-white":"text-zinc-900"}`,children:n}),o.jsx("button",{onClick:t,className:a?"text-zinc-500 hover:text-white":"text-zinc-500 hover:text-zinc-900",children:o.jsx(Cr,{size:20})})]}),o.jsx("div",{className:`p-0 overflow-y-auto custom-scrollbar flex-1 ${a?"bg-[#09090b]":"bg-white"}`,children:r})]})})},X2=({item:e,onClose:t,onNavigate:n})=>{if(!e)return null;const r=B.useRef(e);return B.useEffect(()=>{r.current=e},[e]),B.useEffect(()=>{if(!e)return;const i=a=>{const l=r.current;if(l&&!(!l.mjImages||l.mjImages.length<=1)&&!(a.target.tagName==="INPUT"||a.target.tagName==="TEXTAREA")){if(a.key==="ArrowLeft"||a.key==="Left"){a.preventDefault(),a.stopPropagation();const c=l.selectedMjImageIndex!==void 0?l.selectedMjImageIndex:0,d=c>0?c-1:l.mjImages.length-1;d>=0&&d<l.mjImages.length&&n&&n(d)}else if(a.key==="ArrowRight"||a.key==="Right"){a.preventDefault(),a.stopPropagation();const c=l.selectedMjImageIndex!==void 0?l.selectedMjImageIndex:0,d=c<l.mjImages.length-1?c+1:0;d>=0&&d<l.mjImages.length&&n&&n(d)}}};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[e,n]),o.jsxs("div",{className:"fixed inset-0 z-[200] lightbox-overlay flex flex-col items-center justify-center animate-in fade-in duration-200",onClick:t,children:[o.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white p-2 bg-black/50 rounded-full transition-colors",onClick:t,children:o.jsx(Cr,{size:24})}),o.jsxs("div",{className:"max-w-[90vw] max-h-[85vh] relative",onClick:i=>i.stopPropagation(),children:[e.type==="image"?o.jsx(qr,{src:e.url,alt:e.prompt,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl object-contain"}):o.jsx("video",{src:e.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl"}),o.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/60 backdrop-blur-md px-6 py-3 rounded-full text-white text-sm font-medium border border-white/10 text-center shadow-2xl",children:[o.jsx("div",{className:"line-clamp-1 max-w-xl",children:e.prompt}),o.jsxs("div",{className:"text-[10px] text-zinc-400 mt-1",children:[e.width,"x",e.height,"  ",e.id,e.mjImages&&e.mjImages.length>1&&o.jsxs("span",{className:"ml-2",children:["(",(e.selectedMjImageIndex!==void 0?e.selectedMjImageIndex:0)+1,"/",e.mjImages.length,")"]})]})]}),e.mjImages&&e.mjImages.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-3 bg-black/50 rounded-full transition-colors",onClick:i=>{i.stopPropagation();const a=e.selectedMjImageIndex!==void 0?e.selectedMjImageIndex:0,l=a>0?a-1:e.mjImages.length-1;n&&n(l)},title:" ()",children:o.jsx(l2,{size:24})}),o.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white p-3 bg-black/50 rounded-full transition-colors",onClick:i=>{i.stopPropagation();const a=e.selectedMjImageIndex!==void 0?e.selectedMjImageIndex:0,l=a<e.mjImages.length-1?a+1:0;n&&n(l)},title:" ()",children:o.jsx(Za,{size:24})})]})]})]})};function Z2(){var Mh;const[e,t]=B.useState(()=>{try{return localStorage.getItem("tapnow_theme")||"dark"}catch{return"dark"}});B.useEffect(()=>{const s=document.createElement("style");return s.innerText=D2,document.head.appendChild(s),()=>{document.head.removeChild(s)}},[]),B.useEffect(()=>{try{localStorage.setItem("tapnow_theme",e)}catch{}const s=document.documentElement;e==="dark"?(s.classList.add("theme-dark"),s.classList.remove("theme-light"),document.body.style.backgroundColor="#09090b"):(s.classList.add("theme-light"),s.classList.remove("theme-dark"),document.body.style.backgroundColor="#f4f4f5")},[e]),B.useEffect(()=>{const s=setInterval(()=>{try{const u={nodes:Yr.current,connections:ha.current,timestamp:Date.now()};localStorage.setItem("tapnow_autosave",JSON.stringify(u)),console.log("[AutoSave] ",new Date().toLocaleTimeString())}catch(u){console.warn("[AutoSave] :",u.message)}},6e4);return()=>clearInterval(s)},[]),B.useEffect(()=>{const s=u=>{if(Yr.current&&Yr.current.length>0)return u.preventDefault(),u.returnValue="",u.returnValue};return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)},[]);const[n,r]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_autosave");if(s)return JSON.parse(s).nodes||[];const u=localStorage.getItem("tapnow_nodes");return u?JSON.parse(u):[]}catch{return[]}}),[i,a]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_autosave");if(s)return JSON.parse(s).connections||[];const u=localStorage.getItem("tapnow_connections");return u?JSON.parse(u):[]}catch{return[]}}),[l,c]=B.useState(()=>{const s=localStorage.getItem("tapnow_max_undo_steps");return s?Math.min(30,Math.max(1,parseInt(s)||5)):5}),[d,y]=B.useState([]),[j,_]=B.useState([]),k=B.useRef(!1),[b,E]=B.useState(null),[z,A]=B.useState(null),[x,g]=B.useState(null),[N,R]=B.useState([]),[F,ie]=B.useState(0),[J,ue]=B.useState(0),le=B.useRef(new Set),me=B.useCallback(()=>{k.current||(y(s=>[...s,{nodes:JSON.parse(JSON.stringify(n)),connections:JSON.parse(JSON.stringify(i))}].slice(-l)),_([]))},[n,i]),Fe=B.useRef(me);B.useEffect(()=>{Fe.current=me},[me]),B.useEffect(()=>{if(N.length===0)return;let s=0;n.forEach(h=>{var p;(p=h.settings)!=null&&p.shots&&h.settings.shots.forEach(m=>{m.status==="generating"&&s++;const S=`${h.id}:${m.id}`;le.current.has(S)&&(m.status==="generating"||m.status==="done"||m.status==="failed")&&le.current.delete(S)})});const u=s+le.current.size;let f=0;if(J===0?f=N.length:f=J-u,f>0){const h=N.slice(0,f),p=N.slice(f);h.length>0&&(console.log(`[Batch] Starting ${h.length} shots. Active: ${s}, Pending: ${le.current.size}, Concurrency: ${J}`,h),h.forEach((m,S)=>{var T,$;const I=n.find(M=>M.id===m.nodeId);if(I){const M=($=(T=I.settings)==null?void 0:T.shots)==null?void 0:$.find(O=>O.id===m.shotId);M&&M.status!=="generating"&&M.status!=="done"&&(le.current.add(`${m.nodeId}:${m.shotId}`),setTimeout(()=>{_h(m.nodeId,M)},S*1e3))}}),R(p))}},[N,J,n]);const V=B.useCallback(()=>{if(d.length===0)return;k.current=!0;const s=d[d.length-1];_(u=>[...u,{nodes:JSON.parse(JSON.stringify(n)),connections:JSON.parse(JSON.stringify(i))}]),r(s.nodes),a(s.connections),y(u=>u.slice(0,-1)),setTimeout(()=>{k.current=!1},100)},[d,n,i]),xe=B.useCallback(()=>{if(j.length===0)return;k.current=!0;const s=j[j.length-1];y(u=>[...u,{nodes:JSON.parse(JSON.stringify(n)),connections:JSON.parse(JSON.stringify(i))}]),r(s.nodes),a(s.connections),_(u=>u.slice(0,-1)),setTimeout(()=>{k.current=!1},100)},[j,n,i]);B.useEffect(()=>{const s=u=>{(u.ctrlKey||u.metaKey)&&u.key==="z"&&(u.shiftKey?(u.preventDefault(),xe()):(u.preventDefault(),V()))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[V,xe]);const[v,ge]=B.useState({x:0,y:0,zoom:1}),tt=B.useRef({x:0,y:0,zoom:1});B.useRef(null),B.useRef(new Map),B.useRef(new Map);const[ze,be]=B.useState(null),[ae,Ae]=B.useState(()=>{const s=localStorage.getItem("tapnow_api_configs");if(s)try{let u=JSON.parse(s);return u=u.map(f=>{if(f.modelName&&f.modelName!==f.id)return{id:f.modelName,provider:f.provider,type:f.type,...f.durations?{durations:f.durations}:{}};const{displayName:h,modelName:p,isCustom:m,...S}=f;return S}),u=u.filter(f=>!jm.includes(f.id)),u}catch(u){console.error("[V3.6.0]  apiConfigs :",u)}return[...F2]}),[X,oe]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_providers");if(s)return JSON.parse(s)}catch(s){console.error(" providers :",s)}return{...Od}});B.useEffect(()=>{try{localStorage.setItem("tapnow_providers",JSON.stringify(X))}catch(s){console.error(" providers :",s)}},[X]),B.useCallback(s=>{const u=ae.find(h=>h.id===s);if(!u)return{key:"",url:hr,id:s};const f=X[u.provider]||{};return{...u,modelName:u.id,key:f.key||"",url:f.url||hr}},[ae,X]);const[We,Ye]=B.useState(()=>localStorage.getItem("tapnow_global_key")||""),[Ee,Ot]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_api_blacklist");if(!s)return{};const u=JSON.parse(s),f=new Date().toDateString();return u.date!==f?{}:u.blacklist||{}}catch{return{}}});B.useEffect(()=>{try{localStorage.setItem("tapnow_api_blacklist",JSON.stringify({date:new Date().toDateString(),blacklist:Ee}))}catch{}},[Ee]);const Xt=B.useRef(Ee);B.useEffect(()=>{Xt.current=Ee},[Ee]);const St=(s,u)=>{if(!s)return;const f={date:new Date().toDateString(),reason:u,timestamp:Date.now()},h=Xt.current||{};Xt.current={...h,[s]:f},console.log("[V3.5.1 Debug] addToBlacklist called:"),console.log("  - Key ending:","..."+s.slice(-6)),console.log("  - Reason:",u),console.log("  - Old blacklist size:",Object.keys(h).length),console.log("  - New blacklist size:",Object.keys(Xt.current).length),Ot(p=>({...p,[s]:f})),console.log(` API Key "...${s.slice(-4)}" : ${u}`)},[Ht,vn]=B.useState(()=>{const s=localStorage.getItem("tapnow_jimeng_use_local_file");return s!==null?s==="true":!0}),[Vt,Jn]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_nodes");return!s||JSON.parse(s).length===0?(localStorage.removeItem("tapnow_project_name"),""):localStorage.getItem("tapnow_project_name")||""}catch{return""}}),[Ln,w]=B.useState(!1),je=B.useRef(null),[he,U]=B.useState({visible:!1,progress:0,status:"",type:"import"}),[D,ee]=B.useState(()=>localStorage.getItem("tapnow_performance_mode")||"off"),[_e,Ie]=B.useState(()=>localStorage.getItem("tapnow_local_server_url")||"http://127.0.0.1:9527");B.useEffect(()=>{localStorage.setItem("tapnow_performance_mode",D)},[D]),B.useEffect(()=>{localStorage.setItem("tapnow_local_server_url",_e)},[_e]);const[q,ye]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_history");return s?JSON.parse(s).map(f=>{var h,p;return f.mjNeedsSplit&&f.mjOriginalUrl&&((p=(h=f.apiConfig)==null?void 0:h.modelId)!=null&&p.includes("mj"))?{...f,url:f.mjOriginalUrl,mjImages:null,mjNeedsSplit:!0}:f}):[]}catch(s){return console.error(":",s),[]}}),[Ze]=B.useState(()=>Date.now()),[Pe,st]=B.useState({active:!1,current:0,total:0,filename:""}),[bt,Et]=B.useState(new Set),[sr,Ps]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_auto_save_config");return s?JSON.parse(s):{enabled:!1,interval:5,folderPath:""}}catch{return{enabled:!1,interval:5,folderPath:""}}}),[dr,Rs]=B.useState(!1),[Mt,qn]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_chat_sessions");return s?JSON.parse(s):[{id:"default",title:"",messages:[]}]}catch{return[{id:"default",title:"",messages:[]}]}}),[Nn,Sn]=B.useState("default"),[Ar,oi]=B.useState(""),[Ds,wr]=B.useState(!1),[Ls,Os]=B.useState(400),[Qn,bs]=B.useState([]),[ai,Mn]=B.useState("gemini-3-pro"),[os,Ml]=B.useState(!1),[kr,Un]=B.useState(null),[li,ra]=B.useState(()=>{try{const s=localStorage.getItem(ym),u=s?JSON.parse(s):[],f=[{id:"grid-default",name:"",prompt:vm},{id:"upscale-default",name:"",prompt:bm},{id:"moodboard-default",name:"",prompt:zm},{id:"storyboard-default",name:"",prompt:wm},{id:"character-sheet-default",name:"",prompt:km}],h=new Set((u||[]).map(m=>m.id)),p=[...u];return f.forEach(m=>{const S=p.some(I=>I.name===m.name);!h.has(m.id)&&!S&&p.unshift(m)}),p}catch{return[{id:"grid-default",name:"",prompt:vm},{id:"upscale-default",name:"",prompt:bm},{id:"moodboard-default",name:"",prompt:zm},{id:"storyboard-default",name:"",prompt:wm},{id:"character-sheet-default",name:"",prompt:km}]}}),[uo,zr]=B.useState({name:"",prompt:""}),[ws,$l]=B.useState(!1),[fo,sa]=B.useState(!1);B.useEffect(()=>{try{localStorage.setItem(ym,JSON.stringify(li))}catch{}},[li]);const[Us,fr]=B.useState(!1),[po,ci]=B.useState(!1),[er,ui]=B.useState(null),[di,pt]=B.useState(null),[H,$e]=B.useState(null),[Le,Ut]=B.useState(null),[Qt,Kt]=B.useState(null),[Vn,$n]=B.useState({x:0,y:0}),[Pr,Wr]=B.useState(null),[Kn,ia]=B.useState(!1),[as,Au]=B.useState(!1),[ls,Pu]=B.useState(null),[An,jr]=B.useState(new Set),Fs=B.useRef(!1),[fi,ho]=B.useState({x:0,y:0,worldX:0,worldY:0,visible:!1}),[ir,cs]=B.useState({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null}),[Vr,oa]=B.useState({nodeId:null,shotId:null}),[pi,Ru]=B.useState({visible:!1,x:0,y:0,nodeId:null,frame:null}),[mo,Bp]=B.useState({visible:!1,x:0,y:0,item:null}),[aa,Hp]=B.useState({visible:!1,x:0,y:0,nodeId:null}),[ay,hi]=B.useState(!1),[Wp,Du]=B.useState(!1),[Vp,go]=B.useState(!1),[Cn,Lu]=B.useState(()=>{try{const s=localStorage.getItem("tapnow_characters");return s?JSON.parse(s):[]}catch(s){return console.error(":",s),[]}}),[ly,la]=B.useState(!1),[Bs,Al]=B.useState("url"),[xo,Pl]=B.useState(""),[yo,Rl]=B.useState(""),[vo,Kp]=B.useState(1),[bo,Yp]=B.useState(3),[Gp,ca]=B.useState(""),[Ou,wo]=B.useState(!1),[Xp,ua]=B.useState(null),[Zp,Dl]=B.useState({}),[cy,Ll]=B.useState(!1),[_r,Bi]=B.useState(new Set),[Jp,Uu]=B.useState(!1),[uy,dy]=B.useState("select"),[Ge,hn]=B.useState(null),[or,Kr]=B.useState(null),[da,Fu]=B.useState({}),[ko,Ol]=B.useState(null),[fy,Bu]=B.useState(null),[qp,Hu]=B.useState(null),[Wu,fa]=B.useState({}),[py,hy]=B.useState({}),[my,Qp]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_image_model")||"nano-banana"}catch{return"nano-banana"}}),[eh,th]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_video_model")||"sora-2"}catch{return"sora-2"}}),[nh,gy]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_ratio")||"1:1"}catch{return"1:1"}}),[xy,yy]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_image_res")||"Auto"}catch{return"Auto"}}),[vy,by]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_video_res")||"720P"}catch{return"720P"}}),[wy,ky]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_segment_duration")||"3"}catch{return"3"}}),[zy,jy]=B.useState(()=>{try{return localStorage.getItem("tapnow_last_analyze_model")||"gemini-3-pro"}catch{return"gemini-3-pro"}}),Hs=B.useRef(null),pa=B.useRef({x:0,y:0}),rh=B.useRef(null),Yr=B.useRef(n),mi=B.useRef(ze),ks=B.useRef(An),ha=B.useRef(i),Ul=B.useRef({}),Ws=B.useRef(null),zo=B.useRef(!1),Vs=B.useRef(null),zs=B.useRef(null),gi=B.useRef(null),ma=B.useRef(null);B.useEffect(()=>{localStorage.setItem("tapnow_api_configs",JSON.stringify(ae))},[ae]);const Vu=B.useCallback(s=>{me(),r(u=>u.filter(f=>f.id!==s)),a(u=>u.filter(f=>f.from!==s&&f.to!==s)),ze===s&&be(null)},[ze,me]),kt=B.useCallback((s,u)=>{r(f=>f.map(h=>h.id===s?{...h,settings:{...h.settings,...u}}:h))},[]),ga=(s,u)=>{if(!u)return;const f=new FileReader;f.onload=async h=>{const p=h.target.result;let m={duration:0,w:0,h:0};try{m=await Sm(p)}catch(S){console.warn("",S)}r(S=>S.map(I=>I.id===s?{...I,content:p,videoMeta:m,frames:[],selectedKeyframes:[],extractingFrames:!1,videoFileName:u.name}:I))},f.readAsDataURL(u)};B.useEffect(()=>{const s=u=>{if(!(u.target.tagName==="INPUT"||u.target.tagName==="TEXTAREA"||u.target.isContentEditable)&&(u.key==="Delete"||u.key==="Del")){u.preventDefault(),u.stopPropagation();const f=mi.current,h=ks.current;if(f)Vu(f),be(null);else if(h&&h.size>0){Fe.current&&Fe.current();const p=new Set(h);r(m=>m.filter(S=>!p.has(S.id))),a(m=>m.filter(S=>!p.has(S.from)&&!p.has(S.to))),jr(new Set)}}};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[]);const sh=B.useMemo(()=>Ec(s=>{try{localStorage.setItem("tapnow_characters",JSON.stringify(s))}catch(u){console.error(":",u)}},500),[]);B.useEffect(()=>{sh(Cn)},[Cn,sh]),B.useEffect(()=>{ua(null)},[xo,yo,Bs]);const xa=B.useMemo(()=>Ec(s=>{try{localStorage.setItem("tapnow_history",JSON.stringify(s))}catch(u){console.error(":",u);try{const f=s.map(h=>{var p;return{id:h.id,type:h.type,url:h.url,prompt:((p=h.prompt)==null?void 0:p.substring(0,200))||"",time:h.time,status:h.status,modelName:h.modelName,width:h.width,height:h.height,ratio:h.ratio,mjImages:h.mjImages,selectedMjImageIndex:h.selectedMjImageIndex,mjRatio:h.mjRatio,mjNeedsSplit:h.mjNeedsSplit,mjImageInfo:h.mjImageInfo}});localStorage.setItem("tapnow_history",JSON.stringify(f))}catch(f){console.error(":",f);try{const h=s.map(p=>{var m;return{id:p.id,type:p.type,url:p.url,prompt:((m=p.prompt)==null?void 0:m.substring(0,100))||"",time:p.time,status:p.status,modelName:p.modelName}});xa(h)}catch(h){console.error(":",h)}}}},1e3),[]),ih=B.useMemo(()=>Ec(s=>{localStorage.setItem("tapnow_global_key",s)},1e3),[]);B.useEffect(()=>{ih(We)},[We,ih]),B.useEffect(()=>{try{const s=q.map(u=>{var p,m,S,I;const f={...u},h=((m=(p=u.apiConfig)==null?void 0:p.modelId)==null?void 0:m.includes("mj"))||((I=(S=u.modelName)==null?void 0:S.toLowerCase())==null?void 0:I.includes("midjourney"));return u.mjImages&&u.mjImages.length===4&&h&&(f.mjImages=null,f.mjNeedsSplit=!0,f.mjOriginalUrl=u.mjOriginalUrl||u.url),u.url&&u.url.startsWith("data:")&&u.url.length>5e3&&(f.url=u.url.substring(0,100)+"..."),delete f.mjImageInfo,f});xa(s)}catch(s){console.error(":",s);try{const u=q.slice(0,20).map(f=>{const h={...f};return h.url&&h.url.startsWith("data:")&&(h.url=h.url.substring(0,100)+"..."),h.mjImages&&(h.mjImages=null),h.mjImageInfo&&delete h.mjImageInfo,h});xa(u)}catch(u){console.error(":",u);try{const f=q.slice(0,10).map(h=>{var p;return{id:h.id,type:h.type,prompt:(p=h.prompt)==null?void 0:p.substring(0,100),time:h.time,status:h.status,modelName:h.modelName}});xa(f)}catch(f){console.error(":",f)}}}},[q,xa]);const oh=B.useMemo(()=>Ec(s=>{try{localStorage.setItem("tapnow_chat_sessions",JSON.stringify(s))}catch{}},1e3),[]);B.useEffect(()=>{oh(Mt)},[Mt,oh]),B.useEffect(()=>{Yr.current=n,mi.current=ze,ks.current=An,ha.current=i,Fs.current=as},[n,ze,An,i,as]);const Ft=B.useMemo(()=>{const s=new Map;return n.forEach(u=>{s.set(u.id,u)}),s},[n]),en=B.useMemo(()=>{const s=new Map;return ae.forEach(u=>{s.set(u.id,u)}),s},[ae]),xi=B.useCallback(s=>{const u=en.get(s);if(!u)return{key:We,url:hr.replace(/\/+$/,""),modelName:s,displayName:s};const f=X[u.provider],h=(f==null?void 0:f.key)||We,p=((f==null?void 0:f.url)||hr).replace(/\/+$/,"");return{key:h,url:p,modelName:u.modelName,displayName:u.displayName,provider:u.provider,type:u.type}},[en,X,We]),js=B.useMemo(()=>{const s={};return Object.entries(X).forEach(([u])=>{s[u]={name:u,models:[]}}),ae.forEach(u=>{if(jm.includes(u.id))return;const f=u.provider||"Other";s[f]||(s[f]={name:f,models:[]}),s[f].models.push(u)}),s},[ae,X]),ya=B.useMemo(()=>{const s=new Map;return q.forEach(u=>{s.set(u.id,u)}),s},[q]),Fl=B.useMemo(()=>{if(!Hs.current)return n;const s=Hs.current.getBoundingClientRect(),u=200,f=tt.current,h=(-f.x-u)/f.zoom,p=(s.width-f.x+u)/f.zoom,m=(-f.y-u)/f.zoom,S=(s.height-f.y+u)/f.zoom;return n.filter(I=>{const T=I.x+(I.width||0),$=I.y+(I.height||0);return I.x<p&&T>h&&I.y<S&&$>m})},[n,v.x,v.y,v.zoom]);B.useCallback(s=>s>=.8?"high":s>=.4?"medium":"low",[]),B.useEffect(()=>{tt.current=v},[v]);const jo=B.useMemo(()=>{const s={to:new Map,from:new Map};return i.forEach(u=>{s.to.has(u.to)||s.to.set(u.to,[]),s.to.get(u.to).push(u),s.from.has(u.from)||s.from.set(u.from,[]),s.from.get(u.from).push(u)}),s},[i]);B.useEffect(()=>{const s=setInterval(()=>{const u=Date.now(),f=q.filter(p=>p.sourceNodeId&&p.status==="generating"&&p.startTime),h={};f.forEach(p=>{const m=Math.floor((u-p.startTime)/100);h[p.sourceNodeId]=m/10}),hy(h)},500);return()=>clearInterval(s)},[q]);const Bl=B.useRef(new Set);B.useEffect(()=>{q.forEach(s=>{var u,f;if(s.mjNeedsSplit&&s.mjOriginalUrl&&((f=(u=s.apiConfig)==null?void 0:u.modelId)!=null&&f.includes("mj"))&&s.status==="completed"){if(Bl.current.has(s.id))return;Bl.current.add(s.id),setTimeout(()=>{let h=s.mjRatio||"1:1";if(s.prompt&&s.prompt.includes("--ar ")){const p=s.prompt.match(/--ar\s+([\d:]+)/);p&&p[1]&&(h=p[1])}console.log(`Midjourney: ID: ${s.id}, : ${h}`),wh(s.mjOriginalUrl,h).then(p=>{const m=p.map(T=>typeof T=="string"?T:T.url),S=p[0],I=typeof S=="string"?S:S.url;ye(T=>T.map($=>$.id===s.id?{...$,mjImages:m,url:I,selectedMjImageIndex:0,mjRatio:h,mjNeedsSplit:!1,mjImageInfo:p.map(M=>typeof M=="string"?null:{width:M.width,height:M.height,ratio:M.ratio})}:$)),Bl.current.delete(s.id),console.log(`Midjourney: ID: ${s.id}`)}).catch(p=>{console.error("Midjourney: :",p),Bl.current.delete(s.id),ye(m=>m.map(S=>S.id===s.id?{...S,mjNeedsSplit:!0}:S))})},500)}})},[q]);const Ku=B.useRef(new Set);B.useEffect(()=>{const s=n.filter(u=>{var f,h;return u.type==="local-save"&&((f=u.settings)==null?void 0:f.autoSave)&&((h=u.settings)==null?void 0:h.serverStatus)==="connected"});s.length!==0&&s.forEach(async u=>{var S;const f=Gu(u.id);if(f.length===0)return;const h=((S=u.settings)==null?void 0:S.lastSavedUrls)||[],p=f.filter(I=>!h.includes(I));if(p.length===0)return;const m=`${u.id}-${p.join(",")}`;Ku.current.has(m)||(Ku.current.add(m),setTimeout(async()=>{var I,T,$;try{const M={images:p,path:((I=u.settings)==null?void 0:I.savePath)||"",subfolder:((T=u.settings)==null?void 0:T.subfolder)||"",format:"jpg"},O=await fetch(`${_e}/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(O.ok){const P=await O.json(),W=[...h,...p];kt(u.id,{lastSavedUrls:W,lastSaved:new Date().toLocaleString(),savedFiles:[...(($=u.settings)==null?void 0:$.savedFiles)||[],...P.files]})}}catch(M){console.error(":",M)}finally{Ku.current.delete(m)}},1e3))})},[n,q,_e]);const _y=s=>{s.preventDefault(),ah(!0)},[Hl,ah]=B.useState(!1),Wl=B.useCallback(s=>{if(!Hl)return;const u=window.innerWidth-s.clientX;Os(Math.max(300,Math.min(u,800)))},[Hl]),Vl=B.useCallback(()=>{ah(!1)},[]);B.useEffect(()=>{const s=console.error,u=console.warn,f=h=>{const p=h.map(m=>typeof m=="string"?m:m&&m.toString?m.toString():"").join(" ");return p.includes("Unable to preventDefault")||p.includes("passive event listener")||p.includes("preventDefault")&&p.includes("passive")};return console.error=function(...h){f(h)||s.apply(console,h)},console.warn=function(...h){f(h)||u.apply(console,h)},()=>{console.error=s,console.warn=u}},[]),B.useEffect(()=>{const s=f=>{if(f.ctrlKey)try{f.cancelable&&(f.preventDefault(),f.stopPropagation())}catch{}},u={passive:!1,capture:!0};return window.addEventListener("wheel",s,u),document.addEventListener("wheel",s,u),window.addEventListener("mousewheel",s,u),document.addEventListener("mousewheel",s,u),()=>{window.removeEventListener("wheel",s,u),document.removeEventListener("wheel",s,u),window.removeEventListener("mousewheel",s,u),document.removeEventListener("mousewheel",s,u)}},[]),B.useEffect(()=>{const s=Hs.current;if(!s)return;const u=f=>{if(f.ctrlKey){try{f.cancelable&&(f.preventDefault(),f.stopPropagation())}catch{}return}const h=f.target;let p=!1,m=null,S=h;for(;S&&S!==s;){if(S.classList){const M=S.classList.contains("flex")&&S.classList.contains("flex-col")&&S.classList.contains("h-full")&&S.classList.contains("rounded-xl")&&S.classList.contains("overflow-hidden");if(S.classList.contains("video-input-container")||S.classList.contains("video-analyze-container")||M){if(p=!0,M)m=S.querySelector(".flex-1.overflow-y-auto.custom-scrollbar"),m||(m=S.querySelector(".flex-1.overflow-y-auto"));else if(m=S.querySelector('.overflow-y-auto, .custom-scrollbar, [class*="overflow-y"]'),!m){const W=window.getComputedStyle(S);(W.overflowY==="auto"||W.overflowY==="scroll"||S.classList.contains("custom-scrollbar"))&&(m=S)}break}const O=S.closest(".video-input-container, .video-analyze-container");if(O){if(p=!0,m=O.querySelector('.overflow-y-auto, .custom-scrollbar, [class*="overflow-y"]'),!m){const W=window.getComputedStyle(O);(W.overflowY==="auto"||W.overflowY==="scroll")&&(m=O)}break}const P=S.closest(".flex.flex-col.h-full.rounded-xl.overflow-hidden");if(P){p=!0,m=P.querySelector(".flex-1.overflow-y-auto.custom-scrollbar"),m||(m=P.querySelector(".flex-1.overflow-y-auto"));break}}S=S.parentElement}if(p&&m){try{f.cancelable&&(f.preventDefault(),f.stopPropagation())}catch{}const M=m.scrollHeight-m.clientHeight,O=m.scrollTop,P=Math.max(0,Math.min(M,O+f.deltaY));m.scrollTop=P;return}try{f.cancelable&&f.preventDefault()}catch{}const I=s.getBoundingClientRect(),T=f.clientX-I.left,$=f.clientY-I.top;ge(M=>{const O=f.deltaY>0?.9:1.1;let P=Math.min(Math.max(M.zoom*O,.2),3);const W=P/M.zoom;return{zoom:P,x:T-(T-M.x)*W,y:$-($-M.y)*W}})};return s.addEventListener("wheel",u,{passive:!1}),()=>{s.removeEventListener("wheel",u)}},[v]),B.useEffect(()=>(Hl?(window.addEventListener("mousemove",Wl),window.addEventListener("mouseup",Vl)):(window.removeEventListener("mousemove",Wl),window.removeEventListener("mouseup",Vl)),()=>{window.removeEventListener("mousemove",Wl),window.removeEventListener("mouseup",Vl)}),[Hl,Wl,Vl]);const cn=B.useCallback((s,u)=>{var m;const f=(m=Hs.current)==null?void 0:m.getBoundingClientRect(),h=f?s-f.left:s,p=f?u-f.top:u;return{x:(h-v.x)/v.zoom,y:(p-v.y)/v.zoom}},[v]),Ny=s=>{var u;if((s.button===0||s.button===1)&&s.currentTarget.id==="canvas-bg"){const f=s.target;if(f&&(f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.tagName==="SELECT"||f.tagName==="BUTTON"||f.isContentEditable||f.closest('input, textarea, select, button, [contenteditable="true"]')))return;const h=window.getSelection();if(h&&h.toString().length>0&&h.removeAllRanges(),s.button===0&&(s.ctrlKey||s.metaKey)){s.preventDefault(),Au(!0),Fs.current=!0,fr(!1);const p=(u=Hs.current)==null?void 0:u.getBoundingClientRect(),m=s.clientX-((p==null?void 0:p.left)||0),S=s.clientY-((p==null?void 0:p.top)||0);Pu({startX:m,startY:S,endX:m,endY:S}),jr(new Set),be(null);return}Fs.current||(fr(!0),zo.current=!0,ci(!1),pa.current={x:s.clientX,y:s.clientY})}},Kl=B.useRef(null),Gr=B.useRef(null),yi=B.useRef(null),va=B.useCallback(()=>{if(yi.current){const f=yi.current,h=new Map(f.map(({nodeId:p})=>[p,!0]));r(p=>{if(p.length>50&&f.length>10){const m=new Map;p.forEach((T,$)=>{h.has(T.id)&&m.set(T.id,$)});const S=[...p];let I=!1;return f.forEach(({nodeId:T,updater:$})=>{const M=m.get(T);if(M!==void 0){const O=$(S[M]);O!==S[M]&&(S[M]=O,I=!0)}}),I?S:p}else{const m=[...p];let S=!1;return f.forEach(({nodeId:I,updater:T})=>{const $=m.findIndex(M=>M.id===I);if($!==-1){const M=T(m[$]);M!==m[$]&&(m[$]=M,S=!0)}}),S?m:p}}),yi.current=null,Gr.current=null;return}if(!Kl.current){Gr.current=null;return}const{nodeId:s,updater:u}=Kl.current;r(f=>{const h=f.findIndex(S=>S.id===s);if(h===-1)return f;const p=u(f[h]);if(p===f[h])return f;const m=[...f];return m[h]=p,m}),Kl.current=null,Gr.current=null},[]),Yu=B.useCallback((s,u)=>{Kl.current={nodeId:s,updater:u},Gr.current||(Gr.current=requestAnimationFrame(va))},[va]),lh=B.useCallback(s=>{if(yi.current&&Gr.current){const u=yi.current,f=new Map;u.forEach(({nodeId:h,updater:p})=>{f.set(h,p)}),s.forEach(({nodeId:h,updater:p})=>{f.set(h,p)}),yi.current=Array.from(f.entries()).map(([h,p])=>({nodeId:h,updater:p}))}else yi.current=s;Gr.current||(Gr.current=requestAnimationFrame(va))},[va]);B.useEffect(()=>()=>{Gr.current&&cancelAnimationFrame(Gr.current),Vs.current&&cancelAnimationFrame(Vs.current)},[]);const ba=B.useRef(null),Yl=B.useRef(null),ch=B.useCallback(s=>{var p;const{clientX:u,clientY:f}=s,h=cn(u,f);if($n(h),as||Fs.current){as||Au(!0);const m=(p=Hs.current)==null?void 0:p.getBoundingClientRect(),S=u-((m==null?void 0:m.left)||0),I=f-((m==null?void 0:m.top)||0);Pu(T=>T?{...T,endX:S,endY:I}:null),Yl.current={endX:S,endY:I,rect:m},ba.current||(ba.current=requestAnimationFrame(()=>{if(!Yl.current){ba.current=null;return}const{endX:T,endY:$,rect:M}=Yl.current,O=ls;if(!O){ba.current=null;return}const P=Math.min(O.startX,T),W=Math.min(O.startY,$),C=Math.max(O.startX,T),Y=Math.max(O.startY,$),Z=cn(P+((M==null?void 0:M.left)||0),W+((M==null?void 0:M.top)||0)),se=cn(C+((M==null?void 0:M.left)||0),Y+((M==null?void 0:M.top)||0)),re=Yr.current,ne=new Set;re.forEach(ke=>{const Ne=ke.x+(ke.width||260),Oe=ke.y+(ke.height||200);ke.x<se.x&&Ne>Z.x&&ke.y<se.y&&Oe>Z.y&&ne.add(ke.id)}),jr(ne),Yl.current=null,ba.current=null}));return}if((Us||zo.current)&&!Fs.current){ci(!0);const m=u-pa.current.x,S=f-pa.current.y;if(Math.abs(m)<1&&Math.abs(S)<1)return;zs.current?(zs.current.dx+=m,zs.current.dy+=S):zs.current={dx:m,dy:S},Vs.current||(Vs.current=requestAnimationFrame(()=>{if(!zs.current){Vs.current=null;return}const{dx:I,dy:T}=zs.current;ge($=>{const M=Math.max(.2,Math.min(3,$.zoom)),O=M<.5||M>2.5?1e3:100;return{...$,zoom:M,x:Math.round(($.x+I)*O)/O,y:Math.round(($.y+T)*O)/O}}),zs.current=null,Vs.current=null})),pa.current={x:u,y:f};return}if(di)Yu(di,m=>({...m,width:Math.max(250,h.x-m.x),height:Math.max(250,h.y-m.y)}));else if(er){const m=Math.max(.2,Math.min(3,v.zoom)),S=s.movementX/m,I=s.movementY/m,T=m<.5||m>2.5?.5:1;if(Math.abs(S)<T&&Math.abs(I)<T)return;const $=ks.current;if($&&$.size>1&&$.has(er)){const M=Yr.current,O=Math.max(.2,Math.min(3,v.zoom));(!gi.current||ma.current!==null&&Math.abs(ma.current-O)>.01)&&(gi.current={mouseX:u,mouseY:f,nodes:new Map(Array.from($).map(Y=>{const Z=M.find(se=>se.id===Y);return Z?[Y,{x:Z.x,y:Z.y}]:null}).filter(Boolean))}),ma.current=O;const P=(u-gi.current.mouseX)/O,W=(f-gi.current.mouseY)/O,C=Array.from(gi.current.nodes.entries()).map(([Y,Z])=>({nodeId:Y,updater:se=>({...se,x:Z.x+P,y:Z.y+W})}));lh(C)}else gi.current=null,Yu(er,M=>({...M,x:M.x+S,y:M.y+I}))}},[Us,as,ls,er,di,cn,v.zoom,Yu,lh]),uh=()=>{if(Vs.current&&(cancelAnimationFrame(Vs.current),Vs.current=null),zs.current){const{dx:s,dy:u}=zs.current;ge(f=>{const h=Math.max(.2,Math.min(3,f.zoom)),p=h<.5||h>2.5?1e3:100;return{...f,zoom:h,x:Math.round((f.x+s)*p)/p,y:Math.round((f.y+u)*p)/p}}),zs.current=null}if(yi.current&&Gr.current&&(cancelAnimationFrame(Gr.current),va()),as||Fs.current){if(Au(!1),Fs.current=!1,Pu(null),An.size===1){const s=Array.from(An)[0];be(s)}else An.size===0&&be(null);ci(!1),fr(!1),zo.current=!1,gi.current=null,ma.current=null;return}(Us||zo.current)&&(fr(!1),zo.current=!1,ci(!1),!H&&!Le&&!er&&!di&&(be(null),jr(new Set),ho(s=>({...s,visible:!1})),hn(null),cs(s=>({...s,visible:!1})))),!H&&!Le&&(ui(null),pt(null),gi.current=null,ma.current=null),ci(!1),Fs.current=!1,pa.current={x:0,y:0}};B.useEffect(()=>{if(!(Us||zo.current||po||er||di||as||Fs.current||H||Le))return;const u=h=>{h.movementX===void 0&&(h.movementX=0),h.movementY===void 0&&(h.movementY=0),ch(h)},f=()=>{uh()};return window.addEventListener("pointermove",u,{passive:!1}),window.addEventListener("pointerup",f,{passive:!1}),()=>{window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",f)}},[Us,po,er,di,as,H,Le,ch,uh]);const us=B.useCallback((s,u,f="default")=>{if(u.stopPropagation(),H&&H!==s)i.some(p=>p.from===H&&p.to===s&&(p.inputType||"default")===f)||(f!=="default"&&a(p=>p.filter(m=>!(m.to===s&&(m.inputType||"default")===f))),a(p=>[...p,{id:`conn-${Date.now()}`,from:H,to:s,inputType:f!=="default"?f:void 0}]));else if(Le&&Le!==s){const h=Qt||f;i.some(m=>m.from===s&&m.to===Le&&(m.inputType||"default")===h)||(h!=="default"&&a(m=>m.filter(S=>!(S.to===Le&&(S.inputType||"default")===h))),a(m=>[...m,{id:`conn-${Date.now()}`,from:s,to:Le,inputType:h!=="default"?h:void 0}]))}$e(null),Ut(null),Kt(null),Wr(null),fr(!1),ui(null),pt(null)},[H,Le,Qt,i]),Sy=s=>{if(H){const u=cn(s.clientX,s.clientY);ho({visible:!0,x:s.clientX,y:s.clientY,worldX:u.x,worldY:u.y,sourceNodeId:H}),$e(null)}else if(Le){const u=cn(s.clientX,s.clientY);ho({visible:!0,x:s.clientX,y:s.clientY,worldX:u.x,worldY:u.y,targetNodeId:Le,inputType:Qt}),Ut(null),Kt(null)}},Cy=s=>{if(s.currentTarget.id==="canvas-bg"){const u=cn(s.clientX,s.clientY);ho({visible:!0,x:s.clientX,y:s.clientY,worldX:u.x,worldY:u.y,sourceNodeId:void 0})}},dh=B.useMemo(()=>{const s=new Map;return i.forEach(u=>{const f=u.inputType||"default";s.has(u.to)||s.set(u.to,new Map);const h=s.get(u.to);h.has(f)||h.set(f,[]);const p=Ft.get(u.from);if(p&&(p.type==="input-image"||p.type==="video-input")){let m=[];if(p.type==="video-input"){const S=p.selectedKeyframes&&p.selectedKeyframes.length>0?p.selectedKeyframes.map(I=>I.url):[];S.length>0?m=S:p.frames&&p.frames.length>0&&(m=[p.frames[0].url])}else p.content&&(m=[p.content]);h.get(f).push(...m)}}),s},[i,Ft,n]),Gu=B.useCallback((s,u="default")=>{const f=dh.get(s);return f?f.get(u)||[]:[]},[dh]),fh=B.useMemo(()=>{const s=new Map;return i.forEach(u=>{if(!s.has(u.to)){const f=Ft.get(u.from);if(f){if(f.type==="video-input")s.set(u.to,f);else if(f.type==="input-image"){const h={...f,type:"input-image-as-video",videoFileName:"",videoMeta:{duration:0},frames:f.content?[{time:0,url:f.content}]:[],selectedKeyframes:f.content?[{time:0,url:f.content}]:[],isImageInput:!0};s.set(u.to,h)}}}}),s},[i,Ft]),wa=B.useCallback(s=>fh.get(s)||null,[fh]),Ey=B.useCallback(s=>{for(const u of i)if(u.to===s){const f=Ft.get(u.from);if(f&&f.type==="video-analyze")return f}return null},[i,Ft]),ka=B.useCallback(s=>{const u=[];return i.forEach(f=>{var h;if(f.to===s){const p=Ft.get(f.from);if(p&&p.type==="text-node"){const m=((h=p.settings)==null?void 0:h.text)||"";m&&u.push(m)}}}),u},[i,Ft]),ph=B.useMemo(()=>{const s=new Map;return i.forEach(u=>{const f=u.inputType||"default",h=`${u.to}:${f}`;if(!s.has(h)){const p=Ft.get(u.from);if(p){let m=null;if(p.type==="video-input"){const S=p.selectedKeyframes&&p.selectedKeyframes.length>0?p.selectedKeyframes[0].url:null;S?m=S:p.frames&&p.frames[0]&&(m=p.frames[0].url)}else p.type==="input-image"&&p.content&&(m=p.content);m&&s.set(h,m)}}}),s},[i,Ft,n]),Gl=B.useCallback((s,u)=>{const f=`${s}:${u||"default"}`;return ph.get(f)||null},[ph]),Ks=(s,u,f="image",h=null,p=null)=>{if(!u&&(!p||p.length===0))return;let m=h;if(!m){const I=ya.get(s);m=I==null?void 0:I.sourceNodeId}if(!m){console.warn("[Tapnow] updatePreviewFromTask:  sourceNodeId for taskId:",s);return}setTimeout(()=>{var T;const I=Ft.get(m);if(I&&(I.type==="gen-image"||I.type==="gen-video")){const $=i.filter(M=>M.to===m);for(const M of $){const O=Ft.get(M.from),P=O&&O.type==="storyboard-node"?O:null;if(P&&((T=P.settings)!=null&&T.shots)){const W=P.settings.shots.find(C=>C.status==="generating");if(W){const C=u||(p&&p.length>0?p[0]:null);if(C){on(P.id,W.id,{image_url:C,status:"done"});break}}}}}},0);const S=ha.current;console.log("[Tapnow] updatePreviewFromTask: ",{taskId:s,url:u,contentType:f,sourceNodeId:m,mjImages:p,connectionsCount:S.length}),r(I=>{const T=S.filter(M=>M.from===m).map(M=>M.to);if(console.log("[Tapnow] updatePreviewFromTask: ",{sourceNodeId:m,allConnectionsFromSource:S.filter(M=>M.from===m),targetIds:T,allNodes:I.map(M=>({id:M.id,type:M.type}))}),!T.length)return console.warn("[Tapnow] updatePreviewFromTask: ",{sourceNodeId:m,connectionsFromSource:S.filter(M=>M.from===m),allConnections:S}),I;const $=I.filter(M=>T.includes(M.id)&&M.type==="preview");return console.log("[Tapnow] updatePreviewFromTask: ",{targetIds:T,previewNodes:$.map(M=>({id:M.id,type:M.type}))}),I.map(M=>T.includes(M.id)&&M.type==="preview"?{...M,content:u||(p&&p.length>0?p[0]:u),previewType:f,previewMjImages:p}:M)})},hh=s=>{ye(u=>{const f=u.filter(h=>h.id!==s);try{localStorage.setItem("tapnow_history",JSON.stringify(f))}catch(h){console.error(":",h)}return f}),ir.item&&ir.item.id===s&&cs({visible:!1,x:0,y:0,item:null})},mh=(s,u)=>Ae(f=>f.map(h=>h.id===s?{...h,...u}:h)),Iy=s=>Ae(u=>u.filter(f=>f.id!==s)),Ty=async s=>{Hu(s),fa(h=>({...h,[s]:"idle"}));const{key:u,url:f}=xi(s);if(!u){fa(h=>({...h,[s]:"error"})),Hu(null);return}try{(await fetch(`${f}/v1/models`,{method:"GET",headers:{Authorization:`Bearer ${u}`}})).ok?fa(p=>({...p,[s]:"success"})):fa(p=>({...p,[s]:"error"}))}catch{fa(h=>({...h,[s]:"error"}))}Hu(null)},Hi=s=>{if(!s)return"bg-zinc-600";const u=Wu[s];if(u==="success")return"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.8)]";if(u==="error")return"bg-red-500";const{key:f}=xi(s);return f?"bg-zinc-400":"bg-zinc-700"},_o=B.useMemo(()=>Mt.find(s=>s.id===Nn)||Mt[0],[Mt,Nn]),My=()=>{var s;(s=rh.current)==null||s.scrollIntoView({behavior:"smooth"})};B.useEffect(()=>{My()},[_o==null?void 0:_o.messages,Ds]);const $y=()=>{const s=`chat-${Date.now()}`,u={id:s,title:"",messages:[]};qn(f=>[u,...f]),Sn(s)},Ay=(s,u)=>{s.stopPropagation();const f=Mt.filter(h=>h.id!==u);f.length===0?(qn([{id:"default",title:"",messages:[]}]),Sn("default")):(qn(f),Nn===u&&Sn(f[0].id))},Py=s=>{Array.from(s.target.files).forEach(f=>{const h=new FileReader;h.onload=p=>{var C;const m=p.target.result,S=((C=f.name.split(".").pop())==null?void 0:C.toLowerCase())||"",I=f.type.startsWith("image/"),T=f.type.startsWith("video/"),$=f.type.startsWith("audio/"),M=f.type==="application/pdf"||S==="pdf",O=["doc","docx"].includes(S)||f.type.includes("word"),P=["xls","xlsx"].includes(S)||f.type.includes("excel")||f.type.includes("spreadsheet"),W=["js","jsx","ts","tsx","py","java","cpp","c","html","css","json","xml","yaml","yml","md","txt","sh","bash"].includes(S);bs(Y=>[...Y,{name:f.name,type:f.type,content:m,isImage:I,isVideo:T,isAudio:$,isPDF:M,isDoc:O,isExcel:P,isCode:W,fileExt:S}])},f.type.startsWith("image/")||f.type.startsWith("video/")||f.type.startsWith("audio/")||f.type==="application/pdf"?h.readAsDataURL(f):f.name.match(/\.(txt|md|js|jsx|ts|tsx|py|html|css|json|csv|xml|yaml|yml|sh|bash|java|cpp|c)$/i)?h.readAsText(f):h.readAsDataURL(f)}),s.target.value=""},Ry=s=>{bs(u=>u.filter((f,h)=>h!==s))},gh=async()=>{var W,C,Y,Z,se,re,ne,ke,Ne,Oe,nt;if(!Ar.trim()&&Qn.length===0||os)return;const s=en.get(ai),{key:u,url:f,modelName:h}=xi(ai);if(!u){alert(" API  Key"),hi(!0);return}const p=Nn||((W=Mt[0])==null?void 0:W.id),m=Mt.find(G=>G.id===p)||Mt[0],S=(m==null?void 0:m.messages)||[];m&&m.id!==Nn&&Sn(m.id),Ml(!0);const I={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"user",content:Ar,files:[...Qn],timestamp:Date.now(),modelId:ai};qn(G=>G.map(pe=>pe.id===p?{...pe,messages:[...pe.messages,I],title:pe.messages.length===0?Ar.slice(0,20):pe.title}:pe)),oi(""),bs([]);const T=[...S,I],$=20,M=T.length>$?T.slice(-$):T;let O=[{role:"system",content:"AI"},...M.map(G=>({role:G.role,content:G.content}))];const P=[];I.content&&P.push({type:"text",text:I.content}),I.files.forEach(G=>{const pe=((s==null?void 0:s.modelName)??"").toLowerCase().includes("gemini");G.isImage?P.push({type:"image_url",image_url:{url:G.content}}):G.isVideo?pe?P.push({type:"image_url",image_url:{url:G.content}}):P.push({type:"text",text:`
[User attached video: ${G.name}]
`}):G.isAudio?P.push({type:"text",text:`
[User attached audio: ${G.name}]
`}):G.isPDF||G.isDoc||G.isExcel?P.push({type:"text",text:`
[User attached document: ${G.name} (${G.isPDF?"PDF":G.isDoc?"Word":"Excel"})]
`}):G.isCode||G.content&&typeof G.content=="string"&&G.content.length<5e4?P.push({type:"text",text:`
[File: ${G.name}]
\`\`\`${G.fileExt||"text"}
${G.content}
\`\`\`
`}):P.push({type:"text",text:`
[User attached file: ${G.name}]
`})}),O.push({role:"user",content:P});try{const G=await fetch(`${f}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({model:(s==null?void 0:s.modelName)||"gemini-3-pro-preview",messages:O,stream:!1})});if(!G.ok){const et=await G.text();throw new Error(et||`API Error: ${G.status}`)}const pe=await G.json();let Ue=null;pe.choices&&pe.choices.length>0?Ue=(Y=(C=pe.choices[0])==null?void 0:C.message)==null?void 0:Y.content:pe.content?Ue=pe.content:pe.text?Ue=pe.text:pe.message?Ue=typeof pe.message=="string"?pe.message:pe.message.content:pe.result?Ue=typeof pe.result=="string"?pe.result:pe.result.content:(ne=(re=(se=(Z=pe.data)==null?void 0:Z.choices)==null?void 0:se[0])==null?void 0:re.message)!=null&&ne.content?Ue=pe.data.choices[0].message.content:(ke=pe.data)!=null&&ke.content?Ue=pe.data.content:(Ne=pe.data)!=null&&Ne.text?Ue=pe.data.text:(Oe=pe.data)!=null&&Oe.message?Ue=typeof pe.data.message=="string"?pe.data.message:pe.data.message.content:(nt=pe.data)!=null&&nt.result&&(Ue=typeof pe.data.result=="string"?pe.data.result:pe.data.result.content),(!Ue||Ue.trim()==="")&&(console.error("[] API :",pe),Ue="No response");const dt={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:Ue,timestamp:Date.now(),modelId:ai};qn(et=>et.map(ct=>ct.id===Nn?{...ct,messages:[...ct.messages,dt]}:ct))}catch(G){console.error("Chat Error",G);const pe={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:`Error: ${G.message}`,isError:!0,timestamp:Date.now()};qn(Ue=>Ue.map(dt=>dt.id===Nn?{...dt,messages:[...dt.messages,pe]}:dt))}finally{Ml(!1)}},Ys=async s=>await(await fetch(s)).blob(),Yn=async s=>{if(s.startsWith("data:"))return s.split(",")[1];const u=await Ys(s);return new Promise((f,h)=>{const p=new FileReader;p.onloadend=()=>{const m=p.result;f(m.split(",")[1])},p.onerror=h,p.readAsDataURL(u)})},xh=s=>new Promise((u,f)=>{const h=new FileReader;h.onloadend=()=>u(h.result),h.onerror=f,h.readAsDataURL(s)}),yh=async(s,u=2048,f=8)=>new Promise((h,p)=>{const m=new Image;m.crossOrigin="anonymous",m.onload=()=>{var Z,se;const S=m.width,I=m.height;let T=S,$=I;if(S>u||I>u){const re=u/Math.max(S,I);T=Math.floor(S*re),$=Math.floor(I*re),console.log(`Midjourney:  ${S}x${I} -> ${T}x${$}`)}const M=document.createElement("canvas");M.width=T,M.height=$;const O=M.getContext("2d");O.imageSmoothingEnabled=!0,O.imageSmoothingQuality="high",O.drawImage(m,0,0,T,$);let P=.92,W=M.toDataURL("image/jpeg",P);const Y=(((Z=W.split(",")[1])==null?void 0:Z.length)||0)*3/4/(1024*1024);if(Y>f){console.log(`Midjourney:  ${Y.toFixed(2)}MB ...`),P=.75,W=M.toDataURL("image/jpeg",P);const ne=(((se=W.split(",")[1])==null?void 0:se.length)||0)*3/4/(1024*1024);console.log(`Midjourney:  ${ne.toFixed(2)}MB`)}h(W)},m.onerror=S=>{console.error("Midjourney: ",S),h(s)},m.src=s}),Dy=async(s,u,f)=>{var h,p;try{console.log(`Midjourney:  ${s.length} /...`);const S=(await Promise.all(s.map(async(P,W)=>{if(P.startsWith("data:"))try{const C=await yh(P,2048,8);return console.log(`Midjourney: [${W}]`),C}catch(C){return console.error(`Midjourney: [${W}]`,C),P}else try{const C=await Ys(P),Y=await xh(C),Z=await yh(Y,2048,8);return console.log(`Midjourney: [${W}]URL`),Z}catch(C){throw console.error(`Midjourney: [${W}]URL`,C),C}}))).map((P,W)=>{let C=P;if(typeof C!="string")throw new Error(`base64[${W}]`);C.includes(",")?C=C.split(",")[1]:C.startsWith("data:")&&(C=C.replace(/^data:[^;]*;base64,?/i,""));const Y=C.length;C=C.replace(/[^A-Za-z0-9+/=]/g,"");const Z=C.length;if(Y!==Z&&console.log(`Midjourney: base64[${W}] ${Y-Z} `),!C||C.length<100)throw new Error(`base64[${W}]: ${(C==null?void 0:C.length)||0}`);const se=/^[A-Za-z0-9+/]+={0,2}$/;if(!se.test(C))throw console.error(`Midjourney: base64[${W}]: ${C.length}, 50: ${C.substring(0,50)}`),new Error(`invalid_base64_format: base64[${W}]`);const re=C.length%4;if(re!==0&&(C=C.replace(/=+$/,""),C+="=".repeat(4-re),!se.test(C)))throw console.error(`Midjourney: base64[${W}]: ${C.length}`),new Error(`invalid_base64_format: base64[${W}]`);try{const ke=atob(C);if(!ke||ke.length===0)throw new Error("base64");console.log(`Midjourney: base64[${W}]: ${ke.length}`)}catch(ke){throw console.error(`Midjourney: base64[${W}]:`,ke),new Error(`invalid_base64_format: base64[${W}]`)}const ne=`data:image/jpeg;base64,${C}`;return console.log(`Midjourney: base64[${W}]: ${C.length}, 20: ${C.substring(0,20)}`),ne}),I=`${u}/mj/submit/upload-discord-images`;console.log("Midjourney: base64:",S.length,"data URL:",(h=S[0])==null?void 0:h.length,"50:",(p=S[0])==null?void 0:p.substring(0,50)),S.forEach((P,W)=>{if(!P||typeof P!="string")throw new Error(`base64[${W}]`);if(!P.startsWith("data:image/"))throw new Error(`base64[${W}]data URL`);let C="";if(P.includes(","))C=P.split(",")[1];else throw new Error(`base64[${W}]data URL`);if(!C||C.length<100)throw new Error(`base64[${W}]`);if(!/^[A-Za-z0-9+/]+={0,2}$/.test(C))throw console.error(`Midjourney: base64[${W}]`),new Error(`base64[${W}]`);if(C.length%4!==0)throw new Error(`base64[${W}]4: ${C.length}`);try{atob(C)}catch(Z){throw new Error(`base64[${W}]: ${Z.message}`)}});const $=JSON.stringify({base64Array:S});console.log("Midjourney: JSON:",$.length,"base64:",S.length);const M=await fetch(I,{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:$});if(!M.ok){let P="";try{P=await M.text();try{const W=JSON.parse(P);throw new Error(`: ${M.status} - ${W.description||W.message||P}`)}catch{throw new Error(`: ${M.status} - ${P}`)}}catch(W){throw new Error(`: ${M.status} - ${W.message||P}`)}}const O=await M.json();if(console.log("Midjourney: :",O),O.code===1&&O.result&&Array.isArray(O.result))return console.log("Midjourney: URLs:",O.result),O.result;{const P=O.description||O.message||"";throw console.error("Midjourney: :",O),new Error(P)}}catch(m){throw console.error("Midjourney: :",m),m}},Xu=async(s,u=1920,f=1920)=>new Promise((h,p)=>{const m=new Image;m.crossOrigin="anonymous",m.onload=()=>{const S=m.width,I=m.height;if(S<=u&&I<=f){console.log(`Veo:  ${S}x${I} `),s.startsWith("data:")?h(s):Yn(s).then(W=>{h(`data:image/png;base64,${W}`)}).catch(p);return}let T=S,$=I;if(S>u||I>f){const W=Math.min(u/S,f/I);T=Math.round(S*W),$=Math.round(I*W),T=T%2===0?T:T-1,$=$%2===0?$:$-1}console.log(`Veo:  ${S}x${I} -> ${T}x${$}`);const M=document.createElement("canvas");M.width=T,M.height=$;const O=M.getContext("2d");O.imageSmoothingEnabled=!0,O.imageSmoothingQuality="high",O.drawImage(m,0,0,T,$);const P=M.toDataURL("image/png",.95);h(P)},m.onerror=S=>{console.error("Veo: ",S),p(new Error(""))},s.startsWith("data:")||s.startsWith("blob:")?m.src=s:Ys(s).then(S=>{const I=URL.createObjectURL(S);m.src=I}).catch(p)}),Zu=B.useCallback(s=>{a(u=>u.filter(h=>h.id!==s))},[]),Ly=(s,u)=>{u.preventDefault(),u.stopPropagation(),u.currentTarget.classList.remove("drag-over");const h=Array.from(u.dataTransfer.files).filter(p=>p.type.startsWith("image/"));if(h.length>0){const p=h[0],m=new FileReader;m.onload=async S=>{const I=S.target.result;let T={w:0,h:0};try{T=await Sr(I)}catch{}me(),r($=>$.map(M=>M.id===s?{...M,content:I,dimensions:T}:M))},m.readAsDataURL(p)}},vh=s=>{s.preventDefault(),s.stopPropagation(),s.currentTarget.classList.add("drag-over")},bh=s=>{s.preventDefault(),s.stopPropagation(),s.currentTarget.classList.remove("drag-over")};B.useEffect(()=>{const s=async h=>{const p=h.target;if(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable){const $=window.getSelection();if($&&$.toString().trim())return;h.preventDefault();return}const S=mi.current,I=ks.current,T=S?[S]:I&&I.size>0?Array.from(I):[];if(T.length>0){h.preventDefault(),h.stopPropagation();const $=Yr.current.filter(P=>T.includes(P.id)),O=ha.current.filter(P=>T.includes(P.from)||T.includes(P.to)).filter(P=>T.includes(P.from)&&T.includes(P.to));Ws.current={nodes:$.map(P=>({...P})),connections:O.map(P=>({...P})),timestamp:Date.now()},console.log(` ${$.length} `)}},u=async h=>{const p=h.target;if(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable)return;const S=mi.current;let I=null;if(S&&(I=Yr.current.find(T=>T.id===S)),I&&(I.type==="input-image"||I.type==="video-input")){const T=Array.from(h.clipboardData.items),$=T.find(O=>O.type.startsWith("image/")),M=T.find(O=>O.type.startsWith("video/"));if($&&I.type==="input-image"){h.preventDefault();const O=$.getAsFile();if(O){const P=new FileReader;P.onload=async W=>{const C=W.target.result;let Y={w:0,h:0};try{Y=await Sr(C)}catch{}me(),r(Z=>Z.map(se=>se.id===I.id?{...se,content:C,dimensions:Y}:se))},P.readAsDataURL(O)}return}else if(M&&I.type==="video-input"){h.preventDefault();const O=M.getAsFile();O&&ga(I.id,O);return}}if(Ws.current&&Ws.current.nodes&&Ws.current.nodes.length>0){h.preventDefault(),h.stopPropagation();const T=Ws.current,$=Hs.current;let M=0,O=0;if($){const pe=$.getBoundingClientRect(),Ue=(pe.left+pe.width/2-v.x)/v.zoom,dt=(pe.top+pe.height/2-v.y)/v.zoom;M=Ue,O=dt}const P=T.nodes;if(P.length===0)return;const W=Math.min(...P.map(pe=>pe.x||0)),C=Math.min(...P.map(pe=>pe.y||0)),Y=Math.max(...P.map(pe=>(pe.x||0)+(pe.width||0))),Z=Math.max(...P.map(pe=>(pe.y||0)+(pe.height||0))),se=(W+Y)/2,re=(C+Z)/2,ne=M-se,ke=O-re,Ne=new Map,Oe=Date.now();T.nodes.forEach((pe,Ue)=>{const dt=`node-${Oe}-${Ue}-${Math.random().toString(36).substr(2,9)}`;Ne.set(pe.id,dt)});const nt=T.nodes.map(pe=>({...pe,id:Ne.get(pe.id),x:pe.x+ne,y:pe.y+ke})),G=(T.connections||[]).filter(pe=>pe&&Ne.has(pe.from)&&Ne.has(pe.to)).map((pe,Ue)=>({...pe,id:`conn-${Oe}-${Ue}-${Math.random().toString(36).substr(2,9)}`,from:Ne.get(pe.from),to:Ne.get(pe.to)}));me(),r(pe=>[...pe,...nt]),a(pe=>[...pe,...G]),nt.length===1?(be(nt[0].id),jr(new Set([nt[0].id]))):nt.length>1&&(be(null),jr(new Set(nt.map(pe=>pe.id)))),console.log(` ${nt.length} `)}},f=h=>{const p=h.target;if(!(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable)&&(h.ctrlKey||h.metaKey)&&h.key==="v"){const S=mi.current;if(S){const I=Yr.current.find(T=>T.id===S);if(I&&(I.type==="input-image"||I.type==="video-input"))return}if(Ws.current&&Ws.current.nodes&&Ws.current.nodes.length>0){h.preventDefault(),h.stopPropagation();const I=Ws.current,T=Hs.current;let $=0,M=0;if(T){const G=T.getBoundingClientRect(),pe=(G.left+G.width/2-v.x)/v.zoom,Ue=(G.top+G.height/2-v.y)/v.zoom;$=pe,M=Ue}const O=I.nodes;if(O.length===0)return;const P=Math.min(...O.map(G=>G.x||0)),W=Math.min(...O.map(G=>G.y||0)),C=Math.max(...O.map(G=>(G.x||0)+(G.width||0))),Y=Math.max(...O.map(G=>(G.y||0)+(G.height||0))),Z=(P+C)/2,se=(W+Y)/2,re=$-Z,ne=M-se,ke=new Map,Ne=Date.now();I.nodes.forEach((G,pe)=>{const Ue=`node-${Ne}-${pe}-${Math.random().toString(36).substr(2,9)}`;ke.set(G.id,Ue)});const Oe=I.nodes.map(G=>({...G,id:ke.get(G.id),x:G.x+re,y:G.y+ne})),nt=(I.connections||[]).filter(G=>G&&ke.has(G.from)&&ke.has(G.to)).map((G,pe)=>({...G,id:`conn-${Ne}-${pe}-${Math.random().toString(36).substr(2,9)}`,from:ke.get(G.from),to:ke.get(G.to)}));me(),r(G=>[...G,...Oe]),a(G=>[...G,...nt]),Oe.length===1?(be(Oe[0].id),jr(new Set([Oe[0].id]))):Oe.length>1&&(be(null),jr(new Set(Oe.map(G=>G.id)))),console.log(` ${Oe.length} `)}}};return window.addEventListener("copy",s),window.addEventListener("paste",u),window.addEventListener("keydown",f),()=>{window.removeEventListener("copy",s),window.removeEventListener("paste",u),window.removeEventListener("keydown",f)}},[kt,ga,r,a,be,jr,v]);const vi=async(s,u,f,h,p,m,S=0)=>{if(S>90){ye(M=>M.map(O=>O.id===u?{...O,status:"failed",errorMsg:"Veo "}:O));const $=Rr.current.get(u);$&&(console.log("[] Veo:",{taskId:u,nodeId:$.nodeId,shotId:$.shotId}),on($.nodeId,$.shotId,{status:"draft"}),Rr.current.delete(u));return}fetch(`${f}/v2/videos/generations/${s}`,{method:"GET",headers:{Authorization:`Bearer ${h}`}}).then(async $=>{var Z,se,re,ne,ke,Ne,Oe,nt;const M=await $.text();let O;try{O=JSON.parse(M)}catch{setTimeout(()=>vi(s,u,f,h,p,m,S+1),4e3);return}console.log("[Tapnow] Veo Poll:",O);const P=((Z=O==null?void 0:O.data)==null?void 0:Z.status)||(O==null?void 0:O.status)||((se=O==null?void 0:O.data)==null?void 0:se.task_status),W=((re=O==null?void 0:O.data)==null?void 0:re.progress)||(O==null?void 0:O.progress)||"0%",C=((ne=O==null?void 0:O.data)==null?void 0:ne.fail_reason)||(O==null?void 0:O.fail_reason)||"";if(P==="SUCCESS"||P==="succeeded"||P==="FINISHED"||P==="completed"){const G=((ke=O==null?void 0:O.data)==null?void 0:ke.output)||(O==null?void 0:O.output)||((Ne=O==null?void 0:O.data)==null?void 0:Ne.video_url)||(O==null?void 0:O.video_url)||((nt=(Oe=O==null?void 0:O.data)==null?void 0:Oe.data)==null?void 0:nt.output);if(!G){console.warn("[Tapnow] Veo: URL",O),ye(Ue=>Ue.map(dt=>dt.id===u?{...dt,status:"failed",errorMsg:"URL"}:dt));return}console.log("[Tapnow] Veo: URL:",G);const pe=Date.now();ye(Ue=>{const dt=Ue.find(at=>at.id===u),et=dt==null?void 0:dt.sourceNodeId,ct=dt==null?void 0:dt.ratio,Ke=pe-((dt==null?void 0:dt.startTime)||pe);console.log("[Tapnow] Veo: ",{taskId:u,originalRatio:ct,sourceNodeId:et,historyItem:dt});let it=p,wt=m;return(async()=>{try{const at=await Sm(G);if(at&&at.w>0&&at.h>0){console.log("[Tapnow] Veo: ",{w:at.w,h:at.h,requestedRatio:ct});const It=at.w,Rt=at.h;if(ct==="16:9"){const $t=It/Rt,Tt=16/9;Math.abs($t-Tt)>.1?(console.warn(`[Tapnow] Veo:  ${$t.toFixed(2)}  16:9 (${Tt.toFixed(2)})`),console.warn(`[Tapnow] Veo: : ${It}x${Rt}, : 16:9`),console.warn(`[Tapnow] Veo:  16:9 : ${p}x${Math.round(p/(16/9))}`),it=p,wt=Math.round(p/(16/9))):(console.log("[Tapnow] Veo:  16:9"),it=It,wt=Rt)}else if(ct==="9:16"){const $t=It/Rt,Tt=9/16;Math.abs($t-Tt)>.1?(console.warn(`[Tapnow] Veo:  ${$t.toFixed(2)}  9:16 (${Tt.toFixed(2)})`),console.warn(`[Tapnow] Veo: : ${It}x${Rt}, : 9:16`),console.warn(`[Tapnow] Veo:  9:16 : ${Math.round(m*(9/16))}x${m}`),it=Math.round(m*(9/16)),wt=m):(console.log("[Tapnow] Veo:  9:16"),it=It,wt=Rt)}else it=It,wt=Rt;ye($t=>$t.map(Tt=>Tt.id===u?{...Tt,status:"completed",progress:100,url:G,width:it,height:wt,durationMs:Ke,ratio:ct||Tt.ratio}:Tt));const zt=Rr.current.get(u);zt?(console.log("[] Veo:",{taskId:u,nodeId:zt.nodeId,shotId:zt.shotId,videoUrl:G}),on(zt.nodeId,zt.shotId,{video_url:G,status:"done"}),Rr.current.delete(u)):et&&setTimeout(()=>{console.log("[Tapnow] Veo: ",{taskId:u,videoUrl:G,sourceNodeId:et}),Ks(u,G,"video",et)},0)}}catch(at){console.warn("[Tapnow] Veo: ",at);let It=p,Rt=m;if(ct==="16:9"){const $t=It/Rt;Math.abs($t-16/9)>.1&&(Rt=Math.round(It/(16/9)))}else if(ct==="9:16"){const $t=It/Rt;Math.abs($t-9/16)>.1&&(It=Math.round(Rt*(9/16)))}ye($t=>$t.map(Tt=>Tt.id===u?{...Tt,status:"completed",progress:100,url:G,width:It,height:Rt,durationMs:Ke,ratio:ct||Tt.ratio}:Tt));const zt=Rr.current.get(u);zt?(console.log("[] Veofallback:",{taskId:u,nodeId:zt.nodeId,shotId:zt.shotId,videoUrl:G}),on(zt.nodeId,zt.shotId,{video_url:G,status:"done"}),Rr.current.delete(u)):et&&setTimeout(()=>{console.log("[Tapnow] Veo: ",{taskId:u,videoUrl:G,sourceNodeId:et}),Ks(u,G,"video",et)},0)}})(),Ue});return}if(P==="FAILED"||P==="ERROR"||P==="CANCELLED"){let G=`: ${P}`;if(C)try{const pe=typeof C=="string"?JSON.parse(C):C;G=(pe==null?void 0:pe.message)||(pe==null?void 0:pe.code)||C}catch{G=C||G}console.error("[Tapnow] Veo: ",{status:P,failReason:C,errorMsg:G}),ye(pe=>pe.map(Ue=>Ue.id===u?{...Ue,status:"failed",errorMsg:G}:Ue));return}if(P==="NOT_START"||P==="PENDING"||P==="QUEUED"){console.log(`[Tapnow] Veo:  ${P} ${W}...`);const G=parseInt(W)||0;ye(pe=>pe.map(Ue=>Ue.id===u?{...Ue,status:"generating",progress:Math.max(5,G),errorMsg:P==="NOT_START"?"...":void 0}:Ue)),setTimeout(()=>vi(s,u,f,h,p,m,S+1),4e3);return}const Y=parseInt(W)||Math.min(95,S*2+10);console.log(`[Tapnow] Veo:  ${P} ${W}...`),ye(G=>G.map(pe=>pe.id===u?{...pe,status:"generating",progress:Y}:pe)),setTimeout(()=>vi(s,u,f,h,p,m,S+1),4e3)}).catch($=>setTimeout(()=>vi(s,u,f,h,p,m,S+1),4e3))},Wi=(s,u,f,h,p,m,S="",I=0)=>{if(!s||s==="null"||s==="undefined"){console.error(`[Poll Error] Invalid JobId: ${s} for task ${u}`),ye(O=>O.map(P=>P.id===u?{...P,status:"failed",errorMsg:"Task failed: No Job ID returned",durationMs:Date.now()-(P.startTime||Date.now())}:P));return}const T=S==="sora-2-pro"?360:80,$=5e3;if(I>T){ye(P=>P.map(W=>W.id===u?{...W,status:"failed",errorMsg:"Sora "}:W));const O=Rr.current.get(u);O&&(console.log("[] Sora:",{taskId:u,nodeId:O.nodeId,shotId:O.shotId}),on(O.nodeId,O.shotId,{status:"draft"}),Rr.current.delete(u));return}const M=S!=null&&S.includes("grok")?`${f}/v2/videos/generations/${encodeURIComponent(s)}`:`${f}/v1/videos/${encodeURIComponent(s)}`;fetch(M,{method:"GET",headers:{Authorization:`Bearer ${h}`}}).then(O=>{if(!O.ok)throw new Error(`HTTP ${O.status}: ${O.statusText}`);return O.text()}).then(O=>{var C,Y,Z,se,re;let P;try{P=JSON.parse(O)}catch(ne){console.error("[Tapnow] Sora/Grok Poll JSON :",ne,O),setTimeout(()=>Wi(s,u,f,h,p,m,S,I+1),$);return}console.log("[Tapnow] Sora/Grok Poll:",P);const W=((C=P==null?void 0:P.data)==null?void 0:C.status)||(P==null?void 0:P.status)||((Y=P==null?void 0:P.data)==null?void 0:Y.task_status)||(P==null?void 0:P.task_status);if(W==="SUCCESS"||W==="succeeded"||W==="FINISHED"||W==="completed"){const ne=((Z=P==null?void 0:P.data)==null?void 0:Z.output)||(P==null?void 0:P.output)||((se=P==null?void 0:P.data)==null?void 0:se.video_url)||((re=P==null?void 0:P.data)==null?void 0:re.url)||(P==null?void 0:P.video_url)||(P==null?void 0:P.url);if(!ne){ye(nt=>nt.map(G=>G.id===u?{...G,status:"failed",errorMsg:"URL"}:G));return}const ke=Date.now(),Ne=ya.get(u);Ne==null||Ne.sourceNodeId;const Oe=ke-((Ne==null?void 0:Ne.startTime)||ke);ye(nt=>{const G=nt.map(Ue=>Ue.id===u?{...Ue,status:"completed",progress:100,url:ne,width:p,height:m,durationMs:Oe}:Ue),pe=Rr.current.get(u);if(pe)console.log("[] Sora:",{taskId:u,nodeId:pe.nodeId,shotId:pe.shotId,videoUrl:ne}),on(pe.nodeId,pe.shotId,{video_url:ne,status:"done"}),Rr.current.delete(u);else{const Ue=G.find(dt=>dt.id===u);Ue!=null&&Ue.sourceNodeId?setTimeout(()=>{console.log("[Tapnow] Sora: ",{taskId:u,videoUrl:ne,sourceNodeId:Ue.sourceNodeId}),Ks(u,ne,"video",Ue.sourceNodeId)},0):console.warn("[Tapnow] Sora:  sourceNodeId",{taskId:u,updatedItem:Ue})}return G});return}if(W==="FAILED"||W==="ERROR"||W==="CANCELLED"){ye(ne=>ne.map(ke=>ke.id===u?{...ke,status:"failed",errorMsg:`: ${W}`}:ke));return}ye(ne=>ne.map(ke=>ke.id===u?{...ke,status:"generating",progress:Math.min(95,(ke.progress||10)+2)}:ke)),setTimeout(()=>Wi(s,u,f,h,p,m,S,I+1),$)}).catch(O=>{console.error("[Tapnow] Sora/Grok Poll :",O),I<T-5?setTimeout(()=>Wi(s,u,f,h,p,m,S,I+1),$):ye(P=>P.map(W=>W.id===u?{...W,status:"failed",errorMsg:`: ${O.message||""}`}:W))})},wh=async(s,u="1:1")=>new Promise((f,h)=>{const p=new Image;p.crossOrigin="anonymous";const m=setTimeout(()=>{h(new Error(""))},3e4);p.onload=()=>{clearTimeout(m);try{const S=document.createElement("canvas"),I=S.getContext("2d"),T=Math.floor(p.width/2),$=Math.floor(p.height/2),M=T/$,O=[];for(let P=0;P<2;P++)for(let W=0;W<2;W++){const C=Math.max(0,Math.min(W*T,p.width-T)),Y=Math.max(0,Math.min(P*$,p.height-$)),Z=Math.min(T,p.width-C),se=Math.min($,p.height-Y);S.width=Z,S.height=se,I.fillStyle="#ffffff",I.fillRect(0,0,Z,se),I.drawImage(p,C,Y,Z,se,0,0,Z,se);const re=S.toDataURL("image/png");O.push({url:re,width:Z,height:se,ratio:M})}console.log(`Midjourney:  ${p.width}x${p.height} ${T}x${$} ${M.toFixed(2)}`),f(O)}catch(S){console.error("Midjourney: :",S),h(S)}},p.onerror=S=>{clearTimeout(m),console.error("Midjourney: Failed to load image for splitting:",S),h(new Error(""))},p.src=s}),Xl=(s,u,f,h,p,m,S,I=0,T=!1)=>{const $=T?160:300,M=5e3;if(I>$){const W=T?800:1500;ye(C=>C.map(Y=>Y.id===s?{...Y,status:"failed",errorMsg:`${W}`}:Y));return}const P=`${f.replace(/\/+$/,"")}/v1/images/tasks/${u}`;fetch(P,{method:"GET",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}}).then(W=>W.text()).then(W=>{var Ne,Oe,nt,G,pe,Ue,dt,et,ct;let C;try{C=JSON.parse(W)}catch(Ke){console.error("[Async Image] Failed to parse response:",Ke),setTimeout(()=>Xl(s,u,f,h,p,m,S,I+1,T),delayMs);return}console.log("[Async Image] Poll:",C);const Y=(((Ne=C==null?void 0:C.data)==null?void 0:Ne.status)||(C==null?void 0:C.status)||"").toUpperCase();console.log("[Async Image] :",Y,":",{hasData:!!(C!=null&&C.data),hasDataData:!!((Oe=C==null?void 0:C.data)!=null&&Oe.data),hasDataStatus:!!((nt=C==null?void 0:C.data)!=null&&nt.status),hasStatus:!!(C!=null&&C.status),dataKeys:C?Object.keys(C):[]});let Z=[];if((G=C==null?void 0:C.data)!=null&&G.data&&Array.isArray(C.data.data)&&C.data.data.length>0?(Z=C.data.data,console.log("[Async Image]  data.data.data :",Z.length,"")):(pe=C==null?void 0:C.data)!=null&&pe.images&&Array.isArray(C.data.images)&&C.data.images.length>0?(Z=C.data.images,console.log("[Async Image]  data.data.images :",Z.length,"")):C!=null&&C.images&&Array.isArray(C.images)&&C.images.length>0?(Z=C.images,console.log("[Async Image]  data.images :",Z.length,"")):C!=null&&C.data&&Array.isArray(C.data)&&C.data.length>0&&(Z=C.data,console.log("[Async Image]  data.data :",Z.length,"")),Z.length===0){if((Ue=C==null?void 0:C.data)!=null&&Ue.data&&Array.isArray(C.data.data)&&C.data.data.length>0){const Ke=C.data.data[0];if(Ke!=null&&Ke.revised_prompt){const it=Ke.revised_prompt.match(/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/);it&&it[1]&&(Z=[{url:it[1]}],console.log("[Async Image]  revised_prompt URL:",it[1]))}}if(Z.length===0&&((dt=C==null?void 0:C.data)!=null&&dt.revised_prompt)){const Ke=C.data.revised_prompt.match(/!\[.*?\]\((https?:\/\/[^\s\)]+)\)/);Ke&&Ke[1]&&(Z=[{url:Ke[1]}],console.log("[Async Image]  data.data.revised_prompt URL:",Ke[1]))}if(Z.length===0&&((et=C==null?void 0:C.data)!=null&&et.data)&&Array.isArray(C.data.data)&&C.data.data.length>0){const Ke=C.data.data.filter(it=>(it==null?void 0:it.url)||(it==null?void 0:it.image_url)||(it==null?void 0:it.imageUrl));Ke.length>0&&(Z=Ke,console.log("[Async Image]  data.data.data :",Z.length,""))}if(Z.length===0&&(Y==="COMPLETED"||Y==="SUCCESS"||Y==="FINISHED"||Y==="DONE")){console.log("[Async Image] 0");const Ke=(wt,at=0,It=new WeakSet)=>{if(at>5||!wt||typeof wt!="object"||It.has(wt))return null;It.add(wt);const Rt=["url","image_url","imageUrl","image","src","link","href"];for(const zt of Rt)if(wt[zt]&&typeof wt[zt]=="string"&&wt[zt].startsWith("http"))return wt[zt];if(Array.isArray(wt)&&wt.length>0){const zt=Ke(wt[0],at+1,It);if(zt)return zt}for(const zt in wt)if(wt.hasOwnProperty(zt)&&!Rt.includes(zt)){const $t=Ke(wt[zt],at+1,It);if($t)return $t}return null},it=Ke(C);it?(Z=[{url:it}],console.log("[Async Image] URL:",it)):console.warn("[Async Image] URL:",JSON.stringify(C,null,2).substring(0,500))}}const se=(C==null?void 0:C.message)||(C==null?void 0:C.error)||(C==null?void 0:C.fail_reason)||"";ye(Ke=>{const it=Ke.map(at=>{var It,Rt,zt,$t,Tt,_t,Zt,un,dn,Xr,mn,Pn;if(at.id===s)if(Y==="COMPLETED"||Y==="SUCCESS"||Y==="FINISHED"||Y==="DONE"){console.log("[Async Image] :",Y,":",Z.length);const Jt=at.sourceNodeId||S;if(Z&&Z.length>0){const qt=Z.map(an=>typeof an=="string"?an:(an==null?void 0:an.url)||(an==null?void 0:an.image_url)||(an==null?void 0:an.imageUrl)||"").filter(Boolean);if(console.log("[Async Image] URLs:",qt),qt.length>0){const an=qt[0];let Pt=null;const tn=((It=C==null?void 0:C.data)==null?void 0:It.duration)||((Rt=C==null?void 0:C.data)==null?void 0:Rt.cost_time)||((zt=C==null?void 0:C.data)==null?void 0:zt.elapsed_time)||(($t=C==null?void 0:C.data)==null?void 0:$t.time_cost)||((Tt=C==null?void 0:C.data)==null?void 0:Tt.spent_time)||(C==null?void 0:C.duration)||(C==null?void 0:C.cost_time)||(C==null?void 0:C.elapsed_time)||(C==null?void 0:C.time_cost)||(C==null?void 0:C.spent_time);if(tn!=null){if(typeof tn=="number")Pt=tn<1e4?tn*1e3:tn;else if(typeof tn=="string"){const En=tn.match(/(\d+\.?\d*)\s*(s|ms||)/i);if(En){const L=parseFloat(En[1]),Se=En[2].toLowerCase();Pt=Se==="s"||Se===""?L*1e3:L}else{const L=parseFloat(tn);isNaN(L)||(Pt=L<1e4?L*1e3:L)}}}if(Pt===null){const En=Date.now();Pt=En-(at.startTime||En)}console.log("[Async Image] UI:",{taskId:s,url:an,sourceNodeId:Jt,imageCount:qt.length,durationMs:Pt,backendDuration:tn,frontendCalculated:Pt===null?null:Date.now()-(at.startTime||Date.now())});const Nr=Jt||at.sourceNodeId;return console.log("[Async Image] ",{taskId:s,url:an,sourceNodeId:Nr,savedSourceNodeId:Jt,hItemSourceNodeId:at.sourceNodeId,imageCount:qt.length}),requestAnimationFrame(()=>{Ks(s,an,"image",Nr,qt.length>1?qt:null)}),{...at,status:"completed",progress:100,url:an,width:p,height:m,durationMs:Pt,errorMsg:null,sourceNodeId:Jt||at.sourceNodeId,...qt.length>1?{mjImages:qt,selectedMjImageIndex:0}:{}}}else console.error("[Async Image] URL:",Z)}else{console.error("[Async Image] :",{status:Y,hasData:!!(C!=null&&C.data),hasDataData:!!((_t=C==null?void 0:C.data)!=null&&_t.data),fullData:JSON.stringify(C,null,2).substring(0,1e3)});const qt=(Pt,tn=0)=>{if(tn>5||!Pt||typeof Pt!="object")return null;if(Pt.url&&typeof Pt.url=="string"&&Pt.url.startsWith("http"))return Pt.url;if(Pt.image_url&&typeof Pt.image_url=="string"&&Pt.image_url.startsWith("http"))return Pt.image_url;if(Pt.imageUrl&&typeof Pt.imageUrl=="string"&&Pt.imageUrl.startsWith("http"))return Pt.imageUrl;for(const Nr in Pt)if(Pt.hasOwnProperty(Nr)){const En=qt(Pt[Nr],tn+1);if(En)return En}return null},an=qt(C);if(an){console.log("[Async Image] URL:",an);let Pt=null;const tn=((Zt=C==null?void 0:C.data)==null?void 0:Zt.duration)||((un=C==null?void 0:C.data)==null?void 0:un.cost_time)||((dn=C==null?void 0:C.data)==null?void 0:dn.elapsed_time)||((Xr=C==null?void 0:C.data)==null?void 0:Xr.time_cost)||((mn=C==null?void 0:C.data)==null?void 0:mn.spent_time)||(C==null?void 0:C.duration)||(C==null?void 0:C.cost_time)||(C==null?void 0:C.elapsed_time)||(C==null?void 0:C.time_cost)||(C==null?void 0:C.spent_time);if(tn!=null){if(typeof tn=="number")Pt=tn<1e4?tn*1e3:tn;else if(typeof tn=="string"){const En=tn.match(/(\d+\.?\d*)\s*(s|ms||)/i);if(En){const L=parseFloat(En[1]),Se=En[2].toLowerCase();Pt=Se==="s"||Se===""?L*1e3:L}else{const L=parseFloat(tn);isNaN(L)||(Pt=L<1e4?L*1e3:L)}}}if(Pt===null){const En=Date.now();Pt=En-(at.startTime||En)}const Nr=Jt||at.sourceNodeId;return console.log("[Async Image] ",{taskId:s,url:an,sourceNodeId:Nr,savedSourceNodeId:Jt,hItemSourceNodeId:at.sourceNodeId}),requestAnimationFrame(()=>{Ks(s,an,"image",Nr,null)}),{...at,status:"completed",progress:100,url:an,width:p,height:m,durationMs:Pt,errorMsg:null,sourceNodeId:Jt||at.sourceNodeId}}}return{...at,status:"failed",errorMsg:se||""}}else{if(Y==="FAILED"||Y==="ERROR"||Y==="CANCELLED"||Y==="FAILURE")return{...at,status:"failed",errorMsg:se||`: ${Y}`};if(Y==="PENDING"||Y==="PROCESSING"||Y==="GENERATING"||Y==="IN_PROGRESS"||Y==="RUNNING"){let Jt=10+I*2;if((Pn=C==null?void 0:C.data)!=null&&Pn.progress){const qt=String(C.data.progress);qt.includes("%")?Jt=parseInt(qt.replace("%",""),10)||Jt:typeof C.data.progress=="number"&&(Jt=C.data.progress)}else if(C!=null&&C.progress){const qt=String(C.progress);qt.includes("%")?Jt=parseInt(qt.replace("%",""),10)||Jt:typeof C.progress=="number"&&(Jt=C.progress)}return Jt=Math.min(95,Math.max(10,Jt)),{...at,status:"generating",progress:Jt,errorMsg:null}}else{const Jt=Math.min(90,10+I*1.5);return{...at,status:"generating",progress:Jt,errorMsg:null}}}return at}),wt=it.find(at=>at.id===s);return wt!=null&&wt.progress,it});const re=(((ct=C==null?void 0:C.data)==null?void 0:ct.status)||(C==null?void 0:C.status)||"").toUpperCase();!(re==="COMPLETED"||re==="SUCCESS"||re==="FINISHED"||re==="DONE")&&!(re==="FAILED"||re==="ERROR"||re==="CANCELLED"||re==="FAILURE")&&ye(Ke=>{const it=Ke.find(It=>It.id===s),wt=(it==null?void 0:it.progress)||10;let at=M;return wt>=90?at=1e3:wt>=70?at=2e3:wt>=50?at=3e3:I>50&&!T&&(at=1e4),setTimeout(()=>{Xl(s,u,f,h,p,m,S,I+1,T)},at),Ke})}).catch(W=>{console.error("[Async Image] Poll error:",W),setTimeout(()=>Xl(s,u,f,h,p,m,S,I+1,T),M)})},Zl=(s,u,f,h,p="fast",m,S,I=0)=>{if(I>120){ye(M=>M.map(O=>O.id===u?{...O,status:"failed",errorMsg:"Midjourney "}:O));return}fetch(`${f}/${p}/mj/task/${s}/fetch`,{method:"GET",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}}).then(M=>M.text()).then(M=>{let O;try{O=JSON.parse(M)}catch(re){console.error("Midjourney: Failed to parse response:",re),setTimeout(()=>Zl(s,u,f,h,p,m,S,I+1),5e3);return}console.log("[Tapnow] Midjourney Poll:",O);const P=(O==null?void 0:O.status)||"",W=(O==null?void 0:O.progress)||"0%",C=(O==null?void 0:O.imageUrl)||"",Y=(O==null?void 0:O.failReason)||"",Z=(O==null?void 0:O.buttons)||[];let se=0;typeof W=="string"&&W.includes("%")?se=parseInt(W.replace("%",""),10)||0:typeof W=="number"&&(se=W),ye(re=>re.map(ne=>{var ke,Ne,Oe,nt,G,pe,Ue,dt;if(ne.id===u){let et=ne.status,ct=ne.errorMsg,Ke=se;if(P==="SUCCESS"||P==="FINISHED"){if(et="completed",Ke=100,ct=null,C&&((Ne=(ke=ne.apiConfig)==null?void 0:ke.modelId)!=null&&Ne.includes("mj"))&&((Oe=ne.apiConfig)==null?void 0:Oe.modelId)!=="mj-zoom"){let wt="1:1";if(ne.prompt&&ne.prompt.includes("--ar ")){const zt=ne.prompt.match(/--ar\s+([\d:]+)/);zt&&zt[1]&&(wt=zt[1])}ye(zt=>zt.map($t=>$t.id===u?{...$t,url:C,mjRatio:wt,mjOriginalUrl:C,mjNeedsSplit:!0}:$t));const at=ne.sourceNodeId;at?setTimeout(()=>{console.log("[Tapnow] Midjourney: ",{taskId:u,imageUrl:C,sourceNodeId:at}),Ks(u,C,"image",at)},0):console.warn("[Tapnow] Midjourney:  sourceNodeId",{taskId:u,hItem:ne}),setTimeout(()=>{wh(C,wt).then(zt=>{const $t=zt.map(Zt=>typeof Zt=="string"?Zt:Zt.url),Tt=zt[0],_t=typeof Tt=="string"?Tt:Tt.url;ye(Zt=>Zt.map(un=>un.id===u?{...un,mjImages:$t,url:_t,selectedMjImageIndex:0,mjRatio:wt,mjOriginalUrl:C,mjNeedsSplit:!1,mjImageInfo:zt.map(dn=>typeof dn=="string"?null:{width:dn.width,height:dn.height,ratio:dn.ratio})}:un))}).catch(zt=>{console.error("Midjourney: Failed to split image:",zt),ye($t=>$t.map(Tt=>Tt.id===u?{...Tt,url:C,mjRatio:wt,mjOriginalUrl:C,mjNeedsSplit:!0}:Tt))})},300);const It=Date.now(),Rt=It-(ne.startTime||It);return{...ne,status:et,progress:Ke,errorMsg:ct,url:C,width:m,height:S,mjButtons:Z,mjOriginalUrl:C,durationMs:Rt}}}else P==="FAILURE"||P==="ERROR"||P==="CANCELLED"?(et="failed",ct=Y||`: ${P}`):P==="NOT_START"||P==="SUBMITTED"||P==="IN_PROGRESS"||P==="MODAL"?(et="generating",ct=null,Ke===0&&(Ke=5)):(et="generating",ct=null,Ke=Math.min(95,(ne.progress||5)+2));console.log(`[Tapnow] Midjourney Poll Status Update: Task ${u}, Status: ${et}, Progress: ${Ke}%, ImageUrl: ${C?"Yes":"No"}`);const it={...ne,status:et,progress:Ke,errorMsg:ct,url:C||ne.url,width:m,height:S,mjButtons:Z};if((P==="SUCCESS"||P==="FINISHED")&&C&&(!((G=(nt=ne.apiConfig)==null?void 0:nt.modelId)!=null&&G.includes("mj"))||((pe=ne.apiConfig)==null?void 0:pe.modelId)==="mj-zoom")){ne.sourceNodeId?(console.log("[Tapnow] : ",{taskId:u,imageUrl:C,sourceNodeId:ne.sourceNodeId,modelId:(Ue=ne.apiConfig)==null?void 0:Ue.modelId}),((dt=ne.apiConfig)==null?void 0:dt.modelId)==="mj-zoom"?r(It=>It.map(Rt=>Rt.id===ne.sourceNodeId&&Rt.type==="expand-image"?{...Rt,content:C}:Rt)):Ks(u,C,"image",ne.sourceNodeId)):console.warn("[Tapnow] :  sourceNodeId",{taskId:u,hItem:ne});const wt=Date.now(),at=wt-(ne.startTime||wt);it.durationMs=at}return it}return ne})),!(P==="SUCCESS"||P==="FINISHED")&&(P==="FAILURE"||P==="ERROR"||P==="CANCELLED"||setTimeout(()=>Zl(s,u,f,h,p,m,S,I+1),5e3))}).catch(M=>{console.error(`[Tapnow] Midjourney Poll Fetch Error for task ${u}:`,M),ye(O=>O.map(P=>P.id===u?{...P,status:"failed",errorMsg:`: ${M.message}`}:P)),I<3&&setTimeout(()=>Zl(s,u,f,h,p,m,S,I+1),5e3)})},Oy=async s=>{if(!s)return null;try{const u=new Image;u.crossOrigin="anonymous",await new Promise((p,m)=>{u.onload=p,u.onerror=m,u.src=s});const f=document.createElement("canvas");f.width=u.width,f.height=u.height;const h=f.getContext("2d");return h.fillStyle="#000000",h.fillRect(0,0,f.width,f.height),h.globalCompositeOperation="destination-out",h.drawImage(u,0,0),new Promise((p,m)=>{f.toBlob(S=>{S?p(S):m(new Error(""))},"image/png")})}catch(u){return console.error("[Inpainting] :",u),null}},Jl=async(s,u,f,h,p={})=>{var et,ct,Ke,it,wt,at,It,Rt,zt,$t,Tt,_t,Zt,un,dn,Xr,mn,Pn,Jt,qt,an,Pt,tn,Nr,En,L,Se,xt,bn;let m=[];const S=Array.isArray(f)?f:f?[f]:[];if(S.length>0)try{m=await Promise.all(S.map(async we=>{if(Ci.isImageId(we)){console.log(`[startGeneration] Resolving IDB image: ${we}`);const qe=await Ci.getImage(we);return qe||(console.warn(`[startGeneration] Failed to resolve IDB image: ${we}`),we)}return we}))}catch(we){console.error("[startGeneration] Error resolving images:",we),m=S}const I=m,T=I.length>0?I[0]:void 0;if(console.log("[startGeneration] Images prepared:",I),!s&&!T){alert("");return}let $=null;h&&h.startsWith("storyboard-")&&h.includes("-shot-")?$=null:$=n.find(we=>we.id===h);let M=null,O=$==null?void 0:$.maskContent;if(O)console.log("[Inpainting] :",h);else{let we=i.find(qe=>qe.to===h&&(!qe.inputType||qe.inputType==="default"));if(we||(we=i.find(qe=>qe.to===h)),we){const qe=Ft.get(we.from);qe&&qe.maskContent&&(O=qe.maskContent,console.log("[Inpainting] :",qe.id))}}O&&(M=await Oy(O),M?console.log("[Inpainting] "):console.warn("[Inpainting] "));const P=p.model||((et=$==null?void 0:$.settings)==null?void 0:et.model)||(u==="image"?"nano-banana":"sora-2"),W=xi(P);let C=W.key,Y=C;if(C&&C.includes(",")){const we=C.split(",").map(Ve=>Ve.trim()).filter(Ve=>Ve),qe=Xt.current||{};console.log("[V3.5.1 Debug] Multi-account rotation check:"),console.log("  - Total keys:",we.length),console.log("  - Blacklist:",JSON.stringify(qe));const ht=we.filter(Ve=>!qe[Ve]);console.log("  - Available keys:",ht.length),ht.length>0?(Y=ht[Math.floor(Math.random()*ht.length)],console.log(`[Load Balancing] Selected API Key from ${ht.length}/${we.length} available options`)):we.length>0&&(Y=we[Math.floor(Math.random()*we.length)],console.warn(` [Load Balancing] All ${we.length} keys are blacklisted, using random selection`))}let Z=W.url,se=Z;if(Z.includes(",")){const we=Z.split(",").map(qe=>qe.trim()).filter(qe=>qe);we.length>0&&(se=we[Math.floor(Math.random()*we.length)],console.log(`[Load Balancing] Selected API URL from ${we.length} options: ${se}`))}if(!Y){alert(" API Key"),hi(!0);return}s&&(P.includes("sora")||P==="sora-2"||P==="sora-2-pro")&&(s=s.replace(/@([a-zA-Z0-9_\.]+)(?![a-zA-Z0-9_\.])/g,(we,qe)=>`@{${qe}}`),s=s.replace(/@\{([^\}]+)\}/g,(we,qe)=>` @{${qe}} `).replace(/\s{2,}/g," ").trim(),console.log("[Sora 2] Normalized prompt:",s));let re=p.ratio||((ct=$==null?void 0:$.settings)==null?void 0:ct.ratio)||(P.includes("grok")?"3:2":"1:1"),ne=((Ke=$==null?void 0:$.settings)==null?void 0:Ke.resolution)||(P.includes("grok")?"1080P":"Auto"),{sizeStr:ke,w:Ne,h:Oe}=V2(P,re,ne);if(ne==="Auto"&&re==="Auto"&&T)try{const we=await Sr(T),qe=Math.round(we.w/64)*64,ht=Math.round(we.h/64)*64;Ne=qe,Oe=ht,ke=`${qe}x${ht}`,console.log(`[Auto Res] Using Source Dimensions: ${ke}`)}catch(we){console.error("Auto Res Error",we)}else if(!Ne||!Oe){const we=oy(re,ne);Ne=we.w,Oe=we.h,ke=we.str}if(T&&re==="Auto"&&["1K","2K","4K"].includes(ne))try{const we=await Sr(T),qe=ne==="4K"?4096:ne==="2K"?2048:1024,ht=Math.max(we.w,we.h)||1,Ve=qe/ht;let ut=Math.round(we.w*Ve/16)*16,vt=Math.round(we.h*Ve/16)*16;ut=Math.max(16,ut),vt=Math.max(16,vt),Ne=ut,Oe=vt,ke=`${ut}x${vt}`,console.log(`[Auto+${ne}] Upscale from ${we.w}x${we.h} -> ${ke}`)}catch(we){console.error("Auto+K Upscale Error",we)}let nt=p.duration?String(p.duration).replace("s",""):((wt=(it=$==null?void 0:$.settings)==null?void 0:it.duration)==null?void 0:wt.replace("s",""))||"5";console.log("[V3.5.2 Debug] Duration processing: options.duration=",p.duration,"final duration=",nt),P.includes("veo")&&(nt="8"),p.resolution?ne=p.resolution:(at=$==null?void 0:$.settings)!=null&&at.resolution&&(ne=$.settings.resolution);const G=p._existingTaskId||Date.now().toString(),pe=()=>{const we=en.get(P);return P.includes("jimeng")?P:(we==null?void 0:we.displayName)||W.provider||P},Ue=Date.now(),dt=($==null?void 0:$.id)||h||null;if(p._isRetry||ye(we=>[{id:G,type:u,url:"",prompt:s||(T?`Img2${u==="image"?"Img":"Vid"}`:"Untitled"),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"generating",progress:5,modelName:pe(),width:Ne,height:Oe,remoteTaskId:null,apiConfig:{modelId:P,baseUrl:se,apiKey:Y},provider:W.provider,sourceNodeId:dt,startTime:Ue,durationMs:null,ratio:re},...we]),dt&&dt.startsWith("storyboard-")&&dt.includes("-shot-")){const we=dt.split("-shot-");if(we.length===2){const qe=we[0].replace("storyboard-",""),ht=we[1];Rr.current.set(G,{nodeId:qe,shotId:ht}),console.log("[] :",{taskId:G,nodeId:qe,shotId:ht})}}p._isRetry||requestAnimationFrame(()=>{setTimeout(()=>{Du(!0)},0)});try{if(u==="image"){let we=`${se}/v1/images/generations`,qe,ht=!1;const Ve=en.get(P),ut=(P.includes("banana")||P.includes("edit")||P.includes("qwen"))&&!(P.includes("nano-banana-2")||((Ve==null?void 0:Ve.modelName)??"").includes("nano-banana-2")),vt=P.includes("gpt")||((Ve==null?void 0:Ve.modelName)??"").includes("gpt-image")||((Ve==null?void 0:Ve.provider)??"").toLowerCase().includes("gpt-4o image"),Wt=P.includes("flux")||((Ve==null?void 0:Ve.modelName)??"").includes("flux-kontext"),Xe=((Ve==null?void 0:Ve.modelName)??"").includes("nano-banana-2")||P.includes("nano-banana-2"),kn=P.includes("mj")||((Ve==null?void 0:Ve.provider)??"").toLowerCase().includes("midjourney"),In=P.includes("jimeng")||((Ve==null?void 0:Ve.modelName)??"").includes("jimeng")||(Ve==null?void 0:Ve.provider)==="jimeng",Fn=()=>{var ve;return P.includes("jimeng-4.5")?"jimeng-4.5":P.includes("jimeng-4.1")?"jimeng-4.1":P.includes("jimeng-4.0")?"jimeng-4.0":P.includes("jimeng-3.1")?"jimeng-3.1":P.includes("jimeng-3.0")?"jimeng-3.0":(ve=Ve==null?void 0:Ve.modelName)!=null&&ve.includes("jimeng")?Ve.modelName:"jimeng-4.5"},yt=(()=>{if(Xe)return ne==="4K"?"4K":ne==="2K"?"2K":"1K"})(),ft=re==="Auto"?void 0:re;if(I.length>0&&ut){we=`${se}/v1/images/edits`,ht=!0;const ve=new FormData;ve.append("model",(Ve==null?void 0:Ve.modelName)||"nano-banana"),ve.append("prompt",s||"enhance"),ve.append("n","1"),ve.append("size",ke),ft&&ve.append("aspect_ratio",ft),yt&&ve.append("image_size",yt);const Te=I.map(He=>Ys(He));(await Promise.all(Te)).forEach((He,At)=>{ve.append("image",He,`input_${At}.png`)}),M&&ve.append("mask",M,"mask.png"),qe=ve}else if(Wt){we=`${se}/v1/images/edits`,ht=!0;const ve=new FormData;ve.append("model",(Ve==null?void 0:Ve.modelName)||"flux-kontext-pro"),ve.append("prompt",s||""),ft&&ve.append("aspect_ratio",ft),ke&&ve.append("size",ke);const Te=I.length>0?I:T?[T]:[];if(Te.length>0){const mt=Te.map(At=>Ys(At));(await Promise.all(mt)).forEach((At,gt)=>ve.append("image",At,`flux_ref_${gt}.png`))}M&&ve.append("mask",M,"mask.png"),qe=ve}else if(vt){let ve=s||"";const Te={model:(Ve==null?void 0:Ve.modelName)||"gpt-4o-image",prompt:ve,n:1,size:ke,aspect_ratio:re,response_format:"url"};if(I.length>0){const mt=I.map(At=>Yn(At)),He=await Promise.all(mt);Te.image=He.map(At=>`data:image/png;base64,${At}`)}qe=Te}else if(Xe)if(I.length>0){we=`${se}/v1/images/edits?async=true`,ht=!0;const Te=new FormData;Te.append("model",(Ve==null?void 0:Ve.modelName)||"nano-banana-2"),Te.append("prompt",s||""),Te.append("response_format","url"),ft&&Te.append("aspect_ratio",ft),yt&&Te.append("image_size",yt);const mt=I.map(At=>Ys(At));(await Promise.all(mt)).forEach((At,gt)=>{Te.append("image",At,`input_${gt}.png`)}),M&&Te.append("mask",M,"mask.png"),qe=Te}else{we=`${se}/v1/images/generations?async=true`;const Te={model:(Ve==null?void 0:Ve.modelName)||"nano-banana-2",prompt:s||"",response_format:"url",...ft?{aspect_ratio:ft}:{},...yt?{image_size:yt}:{}};if(T){const mt=T.trim();if(mt.startsWith("http"))Te.image=[mt];else if(mt.startsWith("data:"))Te.image=[mt];else{const He=await Yn(mt);Te.image=[`data:image/png;base64,${He}`]}}qe=Te}else if(kn){const ve=((It=$==null?void 0:$.settings)==null?void 0:It.mjMode)||"fast",Te=((Rt=$==null?void 0:$.settings)==null?void 0:Rt.mjVersion)||"--v 7";let mt=s||"";re&&re!=="Auto"&&(mt.includes("--ar ")||(mt=`${mt} --ar ${re}`.trim()));const He=Gl(h,"oref"),At=Gl(h,"sref"),gt=[],Dt=new Map;let Rn=null,Yt=null,fn=[];const _a=He||((zt=$==null?void 0:$.settings)==null?void 0:zt.mjOref)&&$.settings.mjOref.trim();if(_a&&_a.trim()){let nn=_a.trim();nn.startsWith("http")?Rn=nn:nn.startsWith("data:")?(gt.push(nn),Dt.set("oref",gt.length-1)):Rn=nn}const Vi=At||(($t=$==null?void 0:$.settings)==null?void 0:$t.mjSref)&&$.settings.mjSref.trim();if(Vi&&Vi.trim()){let nn=Vi.trim();nn.startsWith("http")?Yt=nn:nn.startsWith("data:")?(gt.push(nn),Dt.set("sref",gt.length-1)):Yt=nn}if(I.length>0)for(const nn of I)!(He&&nn===He)&&!(At&&nn===At)&&(nn.startsWith("http")?fn.push(nn):nn.startsWith("data:")?(gt.push(nn),Dt.set(`default_${fn.length}`,gt.length-1),fn.push(null)):fn.push(nn));if(gt.length>0)try{const nn=await Dy(gt,se,Y);Dt.has("oref")&&(Rn=nn[Dt.get("oref")]),Dt.has("sref")&&(Yt=nn[Dt.get("sref")]);for(let Zr=0;Zr<fn.length;Zr++)if(fn[Zr]===null){const Ki=`default_${Zr}`;Dt.has(Ki)&&(fn[Zr]=nn[Dt.get(Ki)])}}catch(nn){ye(Zr=>Zr.map(Ki=>Ki.id===G?{...Ki,status:"failed",progress:0,errorMsg:`: ${nn.message}`}:Ki));return}fn=fn.filter(nn=>nn!==null);let Bn="";fn.length>0&&(Bn=fn.join(" ")+" "),Bn+=mt.trim(),!Bn.includes("--v ")&&!Bn.includes("--niji ")&&(Bn=`${Bn} ${Te}`.trim()),re&&re!=="Auto"&&!Bn.includes("--ar ")&&(Bn=`${Bn} --ar ${re}`.trim()),Rn&&!Bn.includes("--oref ")&&(Bn=`${Bn} --oref ${Rn}`.trim()),(Tt=$==null?void 0:$.settings)!=null&&Tt.mjOw&&$.settings.mjOw>0&&!Bn.includes("--ow ")&&(Bn=`${Bn} --ow ${Math.min(1e3,Math.max(1,$.settings.mjOw))}`.trim()),Yt&&!Bn.includes("--sref ")&&(Bn=`${Bn} --sref ${Yt}`.trim()),we=`${se}/${ve}/mj/submit/imagine`,qe={prompt:Bn,base64Array:[]};const ed=await fetch(we,{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify(qe)}),$h=await ed.text();if(!ed.ok)throw new Error($h||`Midjourney API error: ${ed.status}`);let Na=JSON.parse($h);if(Na.code!==1&&Na.code!==22)throw new Error(Na.description||`Midjourney: code ${Na.code}`);const td=Na.result;if(!td)throw new Error("ID");ye(nn=>nn.map(Zr=>Zr.id===G?{...Zr,remoteTaskId:td,status:"generating",progress:5}:Zr)),Zl(td,G,se,Y,ve,Ne,Oe);return}else if(In)if(I.length>0){if(we=`${se}/v1/images/compositions`,!s||s.trim()==="")throw new Error("");let ve=re,Te="2k";if(re==="Auto"&&T)try{const gt=await Sr(T),Dt=(Yt,fn)=>fn===0?Yt:Dt(fn,Yt%fn),Rn=Dt(gt.w,gt.h);if(ve=`${gt.w/Rn}:${gt.h/Rn}`,ne==="Auto"){const Yt=Math.max(gt.w,gt.h);Te=Yt<=1024?"1k":Yt<=2048?"2k":"4k"}}catch{ve="1:1"}else ve=re==="Auto"?"1:1":re;ne!=="Auto"&&(Te=ne==="1K"?"1k":ne==="2K"?"2k":"4k");const mt=I.map(async gt=>{if(gt.startsWith("blob:"))try{console.log("  Blob URL...");const Dt=await fetch(gt);if(Dt.ok){const Rn=await Dt.blob();return await new Promise(Yt=>{const fn=new FileReader;fn.onloadend=()=>{console.log(" Blob URL "),Yt(fn.result)},fn.readAsDataURL(Rn)})}else throw new Error("Blob ")}catch(Dt){throw console.error(" Blob URL :",Dt),new Error("Blob URL")}if(gt.startsWith("http"))try{const Dt=await fetch(gt);if(!Dt.ok)throw new Error(`HTTP ${Dt.status}: URL`);const Rn=await Dt.blob();return await new Promise(Yt=>{const fn=new FileReader;fn.onloadend=()=>Yt(fn.result),fn.readAsDataURL(Rn)})}catch(Dt){throw new Error(`: ${Dt.message}`)}return gt}),He=await Promise.all(mt);qe={model:Fn(),prompt:s.trim(),images:He,ratio:ve,resolution:Te,response_format:"url"}}else{we=`${se}/v1/images/generations`;const ve=re==="Auto"?"1:1":re;let Te="2k";if(ne==="1K"?Te="1k":ne==="2K"?Te="2k":ne==="4K"&&(Te="4k"),!s||s.trim()==="")throw new Error("");qe={model:Fn(),prompt:s.trim(),ratio:ve,resolution:Te,response_format:"url"}}else qe={model:(Ve==null?void 0:Ve.modelName)||P,prompt:s,n:1,size:ke,response_format:"url"};const Q=async(ve,Te)=>{const mt=ht?{Authorization:`Bearer ${ve} `}:{Authorization:`Bearer ${ve} `,"Content-Type":"application/json"};let He;we.startsWith("http")?Te!==se&&we.includes(se)?He=we.replace(se,Te):He=we:He=`${Te.replace(/\/+$/,"")}${we.startsWith("/")?we:"/"+we} `;const At=ht?qe:JSON.stringify(qe);return console.log(`[API Request] Attempting with Key: ...${ve.slice(-4)} | URL: ${He} `),await fetch(He,{method:"POST",headers:mt,body:At})},de=C&&C.includes(",")?C.split(",").map(ve=>ve.trim()).filter(ve=>ve):[C||We],Ce=Z.includes(",")?Z.split(",").map(ve=>ve.trim()).filter(ve=>ve):[(Z||hr).replace(/\/+$/,"")],rt=ve=>{for(let Te=ve.length-1;Te>0;Te--){const mt=Math.floor(Math.random()*(Te+1));[ve[Te],ve[mt]]=[ve[mt],ve[Te]]}return ve};de.length>1&&rt(de),Ce.length>1&&rt(Ce);let fe,ce,Me,Be,Re=!1;const jt=Xt.current||{},Nt=[];for(const ve of de){if(jt[ve]){console.log(` [Blacklist] Skipping Key "...${ve.slice(-4)}" - Reason: ${jt[ve].reason}`);continue}for(const Te of Ce)Nt.push({key:ve,url:Te})}if(Nt.length===0&&de.length>0){console.warn("[Blacklist] All specified keys are blacklisted. Trying anyway with all available keys to avoid total failure.");for(const ve of de)for(const Te of Ce)Nt.push({key:ve,url:Te})}Nt.length>1&&rt(Nt);for(const ve of Nt)try{if(fe=await Q(ve.key,ve.url),fe.status===401||fe.status===402||fe.status===403){const mt=fe.status===402?" (402)":fe.status===401?" (401)":" (403)";console.warn(`[API Failover] Key ending in ...${ve.key.slice(-4)} failed with status ${fe.status}. Trying next...`),St(ve.key,mt),Be=new Error(`API returned ${fe.status}: ${mt}`);continue}Me=await fe.text();try{ce=JSON.parse(Me)}catch{}In&&ce&&console.log(`[DEBUG] Jimeng Response: code=${ce.code} (type: ${typeof ce.code}), message=${ce.message}`);let Te=ce==null?void 0:ce.code;if(ce!=null&&ce.message&&typeof ce.message=="string"){const mt=ce.message.match(/:\s*(\d+)/);mt&&(Te=parseInt(mt[1],10),console.log(`[DEBUG] Extracted real error code from message: ${Te}`))}if(In&&Te==1006){const mt=" (1006)";console.warn(` [API Failover] Key ending in ...${ve.key.slice(-4)} failed with Jimeng Code 1006. Adding to blacklist and trying next...`),St(ve.key,mt),Be=new Error(`Jimeng Error: ${ce.message||"Not enough credits"}`);continue}Re=!0;break}catch(Te){console.warn(`[API Failover] Network/Parse request failed for ...${ve.key.slice(-4)}. Error: ${Te.message}`),Be=Te}if(!Re||!fe&&!Me){const ve=Be?Be.message:"All API combinations failed.";throw new Error(ve)}if(!ce&&Me)try{ce=JSON.parse(Me)}catch{throw new Error(`: ${Me.substring(0,100)}`)}if(!fe.ok){let ve=(ce==null?void 0:ce.message)||((_t=ce==null?void 0:ce.error)==null?void 0:_t.message)||Me;throw vt&&fe.status===500&&(ve=`GPT - 4o (500): ${((Zt=ce==null?void 0:ce.error)==null?void 0:Zt.message)||(ce==null?void 0:ce.error)||(ce==null?void 0:ce.message)||Me} 


1.API Key 
2.(${(Ve==null?void 0:Ve.modelName)||"gpt-4o-image"}) 
3.
4.`,ye(mt=>mt.map(He=>He.id===G?{...He,status:"failed",progress:0,errorMsg:ve}:He))),new Error(ve)}if(In&&(ce==null?void 0:ce.code)!==void 0&&ce.code!==0&&ce.code!==1&&ce.code!==200)throw new Error(ce.message||`API: ${ce.code} `);if(Xe&&(ce!=null&&ce.task_id||typeof(ce==null?void 0:ce.data)=="string"&&ce.data.startsWith("task-"))){const ve=ce.task_id||ce.data;ye(Te=>Te.map(mt=>mt.id===G?{...mt,status:"generating",progress:10,remoteTaskId:ve}:mt)),Xl(G,ve,se,Y,Ne,Oe,dt,0,!0);return}let Ct=[];if(ce!=null&&ce.data&&Array.isArray(ce.data)?Ct=ce.data.map(ve=>ve.url||ve.image_url||ve).filter(ve=>typeof ve=="string"):(un=ce==null?void 0:ce.data)!=null&&un.data&&Array.isArray(ce.data.data)&&(Ct=ce.data.data.map(ve=>ve.url).filter(Boolean)),Ct.length===0)throw new Error("URL");const K=Ct[0],Je=Date.now()-Ue;ye(ve=>ve.map(mt=>{if(mt.id===G){const He={...mt,status:"completed",progress:100,url:K,width:Ne,height:Oe,durationMs:Je,mjImages:Ct.length>1?Ct:null,selectedMjImageIndex:0};return He.sourceNodeId&&setTimeout(()=>{Ks(G,K,"image",He.sourceNodeId,He.mjImages)},0),He}return mt}));return}if(u==="video"){const we=en.get(P);if(P.includes("veo")){const de=`${se} /v2/videos / generations`;let Ce=[];if(I&&I.length>0)Ce=await Promise.all(I.filter(Me=>Me&&typeof Me=="string"&&Me.trim().length>0).map(async Me=>{const Be=Me.trim();if(Be.startsWith("http://")||Be.startsWith("https://")){console.log("Veo: Processing HTTP URL for image");try{const Re=await Sr(Be);return Re.w>1920||Re.h>1920?(console.log(`Veo:  ${Re.w}x${Re.h} `),await Xu(Be,1920,1920)):Be}catch(Re){return console.warn("Veo: URL",Re),Be}}console.log("Veo: Processing image (data/blob/other format)");try{const Re=await Sr(Be);return Re.w>1920||Re.h>1920?(console.log(`Veo:  ${Re.w}x${Re.h} `),await Xu(Be,1920,1920)):Be.startsWith("data:")?Be:Be.startsWith("blob:")?`data: image / png; base64, ${await Yn(Be)} `:Be.length>100&&!Be.includes("://")&&!Be.startsWith("data:")?`data: image / png; base64, ${Be} `:`data: image / png; base64, ${await Yn(Be)} `}catch(Re){throw console.error("Veo: Failed to process image:",Re),new Error(`: ${Be.substring(0,50)}...`)}}));else if(T){const Me=T.trim();try{const Be=await Sr(Me);console.log(`Veo:  ${Be.w}x${Be.h} `),Be.w>1920||Be.h>1920?(console.log(`Veo:  ${Be.w}x${Be.h} ...`),Ce=[await Xu(Me,1920,1920)]):Me.startsWith("http://")||Me.startsWith("https://")?(console.log("Veo: Using HTTP URL for source image ()"),Ce=[Me]):Me.startsWith("data:")?(console.log("Veo: Using data URL for source image ()"),Ce=[Me]):Me.startsWith("blob:")?(console.log("Veo: Converting blob URL to base64 for source image"),Ce=[`data: image / png; base64, ${await Yn(Me)} `]):Me.length>100&&!Me.includes("://")&&!Me.startsWith("data:")?Ce=[`data: image / png; base64, ${Me} `]:Ce=[`data: image / png; base64, ${await Yn(Me)} `]}catch(Be){throw console.error("Veo: Failed to process source image:",Be),new Error(`: ${Be.message} `)}}if(Ce.length===0&&((I==null?void 0:I.length)>0||T))throw console.error("Veo: images ",{connectedImages:I,sourceImage:T}),new Error("");const rt=Ce.filter((Me,Be)=>!Me||typeof Me!="string"?(console.warn(`Veo:  ${Be}: `),!1):Me==="base64_data"||Me.trim()==="base64_data"?(console.warn(`Veo:  ${Be}: base64_data`),!1):!0);if(rt.length===0&&((I==null?void 0:I.length)>0||T))throw console.error("Veo: ",{images:Ce,connectedImages:I,sourceImage:T}),new Error("");let fe=null;if(re&&re!=="Auto")if(re==="16:9"||re==="9:16")fe=re;else{const Me=Ne/Oe;Math.abs(Me-16/9)<Math.abs(Me-9/16)?fe="16:9":fe="9:16"}const ce={model:(we==null?void 0:we.modelName)||"veo3.1",prompt:s,enhance_prompt:!1,images:rt.length>0?rt:[],...fe?{aspect_ratio:fe}:{}};console.log("Veo: ",{endpoint:de,model:ce.model,prompt:((dn=ce.prompt)==null?void 0:dn.substring(0,50))+"...",imagesCount:ce.images.length,firstImageType:ce.images[0]?ce.images[0].startsWith("http")?"HTTP URL":ce.images[0].startsWith("data:")?"Data URL":"Unknown":"empty",firstImagePreview:ce.images[0]?ce.images[0].startsWith("http")?ce.images[0].substring(0,80):ce.images[0].substring(0,100):"empty",aspect_ratio:ce.aspect_ratio,payloadSize:JSON.stringify(ce).length});try{console.log("Veo: ",de);const Me=await fetch(de,{method:"POST",headers:{Authorization:`Bearer ${Y} `,"Content-Type":"application/json"},body:JSON.stringify(ce)});console.log("Veo: ",{status:Me.status,statusText:Me.statusText});const Be=await Me.text();if(console.log("Veo: ",Be.substring(0,500)),!Me.ok)throw console.error("Veo: ",{status:Me.status,text:Be}),new Error(Be||`Veo error: ${Me.status} `);const Re=JSON.parse(Be);console.log("Veo: ",Re);const jt=((Xr=Re==null?void 0:Re.data)==null?void 0:Xr.id)||(Re==null?void 0:Re.id)||(Re==null?void 0:Re.task_id)||((mn=Re==null?void 0:Re.data)==null?void 0:mn.task_id);if(!jt)throw console.error("Veo:  JobId",Re),new Error("Veo No JobId");console.log("Veo:  JobId",jt),ye(Nt=>Nt.map(Ct=>Ct.id===G?{...Ct,status:"generating",progress:10}:Ct)),vi(jt,G,se,Y,Ne,Oe);return}catch(Me){throw console.error("Veo: ",Me),ye(Be=>Be.map(Re=>Re.id===G?{...Re,status:"failed",errorMsg:Me.message||""}:Re)),Me}}let qe="",ht;const Ve={Authorization:`Bearer ${Y} `},ut=(()=>{if(nt==null)return 8;const de=String(nt).trim().replace(/[^\d]/g,""),Ce=parseInt(de,10);return Number.isFinite(Ce)&&Ce>0?Ce:8})();if(P.includes("grok")){const de=`${se} /v2/videos / generations`,Ce=parseInt(nt,10),rt=re&&re!=="Auto"?re:"3:2",fe=ne&&ne!=="Auto"?ne:"1080P";console.log(`[Grok] Starting generation(JSON Mode).Duration: ${Ce||"N/A"} (type: ${typeof Ce}), ratio: ${rt}, resolution: ${fe} `);const ce={model:(we==null?void 0:we.modelName)||"grok-video-3",prompt:s,ratio:rt,resolution:fe};if(Number.isFinite(Ce)&&Ce>0&&(ce.duration=Ce),T)try{console.log("[Grok] Converting image to Base64...");let Nt="";if(T.startsWith("data:"))Nt=T;else{const Ct=await Ys(T);Nt=await new Promise((K,Qe)=>{const Je=new FileReader;Je.onloadend=()=>K(Je.result),Je.onerror=Qe,Je.readAsDataURL(Ct)})}ce.images=[Nt]}catch(Nt){console.error("Grok Image Conversion Failed:",Nt),alert("");return}const Me=await fetch(de,{method:"POST",headers:{Authorization:`Bearer ${Y} `,"Content-Type":"application/json"},body:JSON.stringify(ce)}),Be=await Me.text();if(!Me.ok)throw console.error("[Grok API Error]",Be),new Error(Be||`Grok API error: ${Me.status} `);let Re;try{Re=JSON.parse(Be)}catch{throw new Error("API  JSON ")}const jt=((Pn=Re==null?void 0:Re.data)==null?void 0:Pn.id)||(Re==null?void 0:Re.id)||(Re==null?void 0:Re.task_id);if(!jt)throw console.error("Grok No Task ID:",Re),new Error("API  Task ID");ye(Nt=>Nt.map(Ct=>Ct.id===G?{...Ct,status:"generating",progress:10,remoteTaskId:jt}:Ct)),Wi(jt,G,se,Y,Ne,Oe,P);return}if(T){const de=new FormData,Ce=await Ys(T);if(P.includes("sora")){qe=`${se} /v1/videos`;let rt=s.replace(/@\{([^\}]+)\}/g,(fe,ce)=>`@${ce} `);console.log("[Sora 2] Sending prompt with character references:",rt),de.append("model",(we==null?void 0:we.modelName)||"sora-2"),de.append("prompt",rt),de.append("seconds",nt),de.append("size",ke),P==="sora-2"&&(p.isHD||(Jt=$==null?void 0:$.settings)!=null&&Jt.isHD)&&de.append("quality","hd"),de.append("input_reference",Ce,"ref.png"),de.append("image",Ce,"ref.png")}else P.includes("jimeng")?(qe=`${se}/v1/videos/generations`,de.append("model",(we==null?void 0:we.modelName)||"jimeng-video-3.0"),de.append("prompt",s),de.append("duration",parseInt(nt)),de.append("ratio",re),de.append("image",Ce,"input.png"),ne&&ne!=="Auto"&&de.append("resolution",ne)):P.includes("grok")?(qe=`${se} /v1/videos`,de.append("model",(we==null?void 0:we.modelName)||"grok-video-3"),de.append("prompt",s),de.append("aspect_ratio",re),de.append("duration",ut),de.append("image",Ce,"input.png")):(qe=`${se} /v1/videos`,de.append("model",we==null?void 0:we.modelName),de.append("prompt",s),de.append("image",Ce,"input.png"),de.append("size",ke));ht=de}else if(Ve["Content-Type"]="application/json",P.includes("sora")){delete Ve["Content-Type"],qe=`${se} /v1/videos`;const de=new FormData;let Ce=s.replace(/@\{([^\}]+)\}/g,(rt,fe)=>`@${fe} `);console.log("[Sora 2] Sending prompt with character references:",Ce),de.append("model",(we==null?void 0:we.modelName)||"sora-2"),de.append("prompt",Ce),de.append("seconds",nt),de.append("size",ke),P==="sora-2"&&(p.isHD||(qt=$==null?void 0:$.settings)!=null&&qt.isHD)&&de.append("quality","hd"),ht=de}else P.includes("jimeng")?(qe=`${se}/v1/videos/generations`,ht=JSON.stringify({model:(we==null?void 0:we.modelName)||"jimeng-video-3.0",prompt:s,duration:parseInt(nt),ratio:re,resolution:ne==="Auto"?void 0:ne})):P.includes("grok")?(qe=`${se} /v1/videos`,ht=JSON.stringify({model:(we==null?void 0:we.modelName)||"grok-video-3",prompt:s,aspect_ratio:re,duration:ut})):(qe=`${se} /minimax/v1 / video_generation`,ht=JSON.stringify({model:we==null?void 0:we.modelName,prompt:s,resolution:ke}));const vt=await fetch(qe,{method:"POST",headers:ht instanceof FormData?{Authorization:Ve.Authorization}:Ve,body:ht}),Wt=await vt.text();if(!vt.ok)throw new Error(Wt||`Video API error: ${vt.status} `);const Xe=JSON.parse(Wt),kn=(Xe==null?void 0:Xe.code)||((an=Xe==null?void 0:Xe.data)==null?void 0:an.code),In=(Xe==null?void 0:Xe.message)||((Pt=Xe==null?void 0:Xe.data)==null?void 0:Pt.message)||"",Fn=kn===-2001&&In.includes("1006"),te=kn===-2001&&In.includes("34010105");if(kn===-2008||In.includes("2060")){let de=" ";throw In.includes(": 30")&&(de+="\\n\\n \\n \\n \\n \\n "),In.includes("2060")&&(de+="\\n\\n: 2060 ()"),new Error(de)}if(Fn||te){const de=Fn?" (1006)":" (34010105)";console.warn(` [Video API] Key ending in ...${Y.slice(-4)} failed: ${de}. Adding to blacklist.`),St(Y,de);const Ce=new Error(`RETRY_WITH_NEW_KEY: ${In}`);throw Ce.shouldRetry=!0,Ce}const ft=(Xe==null?void 0:Xe.video_url)||(Xe==null?void 0:Xe.url)||((tn=Xe==null?void 0:Xe.data)==null?void 0:tn.video_url)||((Nr=Xe==null?void 0:Xe.data)==null?void 0:Nr.url)||Array.isArray(Xe==null?void 0:Xe.data)&&((En=Xe.data[0])==null?void 0:En.url);if(ft){const de=Date.now(),Ce=ya.get(G),rt=Ce==null?void 0:Ce.sourceNodeId,fe=de-((Ce==null?void 0:Ce.startTime)||de);ye(ce=>{const Me=ce.map(Re=>Re.id===G?{...Re,status:"completed",progress:100,url:ft,width:Ne,height:Oe,durationMs:fe}:Re),Be=Rr.current.get(G);if(Be)console.log("[] :",{taskId:G,nodeId:Be.nodeId,shotId:Be.shotId,immediateUrl:ft}),on(Be.nodeId,Be.shotId,{video_url:ft,status:"done"}),Rr.current.delete(G);else{const Re=Me.find(jt=>jt.id===G);Re!=null&&Re.sourceNodeId?setTimeout(()=>{console.log("[Tapnow] : ",{taskId:G,immediateUrl:ft,sourceNodeId:Re.sourceNodeId}),Ks(G,ft,"video",Re.sourceNodeId)},0):console.warn("[Tapnow] :  sourceNodeId",{taskId:G,updatedItem:Re})}return Me});return}const Q=((L=Xe==null?void 0:Xe.data)==null?void 0:L.id)||(Xe==null?void 0:Xe.id)||(Xe==null?void 0:Xe.task_id)||((Se=Xe==null?void 0:Xe.data)==null?void 0:Se.task_id)||(Xe==null?void 0:Xe.job_id)||((xt=Xe==null?void 0:Xe.data)==null?void 0:xt.job_id);if(!Q)throw new Error(`No Task/Job ID returned. Response: ${JSON.stringify(Xe).substring(0,200)}`);ye(de=>de.map(Ce=>Ce.id===G?{...Ce,status:"generating",progress:10,remoteTaskId:Q}:Ce)),P.includes("veo")?vi(Q,G,se,Y,Ne,Oe):Wi(Q,G,se,Y,Ne,Oe,P)}}catch(we){if(we.shouldRetry)return console.log("[Video API] Retrying with new key after blacklist..."),Jl(s,u,f,h,{...p,_isRetry:!0,_existingTaskId:G});console.error("[CONSOLE_ERROR]",we);const qe=Date.now(),ht=q.find(vt=>vt.id===G),Ve=ht!=null&&ht.startTime?qe-ht.startTime:0;let ut=(we==null?void 0:we.message)||"";try{if(typeof ut=="string"&&ut.trim().startsWith("{")){const vt=JSON.parse(ut);(bn=vt==null?void 0:vt.error)!=null&&bn.message?ut=vt.error.message:vt!=null&&vt.error?ut=typeof vt.error=="string"?vt.error:JSON.stringify(vt.error):vt!=null&&vt.message&&(ut=vt.message)}(ut.includes("Cannot find module")||ut.includes("octetstream")||ut.includes("MODULE_NOT_FOUND"))&&(!ut.includes("API")&&!ut.includes("")?ut=` API

${ut.replace(/[:].*?[:]/g,"").trim()} 

 
1.jimeng - api.exe
2.Dockerdocker pull ghcr.io / iptag / jimeng - api: latest`:ut.includes("")||(ut=ut+`

 
1. jimeng-api.exe
2. Dockerdocker pull ghcr.io/iptag/jimeng-api:latest`))}catch{(ut.includes("Cannot find module")||ut.includes("octetstream")||ut.includes("MODULE_NOT_FOUND"))&&!ut.includes("API")&&!ut.includes("")&&(ut=` API

 
1.jimeng - api.exe
2.Dockerdocker pull ghcr.io / iptag / jimeng - api: latest`)}ye(vt=>vt.map(Wt=>Wt.id===G?{...Wt,status:"failed",errorMsg:ut,durationMs:Ve}:Wt))}},Uy=()=>{t(s=>s==="dark"?"light":"dark")},Fy=async()=>{const s=Yr.current,u=mi.current,f=ks.current,h=s.filter(p=>(u===p.id||f&&f.has(p.id))&&(p.type==="input-image"||p.type==="video-input"||p.type==="preview")&&p.content);if(h.length===0){alert("");return}for(const p of h)try{const m=p.content;if(!m||typeof m!="string"&&!m.startsWith("data:")){console.warn(` ${p.id} URL: `,m);continue}const S=await fetch(m);if(!S.ok)throw new Error(`HTTP ${S.status}: ${S.statusText} `);const I=await S.blob(),T=URL.createObjectURL(I),$=document.createElement("a");$.href=T;let M=".png";p.type==="preview"?p.previewType==="video"?M=".mp4":M=Gn(m)?".mp4":".png":p.type==="video-input"?M=".mp4":M=Gn(m)?".mp4":".png";const O=`${p.id}${M} `;$.download=O,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(T),await new Promise(P=>setTimeout(P,100))}catch(m){console.error(` ${p.id} : `,m)}},kh=()=>{const s=new Date;return new Date(s.getTime()+8*60*60*1e3).toISOString()},zh=()=>{const s=new Date,u=new Date(s.getTime()+8*60*60*1e3),f=u.getUTCFullYear(),h=String(u.getUTCMonth()+1).padStart(2,"0"),p=String(u.getUTCDate()).padStart(2,"0"),m=String(u.getUTCHours()).padStart(2,"0"),S=String(u.getUTCMinutes()).padStart(2,"0"),I=String(u.getUTCSeconds()).padStart(2,"0");return`${f} -${h} -${p}T${m} -${S} -${I} `},By=async()=>{try{if(!window.showSaveFilePicker){if(!confirm(`

/>500MB Chrome  Edge 

`))return;const T=(Ne,Oe)=>Oe===void 0?null:Oe,$=JSON.parse(JSON.stringify(n,T)),M=async Ne=>{if(Ne==null)return Ne;if(typeof Ne=="string"&&Ne.startsWith("blob:"))try{const Oe=await Ys(Ne);return await xh(Oe)}catch(Oe){return console.error(" Blob URL :",Oe),Ne}if(Array.isArray(Ne))return await Promise.all(Ne.map(Oe=>M(Oe)));if(typeof Ne=="object"){const Oe={};for(const nt in Ne)Ne.hasOwnProperty(nt)&&(Oe[nt]=await M(Ne[nt]));return Oe}return Ne},O=await M($),P=JSON.parse(JSON.stringify(Cn,T)),W=await M(P),C={version:"2.5.7",projectName:Vt,nodes:O,connections:i,view:v,history:q,chatSessions:Mt,characterLibrary:W,timestamp:kh()},Y=JSON.stringify(C,T,2),Z=new Blob([Y],{type:"application/json"}),se=URL.createObjectURL(Z),re=document.createElement("a");re.href=se;const ne=zh(),ke=`${Vt||""}_${ne}.json`;re.download=ke,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(se),alert("");return}const s=zh(),f=await(await window.showSaveFilePicker({suggestedName:`${Vt||""}_${s}.json`,types:[{description:"JSON File",accept:{"application/json":[".json"]}}]})).createWritable(),h=(I,T)=>T===void 0?null:T,p=async I=>{const T={...I};if(T.content&&typeof T.content=="string"&&T.content.startsWith("blob:"))try{const $=await Yn(T.content),M=Gn(T.content)?"video/mp4":"image/png";T.content=`data:${M}; base64, ${$} `}catch($){console.error(" content :",$)}if(T.maskContent&&typeof T.maskContent=="string"&&T.maskContent.startsWith("blob:"))try{const $=await Yn(T.maskContent);T.maskContent=`data: image / png; base64, ${$} `}catch($){console.error(" maskContent :",$)}if(Array.isArray(T.selectedKeyframes))for(let $=0;$<T.selectedKeyframes.length;$++){const M=T.selectedKeyframes[$];if(M&&M.url&&typeof M.url=="string"&&M.url.startsWith("blob:"))try{const O=await Yn(M.url);M.url=`data: image / png; base64, ${O} `}catch(O){console.error(":",O)}}if(Array.isArray(T.frames))for(let $=0;$<T.frames.length;$++){const M=T.frames[$];if(M&&M.url&&typeof M.url=="string"&&M.url.startsWith("blob:"))try{const O=await Yn(M.url);M.url=`data: image / png; base64, ${O} `}catch(O){console.error(":",O)}}if(Array.isArray(T.previewMjImages))for(let $=0;$<T.previewMjImages.length;$++){const M=T.previewMjImages[$];if(M&&typeof M=="string"&&M.startsWith("blob:"))try{const O=await Yn(M);T.previewMjImages[$]=`data:image/png;base64,${O}`}catch(O){console.error(" previewMjImages :",O)}}return T},m=async I=>{const T={...I};if(T.url&&typeof T.url=="string"&&T.url.startsWith("blob:"))try{const $=await Yn(T.url),M=T.type==="video"?"video/mp4":"image/png";T.url=`data:${M}; base64, ${$} `}catch($){console.error(" url :",$)}if(T.mjOriginalUrl&&typeof T.mjOriginalUrl=="string"&&T.mjOriginalUrl.startsWith("blob:"))try{const $=await Yn(T.mjOriginalUrl);T.mjOriginalUrl=`data: image / png; base64, ${$} `}catch($){console.error(" mjOriginalUrl :",$)}if(Array.isArray(T.mjImages))for(let $=0;$<T.mjImages.length;$++){const M=T.mjImages[$];if(M&&typeof M=="string"&&M.startsWith("blob:"))try{const O=await Yn(M);T.mjImages[$]=`data: image / png; base64, ${O} `}catch(O){console.error(" mjImages :",O)}}return T},S=async I=>{const T={...I};if(T.avatar&&typeof T.avatar=="string"&&T.avatar.startsWith("blob:"))try{const $=await Yn(T.avatar);T.avatar=`data: image / png; base64, ${$} `}catch($){console.error(" avatar :",$)}if(T.profile_picture_url&&typeof T.profile_picture_url=="string"&&T.profile_picture_url.startsWith("blob:"))try{const $=await Yn(T.profile_picture_url);T.profile_picture_url=`data: image / png; base64, ${$} `}catch($){console.error(" profile_picture_url :",$)}return T};await f.write(`{
    
  "version": "2.5.7", 
  "projectName": ${JSON.stringify(Vt||"")}, 
  "nodes": [
`);for(let I=0;I<n.length;I++){const T=n[I],$=await p(T),M=JSON.stringify($,h,2),O=I===0?M.split(`
`).join(`
    `):"    "+M.split(`
`).join(`
    `);await f.write(O),I<n.length-1?await f.write(`,
`):await f.write(`
`)}await f.write(`  ], 
  "connections": ${JSON.stringify(i,h,2)}, 
  "view": ${JSON.stringify(v,h,2)}, 
  "history": [
`);for(let I=0;I<q.length;I++){const T=q[I],$=await m(T),M=JSON.stringify($,h,2),O=I===0?M.split(`
`).join(`
    `):"    "+M.split(`
`).join(`
    `);await f.write(O),I<q.length-1?await f.write(`,
`):await f.write(`
`)}await f.write(`  ], 
  "chatSessions": ${JSON.stringify(Mt,h,2)}, 
  "characterLibrary": [
`);for(let I=0;I<Cn.length;I++){const T=Cn[I],$=await S(T),M=JSON.stringify($,h,2),O=I===0?M.split(`
`).join(`
    `):"    "+M.split(`
`).join(`
    `);await f.write(O),I<Cn.length-1?await f.write(`,
`):await f.write(`
`)}await f.write(`  ], 
  "timestamp": ${JSON.stringify(kh())} 

} `),await f.close(),alert("")}catch(s){if(console.error(":",s),s.name==="AbortError")return;alert(": "+(s.message||""))}},Hy=()=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async u=>{const f=u.target.files[0];if(!f)return;U({visible:!0,progress:0,status:"INITIALIZING...",type:"import"});const h={nodes:[],history:[],connections:[],chatSessions:[],characterLibrary:[],projectName:"",view:null};let p=null,m="",S="",I=0,T=!1,$=0;const M=f.size,O=async P=>{const W=[P];for(;W.length>0;){const C=W.pop();if(!(!C||typeof C!="object"))for(const Y in C){const Z=C[Y];if(typeof Z=="string"&&Z.startsWith("data:image/"))try{const re=await(await fetch(Z)).blob();C[Y]=URL.createObjectURL(re)}catch{}else typeof Z=="object"&&Z!==null&&W.push(Z)}}return P};try{const W=f.stream().pipeThrough(new TextDecoderStream).getReader();for(;;){const{value:C,done:Y}=await W.read();if(Y)break;if($+=C.length,Math.random()>.95){const Z=Math.min(99,$/M*100);U(se=>({...se,progress:Z,status:`PROCESSING ${($/1024/1024).toFixed(0)} MB`}))}for(m+=C;;){const Z=m.indexOf(`
`);if(Z===-1)break;const se=m.substring(0,Z);m=m.substring(Z+1);const re=se.trim();if(re){if(re.includes('"nodes": [')){p="nodes";continue}if(re.includes('"history": [')){p="history";continue}if(re.includes('"connections": [')){p="connections";continue}if(re.includes('"chatSessions": [')){p="chatSessions";continue}if(re.includes('"characterLibrary": [')){p="characterLibrary";continue}if((re==="],"||re==="]")&&I===0){p=null,S="",T=!1;continue}if(!p){if(re.startsWith('"projectName":'))try{const ne=re.match(/"projectName":\s*(.+)/);ne&&(h.projectName=JSON.parse(ne[1].replace(/,$/,"")))}catch{}if(re.startsWith('"view":'))try{const ne=re.match(/"view":\s*(.+)/);ne&&ne[1].endsWith("}")&&(h.view=JSON.parse(ne[1].replace(/,$/,"")))}catch{}continue}if(p){for(let ne of se)ne==="{"&&(I++,T=!0),ne==="}"&&I--;if(S+=se+`
`,T&&I===0){let ne=S.trim();ne.endsWith(",")&&(ne=ne.slice(0,-1));try{const ke=JSON.parse(ne);(p==="nodes"||p==="history"||p==="characterLibrary")&&await O(ke),p==="nodes"&&ke.id?(ke.settings||(ke.settings={}),h.nodes.push(ke)):p==="history"?h.history.push(ke):p==="connections"?h.connections.push(ke):p==="chatSessions"?h.chatSessions.push(ke):p==="characterLibrary"&&h.characterLibrary.push(ke)}catch{}S="",T=!1}}}}}U(C=>({...C,progress:100,status:"FINALIZING..."})),setTimeout(()=>{Jn(h.projectName||""),h.view&&ge(h.view),h.connections.length>0&&a(h.connections),h.chatSessions.length>0&&qn(h.chatSessions),h.characterLibrary.length>0&&Lu(h.characterLibrary),h.nodes.length>0&&r(h.nodes),h.history.length>0&&ye(h.history),U(C=>({...C,visible:!1})),alert(`
${h.nodes.length} `)},200)}catch(P){console.error(":",P),U(W=>({...W,visible:!1})),alert(`: ${P.message} `)}},s.click()},ds=(s,u,f,h,p=void 0,m=void 0,S=void 0,I=void 0)=>{me();const T=s==="gen-video"?{w:380,h:420}:s==="gen-image"?{w:440,h:340}:s==="video-input"?{w:580,h:460}:s==="video-analyze"?{w:480,h:500}:s==="storyboard-node"?{w:720,h:500}:s==="image-compare"?{w:400,h:300}:s==="preview"?{w:320,h:260}:s==="text-node"?{w:280,h:200}:{w:260,h:260},$={id:`node - ${Date.now()} `,type:s,x:u-T.w/2,y:f-T.h/2,width:T.w,height:T.h,content:p,...m?{dimensions:m}:{},settings:s==="gen-image"?{model:my,ratio:nh,resolution:xy,prompt:""}:s==="gen-video"?{model:eh,duration:"5s",ratio:nh,resolution:vy,videoPrompt:""}:s==="video-analyze"?{model:zy,segmentDuration:parseInt(wy),analysisMode:"manual",voiceoverResults:[],analysisResults:[]}:s==="storyboard-node"?{projectTitle:"",shots:[]}:s==="text-node"?{text:p||""}:{}};r(M=>[...M,$]),h&&a(M=>[...M,{id:`conn - ${Date.now()} `,from:h,to:$.id}]),S&&a(M=>I&&I!=="default"?[...M.filter(P=>!(P.to===S&&(P.inputType||"default")===I)),{id:`conn - ${Date.now()} `,from:$.id,to:S,inputType:I!=="default"?I:void 0}]:[...M,{id:`conn - ${Date.now()} `,from:$.id,to:S}]),ho(M=>({...M,visible:!1})),$e(null),Ut(null),Kt(null)},Wy=B.useCallback(s=>{const u=[];for(const f of i)if(f.from===s){const h=Ft.get(f.to);h&&(h.type==="gen-image"||h.type==="gen-video")&&u.push(h)}return u},[i,Ft]),za=s=>s?s==="sora-2-pro"||s.includes("sora-2")||s==="sora-2"?"15s":s.includes("veo")||s==="google-veo3"||s.includes("grok")||s==="grok-3"?"8s":"5s":"5s",Ju=s=>s?s==="sora-2-pro"?["15s","25s"]:s.includes("sora-2")||s==="sora-2"?["5s","10s","15s"]:s.includes("veo")||s==="google-veo3"?["8s"]:s.includes("grok")||s==="grok-3"?["8s","5s"]:s.includes("jimeng")?["5s","10s"]:["5s","10s"]:["5s","10s"],Vy=s=>{var p,m,S,I;const u=Ft.get(s);if(!u||u.type!=="storyboard-node")return;const f=eh||((p=ae.find(T=>T.type==="Video"))==null?void 0:p.id)||"",h={id:`shot - ${Date.now()} `,scene_index:(((S=(m=u.settings)==null?void 0:m.shots)==null?void 0:S.length)||0)+1,time_range:"",image_url:"",description:"",prompt:"",camera:"",tags:[],status:"draft",model:f,ratio:"16:9",duration:za(f)};kt(s,{shots:[...((I=u.settings)==null?void 0:I.shots)||[],h]})},Ky=(s,u)=>{var p;const f=Ft.get(s);if(!f||f.type!=="storyboard-node")return;const h=(((p=f.settings)==null?void 0:p.shots)||[]).filter(m=>m.id!==u);h.forEach((m,S)=>{m.scene_index=S+1}),kt(s,{shots:h})},on=(s,u,f)=>{var m;const h=Ft.get(s);if(!h||h.type!=="storyboard-node")return;const p=(((m=h.settings)==null?void 0:m.shots)||[]).map(S=>S.id===u?{...S,...f}:S);kt(s,{shots:p})},Yy=(s,u)=>{const f=Ft.get(s);if(!f||!u||u.length===0){console.warn("[] ");return}const h=u.map((T,$)=>{var Z,se,re,ne,ke,Ne,Oe,nt,G,pe;const M=((Z=T.keyframes)==null?void 0:Z.find(Ue=>Ue.type==="current"))||((se=T.keyframes)==null?void 0:se[0]),O=(M==null?void 0:M.mj_prompt)||"",P=(M==null?void 0:M.jimeng_prompt)||"",W=(M==null?void 0:M.description)||((ne=(re=T.keyframes)==null?void 0:re[0])==null?void 0:ne.description)||"",C=[];(Ne=(ke=T.global_tags)==null?void 0:ke.style)!=null&&Ne[0]&&C.push(T.global_tags.style[0]),(nt=(Oe=T.global_tags)==null?void 0:Oe.camera)!=null&&nt[0]&&C.push(T.global_tags.camera[0]),M!=null&&M.description&&["","","","","","","","Dolly","Pan","Tilt","Zoom"].forEach(dt=>{W.includes(dt)&&C.push(dt)});const Y=((pe=(G=T.global_tags)==null?void 0:G.camera)==null?void 0:pe[0])||C.find(Ue=>["","","","","","Dolly","Pan","Tilt","Zoom"].some(dt=>Ue.includes(dt)))||"";return{id:`shot - ${Date.now()} -${$} `,scene_index:$+1,time_range:T.time_range||"",image_url:"",description:W,prompt:O||P,camera:Y,tags:C,status:"draft"}}),p=f.x+f.width+100,m=f.y,S=`node - storyboard - ${Date.now()} `,I={id:S,type:"storyboard-node",x:p,y:m,width:600,height:500,settings:{projectTitle:"AI ",shots:h}};r(T=>[...T,I]),a(T=>[...T,{id:`conn - ${Date.now()} `,from:s,to:S}]),console.log("[] ",h.length,"")},Rr=B.useRef(new Map);B.useRef(null);const jh=async(s,u,f,h=null,p=null)=>{var m;try{const S=ae.find(C=>C.type==="Video"&&(C.id==="sora-2"||C.id==="sora-2-pro"));if(!S){alert(" Sora 2  Sora 2  Sora 2 Pro"),wo(!1);return}const T=xi(S.id).key;if(!T){alert(" API Key"),wo(!1);return}if(f-u<1||f-u>3){alert(" 1-3 "),wo(!1);return}const $=`${u},${f} `;let M;p&&p.trim()?M=p.trim():M=`${(S.url||hr).replace(/\/+$/,"")} /sora/v1 / characters`;const O=h?{from_task:h,timestamps:$}:{url:s,timestamps:$};console.log("[Create Character] Request Details:",{endpoint:M,apiKey:T?`${T.substring(0,8)}...${T.substring(T.length-4)} `:"EMPTY",payload:O,fromTaskId:h,videoUrl:h?"N/A (using from_task)":s,customEndpoint:p||"N/A (using default)"});const P=await fetch(M,{method:"POST",headers:{Authorization:`Bearer ${T} `,"Content-Type":"application/json"},body:JSON.stringify(O)});if(!P.ok){const C=await P.text();console.error("[Create Character] API Error:",{status:P.status,statusText:P.statusText,errorText:C,endpoint:M});let Y=null;try{Y=JSON.parse(C)}catch{}throw P.status===500||Y&&(Y.code==="get_origin_task_failed"||(m=Y.message)!=null&&m.includes("get_origin_task_failed"))?new Error("TASK_NOT_FOUND"):new Error(`API(${P.status}): ${C||P.statusText} `)}const W=await P.json();if(console.log("[Create Character] Success:",W),W.id&&W.username){const C={id:W.id,username:W.username,profile_picture_url:W.profile_picture_url||"",permalink:W.permalink||""},Y=[...Cn,C];Lu(Y),alert(` "${W.username}" `),la(!1),Al("url"),Pl(""),Rl(""),Kp(1),Yp(3),ca("")}else throw new Error(" id  username")}catch(S){console.error("[Create Character] Failed:",S);let I=S.message;if(I==="TASK_NOT_FOUND"){alert(`

" URL"`);return}(I.includes("Failed to fetch")||S.name==="TypeError"||S.message.includes("NetworkError"))&&(I=`

1. API 
   -  API  "/sora" 
   -  Sora 

2.  (CORS)
   -  Allow CORS 

3. 
   - `),alert(`: ${I} `)}finally{wo(!1)}},_h=(s,u)=>{var O,P;let f=u.prompt||"";if(!f&&u.description&&(f=u.description),u.tags&&u.tags.length>0){const W=u.tags.join(", ");f+=`, ${W} `}if(u.camera&&(f+=`, ${u.camera} camera movement`),!f){alert("");return}const h=u.model||((O=ae.find(W=>W.type==="Video"&&W.id==="sora-2"))==null?void 0:O.id)||((P=ae.find(W=>W.type==="Video"))==null?void 0:P.id)||"",p=en.get(h);if(!p||p.type!=="Video"){alert("");return}const m=[];u.image_url&&m.push(u.image_url),on(s,u.id,{status:"generating"});let S=u.duration||za(h);const I=Ju(h);I.includes(S)||(console.warn(`[V3.5.5] Duration "${S}" not valid for model "${h}", using "${I[0]}"`),S=I[0]);const T=String(S).endsWith("s")?S:`${S}s`,$={model:h,ratio:u.ratio||"16:9",duration:T,resolution:u.resolution||"720p"};console.log("[V3.5.5 Debug] generateSingleShot overrideOptions:",$);const M=`storyboard-${s}-shot-${u.id}`;Jl(f,"video",m,M,$)},Gy=async s=>{var T,$,M,O,P,W;const u=Ft.get(s);if(!u)return;let f=((T=u.settings)==null?void 0:T.content)||"";if(!f){const C=i.find(Y=>Y.to===s);if(C){const Y=Ft.get(C.from);Y&&(Y.type==="novel-input"||Y.type==="text-node")&&(f=(($=Y.settings)==null?void 0:$.content)||Y.content||"")}}if(!f||f.trim().length===0){alert("");return}const h=(M=u.settings)==null?void 0:M.model;if(!h){alert("");return}const p=en.get(h);if(!p){alert("");return}const S=xi(h).key;if(!S){alert(" API Key"),hi(!0);return}kt(s,{isAnalyzing:!0});const I=`


${f.substring(0,15e3)} ... ()

 JSON 
{
    "characters": [
        { "name": "", "description": "", "appearance": "" }
    ],
    "scenes": [
        { "location": "", "description": "", "mood": "" }
    ]
}
 JSONmarkdown`;try{const C=((p==null?void 0:p.url)||hr).replace(/\/+$/,""),Y=await fetch(`${C}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({model:p.modelName||"gemini-1.5-pro-latest",messages:[{role:"system",content:"You are a helpful assistant that analyzes novels."},{role:"user",content:I}],temperature:.7})});if(!Y.ok)throw new Error(`API Error: ${Y.status}`);const Z=await Y.json(),se=((W=(P=(O=Z.choices)==null?void 0:O[0])==null?void 0:P.message)==null?void 0:W.content)||Z.content||"";let re=null;try{const Ne=se.replace(/```json/g,"").replace(/```/g,"").trim();re=JSON.parse(Ne)}catch(Ne){console.warn("JSON Parse Error, using raw text",Ne)}const ne=u.x+u.width+50;let ke=u.y;if(re){if(re.characters&&re.characters.length>0){const Ne=re.characters.map(Oe=>`**${Oe.name}**
${Oe.description}
Appearance: ${Oe.appearance}`).join(`

`);ds("text-node",ne,ke,null,Ne),ke+=200}if(re.scenes&&re.scenes.length>0){const Ne=re.scenes.map(Oe=>`**${Oe.location}**
${Oe.description}
Mood: ${Oe.mood}`).join(`

`);ds("text-node",ne,ke,null,Ne)}}else ds("text-node",ne,ke,null,se)}catch(C){console.error("Extraction Failed",C),alert(`: ${C.message}`)}finally{kt(s,{isAnalyzing:!1})}},Nh=(s,u)=>{var h;const f=(h=u.target.files)==null?void 0:h[0];if(f){const p=new FileReader;p.onload=async m=>{const S=m.target.result;let I={w:0,h:0};try{I=await Sr(S)}catch{}me(),r(T=>T.map($=>$.id===s?{...$,content:S,dimensions:I}:$))},p.readAsDataURL(f)}},Xy=(s,u)=>{if(!s||s.length===0)return[];const f=[...s].sort((S,I)=>S.time-I.time),h=[];let p=[],m=f[0].time;return f.forEach((S,I)=>{S.time-m>=u&&p.length>0?(h.push([...p]),p=[S],m=S.time):p.push(S)}),p.length>0&&h.push(p),h},Zy=async s=>{var W,C,Y,Z,se,re,ne,ke,Ne,Oe,nt,G,pe,Ue,dt;const u=Ft.get(s);if(!u||u.type!=="video-analyze")return;const f=wa(s);if(!f){alert("");return}const h=f.selectedKeyframes||[];if(h.length===0){alert("");return}const p=((W=u.settings)==null?void 0:W.model)||"gemini-3-pro",{key:m,url:S}=xi(p),I=ae.find(et=>et.id===p);if(!m){alert(" API  Key"),hi(!0);return}const T=((C=u.settings)==null?void 0:C.segmentDuration)||3,$=Xy(h,T);if($.length===0){alert("");return}r(et=>et.map(ct=>ct.id===s?{...ct,isGenerating:!0,analysisResults:[]}:ct));const M=[],O=f.videoFileName||"video.mp4";(Y=f.videoMeta)!=null&&Y.duration;const P=((Z=u.settings)==null?void 0:Z.analysisMode)||"manual";try{for(let et=0;et<$.length;et++){const ct=$[et],Ke=`${ct[0].time.toFixed(1)}s-${ct[ct.length-1].time.toFixed(1)}s`,it=`AI

 JSON 
{
  "video_id": "${O}",
  "scene_index": ${et+1},
  "time_range": "${Ke}",
  "keyframes": [
    {
      "type": "prev",
      "time": 5.2,
      "description": "",
      "mj_prompt": "Midjourney ",
      "jimeng_prompt": ""
    },
    {
      "type": "current",
      "time": 6.8,
      "description": "",
      "mj_prompt": "Midjourney ",
      "jimeng_prompt": ""
    },
    {
      "type": "next",
      "time": 8.7,
      "description": "",
      "mj_prompt": "Midjourney ",
      "jimeng_prompt": ""
    }
  ],
  "global_tags": {
    "style": ["", ""],
    "camera": ["", ""],
    "color": [""]
  }
}


1.  prev/current/next 
2. mj_prompt  Midjourney
3. jimeng_prompt AI
4. global_tags `,wt=[{type:"text",text:` ${et+1}${Ke}`}],at=15,It=ct.length>at?ct.slice(0,at):ct;It.forEach((mn,Pn)=>{wt.push({type:"image_url",image_url:{url:mn.url}}),Pn<It.length-1&&wt.push({type:"text",text:` ${Pn+1}${mn.time.toFixed(2)}s`})}),ct.length>at&&wt.push({type:"text",text:` ${ct.length} API ${at} `});const Rt=[{role:"system",content:it},{role:"user",content:wt}],zt=new AbortController,$t=setTimeout(()=>zt.abort(),6e4);let Tt;try{Tt=await fetch(`${S}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({model:(I==null?void 0:I.modelName)||"gemini-3-pro-preview",messages:Rt,stream:!1}),signal:zt.signal})}catch(mn){throw clearTimeout($t),mn.name==="AbortError"?new Error(""):mn.message&&mn.message.includes("Failed to fetch")?new Error(` API  (${S})
1. API 
2. 
3. API `):new Error(`: ${mn.message}`)}finally{clearTimeout($t)}if(!Tt.ok){let mn="";try{mn=await Tt.text()}catch{mn=`HTTP ${Tt.status}: ${Tt.statusText}`}throw new Error(mn||`API Error: ${Tt.status}`)}const _t=await Tt.json();console.log("[] API :",{hasData:!!_t,hasChoices:!!_t.choices,choicesLength:(se=_t.choices)==null?void 0:se.length,dataKeys:Object.keys(_t||{}),model:(I==null?void 0:I.modelName)||(I==null?void 0:I.id)});let Zt=null;if(_t.choices&&_t.choices.length>0?Zt=(ne=(re=_t.choices[0])==null?void 0:re.message)==null?void 0:ne.content:(ke=_t.data)!=null&&ke.choices&&_t.data.choices.length>0?Zt=(Oe=(Ne=_t.data.choices[0])==null?void 0:Ne.message)==null?void 0:Oe.content:_t.content?Zt=_t.content:(nt=_t.data)!=null&&nt.content?Zt=_t.data.content:_t.text?Zt=_t.text:(G=_t.data)!=null&&G.text?Zt=_t.data.text:_t.message?Zt=typeof _t.message=="string"?_t.message:_t.message.content:(pe=_t.data)!=null&&pe.message?Zt=typeof _t.data.message=="string"?_t.data.message:_t.data.message.content:_t.result?Zt=typeof _t.result=="string"?_t.result:_t.result.content:(Ue=_t.data)!=null&&Ue.result&&(Zt=typeof _t.data.result=="string"?_t.data.result:_t.data.result.content),!Zt||Zt.trim()===""||Zt==="{}")throw console.error("[] API :",_t),new Error(`API : ${JSON.stringify(_t).substring(0,200)}`);console.log("[] :",Zt.length,"100:",Zt.substring(0,100));let un=Zt.trim();un.startsWith("```")&&(un=un.replace(/^```(?:json)?\n?/,"").replace(/\n?```$/,""));let dn;try{dn=JSON.parse(un),console.log("[] JSON :",dn.scene_index||et+1)}catch(mn){console.error("[]  JSON :",mn,"500:",un.substring(0,500));try{un=un.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,""),un=un.replace(/,(\s*[}\]])/g,"$1"),dn=JSON.parse(un),console.log("[] JSON ")}catch(Pn){console.error("[] JSON:",Pn,":",un),dn={video_id:O,scene_index:et+1,time_range:Ke,keyframes:ct.map((Jt,qt)=>({type:qt===0?"prev":qt===1?"current":"next",time:Jt.time,description:` ${Jt.time.toFixed(1)}s`,mj_prompt:"A detailed scene from the video",jimeng_prompt:""})),global_tags:{style:[],camera:[],color:[]}},console.warn("[] :",un.substring(0,200))}}if(M.push(dn),console.log("[] :",M.length),r(mn=>mn.map(Pn=>{if(Pn.id===s){const qt=[...Pn.analysisResults||[],dn];return console.log("[] :",qt.length),{...Pn,analysisResults:qt}}return Pn})),!(P==="manual")){const Pn={id:`analyze-${s}-${et}-${Date.now()}`,type:"analyze",prompt:` -  ${et+1}`,url:((dt=ct[0])==null?void 0:dt.url)||"",status:"completed",progress:100,modelName:(I==null?void 0:I.provider)||"Gemini 3 Pro",time:new Date().toLocaleString("zh-CN"),sourceNodeId:s,analysisResult:dn,videoFileName:O,sceneIndex:et+1,timeRange:Ke};ye(Jt=>[Pn,...Jt])}}console.log("[] :",M.length),r(et=>et.map(ct=>{if(ct.id===s){const Ke=M.length>0?M:ct.analysisResults||[];return console.log("[] :",Ke.length),{...ct,isGenerating:!1,analysisResults:Ke}}return ct}))}catch(et){console.error(":",et);const ct=et.message||"";r(Ke=>Ke.map(it=>it.id===s?{...it,isGenerating:!1,errorMsg:ct}:it))}},Jy=async s=>{var I,T,$,M,O,P,W,C,Y,Z,se;const u=Ft.get(s);if(!u||u.type!=="video-analyze")return;const f=wa(s);if(!f||!f.content){alert("");return}let h=f.content;if(h.startsWith("blob:"))try{console.log("Converting Blob URL to Base64 for API...");const re=await fetch(h).then(ne=>ne.blob());h=await new Promise((ne,ke)=>{const Ne=new FileReader;Ne.onerror=()=>ke(new Error("FileReader failed")),Ne.onloadend=()=>ne(Ne.result),Ne.readAsDataURL(re)})}catch(re){console.error("Blob conversion failed",re),alert(" AI");return}let p=ae.find(re=>re.id==="gemini-3-pro"&&re.type==="Chat");p||(p=ae.find(re=>{var ke;return(((ke=re.id)==null?void 0:ke.toLowerCase())||"").includes("gemini")&&re.type==="Chat"})),p||(p=ae.find(re=>re.type==="Chat"));const{key:m,url:S}=xi((p==null?void 0:p.id)||"gemini-3-pro");if(!m){alert(" API  Key"),hi(!0);return}r(re=>re.map(ne=>ne.id===s?{...ne,isGenerating:!0,settings:{...ne.settings,voiceoverResults:[],analysisResults:[]}}:ne));try{const ke=[{role:"system",content:`******AI**

1. ****

2. ****Voiceover

 **JSON **Markdown

{
  "voiceover_script": [
    { "time_range": "0s-3s", "text": "..." }
  ],
  "scenes": [
    {
      "scene_id": 1,
      "time_range": "0s-2.5s",
      "visual_analysis": {
        "camera_movement": "(Dolly Zoom Out) (Orbit)",
        "subject_dynamics": "",
        "atmosphere": ""
      },
      "prompts": {
        "jimeng_prompt": "()+++()...",
        "mj_prompt": "Midjourney Prompt: English description, include camera directives like 'dynamic angle', 'fast zoom out', 'cinematic lighting'..."
      }
    }
  ]
}

****
- ****
- ****""
- ****`},{role:"user",content:[{type:"text",text:"JSON"},{type:"image_url",image_url:{url:h}}]}],Ne=new AbortController,Oe=setTimeout(()=>Ne.abort(),12e4);let nt;try{nt=await fetch(`${S}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({model:(p==null?void 0:p.modelName)||"gemini-3-pro-preview",messages:ke,stream:!1}),signal:Ne.signal})}catch(Ke){throw clearTimeout(Oe),Ke.name==="AbortError"?new Error("120"):Ke.message&&Ke.message.includes("Failed to fetch")?new Error(` API  (${S})
1. API 
2. 
3. API 
4.  API Key`):new Error(`: ${Ke.message}`)}finally{clearTimeout(Oe)}if(!nt.ok){let Ke="";try{Ke=await nt.text()}catch{Ke=`HTTP ${nt.status}: ${nt.statusText}`}throw new Error(Ke||`API Error: ${nt.status}`)}const G=await nt.json();console.log("[AI] API :",{hasData:!!G,hasChoices:!!G.choices,choicesLength:(I=G.choices)==null?void 0:I.length,dataKeys:Object.keys(G||{}),model:(p==null?void 0:p.modelName)||(p==null?void 0:p.id)});let pe=null;if(G.choices&&G.choices.length>0?pe=($=(T=G.choices[0])==null?void 0:T.message)==null?void 0:$.content:(M=G.data)!=null&&M.choices&&G.data.choices.length>0?pe=(P=(O=G.data.choices[0])==null?void 0:O.message)==null?void 0:P.content:G.content?pe=G.content:(W=G.data)!=null&&W.content?pe=G.data.content:G.text?pe=G.text:(C=G.data)!=null&&C.text?pe=G.data.text:G.message?pe=typeof G.message=="string"?G.message:G.message.content:(Y=G.data)!=null&&Y.message?pe=typeof G.data.message=="string"?G.data.message:G.data.message.content:G.result?pe=typeof G.result=="string"?G.result:G.result.content:(Z=G.data)!=null&&Z.result&&(pe=typeof G.data.result=="string"?G.data.result:G.data.result.content),!pe||pe.trim()===""||pe==="{}")throw console.error("[AI] API :",G),new Error(`API : ${JSON.stringify(G).substring(0,200)}`);console.log("[AI] :",pe.length,"100:",pe.substring(0,100));let Ue=pe.trim();Ue.startsWith("```")&&(Ue=Ue.replace(/^```(?:json)?\n?/,"").replace(/\n?```$/,""));let dt;try{dt=JSON.parse(Ue),console.log("[AI] JSON :",((se=dt.scenes)==null?void 0:se.length)||0)}catch(Ke){console.error("[AI]  JSON :",Ke,"500:",Ue.substring(0,500));try{Ue=Ue.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,""),Ue=Ue.replace(/,(\s*[}\]])/g,"$1"),dt=JSON.parse(Ue),console.log("[AI] JSON ")}catch(it){throw console.error("[AI] JSON:",it,":",Ue.substring(0,500)),new Error(` JSON : ${Ue.substring(0,200)}`)}}const et=(dt.voiceover_script||[]).map((Ke,it)=>({time:it,text:Ke.text||""}));console.log("[AI] :",et.length);const ct=(dt.scenes||[]).map((Ke,it)=>{var wt,at,It,Rt,zt,$t;return{scene_index:Ke.scene_id||it+1,time_range:Ke.time_range||"",keyframes:[{type:"current",time:0,description:`${((wt=Ke.visual_analysis)==null?void 0:wt.camera_movement)||""} ${((at=Ke.visual_analysis)==null?void 0:at.subject_dynamics)||""}`.trim(),mj_prompt:((It=Ke.prompts)==null?void 0:It.mj_prompt)||"",jimeng_prompt:((Rt=Ke.prompts)==null?void 0:Rt.jimeng_prompt)||""}],global_tags:{style:(zt=Ke.visual_analysis)!=null&&zt.atmosphere?[Ke.visual_analysis.atmosphere]:[],camera:($t=Ke.visual_analysis)!=null&&$t.camera_movement?[Ke.visual_analysis.camera_movement]:[],color:[]}}});console.log("[AI] :",ct.length),r(Ke=>Ke.map(it=>it.id===s?(console.log("[AI] :",ct.length,":",et.length),{...it,isGenerating:!1,settings:{...it.settings,voiceoverResults:et,analysisResults:ct}}):it)),ct.length>0&&setTimeout(()=>{Yy(s,ct)},100)}catch(re){console.error("AI:",re);const ne=re.message||"AI";r(ke=>ke.map(Ne=>Ne.id===s?{...Ne,isGenerating:!1,errorMsg:ne}:Ne))}},qy=()=>{const s=uo.name.trim(),u=uo.prompt.trim();if(!s||!u){alert("");return}ra(f=>[{id:`custom-${Date.now()}`,name:s,prompt:u},...f]),zr({name:"",prompt:""})},Qy=s=>{ra(u=>u.filter(f=>f.id!==s))},e1=(s,u)=>{!s||!u||kt(s,{prompt:u})},t1=async s=>new Promise((u,f)=>{const h=new Image;h.crossOrigin="anonymous";const p=setTimeout(()=>{f(new Error(""))},3e4);h.onload=()=>{clearTimeout(p);try{const S=document.createElement("canvas").getContext("2d"),I=Math.floor(h.width/3),T=Math.floor(h.height/3),$=[],M=[];for(let O=0;O<3;O++)for(let P=0;P<3;P++){const W=Math.max(0,Math.min(P*I,h.width-I)),C=Math.max(0,Math.min(O*T,h.height-T)),Y=Math.min(I,h.width-W),Z=Math.min(T,h.height-C),se=document.createElement("canvas");se.width=Y,se.height=Z;const re=se.getContext("2d");re.fillStyle="#ffffff",re.fillRect(0,0,Y,Z),re.drawImage(h,W,C,Y,Z,0,0,Y,Z);try{const ne=se.toDataURL("image/png");M.push(Promise.resolve({url:ne,width:Y,height:Z}))}catch(ne){console.error("Canvas toDataURL :",ne)}}Promise.all(M).then(O=>{u(O)}).catch(O=>{f(O)})}catch(m){f(m)}},h.onerror=()=>{clearTimeout(p),f(new Error(""))},h.src=s}),ja=async(s,u={})=>{if(!s)return;const{originX:f,originY:h,cols:p=3,spacing:m=20,nodeWidth:S=260,nodeHeight:I=260,replaceSelected:T=!1}=u;try{const $=await t1(s);if($.length!==9){alert("9");return}const M=ks.current;if(T&&M&&M.size===9){const Y=Array.from(M);r(Z=>Z.map(se=>{const re=Y.indexOf(se.id);return re!==-1&&re<$.length?{...se,content:$[re].url,dimensions:{w:$[re].width,h:$[re].height}}:se}));return}const O=cn(window.innerWidth/2,window.innerHeight/2),P=f!==void 0?f:O.x,W=h!==void 0?h:O.y,C=[];for(let Y=0;Y<$.length;Y++){const Z=Math.floor(Y/p),se=Y%p,re=P+se*(S+m),ne=W+Z*(I+m);C.push({id:`node-${Date.now()}-${Y}`,type:"input-image",x:re,y:ne,width:S,height:I,content:$[Y].url,dimensions:{w:$[Y].width,h:$[Y].height}})}r(Y=>[...Y,...C])}catch($){alert(": "+$.message)}},n1=()=>{const s=mi.current,u=ks.current;let f=[];if(s){const Z=Yr.current.find(se=>se.id===s);Z&&(f=[Z])}else u&&u.size>0&&(f=Yr.current.filter(Z=>u.has(Z.id)));if(f.length<2){alert("");return}const h=new Set(f.map(Z=>Z.id)),p={};f.forEach(Z=>{p[Z.id]={id:Z.id,node:Z,parents:[],children:[],level:0,rank:0}}),ha.current.forEach(Z=>{h.has(Z.from)&&h.has(Z.to)&&(p[Z.from].children.push(Z.to),p[Z.to].parents.push(Z.from))});let m=Object.values(p).filter(Z=>Z.parents.length===0);m.length===0&&f.length>0&&(m=[Object.values(p)[0]]),(()=>{const Z=m.map(se=>({node:se,lvl:0}));for(;Z.length>0;){const{node:se,lvl:re}=Z.shift();re>=se.level&&(se.level=re,se.children.forEach(ne=>{const ke=p[ne];ke&&re<20&&Z.push({node:ke,lvl:re+1})}))}})();const I=Math.max(...Object.values(p).map(Z=>Z.level)),T=Array.from({length:I+1},()=>[]);Object.values(p).forEach(Z=>{T[Z.level].push(Z)}),T.forEach(Z=>{Z.sort((se,re)=>se.node.y-re.node.y)});const $=3;for(let Z=0;Z<$;Z++){for(let se=1;se<T.length;se++){const re=T[se];re.forEach(ne=>{if(ne.parents.length>0){let ke=0;ne.parents.forEach(Ne=>{const Oe=p[Ne],nt=T[se-1].indexOf(Oe);nt!==-1&&(ke+=nt)}),ne.barycenter=ke/ne.parents.length}else ne.barycenter=T[se].indexOf(ne)}),re.sort((ne,ke)=>(ne.barycenter||0)-(ke.barycenter||0))}for(let se=T.length-2;se>=0;se--){const re=T[se];re.forEach(ne=>{if(ne.children.length>0){let ke=0;ne.children.forEach(Ne=>{const Oe=p[Ne],nt=T[se+1].indexOf(Oe);nt!==-1&&(ke+=nt)}),ne.barycenter=ke/ne.children.length}else ne.barycenter=T[se].indexOf(ne)}),re.sort((ne,ke)=>(ne.barycenter||0)-(ke.barycenter||0))}}const M=Math.min(...f.map(Z=>Z.x)),O=Math.min(...f.map(Z=>Z.y)),P=150,W=40;let C=M;const Y=new Map;T.forEach((Z,se)=>{if(Z.length===0)return;const re=Math.max(...Z.map(ke=>ke.node.width||260));Z.reduce((ke,Ne)=>ke+(Ne.node.height||200),0)+(Z.length-1)*W;let ne=O;Z.forEach(ke=>{Y.set(ke.id,{...ke.node,x:C,y:ne}),ne+=(ke.node.height||200)+W}),C+=re+P}),r(Z=>Z.map(se=>Y.has(se.id)?Y.get(se.id):se))},Sh=(s,u)=>{u.preventDefault(),u.stopPropagation(),u.currentTarget.classList.remove("drag-over");const f=Array.from(u.dataTransfer.files),h=f.find(m=>m.type.startsWith("video/"));if(h){ga(s,h);return}const p=f.filter(m=>m.type.startsWith("image/"));if(p.sort((m,S)=>m.name.localeCompare(S.name,void 0,{numeric:!0,sensitivity:"base"})),p.length>0){console.log(`[KeyframeOrganizer] Adding ${p.length} images as keyframes`);const m=Ft.get(s),S=(m==null?void 0:m.frames)||[],I=(m==null?void 0:m.selectedKeyframes)||[];let T=0;const $=[];p.forEach((M,O)=>{const P=new FileReader;P.onload=async W=>{const C=W.target.result,Y=await Ci.saveImage(C);if(console.log(`[KeyframeOrganizer] Saved image to IndexedDB: ${Y}`),$[O]={time:S.length+O,url:Y,filename:M.name},T++,T===p.length){const Z=$.filter(Boolean);r(se=>se.map(re=>re.id===s?{...re,frames:[...S,...Z],selectedKeyframes:[...I,...Z]}:re)),console.log(`[KeyframeOrganizer] Added ${Z.length} keyframes to node (stored in IndexedDB)`)}},P.readAsDataURL(M)})}},r1=(s,u,f)=>{s.preventDefault(),s.stopPropagation();const h=s.currentTarget.getBoundingClientRect(),m=s.clientX-h.left>h.width/2?f+1:f;(z!==m||b!==u)&&(A(m),E(u))},s1=(s,u,f)=>{s.preventDefault(),s.stopPropagation(),s.target===s.currentTarget&&(z!==f||b!==u)&&(A(f),E(u))},i1=(s,u)=>{var $;u.preventDefault(),u.stopPropagation();const f=Array.from(u.dataTransfer.files).filter(M=>M.type.startsWith("image/"));if(f.length===0)return;let h=b===s&&z!==null?z:((($=Ft.get(s))==null?void 0:$.frames)||[]).length;E(null),A(null),f.sort((M,O)=>M.name.localeCompare(O.name,void 0,{numeric:!0,sensitivity:"base"})),console.log(`[KeyframeOrganizer] Inserting ${f.length} images at index ${h}`);const p=Ft.get(s),m=(p==null?void 0:p.frames)||[],S=(p==null?void 0:p.selectedKeyframes)||[];let I=0;const T=[];f.forEach((M,O)=>{const P=new FileReader;P.onload=async W=>{const C=W.target.result,Y=await Ci.saveImage(C);if(T[O]={time:Date.now()+O,url:Y,filename:M.name},I++,I===f.length){const Z=T.filter(Boolean),se=[...m.slice(0,h),...Z,...m.slice(h)],re=new Set([...S,...Z]),ne=se.map((Ne,Oe)=>({...Ne,time:Oe})),ke=ne.filter((Ne,Oe)=>re.has(se[Oe]));r(Ne=>Ne.map(Oe=>Oe.id===s?{...Oe,frames:ne,selectedKeyframes:ke}:Oe))}},P.readAsDataURL(M)})},o1=async(s,u=30)=>new Promise((f,h)=>{const p=document.createElement("video");p.crossOrigin="anonymous",p.src=s,p.muted=!0;const m=document.createElement("canvas"),S=m.getContext("2d",{willReadFrequently:!0}),I=[];let T=null;p.onloadeddata=async()=>{m.width=320,m.height=Math.floor(320*(p.videoHeight/p.videoWidth));const $=p.duration,M=2;p.currentTime=0;const O=async()=>{const P=p.currentTime;if(P>=$||Math.abs(P-$)<.01){if(I.length===0||parseFloat(I[I.length-1].time)<$-.5){const Y=document.createElement("canvas");Y.width=p.videoWidth,Y.height=p.videoHeight;const Z=Y.getContext("2d");p.currentTime=Math.max(0,$-.1),await new Promise(se=>{const re=setTimeout(()=>se(),200);p.onseeked=()=>{clearTimeout(re),Z.drawImage(p,0,0);const ne=Math.max(0,$-.1);I.push({time:ne.toFixed(2),image:Y.toDataURL("image/jpeg",.8)}),se()}})}f(I.map(Y=>({time:parseFloat(Y.time),url:Y.image})));return}S.drawImage(p,0,0,m.width,m.height);const W=S.getImageData(0,0,m.width,m.height).data;if(T){let Y=0;for(let se=0;se<W.length;se+=4)Y+=Math.abs(W[se]-T[se])+Math.abs(W[se+1]-T[se+1])+Math.abs(W[se+2]-T[se+2]);if(Y/(W.length/4*3)>u){const se=document.createElement("canvas");se.width=p.videoWidth,se.height=p.videoHeight,se.getContext("2d").drawImage(p,0,0);const re=se.toDataURL("image/jpeg",.8),ne=p.currentTime;I.push({time:ne.toFixed(2),image:re}),T=null}else T=W}else{T=W;const Y=p.currentTime,Z=document.createElement("canvas");Z.width=p.videoWidth,Z.height=p.videoHeight,Z.getContext("2d").drawImage(p,0,0),I.push({time:Y.toFixed(2),image:Z.toDataURL("image/jpeg",.8)})}const C=p.currentTime+1/M;if(C>=$){if(I.length===0||parseFloat(I[I.length-1].time)<$-.5){const Y=document.createElement("canvas");Y.width=p.videoWidth,Y.height=p.videoHeight;const Z=Y.getContext("2d");p.currentTime=Math.max(0,$-.1),await new Promise(se=>{const re=setTimeout(()=>se(),200);p.onseeked=()=>{clearTimeout(re),Z.drawImage(p,0,0);const ne=Math.max(0,$-.1);I.push({time:ne.toFixed(2),image:Y.toDataURL("image/jpeg",.8)}),se()}})}f(I.map(Y=>({time:parseFloat(Y.time),url:Y.image})));return}p.currentTime=C,await new Promise(Y=>{const Z=setTimeout(()=>Y(),200);p.onseeked=()=>{clearTimeout(Z),Y()}}),O()};O()},p.onerror=$=>h(new Error(""))}),a1=async(s,u=2)=>{const f=Ft.get(s);if(f!=null&&f.content){r(h=>h.map(p=>p.id===s?{...p,extractingFrames:!0}:p));try{const h=await K2(f.content,{fps:u});r(p=>p.map(m=>m.id===s?{...m,frames:h,selectedKeyframes:[],extractingFrames:!1}:m))}catch(h){console.error("",h),r(p=>p.map(m=>m.id===s?{...m,extractingFrames:!1}:m))}}},l1=async(s,u=30)=>{const f=Ft.get(s);if(f!=null&&f.content){r(h=>h.map(p=>p.id===s?{...p,extractingFrames:!0}:p));try{const h=await o1(f.content,u);r(p=>p.map(m=>m.id===s?{...m,frames:h,selectedKeyframes:[],extractingFrames:!1}:m))}catch(h){console.error("",h),alert(`: ${h.message}`),r(p=>p.map(m=>m.id===s?{...m,extractingFrames:!1}:m))}}},c1=(s,u,f=0,h=null)=>{const p=!!(h!=null&&h.shiftKey);r(m=>m.map(S=>{if(S.id!==s)return S;const I=S.frames||[],T=P=>`${P.time}-${P.url}`,$=new Map(I.map(P=>[T(P),P]));let O=[...S.selectedKeyframes||[]];if(p&&Ul.current[s]!==void 0&&Ul.current[s]!==null&&I.length>0){const P=Ul.current[s],W=Math.min(P,f),C=Math.max(P,f),Y=I.slice(W,C+1),Z=new Set(O.map(T));Y.forEach(se=>Z.add(T(se))),O=Array.from(Z).map(se=>$.get(se)).filter(Boolean)}else O=O.some(W=>T(W)===T(u))?O.filter(W=>T(W)!==T(u)):[...O,u];return Ul.current[s]=f,{...S,selectedKeyframes:O}}))},u1=(s,u,f)=>{s.preventDefault(),s.stopPropagation(),Ru({visible:!0,x:s.clientX,y:s.clientY,nodeId:u,frame:f})},ql=()=>{Ru({visible:!1,x:0,y:0,nodeId:null,frame:null})},d1=()=>{const{frame:s}=pi;if(!(s!=null&&s.url))return;const u={name:`Frame-${(s.time??0).toFixed(2)}s.png`,type:"image/png",content:s.url,isImage:!0,isVideo:!1,isAudio:!1,fromHistory:!0,fileExt:"png"};bs(f=>[...f,u]),wr(!0),ql()},f1=async()=>{const{frame:s}=pi;if(!(s!=null&&s.url))return;let u=s.url;if(u.startsWith("blob:"))try{u=`data:image/png;base64,${await Yn(u)}`,console.log("  Blob URL  Data URL")}catch(M){console.error(" Blob URL  URL:",M)}let f;try{const M=await Sr(u);M!=null&&M.w&&(M!=null&&M.h)&&(f={w:M.w,h:M.h})}catch{}const h=n.filter(M=>M.type==="input-image");let p,m;if(h.length>0){const M=h[h.length-1];p=M.x-40,m=M.y+35}else{const M=cn(window.innerWidth/2,window.innerHeight/2);p=M.x+50,m=M.y+50}let S=p,I=m;const T=(M,O)=>n.some(P=>Math.abs(P.x-M)<80&&Math.abs(P.y-O)<80);let $=0;for(;T(S,I)&&$<50;)S-=40,I+=35,$++;ds("input-image",S,I,null,u,f),ql()},p1=()=>{const{frame:s}=pi;s!=null&&s.url&&(r(u=>{const f=mi.current,h=ks.current,p=u.filter(S=>S.type==="preview");if(!p.length)return u;let m=null;if(f){const S=p.find(I=>I.id===f);S&&(m=S.id)}if(!m&&h&&h.size>0){const S=p.find(I=>h.has(I.id));S&&(m=S.id)}return m||(m=p[p.length-1].id),u.map(S=>S.id===m?{...S,content:s.url,previewType:"image"}:S)}),ql())},h1=()=>{const{frame:s}=pi;if(!(s!=null&&s.url))return;const u=ze,f=Ft.get(u);f&&f.type==="input-image"?r(h=>h.map(p=>p.id===u?{...p,content:s.url}:p)):alert('""'),ql()},Ql=(s,u,f=null,h=null)=>{s.preventDefault(),s.stopPropagation();const p=f||u.url,m=h!==null?h:u.selectedMjImageIndex!==void 0?u.selectedMjImageIndex:null,S={...u,url:p,selectedMjImageIndex:m},I=cn(s.clientX,s.clientY);cs({visible:!0,x:s.clientX,y:s.clientY,worldX:I.x,worldY:I.y,item:S})},m1=()=>{const s=ir.item,u=ze,f=Ft.get(u);f&&f.type==="input-image"&&s.url?r(h=>h.map(p=>p.id===u?{...p,content:s.url}:p)):alert('""'),cs({visible:!1,x:0,y:0,item:null})},g1=async()=>{const s=ir.item;if(!(s!=null&&s.url))return;let u=s.url;s.type==="video"&&!Gn(u)&&(u+=(u.includes("?")?"&":"?")+"force_video_display=true");let f;if(s.type==="image")try{const M=await Sr(u);M!=null&&M.w&&(M!=null&&M.h)&&(f={w:M.w,h:M.h})}catch(M){console.error("SendHistoryToCanvas getImageDimensions error",M)}const h=n.filter(M=>M.type==="input-image");let p,m;if(h.length>0){const M=h[h.length-1];p=M.x-40,m=M.y+35}else{const M=cn(window.innerWidth/2,window.innerHeight/2);p=M.x+50,m=M.y+50}let S=p,I=m;const T=(M,O)=>n.some(P=>Math.abs(P.x-M)<80&&Math.abs(P.y-O)<80);let $=0;for(;T(S,I)&&$<50;)S-=40,I+=35,$++;ds("input-image",S,I,null,u,f),cs({visible:!1,x:0,y:0,item:null})},x1=()=>{const s=ir.item;if(!s||!s.url)return;const u=s.type==="image",f=s.type==="video",h=u?"png":f?"mp4":"file",p=u?"image/png":f?"video/mp4":"application/octet-stream",m={name:`Generated-${s.id}.${h}`,type:p,content:s.url,isImage:u,isVideo:f,isAudio:!1,fromHistory:!0,fileExt:h};bs(S=>[...S,m]),wr(!0),cs({visible:!1,x:0,y:0,item:null})},qu=async s=>{if(console.log("[V3.5.1 Debug] handleHistoryBatchDownload called with",s==null?void 0:s.length,"items"),!s||s.length===0){console.warn("[V3.5.1 Debug] No items to download");return}if(s.length===1){const p=s[0];if(!(p!=null&&p.mjImages)&&(p==null?void 0:p.url)){st({active:!0,current:0,total:1});try{const S=p.url;let I="mp4";if(S.startsWith("data:image"))I="png";else if(S.startsWith("data:video"))I="mp4";else if(p.type==="video"||S.includes("/video/")||S.includes("video_mp4"))I="mp4";else if(p.type==="image")I="png";else{const O=S.split("?")[0].split("/").pop();if(O&&O.includes(".")){const P=O.split(".").pop();P&&P.length<=5&&/^[a-z0-9]+$/i.test(P)&&(I=P)}}const $=`${(p.prompt||"download").replace(/[\\/:*?"<>|]/g,"_").slice(0,50)}.${I}`;if(S.startsWith("data:")){const M=document.createElement("a");M.href=S,M.download=$,M.click(),console.log("  (data URL):",$)}else{console.log(" ...",$);const O=await(await fetch(S)).blob(),P=document.createElement("a");P.href=URL.createObjectURL(O),P.download=$,P.click(),console.log(" :",$)}st({active:!1,current:1,total:1})}catch(S){console.error(":",S),st({active:!1,current:0,total:0}),alert(": "+S.message)}return}}const u=new M2;let f=0;const h=s.length;console.log(`  ${h} ...`),st({active:!0,current:0,total:h});try{for(const I of s){if(!I)continue;const T=[];I.mjImages&&I.mjImages.length>0?I.mjImages.forEach(($,M)=>{T.push({url:$,suffix:`_${M+1}`})}):I.url&&T.push({url:I.url,suffix:""});for(const $ of T)try{let M;if($.url.startsWith("data:")){const Y=$.url.split(","),Z=Y[0].match(/:(.*?);/)[1],se=atob(Y[1]);let re=se.length;const ne=new Uint8Array(re);for(;re--;)ne[re]=se.charCodeAt(re);M=new Blob([ne],{type:Z})}else M=await(await fetch($.url)).blob();let O=M.type.split("/")[1]||"png";if(I.url&&!I.url.startsWith("data:")){const Y=I.url.split(".").pop().split("?")[0];Y&&Y.length<5&&(O=Y)}const P=(I.prompt||"untitled").replace(/[\\/:*?"<>|]/g,"_").slice(0,40),W=I.id?`_${I.id.slice(-4)}`:"",C=`${P}${W}${$.suffix}.${O}`;u.file(C,M),f++}catch(M){console.error(` [${I.id}]:`,M)}st($=>({...$,current:$.current+1}))}if(f===0){st({active:!1,current:0,total:0}),alert("");return}const p=await u.generateAsync({type:"blob"}),m=new Date,S=`${m.getFullYear().toString().slice(2)}${(m.getMonth()+1).toString().padStart(2,"0")}${m.getDate().toString().padStart(2,"0")}-${m.getHours().toString().padStart(2,"0")}${m.getMinutes().toString().padStart(2,"0")}`;$2.saveAs(p,`tapnow-assets-${S}.zip`),console.log(`  ${f} `),st({active:!1,current:0,total:0})}catch(p){console.error(":",p),st({active:!1,current:0,total:0}),alert(": "+p.message)}},y1=(s,u)=>{u!=null&&u.url&&(s.preventDefault(),s.stopPropagation(),Bp({visible:!0,x:s.clientX,y:s.clientY,item:u}))},ec=()=>Bp({visible:!1,x:0,y:0,item:null}),v1=()=>{const s=mo.item;if(!(s!=null&&s.url))return;const u=s.type!=="video",f=s.type==="video",h=u?"png":"mp4",p=u?"image/png":"video/mp4",m={name:`Preview-${Date.now()}.${h}`,type:p,content:s.url,isImage:u,isVideo:f,isAudio:!1,fileExt:h};bs(S=>[...S,m]),wr(!0),ec()},b1=async()=>{const s=mo.item;if(!(s!=null&&s.url))return;const u=cn(window.innerWidth/2,window.innerHeight/2);let f={w:512,h:512};try{f=await Sr(s.url)}catch(h){console.warn("Preview dims fail",h)}ds("input-image",u.x+50,u.y+50,null,s.url,f),ec()},w1=(s,u)=>{s.preventDefault(),s.stopPropagation();const f=Ft.get(u);!f||!f.content||Hp({visible:!0,x:s.clientX,y:s.clientY,nodeId:u})},Qu=()=>{Hp({visible:!1,x:0,y:0,nodeId:null})},k1=()=>{const s=aa.nodeId,u=Ft.get(s);if(!u||!u.content)return;const f=!Gn(u.content),h=Gn(u.content),p=f?"png":"mp4",m=f?"image/png":"video/mp4",S={name:`InputImage-${Date.now()}.${p}`,type:m,content:u.content,isImage:f,isVideo:h,isAudio:!1,fileExt:p};bs(I=>[...I,S]),wr(!0),Qu()},Ch=B.memo(({connections:s,nodesMap:u,connectionsByNode:f,connectingSource:h,connectingTarget:p,connectingInputType:m,mousePos:S,apiConfigsMap:I,selectedNodeId:T,onDisconnectConnection:$,visibleNodes:M})=>{const O=B.useMemo(()=>new Set(M.map(W=>W.id)),[M]),P=B.useMemo(()=>s.filter(W=>O.has(W.from)||O.has(W.to)),[s,O]);return o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible w-full h-full",children:o.jsxs("svg",{className:"absolute inset-0 overflow-visible w-full h-full pointer-events-none",children:[P.map(W=>{var dt;const C=u.get(W.from),Y=u.get(W.to);if(!C||!Y)return null;const Z=T&&(C.id===T||Y.id===T),se=Z?1:.35,re=C.x+C.width-4,ne=C.y+C.height/2,ke=Y.x+4;let Ne=Y.y+Y.height/2;if(Y.type==="image-compare"){const ct=(f.to.get(Y.id)||[]).findIndex(Ke=>Ke.id===W.id);ct===0?Ne=Y.y+Y.height*.33:ct>=1&&(Ne=Y.y+Y.height*.66)}if(Y.type==="gen-image"&&(W.inputType==="oref"||W.inputType==="sref")){const et=I.get((dt=Y.settings)==null?void 0:dt.model);if(et&&(et.id.includes("mj")||et.provider.toLowerCase().includes("midjourney"))){const un=(f.to.get(Y.id)||[]).some(Xr=>!Xr.inputType||Xr.inputType==="default");let dn=12;dn+=24,un&&(dn+=68),dn+=108,W.inputType==="oref"?Ne=Y.y+dn+16*.5:W.inputType==="sref"&&(Ne=Y.y+dn+16+6+28+6+16*.5)}}const Oe=Math.abs(ke-re),nt=re+Oe*.5,G=ke-Oe*.5,pe=(re+ke)/2,Ue=(ne+Ne)/2;return o.jsxs("g",{className:"connection-group",style:{opacity:se},children:[o.jsx("path",{d:`M ${re} ${ne} C ${nt} ${ne}, ${G} ${Ne}, ${ke} ${Ne}`,stroke:"transparent",strokeWidth:"20",fill:"none",style:{pointerEvents:"stroke"}}),o.jsx("path",{d:`M ${re} ${ne} C ${nt} ${ne}, ${G} ${Ne}, ${ke} ${Ne}`,stroke:"#18181b",strokeWidth:"4",fill:"none"}),o.jsx("path",{d:`M ${re} ${ne} C ${nt} ${ne}, ${G} ${Ne}, ${ke} ${Ne}`,stroke:"#71717a",strokeWidth:"2",fill:"none"}),o.jsx("circle",{cx:re,cy:ne,r:"2",fill:"#71717a"}),o.jsx("circle",{cx:ke,cy:Ne,r:"2",fill:"#71717a"}),o.jsxs("g",{className:"connection-delete cursor-pointer",style:{opacity:Z?1:.35,pointerEvents:"auto",cursor:"pointer"},onClick:et=>{et.stopPropagation(),et.preventDefault(),$(W.id)},onMouseDown:et=>{et.stopPropagation(),et.preventDefault(),$(W.id)},children:[o.jsx("circle",{cx:pe,cy:Ue,r:"25",fill:"transparent",style:{pointerEvents:"auto",cursor:"pointer"},onClick:et=>{et.stopPropagation(),et.preventDefault(),$(W.id)},onMouseDown:et=>{et.stopPropagation(),et.preventDefault(),$(W.id)}}),o.jsx("circle",{cx:pe,cy:Ue,r:"12",fill:"#ef4444",opacity:"0.8",style:{pointerEvents:"none"}}),o.jsx("circle",{cx:pe,cy:Ue,r:"8",fill:"#ef4444",style:{pointerEvents:"none"}}),o.jsx(C2,{size:10,className:"text-white",x:pe-5,y:Ue-5,style:{pointerEvents:"none"}})]})]},W.id)}),h&&(()=>{const W=u.get(h);return W?o.jsx("path",{d:`M ${W.x+W.width-4} ${W.y+W.height/2} C ${W.x+W.width+100} ${W.y+W.height/2}, ${S.x-100} ${S.y}, ${S.x} ${S.y}`,stroke:"#60a5fa",strokeWidth:"2",fill:"none",strokeDasharray:"4,4"}):null})(),p&&(()=>{var Z;const W=u.get(p);if(!W)return null;const C=W.x+4;let Y=W.y+W.height/2;if(W.type==="gen-image"&&m){const se=I.get((Z=W.settings)==null?void 0:Z.model);if(se&&(se.id.includes("mj")||se.provider.toLowerCase().includes("midjourney"))){const Ke=(f.to.get(W.id)||[]).some(wt=>!wt.inputType||wt.inputType==="default");let it=12;it+=24,Ke&&(it+=68),it+=108,m==="oref"?Y=W.y+it+16*.5:m==="sref"&&(Y=W.y+it+16+6+28+6+16*.5)}}else W.type==="image-compare"&&(Y=W.y+W.height/2);return o.jsx("path",{d:`M ${C} ${Y} C ${C-100} ${Y}, ${S.x+100} ${S.y}, ${S.x} ${S.y}`,stroke:"#60a5fa",strokeWidth:"2",fill:"none",strokeDasharray:"4,4"})})()]})})},(s,u)=>s.connections===u.connections&&s.visibleNodes===u.visibleNodes&&s.selectedNodeId===u.selectedNodeId&&s.connectingSource===u.connectingSource&&s.connectingTarget===u.connectingTarget&&s.connectingInputType===u.connectingInputType&&s.mousePos.x===u.mousePos.x&&s.mousePos.y===u.mousePos.y);B.useCallback(()=>o.jsx(Ch,{connections:i,nodesMap:Ft,connectionsByNode:jo,connectingSource:H,connectingTarget:Le,connectingInputType:Qt,mousePos:Vn,apiConfigsMap:en,selectedNodeId:ze,onDisconnectConnection:Zu,visibleNodes:Fl}),[i,Ft,jo,H,Le,Qt,Vn,en,ze,Zu,Fl]);const Eh=B.useMemo(()=>{const s=new Map;return i.forEach(u=>{(!u.inputType||u.inputType==="default")&&s.set(u.to,!0)}),s},[i]),Ih=B.useCallback(s=>{const u=new Set,f=jo.from.get(s)||[],h=jo.to.get(s)||[];return f.forEach(p=>u.add(p.to)),h.forEach(p=>u.add(p.from)),u},[jo]),Th=B.useMemo(()=>{const s=new Map;if(ze||An.size>0){const u=ze||(An.size===1?Array.from(An)[0]:null);u&&s.set(u,Ih(u))}return s},[ze,An,Ih]),z1=B.useCallback(s=>{var W,C,Y,Z,se,re,ne,ke,Ne,Oe,nt,G,pe,Ue,dt,et,ct,Ke,it,wt,at,It,Rt,zt,$t,Tt,_t,Zt,un,dn,Xr,mn,Pn,Jt,qt,an,Pt,tn,Nr,En;const f=v.zoom<.4,h=ze===s.id||An.has(s.id),p=Gu(s.id),m=Pr===s.id,S=Eh.get(s.id)||!1,I=er===s.id||er&&An.has(s.id),T=ze||(An.size===1?Array.from(An)[0]:null),$=T?Th.get(T):null,M=T&&T!==s.id&&$&&$.has(s.id),O=en.get((W=s.settings)==null?void 0:W.model),P=O?(O.modelName||O.id||"").includes("nano-banana-2"):(((C=s.settings)==null?void 0:C.model)||"").includes("nano-banana-2");return f?o.jsxs("div",{"data-node-id":s.id,className:`absolute node-wrapper flex flex-col ${h?"ring-1 ring-blue-500":e==="dark"?"border border-zinc-800":"border border-zinc-200"} ${e==="dark"?"bg-[#18181b]":"bg-white"}`,style:{left:s.x,top:s.y,width:s.width,height:s.height,cursor:er===s.id||er&&An.has(s.id)?"grabbing":"default",zIndex:I?50:10,border:`1px solid ${e==="dark"?"#3f3f46":"#e4e4e7"}`,background:e==="dark"?"#18181b":"#fff",boxShadow:"none",borderRadius:"0",transform:"translateZ(0)",backfaceVisibility:"hidden"},onMouseDown:L=>{L.button===0&&(L.stopPropagation(),L.ctrlKey||L.metaKey?jr(Se=>{const xt=new Set(Se);return xt.has(s.id)?xt.delete(s.id):xt.add(s.id),xt.size===1?be(Array.from(xt)[0]):be(null),xt}):An.has(s.id)&&An.size>1?be(s.id):(be(s.id),jr(new Set([s.id]))),ui(s.id))},onMouseEnter:()=>{(H||Le)&&Wr(s.id)},onMouseLeave:()=>{(H||Le)&&Pr===s.id&&Wr(null)},onMouseUp:L=>us(s.id,L),children:[s.type==="input-image"&&s.content&&o.jsx("div",{className:"w-full h-full relative",children:Gn(s.content)?o.jsx("video",{src:s.content,className:"w-full h-full object-cover opacity-80",muted:!0,playsInline:!0}):o.jsx(qr,{src:s.content,className:"w-full h-full object-cover opacity-80",alt:""})}),s.type==="video-input"&&s.content&&o.jsx("video",{src:s.content,className:"w-full h-full object-cover opacity-80",muted:!0,playsInline:!0}),!s.content&&o.jsx("div",{className:`p-2 font-bold text-sm truncate ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:s.type==="input-image"?"":s.type==="video-input"?"":s.type==="gen-image"||s.type==="gen-image"?"":s.type==="gen-video"?"":s.type==="text-node"?"":s.type==="preview"?"":s.type==="novel-input"?"":s.type==="extract-characters-scenes"?"":s.type==="save-to-local"||s.type==="local-save"?"":s.type||""}),s.type!=="input-image"&&s.type!=="video-input"&&s.type!=="video-analyze"&&s.type!=="preview"&&(s.type==="image-compare"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"input-point",style:{top:"33%",left:"-0.25rem",width:"0.5rem",height:"0.5rem",backgroundColor:S?"#60a5fa":"#52525b",borderRadius:"50%",position:"absolute",zIndex:20,pointerEvents:"auto"},onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),Ut(s.id),Kt("default")},onMouseUp:L=>us(s.id,L,"default")}),o.jsx("div",{className:"input-point",style:{top:"66%",left:"-0.25rem",width:"0.5rem",height:"0.5rem",backgroundColor:S?"#60a5fa":"#52525b",borderRadius:"50%",position:"absolute",zIndex:20,pointerEvents:"auto"},onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),Ut(s.id),Kt("default")},onMouseUp:L=>us(s.id,L,"default")})]}):o.jsx("div",{className:"input-point",style:{top:"50%",left:"-0.25rem",width:"0.5rem",height:"0.5rem",backgroundColor:S?"#60a5fa":"#52525b",borderRadius:"50%",position:"absolute",zIndex:20,pointerEvents:"auto"},onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),Ut(s.id),Kt("default")},onMouseUp:L=>us(s.id,L,"default")})),s.type!=="preview"&&o.jsx("div",{className:"connector connector-right",style:{position:"absolute",top:"50%",right:"-0.45rem",width:"0.9rem",height:"0.9rem",backgroundColor:H===s.id?"#d4d4d8":"#27272a",border:"1px solid #71717a",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"crosshair",zIndex:30,opacity:H===s.id?1:.5,pointerEvents:"auto"},onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),$e(s.id)},children:o.jsx(Gs,{size:10})})]},s.id):o.jsxs("div",{"data-node-id":s.id,className:`absolute rounded-xl shadow-xl transition-shadow duration-150 group flex flex-col node-wrapper ${h?"ring-1 ring-blue-500 shadow-blue-500/20":M?"ring-2 ring-blue-300/60 shadow-blue-300/30":e==="dark"?"border border-zinc-800 shadow-black/40":"border border-zinc-200 shadow-black/10"} ${m&&(H&&H!==s.id||Le&&Le!==s.id)?"ring-2 ring-green-500/50":""} ${e==="dark"?"bg-[#18181b]":"bg-white"}`,style:{left:s.x,top:s.y,width:s.width,height:s.height,cursor:er===s.id||er&&An.has(s.id)?"grabbing":"default",zIndex:I?50:10,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",transform:"translateZ(0)",backfaceVisibility:"hidden"},onMouseDown:L=>{L.button===0&&(L.stopPropagation(),L.ctrlKey||L.metaKey?jr(Se=>{const xt=new Set(Se);return xt.has(s.id)?xt.delete(s.id):xt.add(s.id),xt.size===1?be(Array.from(xt)[0]):be(null),xt}):An.has(s.id)&&An.size>1?be(s.id):(be(s.id),jr(new Set([s.id]))),ui(s.id),hn(null))},onMouseEnter:()=>{(H||Le)&&Wr(s.id)},onMouseLeave:()=>{(H||Le)&&Pr===s.id&&Wr(null)},onMouseUp:L=>us(s.id,L),onDoubleClick:L=>{L.stopPropagation(),(s.type==="input-image"||s.type==="video-input")&&s.content&&Un({url:s.content,type:Gn(s.content)?"video":"image"})},children:[o.jsx("button",{onClick:L=>{L.stopPropagation(),Vu(s.id)},className:`absolute -top-2.5 -right-2.5 z-50 p-1 rounded-full shadow border opacity-0 group-hover:opacity-100 transition-opacity scale-90 hover:scale-100 ${e==="dark"?"bg-zinc-800 text-zinc-400 hover:text-red-500 hover:bg-zinc-700 border-zinc-700":"bg-zinc-100 text-zinc-500 hover:text-red-500 hover:bg-zinc-200 border-zinc-300"}`,onMouseDown:L=>L.stopPropagation(),children:o.jsx(Cr,{size:12})}),o.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 z-[100] resize-handle flex items-end justify-end p-0.5",onMouseDown:L=>{L.stopPropagation(),L.preventDefault(),pt(s.id)},children:o.jsx("svg",{width:"6",height:"6",viewBox:"0 0 8 8",fill:"none",className:"text-zinc-600",children:o.jsx("path",{d:"M8 0L8 8L0 8",stroke:"currentColor",strokeWidth:"2"})})}),s.type!=="input-image"&&s.type!=="video-input"&&s.type!=="video-analyze"&&s.type!=="preview"&&(s.type==="image-compare"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`input-point ${Le===s.id&&!Qt?"active":""}`,style:{top:"33%"},title:" 1 ",onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),Ut(s.id),Kt("default")},onMouseUp:L=>us(s.id,L,"default")}),o.jsx("div",{className:`input-point ${Le===s.id&&!Qt?"active":""}`,style:{top:"66%"},title:" 2 ",onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),Ut(s.id),Kt("default")},onMouseUp:L=>us(s.id,L,"default")})]}):o.jsx("div",{className:`input-point ${S?"connected":""} ${Le===s.id&&!Qt?"active":""}`,title:"",onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),Ut(s.id),Kt("default")},onMouseUp:L=>us(s.id,L,"default")})),s.type!=="preview"&&o.jsx("div",{className:`connector connector-right ${H===s.id?"active":""} ${Le&&Pr===s.id?"ring-2 ring-green-500/50":""}`,title:"",onMouseDown:L=>{L.stopPropagation(),L.preventDefault();const Se=cn(L.clientX,L.clientY);$n(Se),$e(s.id)},onMouseEnter:()=>{Le&&Wr(s.id)},onMouseLeave:()=>{Le&&Pr===s.id&&Wr(null)},children:o.jsx(Gs,{size:10})}),o.jsxs("div",{className:`overflow-hidden rounded-xl flex-1 flex flex-col pointer-events-none h-full w-full relative ${e==="dark"?"bg-[#18181b]":"bg-white"}`,children:[s.type==="novel-input"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 border-b text-xs font-semibold shrink-0",children:[o.jsx(Jr,{size:12,className:"text-blue-500"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-2 p-3 overflow-hidden min-h-0",children:[o.jsx("textarea",{value:((Y=s.settings)==null?void 0:Y.content)||"",onChange:L=>{const Se=L.target.value;Se.length<=1e4&&kt(s.id,{content:Se})},placeholder:"10,000...",maxLength:1e4,className:`w-full h-full resize-none outline-none text-sm p-2 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()}),o.jsxs("div",{className:"text-right text-[10px] text-zinc-500 shrink-0",children:[(((Z=s.settings)==null?void 0:Z.content)||"").length,"/10,000"]})]})]}),s.type==="extract-characters-scenes"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[o.jsx(Wa,{size:12,className:"text-purple-500"}),o.jsx("span",{children:""})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar",children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:L=>{L.stopPropagation(),hn((Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="extract-model"?null:{nodeId:s.id,type:"extract-model"})},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-xs border transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,onMouseDown:L=>L.stopPropagation(),children:[o.jsx("span",{className:"truncate font-mono",children:((re=en.get((se=s.settings)==null?void 0:se.model))==null?void 0:re.modelName)||""}),o.jsx(wi,{size:12,className:"opacity-50 shrink-0"})]}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="extract-model"&&o.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:L=>L.stopPropagation(),onMouseLeave:()=>Kr(null),children:[o.jsx("div",{className:`w-24 border-r pr-1 max-h-80 overflow-y-auto custom-scrollbar flex flex-col justify-end ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(js).filter(([,L])=>L.models.some(Se=>Se.type==="Chat")).map(([L,Se])=>o.jsx("button",{onMouseEnter:()=>Kr(L),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${or===L?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:Se.name||L},L))}),o.jsxs("div",{className:"flex-1 pl-1 max-h-80 overflow-y-auto custom-scrollbar",children:[or&&((ne=js[or])==null?void 0:ne.models.filter(L=>L.type==="Chat").map(L=>{var Se;return o.jsxs("button",{onClick:()=>{kt(s.id,{model:L.id}),hn(null),Kr(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${((Se=s.settings)==null?void 0:Se.model)===L.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[o.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:L.id}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Hi(L.id)}`})]},L.id)})),!or&&o.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]})]}),o.jsx("button",{className:`w-full py-2 rounded text-xs font-medium transition-colors flex items-center justify-center gap-1.5 ${(ke=s.settings)!=null&&ke.isAnalyzing?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500 text-white"}`,onMouseDown:L=>L.stopPropagation(),onClick:L=>{L.stopPropagation(),Gy(s.id)},children:(Ne=s.settings)!=null&&Ne.isAnalyzing?o.jsxs(o.Fragment,{children:[o.jsx(Ss,{size:12,className:"animate-spin"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Nc,{size:12}),""]})})]})})]}),s.type==="local-save"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[o.jsx(cm,{size:12,className:"text-green-500"}),o.jsx("span",{children:""})]}),o.jsx("div",{className:`w-2 h-2 rounded-full ${((Oe=s.settings)==null?void 0:Oe.serverStatus)==="connected"||_e?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500"}`,title:_e?"":""})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar flex flex-col gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),o.jsx("input",{type:"text",value:((nt=s.settings)==null?void 0:nt.savePath)||"",onChange:L=>kt(s.id,{savePath:L.target.value}),placeholder:"C:/Downloads/Tapnow",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),o.jsx("input",{type:"text",value:((G=s.settings)==null?void 0:G.subfolder)||"",onChange:L=>kt(s.id,{subfolder:L.target.value}),placeholder:"v1_characters",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),o.jsx("button",{className:`w-10 h-5 rounded-full relative transition-colors ${(pe=s.settings)!=null&&pe.autoSave?"bg-green-600":"bg-zinc-600"}`,onClick:()=>{var L;return kt(s.id,{autoSave:!((L=s.settings)!=null&&L.autoSave)})},onMouseDown:L=>L.stopPropagation(),children:o.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${(Ue=s.settings)!=null&&Ue.autoSave?"left-6":"left-1"}`})})]}),o.jsxs("div",{className:"mt-auto border-t pt-2 border-zinc-700/50",children:[o.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between",children:[o.jsx("span",{children:":"}),o.jsx("span",{children:(dt=s.settings)!=null&&dt.lastSaved?s.settings.lastSaved.split(" ")[1]:""})]}),o.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between mt-1",children:[o.jsx("span",{children:":"}),o.jsxs("span",{children:[((ct=(et=s.settings)==null?void 0:et.savedFiles)==null?void 0:ct.length)||0," "]})]})]})]})]}),s.type==="novel-input"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 border-b text-xs font-semibold shrink-0",children:[o.jsx(Jr,{size:12,className:"text-blue-500"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-2 p-3 overflow-hidden min-h-0",children:[o.jsx("textarea",{value:((Ke=s.settings)==null?void 0:Ke.content)||"",onChange:L=>{const Se=L.target.value;Se.length<=1e4&&kt(s.id,{content:Se})},placeholder:"10,000...",maxLength:1e4,className:`w-full h-full resize-none outline-none text-sm p-2 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()}),o.jsxs("div",{className:"text-right text-[10px] text-zinc-500 shrink-0",children:[(((it=s.settings)==null?void 0:it.content)||"").length,"/10,000"]})]})]}),s.type==="extract-characters-scenes"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[o.jsx(Wa,{size:12,className:"text-purple-500"}),o.jsx("span",{children:""})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar",children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:((wt=s.settings)==null?void 0:wt.model)||"",onChange:L=>kt(s.id,{model:L.target.value}),className:`w-full text-xs border rounded px-2 py-1.5 appearance-none outline-none focus:border-blue-500 cursor-pointer ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300 text-zinc-800"}`,onMouseDown:L=>L.stopPropagation(),children:[o.jsx("option",{value:"",disabled:!0,children:""}),ae.filter(L=>L.type==="Chat").map(L=>o.jsx("option",{value:L.id,children:L.modelName||L.id},L.id))]}),o.jsx(wi,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-50 pointer-events-none"})]})]}),o.jsx("button",{className:`w-full py-2 rounded text-xs font-medium transition-colors flex items-center justify-center gap-1.5 ${(at=s.settings)!=null&&at.isAnalyzing?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500 text-white"}`,onMouseDown:L=>L.stopPropagation(),onClick:async()=>{alert("V3.4.4: APIUI")},children:(It=s.settings)!=null&&It.isAnalyzing?o.jsxs(o.Fragment,{children:[o.jsx(Ss,{size:12,className:"animate-spin"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Nc,{size:12}),""]})})]})})]}),s.type==="local-save"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold",children:[o.jsx(cm,{size:12,className:"text-green-500"}),o.jsx("span",{children:""})]}),o.jsx("div",{className:`w-2 h-2 rounded-full ${((Rt=s.settings)==null?void 0:Rt.serverStatus)==="connected"||_e?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500"}`,title:_e?"":""})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar flex flex-col gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),o.jsx("input",{type:"text",value:((zt=s.settings)==null?void 0:zt.savePath)||"",onChange:L=>kt(s.id,{savePath:L.target.value}),placeholder:"C:/Downloads/Tapnow",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:""}),o.jsx("input",{type:"text",value:(($t=s.settings)==null?void 0:$t.subfolder)||"",onChange:L=>kt(s.id,{subfolder:L.target.value}),placeholder:"v1_characters",className:`w-full text-xs border rounded px-2 py-1.5 outline-none focus:border-blue-500 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-[10px] font-medium opacity-70",children:" ()"}),o.jsx("button",{className:`w-10 h-5 rounded-full relative transition-colors ${(Tt=s.settings)!=null&&Tt.autoSave?"bg-green-600":"bg-zinc-600"}`,onClick:()=>{var L;return kt(s.id,{autoSave:!((L=s.settings)!=null&&L.autoSave)})},onMouseDown:L=>L.stopPropagation(),children:o.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${(_t=s.settings)!=null&&_t.autoSave?"left-6":"left-1"}`})})]}),o.jsxs("div",{className:"mt-auto border-t pt-2 border-zinc-700/50",children:[o.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between",children:[o.jsx("span",{children:":"}),o.jsx("span",{children:(Zt=s.settings)!=null&&Zt.lastSaved?s.settings.lastSaved.split(" ")[1]:""})]}),o.jsxs("div",{className:"text-[10px] text-zinc-500 flex justify-between mt-1",children:[o.jsx("span",{children:":"}),o.jsxs("span",{children:[((dn=(un=s.settings)==null?void 0:un.savedFiles)==null?void 0:dn.length)||0," "]})]})]})]})]}),s.type==="input-image"&&o.jsx("div",{className:`relative w-full h-full flex flex-col items-center justify-center transition-colors pointer-events-auto drop-zone ${e==="dark"?"bg-zinc-900 group-hover:bg-zinc-800":"bg-zinc-100 group-hover:bg-zinc-200"}`,onDrop:L=>Ly(s.id,L),onDragOver:vh,onDragLeave:bh,onContextMenu:L=>w1(L,s.id),children:s.content?o.jsxs("div",{className:"relative w-full h-full",children:[Gn(s.content)?o.jsx("video",{src:s.content,controls:!0,className:"w-full h-full object-contain bg-black/50",draggable:!1,style:{imageRendering:v.zoom>=1?"auto":"crisp-edges",WebkitFontSmoothing:"antialiased",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}}):o.jsx("img",{src:s.content,className:"w-full h-full object-contain bg-black/50",draggable:!1,loading:"lazy",style:{imageRendering:v.zoom>=1?"auto":"crisp-edges",WebkitFontSmoothing:"antialiased",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}}),s.dimensions&&o.jsxs("div",{className:`absolute bottom-2 right-2 text-[10px] px-1.5 py-0.5 rounded backdrop-blur-sm border ${e==="dark"?"bg-black/70 text-white border-white/10":"bg-white/80 text-zinc-800 border-zinc-200"}`,children:[s.dimensions.w,"x",s.dimensions.h]}),!s.isMasking&&o.jsxs("div",{className:"absolute inset-0 bg-black/40 transition-opacity gap-2 opacity-0 group-hover:opacity-100 flex flex-col items-center justify-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded-lg text-xs backdrop-blur-sm border transition-colors ${e==="dark"?"bg-white/10 hover:bg-white/20 text-white border-white/10":"bg-white hover:bg-zinc-100 text-zinc-800 border-zinc-300"}`,onMouseDown:L=>L.stopPropagation(),children:[" ",o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:L=>Nh(s.id,L)})]}),!Gn(s.content)&&o.jsxs("button",{onClick:L=>{L.stopPropagation(),r(Se=>Se.map(xt=>xt.id===s.id?{...xt,isMasking:!xt.isMasking}:xt))},className:`px-3 py-1.5 rounded-lg text-xs backdrop-blur-sm border transition-colors flex items-center gap-1 ${e==="dark"?s.isMasking?"bg-red-500/80 hover:bg-red-500 text-white border-red-400":"bg-white/10 hover:bg-white/20 text-white border-white/10":s.isMasking?"bg-red-500 hover:bg-red-600 text-white border-red-400":"bg-white hover:bg-zinc-100 text-zinc-800 border-zinc-300"}`,onMouseDown:L=>L.stopPropagation(),children:[o.jsx(o2,{size:12}),""]})]}),o.jsxs("div",{className:`text-[10px] text-center px-2 ${e==="dark"?"text-zinc-300":"text-zinc-500"}`,children:["",o.jsx("br",{})," Ctrl+V "]})]}),!s.isMasking&&s.maskContent&&o.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none",style:{background:"rgba(255, 0, 0, 0.3)",mixBlendMode:"multiply",WebkitMaskImage:`url(${s.maskContent})`,maskImage:`url(${s.maskContent})`,WebkitMaskSize:"100% 100%",maskSize:"100% 100%",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}}),s.isMasking&&!Gn(s.content)&&s.dimensions&&o.jsx(R2,{nodeId:s.id,imageUrl:s.content,imageDimensions:s.dimensions,isActive:s.isMasking,onClose:()=>{r(L=>L.map(Se=>Se.id===s.id?{...Se,isMasking:!1}:Se))},onSave:L=>{console.log(":",L)},onUpdateNode:(L,Se)=>{r(xt=>xt.map(bn=>bn.id===L?{...bn,...Se}:bn))},theme:e,view:v,maskContent:s.maskContent})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[o.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center mb-3 border ${e==="dark"?"bg-zinc-800 border-zinc-700/50":"bg-zinc-100 border-zinc-300"}`,children:o.jsx(jc,{className:`w-6 h-6 ${e==="dark"?"text-zinc-500":"text-zinc-400"}`})}),o.jsxs("label",{className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-xs font-medium transition-colors cursor-pointer pointer-events-auto",onMouseDown:L=>L.stopPropagation(),children:["",o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:L=>Nh(s.id,L)})]}),o.jsxs("div",{className:"text-[10px] text-center mt-2 pointer-events-none text-zinc-500",children:["",o.jsx("br",{})," Ctrl+V "]})]})}),s.type==="video-input"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto drop-zone video-input-container ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,onDragOver:vh,onDragLeave:bh,children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b text-xs font-semibold",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ld,{size:13,className:"text-blue-500"}),o.jsx("span",{children:" / "}),o.jsx("button",{onClick:L=>{var kn;L.stopPropagation();const Se=((kn=s.settings)==null?void 0:kn.videoExpanded)===!1,xt=(s.frames||[]).length,bn=Se?Math.max(1,Math.floor(s.width/290)):1,we=Math.max(1,Math.ceil(xt/bn)),qe=72,ht=Se?s.content?230:190:0,Ve=s.content&&Se?48:0,ut=36,vt=30,Wt=Se?158:106,Xe=qe+ht+Ve+ut+we*Wt+vt;r(In=>In.map(Fn=>Fn.id===s.id?{...Fn,height:Math.max(Se?500:220,Xe),settings:{...Fn.settings,videoExpanded:Se}}:Fn))},className:`p-1 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded transition-colors ml-1 ${((Xr=s.settings)==null?void 0:Xr.videoExpanded)===!1?"bg-zinc-200 dark:bg-zinc-700":""}`,title:((mn=s.settings)==null?void 0:mn.videoExpanded)===!1?"":"",children:((Pn=s.settings)==null?void 0:Pn.videoExpanded)===!1?o.jsx(wi,{size:12}):o.jsx(Ad,{size:12})})]}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500",children:[(Jt=s.videoMeta)!=null&&Jt.duration?o.jsxs("span",{children:[" ",s.videoMeta.duration.toFixed(1),"s"]}):null,(qt=s.videoMeta)!=null&&qt.w?o.jsxs("span",{children:[s.videoMeta.w,"x",s.videoMeta.h]}):null,(an=s.selectedKeyframes)!=null&&an.length?o.jsxs("span",{className:"text-blue-500",children:[" ",s.selectedKeyframes.length," "]}):null]})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-3 p-3 overflow-hidden min-h-0",children:[s.content?o.jsxs("div",{className:"space-y-2",children:[((Pt=s.settings)==null?void 0:Pt.videoExpanded)!==!1&&o.jsx("div",{className:"relative w-full max-w-[360px] aspect-video bg-black rounded-lg overflow-hidden flex items-center justify-center mx-auto",onDrop:L=>Sh(s.id,L),children:o.jsx("video",{src:s.content,controls:!0,className:"w-full h-full object-contain",draggable:!1})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded text-xs font-medium transition-colors cursor-pointer",onMouseDown:L=>L.stopPropagation(),children:["",o.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:L=>{var Se;return ga(s.id,(Se=L.target.files)==null?void 0:Se[0])}})]}),o.jsx("button",{className:`px-3 py-1.5 rounded text-xs border transition-colors ${e==="dark"?"border-zinc-700 bg-zinc-800 text-zinc-300 hover:border-blue-500 hover:text-blue-400":"border-zinc-300 hover:border-blue-500 hover:text-blue-600"}`,onMouseDown:L=>L.stopPropagation(),onClick:()=>a1(s.id,2),children:o.jsx("span",{className:"whitespace-nowrap",children:"2fps"})}),o.jsx("button",{className:`px-3 py-1.5 rounded text-xs border transition-colors ${e==="dark"?"bg-green-600/40 border-green-500 text-green-200 hover:bg-green-600/60 hover:border-green-400":"bg-green-50 border-green-300 hover:border-green-500 hover:text-green-600"}`,onMouseDown:L=>L.stopPropagation(),onClick:()=>l1(s.id,30),children:o.jsx("span",{className:"whitespace-nowrap",children:""})}),s.extractingFrames&&o.jsx("span",{className:"text-[11px] text-blue-500",children:"..."})]})]}):((tn=s.settings)==null?void 0:tn.videoExpanded)!==!1&&o.jsx("div",{className:"flex flex-col items-center justify-center gap-3 w-full px-4 mx-auto shrink-0 transition-colors border-2 border-transparent hover:border-blue-500/30 rounded-lg p-4",onDrop:L=>Sh(s.id,L),children:o.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center shrink-0 w-full",children:[o.jsx("div",{className:`relative w-full h-64 flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-colors ${x===s.id&&!b?"border-blue-500 bg-blue-500/10":e==="dark"?"border-zinc-700 hover:border-zinc-500":"border-zinc-300 hover:border-zinc-400"}`,children:o.jsxs("label",{className:"cursor-pointer flex flex-col items-center justify-center w-full h-full",children:[o.jsx(E2,{size:48,className:`mb-2 ${e==="dark"?"text-zinc-500":"text-zinc-400"}`}),o.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:""}),o.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:L=>{var Se;return ga(s.id,(Se=L.target.files)==null?void 0:Se[0])}})]})}),o.jsx("div",{className:"text-[10px] text-center text-zinc-500 pointer-events-none",children:" MP4/WEBM Ctrl+V "})]})}),o.jsxs("div",{className:"flex items-center justify-between text-[11px] text-zinc-500",children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex items-center gap-2 flex-nowrap shrink-0 whitespace-nowrap",children:[o.jsxs("span",{children:[(s.frames||[]).length," "]}),(s.frames||[]).length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{const L=s.frames||[],Se=s.selectedKeyframes||[];let xt=[];Se.length===0?xt=L.map(bn=>({url:bn.url,time:bn.time,filename:bn.filename})):xt=[],r(bn=>bn.map(we=>we.id===s.id?{...we,selectedKeyframes:xt}:we))},className:`text-[10px] px-1.5 py-0.5 rounded transition-colors flex items-center gap-1 ${e==="dark"?"bg-blue-600/30 text-blue-300 hover:bg-blue-600/50":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,onMouseDown:L=>L.stopPropagation(),title:(s.selectedKeyframes||[]).length>0?"":"",children:[(s.selectedKeyframes||[]).length>0?o.jsx(pm,{size:10}):o.jsx(a2,{size:10}),(s.selectedKeyframes||[]).length>0?"":""]}),o.jsxs("button",{onClick:()=>{confirm("")&&r(L=>L.map(Se=>Se.id===s.id?{...Se,frames:[],selectedKeyframes:[]}:Se))},className:`text-[10px] px-1.5 py-0.5 rounded transition-colors flex items-center gap-1 flex-nowrap ${e==="dark"?"bg-red-600/30 text-red-300 hover:bg-red-600/50":"bg-red-100 text-red-600 hover:bg-red-200"}`,onMouseDown:L=>L.stopPropagation(),title:"",children:[o.jsx(Cs,{size:10}),""]})]})]})]}),o.jsx("div",{className:"grid gap-3 w-full overflow-y-auto custom-scrollbar flex-1 min-h-0 relative p-1 content-start items-start",style:{gridTemplateColumns:((Nr=s.settings)==null?void 0:Nr.videoExpanded)===!1?"1fr":"repeat(auto-fill, minmax(260px, 1fr))",gridAutoRows:"auto"},onDrop:L=>i1(s.id,L),onDragOver:L=>s1(L,s.id,(s.frames||[]).length),onDragLeave:L=>{L.currentTarget.contains(L.relatedTarget)||(E(null),A(null))},children:(s.frames||[]).length===0?o.jsxs("div",{className:`col-span-full text-[11px] text-zinc-500 text-center py-4 border rounded ${e==="dark"?"bg-zinc-800/40 border-zinc-700":"bg-white/40 border-zinc-300"}`,children:["",o.jsx("div",{className:"mt-1 opacity-50 text-[9px]",children:""})]}):(s.frames||[]).map((L,Se)=>{var qe;const xt=(s.selectedKeyframes||[]).some(ht=>ht.url===L.url&&ht.time===L.time),bn=b===s.id&&z===Se,we=b===s.id&&z===(s.frames||[]).length&&Se===(s.frames||[]).length-1;return o.jsxs("div",{className:"relative",children:[bn&&o.jsx("div",{className:"absolute -top-1.5 left-0 right-0 h-1 bg-red-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.8)] z-50"}),o.jsxs("button",{className:`relative w-full rounded overflow-hidden group transition-all ${xt?"ring-2 ring-blue-500 border-2 border-blue-500 bg-blue-900/30":e==="dark"?"border border-zinc-700 hover:border-zinc-500":"border border-zinc-300 hover:border-zinc-400"}`,onMouseDown:ht=>ht.stopPropagation(),onClick:ht=>c1(s.id,L,Se,ht),onContextMenu:ht=>u1(ht,s.id,L),onDragOver:ht=>r1(ht,s.id,Se),children:[o.jsx(qr,{src:L.url,className:`w-full bg-black ${((qe=s.settings)==null?void 0:qe.videoExpanded)===!1?"h-[90px] object-cover":"aspect-video object-contain max-h-[140px]"}`,alt:`frame-${Se}`}),o.jsxs("div",{className:"absolute left-1 top-1 text-[10px] px-1 py-0.5 rounded bg-black/60 text-white",children:[typeof L.time=="number"?L.time.toFixed(2):L.time,"s"]}),L.filename&&o.jsx("div",{className:"absolute left-0 bottom-0 right-0 bg-black/80 text-white text-[9px] px-1 py-0.5 opacity-0 group-hover:opacity-100 transition-opacity truncate",title:L.filename,children:L.filename}),o.jsxs("div",{className:"absolute top-1 bottom-1 right-1 flex flex-col justify-between items-center z-20 pointer-events-none",children:[o.jsx("div",{className:"pointer-events-auto w-5 h-5 rounded-full border border-white/80 bg-black/40 flex items-center justify-center shrink-0 mb-auto",children:xt?o.jsx(Xa,{size:12,className:"text-white"}):null}),o.jsx("button",{onClick:ht=>{ht.stopPropagation(),r(Ve=>Ve.map(ut=>{if(ut.id!==s.id)return ut;const vt=(ut.frames||[]).filter((Xe,kn)=>kn!==Se),Wt=(ut.selectedKeyframes||[]).filter(Xe=>Xe.url!==L.url);return{...ut,frames:vt,selectedKeyframes:Wt}}))},className:"pointer-events-auto w-5 h-5 rounded bg-red-600/80 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 my-1 shrink-0",title:"",children:o.jsx(Cr,{size:12})}),o.jsxs("div",{className:"pointer-events-auto flex flex-col gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0 mt-auto",children:[Se>0&&o.jsx("button",{onClick:ht=>{ht.stopPropagation(),r(Ve=>Ve.map(ut=>{if(ut.id!==s.id)return ut;const vt=[...ut.frames||[]];[vt[Se-1],vt[Se]]=[vt[Se],vt[Se-1]];const Wt=[...ut.selectedKeyframes||[]],Xe=Wt.findIndex(kn=>kn.url===L.url);return Xe>0&&([Wt[Xe-1],Wt[Xe]]=[Wt[Xe],Wt[Xe-1]]),{...ut,frames:vt,selectedKeyframes:Wt}}))},className:"w-5 h-5 rounded bg-black/70 text-white flex items-center justify-center hover:bg-blue-600",title:"",children:o.jsx(Ad,{size:12})}),Se<(s.frames||[]).length-1&&o.jsx("button",{onClick:ht=>{ht.stopPropagation(),r(Ve=>Ve.map(ut=>{if(ut.id!==s.id)return ut;const vt=[...ut.frames||[]];[vt[Se],vt[Se+1]]=[vt[Se+1],vt[Se]];const Wt=[...ut.selectedKeyframes||[]],Xe=Wt.findIndex(kn=>kn.url===L.url);return Xe>=0&&Xe<Wt.length-1&&([Wt[Xe],Wt[Xe+1]]=[Wt[Xe+1],Wt[Xe]]),{...ut,frames:vt,selectedKeyframes:Wt}}))},className:"w-5 h-5 rounded bg-black/70 text-white flex items-center justify-center hover:bg-blue-600",title:"",children:o.jsx(wi,{size:12})})]})]})]}),we&&o.jsx("div",{className:"absolute -bottom-1.5 left-0 right-0 h-1 bg-red-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.8)] z-50"})]},`${L.url}-${Se}`)})})]})]}),s.type==="text-node"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,children:[o.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b text-xs font-semibold",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Jr,{size:13,className:"text-blue-500"}),o.jsx("span",{children:""})]})}),o.jsx("div",{className:"flex-1 p-3",children:o.jsx("textarea",{"data-node-type":"text-node","data-node-id":s.id,value:((En=s.settings)==null?void 0:En.text)||"",onChange:L=>{kt(s.id,{text:L.target.value})},placeholder:"...",className:`w-full h-full resize-none outline-none text-sm p-2 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:L=>L.stopPropagation()})})]}),s.type==="video-analyze"&&o.jsxs("div",{className:`relative w-full h-full flex flex-col transition-colors pointer-events-auto video-analyze-container ${e==="dark"?"bg-zinc-900/80":"bg-zinc-100"}`,onClick:L=>{const Se=window.getSelection();if(Se&&Se.toString().length>0)return;const xt=L.target;xt&&(xt.tagName==="INPUT"||xt.tagName==="TEXTAREA"||xt.tagName==="SELECT"||xt.tagName==="BUTTON"||xt.isContentEditable||xt.closest('input, textarea, select, button, [contenteditable="true"]'))||L.stopPropagation()},children:[o.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b text-xs font-semibold",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(p2,{size:13,className:"text-blue-500"}),o.jsx("span",{children:" / "})]})}),o.jsx("div",{className:"flex-1 flex flex-col gap-3 p-3 overflow-hidden min-h-0",children:(()=>{var we,qe,ht,Ve,ut,vt,Wt,Xe,kn,In,Fn,te,yt,ft,Q,de,Ce,rt;const L=wa(s.id);if(!L)return o.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 gap-2 text-[11px] text-zinc-500",children:[o.jsx(Ba,{size:24,className:"text-zinc-400"}),o.jsx("span",{children:""})]});const Se=L.videoFileName||"",xt=((we=L.videoMeta)==null?void 0:we.duration)||0,bn=L.selectedKeyframes||[];return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:`text-[11px] px-2 py-1.5 rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-zinc-50 border-zinc-300"}`,children:[o.jsx("div",{className:"flex items-center justify-between mb-1",children:o.jsx("span",{className:"text-zinc-500",children:L.isImageInput?"":""})}),o.jsxs("div",{className:"text-zinc-700 dark:text-zinc-300",children:[o.jsxs("div",{children:[": ",L.isImageInput?"":Se]}),!L.isImageInput&&o.jsxs("div",{children:[": ",xt.toFixed(1),"s"]}),o.jsxs("div",{children:[": ",bn.length," "]})]})]}),o.jsxs("div",{className:`flex items-center gap-2 p-1 rounded-lg border shadow-inner ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-zinc-100 border-zinc-200"}`,children:[o.jsxs("button",{onClick:()=>kt(s.id,{analysisMode:"manual"}),className:`flex-1 py-1 px-2 text-[11px] rounded transition-all flex justify-center items-center gap-1 ${(((qe=s.settings)==null?void 0:qe.analysisMode)||"manual")==="manual"?e==="dark"?"bg-zinc-600 shadow-md text-blue-300 font-bold":"bg-white shadow-md text-blue-600 font-bold":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:fe=>fe.stopPropagation(),children:[o.jsx(im,{size:12})," "]}),o.jsxs("button",{onClick:()=>kt(s.id,{analysisMode:"auto"}),className:`flex-1 py-1 px-2 text-[11px] rounded transition-all flex justify-center items-center gap-1 ${((ht=s.settings)==null?void 0:ht.analysisMode)==="auto"?e==="dark"?"bg-zinc-600 shadow-md text-purple-300 font-bold":"bg-white shadow-md text-purple-600 font-bold":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:fe=>fe.stopPropagation(),children:[o.jsx(Nc,{size:12})," AI "]})]}),(((Ve=s.settings)==null?void 0:Ve.analysisMode)||"manual")==="manual"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-[11px] text-zinc-500",children:":"}),o.jsx("input",{type:"number",min:"1",max:"30",value:((ut=s.settings)==null?void 0:ut.segmentDuration)||3,onChange:fe=>{const ce=parseInt(fe.target.value)||3;kt(s.id,{segmentDuration:ce}),ky(ce.toString());try{localStorage.setItem("tapnow_last_segment_duration",ce.toString())}catch{}},className:`w-16 px-2 py-1 text-[11px] rounded border ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300 text-zinc-800"}`,onMouseDown:fe=>fe.stopPropagation()}),o.jsx("span",{className:"text-[11px] text-zinc-500",children:""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-[11px] text-zinc-500",children:":"}),o.jsxs("div",{className:"relative flex-1",children:[o.jsxs("button",{onClick:fe=>{fe.stopPropagation(),hn((Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="analyze-model"?null:{nodeId:s.id,type:"analyze-model"})},className:`w-full flex items-center justify-between px-2 py-1 rounded text-[11px] border transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300 hover:border-zinc-600":"bg-zinc-50 border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,onMouseDown:fe=>fe.stopPropagation(),children:[o.jsx("span",{className:"truncate font-mono",children:((Wt=en.get((vt=s.settings)==null?void 0:vt.model))==null?void 0:Wt.id)||((Xe=s.settings)==null?void 0:Xe.model)||"gemini-3-pro"}),o.jsx(wi,{size:10,className:"opacity-50 shrink-0 ml-1"})]}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="analyze-model"&&o.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:fe=>fe.stopPropagation(),onMouseLeave:()=>Kr(null),children:[o.jsx("div",{className:`w-24 border-r pr-1 max-h-80 overflow-y-auto custom-scrollbar ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(js).filter(([,fe])=>fe.models.some(ce=>ce.type==="Chat")).map(([fe,ce])=>o.jsx("button",{onMouseEnter:()=>Kr(fe),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${or===fe?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:ce.name||fe},fe))}),o.jsxs("div",{className:"flex-1 pl-1 max-h-80 overflow-y-auto custom-scrollbar",children:[or&&((kn=js[or])==null?void 0:kn.models.filter(fe=>fe.type==="Chat").map(fe=>{var ce;return o.jsxs("button",{onClick:()=>{kt(s.id,{model:fe.id}),jy(fe.id);try{localStorage.setItem("tapnow_last_analyze_model",fe.id)}catch{}hn(null),Kr(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${((ce=s.settings)==null?void 0:ce.model)===fe.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[o.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:fe.id}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Hi(fe.id)}`})]},fe.id)})),!or&&o.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]})]})]}),o.jsx("button",{onClick:()=>{var fe;return((fe=s.settings)==null?void 0:fe.analysisMode)==="auto"?Jy(s.id):Zy(s.id)},disabled:s.isGenerating||(((In=s.settings)==null?void 0:In.analysisMode)||"manual")==="manual"&&bn.length===0,className:`w-full px-3 py-2 rounded text-xs font-medium transition-colors flex items-center justify-center gap-2 ${s.isGenerating?"bg-zinc-600 text-zinc-400 cursor-not-allowed":((Fn=s.settings)==null?void 0:Fn.analysisMode)==="auto"?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-lg":"bg-blue-600 hover:bg-blue-500 text-white"}`,onMouseDown:fe=>fe.stopPropagation(),children:s.isGenerating?o.jsxs(o.Fragment,{children:[o.jsx(Ss,{size:14,className:"animate-spin"}),o.jsx("span",{children:((te=s.settings)==null?void 0:te.analysisMode)==="auto"?"AI ...":"..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Nc,{size:14}),o.jsx("span",{children:((yt=s.settings)==null?void 0:yt.analysisMode)==="auto"?"":""})]})}),s.errorMsg&&o.jsx("div",{className:"text-[10px] text-red-500 px-2 py-1 rounded bg-red-500/10",children:s.errorMsg})]}),((ft=s.settings)==null?void 0:ft.analysisMode)==="auto"&&((de=(Q=s.settings)==null?void 0:Q.analysisResults)==null?void 0:de.length)>0&&o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pt-2",children:[((Ce=s.settings.voiceoverResults)==null?void 0:Ce.length)>0&&o.jsxs("div",{className:`p-2 rounded-lg mb-4 ${e==="dark"?"bg-zinc-700/50 border border-zinc-700":"bg-zinc-50 border border-blue-200"}`,children:[o.jsxs("h4",{className:`text-xs font-semibold mb-2 flex items-center gap-1 ${e==="dark"?"text-white":"text-blue-700"}`,children:[o.jsx(m2,{size:12})," "]}),o.jsx("div",{className:"space-y-1",children:s.settings.voiceoverResults.map((fe,ce)=>o.jsxs("p",{className:`text-[10px] select-text cursor-text ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,onMouseDown:Me=>Me.stopPropagation(),children:[o.jsxs("span",{className:"font-mono text-xs mr-2 opacity-70",children:["[",fe.time_range||`${fe.time}s`,"]"]}),fe.text||o.jsx("span",{className:"text-zinc-400 italic",children:""})]},ce))})]}),o.jsxs("h4",{className:`text-xs font-semibold mb-3 flex items-center gap-1 ${e==="dark"?"text-white":"text-zinc-800"}`,children:[o.jsx(im,{size:12}),"  (",s.settings.analysisResults.length," )"]}),o.jsx("div",{className:"space-y-4",children:s.settings.analysisResults.map((fe,ce)=>{var Me,Be,Re,jt,Nt,Ct,K,Qe;return o.jsxs("div",{className:`p-3 rounded-lg ${e==="dark"?"bg-zinc-800 border border-zinc-700":"bg-zinc-50 border border-zinc-200"}`,children:[o.jsxs("h5",{className:`text-sm font-bold mb-2 ${e==="dark"?"text-purple-400":"text-purple-700"}`,children:[" ",fe.scene_index||fe.scene_id||ce+1," ",o.jsxs("span",{className:"text-xs font-normal opacity-70 ml-2",children:["(",fe.time_range,")"]})]}),o.jsxs("div",{className:"text-[11px] space-y-1 mb-3",children:[((Be=(Me=fe.keyframes)==null?void 0:Me[0])==null?void 0:Be.description)&&o.jsxs("p",{className:`select-text cursor-text ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,onMouseDown:Je=>Je.stopPropagation(),children:[o.jsx("span",{className:"font-semibold mr-1",children:"/:"})," ",fe.keyframes[0].description]}),((jt=(Re=fe.global_tags)==null?void 0:Re.style)==null?void 0:jt[0])&&o.jsxs("p",{className:`select-text cursor-text ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,onMouseDown:Je=>Je.stopPropagation(),children:[o.jsx("span",{className:"font-semibold mr-1",children:"/:"})," ",fe.global_tags.style[0]]})]}),o.jsxs("div",{className:"space-y-2",children:[((Ct=(Nt=fe.keyframes)==null?void 0:Nt[0])==null?void 0:Ct.jimeng_prompt)&&o.jsxs("div",{className:`p-2 rounded ${e==="dark"?"bg-zinc-700 border border-zinc-600":"bg-zinc-50 border border-gray-300"}`,children:[o.jsxs("h6",{className:`text-[10px] font-semibold mb-1 flex items-center gap-1 ${e==="dark"?"text-yellow-300":"text-yellow-700"}`,children:[o.jsx(am,{size:10}),"  Prompt"]}),o.jsx("p",{className:`text-[10px] whitespace-pre-wrap select-text cursor-text ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,onMouseDown:Je=>Je.stopPropagation(),children:fe.keyframes[0].jimeng_prompt}),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(fe.keyframes[0].jimeng_prompt),className:"mt-1 flex items-center text-[9px] text-blue-400 hover:text-blue-300",onMouseDown:Je=>Je.stopPropagation(),children:[o.jsx(om,{size:10,className:"mr-1"})," "]})]}),((Qe=(K=fe.keyframes)==null?void 0:K[0])==null?void 0:Qe.mj_prompt)&&o.jsxs("div",{className:`p-2 rounded ${e==="dark"?"bg-zinc-700 border border-zinc-600":"bg-zinc-50 border border-gray-300"}`,children:[o.jsxs("h6",{className:`text-[10px] font-semibold mb-1 flex items-center gap-1 ${e==="dark"?"text-green-300":"text-green-700"}`,children:[o.jsx(am,{size:10})," MJ Prompt"]}),o.jsx("p",{className:`text-[10px] whitespace-pre-wrap select-text cursor-text ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,onMouseDown:Je=>Je.stopPropagation(),children:fe.keyframes[0].mj_prompt}),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(fe.keyframes[0].mj_prompt),className:"mt-1 flex items-center text-[9px] text-blue-400 hover:text-blue-300",onMouseDown:Je=>Je.stopPropagation(),children:[o.jsx(om,{size:10,className:"mr-1"})," "]})]})]})]},ce)})})]}),(((rt=s.settings)==null?void 0:rt.analysisMode)||"manual")==="manual"&&s.analysisResults&&s.analysisResults.length>0?o.jsxs("div",{className:"space-y-3 flex-1 flex flex-col min-h-0",children:[o.jsxs("div",{className:"text-[11px] font-medium text-zinc-700 dark:text-zinc-300 shrink-0",children:[" (",s.analysisResults.length," )"]}),o.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto custom-scrollbar min-h-0",children:s.analysisResults.map((fe,ce)=>{var Ct,K,Qe,Je,ve,Te,mt;const Me=He=>{var Dt,Rn;const At=(Dt=L.selectedKeyframes)==null?void 0:Dt.find(Yt=>Math.abs(Yt.time-He)<.1);if(At)return At.url;const gt=(Rn=L.frames)==null?void 0:Rn.find(Yt=>Math.abs(Yt.time-He)<.1);return(gt==null?void 0:gt.url)||null},Be=((Ct=fe.keyframes)==null?void 0:Ct.find(He=>He.type==="current"))||((K=fe.keyframes)==null?void 0:K[0]),Re=(Qe=fe.keyframes)==null?void 0:Qe.find(He=>He.type==="prev"),jt=(Je=fe.keyframes)==null?void 0:Je.find(He=>He.type==="next"),Nt=(Be==null?void 0:Be.description)||((Te=(ve=fe.keyframes)==null?void 0:ve[0])==null?void 0:Te.description)||"";return o.jsxs("div",{className:`p-3 rounded-lg border ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-white border-zinc-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"font-medium text-[11px] text-zinc-800 dark:text-zinc-200",children:[" ",fe.scene_index||ce+1]}),o.jsx("div",{className:"text-[10px] text-zinc-500",children:fe.time_range})]}),o.jsx("div",{className:"text-[10px] text-zinc-600 dark:text-zinc-400 mb-3 line-clamp-2 select-text cursor-text",onMouseDown:He=>He.stopPropagation(),children:Nt}),o.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[Re,Be,jt].map((He,At)=>{if(!He)return o.jsx("div",{className:"aspect-video bg-zinc-200 dark:bg-zinc-700 rounded"},At);const gt=Me(He.time);return o.jsxs("div",{className:"relative aspect-video bg-black rounded overflow-hidden",children:[gt?o.jsx("img",{src:gt,className:"w-full h-full object-cover",alt:` ${At+1}`,loading:"lazy"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] text-zinc-500",children:He.type==="prev"?"":He.type==="current"?"":""}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[8px] px-1 py-0.5 text-center",children:[He.time.toFixed(1),"s"]})]},At)})}),o.jsx("div",{className:"space-y-2",children:(mt=fe.keyframes)==null?void 0:mt.map((He,At)=>o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"text-[9px] text-zinc-500",children:[He.type==="prev"?"":He.type==="current"?"":""," (",He.time.toFixed(1),"s)"]}),He.mj_prompt&&o.jsx("div",{className:`p-2 rounded border ${e==="dark"?"bg-zinc-900 border-zinc-600":"bg-zinc-50 border-zinc-200"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[9px] text-zinc-500 mb-1",children:"Midjourney "}),o.jsx("div",{className:"text-[10px] text-zinc-700 dark:text-zinc-300 break-words select-text cursor-text",onMouseDown:gt=>gt.stopPropagation(),children:He.mj_prompt})]}),o.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[o.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(He.mj_prompt),alert("")}catch{alert("")}},className:`p-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:gt=>gt.stopPropagation(),title:"",children:o.jsx(So,{size:12})}),o.jsx("button",{onClick:()=>{const gt=cn(s.x+s.width+100,s.y+s.height/2),Dt=`node-${Date.now()}`,Rn={id:Dt,type:"gen-image",x:gt.x-180,y:gt.y-170,width:360,height:340,settings:{model:"mj-v6",prompt:He.mj_prompt,ratio:"Auto",resolution:"Auto"}};r(Yt=>[...Yt,Rn]),setTimeout(()=>{const Yt=cn(s.x+s.width+200,s.y+s.height/2),fn=`node-${Date.now()+1}`,_a={id:fn,type:"preview",x:Yt.x-160,y:Yt.y-130,width:320,height:260};r(Vi=>[...Vi,_a]),a(Vi=>[...Vi,{id:`conn-${Date.now()}`,from:Dt,to:fn}])},50)},className:"p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-blue-600 dark:text-blue-400",onMouseDown:gt=>gt.stopPropagation(),title:"",children:o.jsx(Rd,{size:12})})]})]})}),He.jimeng_prompt&&o.jsx("div",{className:`p-2 rounded border ${e==="dark"?"bg-zinc-900 border-zinc-600":"bg-zinc-50 border-zinc-200"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[9px] text-zinc-500 mb-1",children:""}),o.jsx("div",{className:"text-[10px] text-zinc-700 dark:text-zinc-300 break-words select-text cursor-text",onMouseDown:gt=>gt.stopPropagation(),children:He.jimeng_prompt})]}),o.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(He.jimeng_prompt),alert("")}catch{alert("")}},className:`p-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:gt=>gt.stopPropagation(),title:"",children:o.jsx(So,{size:12})})]})})]},At))}),fe.global_tags&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-zinc-300 dark:border-zinc-700",children:[o.jsx("div",{className:"text-[9px] text-zinc-500 mb-1",children:""}),o.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(fe.global_tags).map(([He,At])=>Array.isArray(At)&&At.map((gt,Dt)=>o.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:gt},`${He}-${Dt}`)))})]})]},ce)})})]}):null]})})()})]}),s.type==="storyboard-node"&&(()=>{var bn,we,qe,ht,Ve,ut,vt,Wt,Xe,kn,In,Fn;const L=(te,yt)=>{var Q;const ft=(Q=te.target.files)==null?void 0:Q[0];if(ft){const de=new FileReader;de.onload=Ce=>on(s.id,yt,{image_url:Ce.target.result}),de.readAsDataURL(ft)}},Se=(te,yt)=>{const ft=te.clipboardData.items;for(let Q=0;Q<ft.length;Q++)if(ft[Q].type.indexOf("image")!==-1){te.preventDefault(),te.stopPropagation();const de=ft[Q].getAsFile(),Ce=new FileReader;Ce.onload=rt=>on(s.id,yt,{image_url:rt.target.result}),Ce.readAsDataURL(de);return}},xt=(te,yt)=>{if(te.preventDefault(),te.stopPropagation(),te.dataTransfer.files&&te.dataTransfer.files.length>0){const ft=te.dataTransfer.files[0];if(ft.type.startsWith("image/")){const Q=new FileReader;Q.onload=de=>on(s.id,yt,{image_url:de.target.result}),Q.readAsDataURL(ft);return}}};return o.jsxs("div",{className:`flex flex-col h-full rounded-xl overflow-hidden pointer-events-auto transition-colors ${e==="dark"?"bg-zinc-950 border border-zinc-800":"bg-white border border-zinc-300 shadow-sm"}`,onMouseEnter:()=>ia(!0),onMouseLeave:()=>ia(!1),children:[o.jsxs("div",{className:`px-4 py-3 border-b flex justify-between items-center shrink-0 ${e==="dark"?"bg-zinc-900 border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_c,{size:16,className:"text-purple-500"}),o.jsx("span",{className:`font-bold text-xs ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,children:""}),o.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"/"}),o.jsx("input",{type:"text",value:((bn=s.settings)==null?void 0:bn.projectTitle)||"",onChange:te=>kt(s.id,{projectTitle:te.target.value}),placeholder:"",className:`font-bold text-xs bg-transparent border-b border-transparent hover:border-zinc-500 focus:border-blue-500 outline-none w-32 transition-colors ${e==="dark"?"text-zinc-200 placeholder-zinc-500":"text-zinc-800 placeholder-zinc-400"}`,onMouseDown:te=>te.stopPropagation(),onClick:te=>te.stopPropagation(),onKeyDown:te=>te.stopPropagation()}),o.jsxs("div",{className:`flex items-center ml-2 p-0.5 rounded-full ${e==="dark"?"bg-zinc-800":"bg-zinc-200"}`,children:[o.jsx("button",{onClick:te=>{te.stopPropagation(),kt(s.id,{mode:"image"})},className:`text-[10px] px-2 py-0.5 rounded-full transition-all ${(((we=s.settings)==null?void 0:we.mode)||"video")==="image"?"bg-blue-500 text-white shadow-sm":e==="dark"?"text-zinc-400 hover:text-zinc-200":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:te=>te.stopPropagation(),title:"",children:""}),o.jsx("button",{onClick:te=>{te.stopPropagation(),kt(s.id,{mode:"video"})},className:`text-[10px] px-2 py-0.5 rounded-full transition-all ${(((qe=s.settings)==null?void 0:qe.mode)||"video")==="video"?"bg-green-500 text-white shadow-sm":e==="dark"?"text-zinc-400 hover:text-zinc-200":"text-zinc-500 hover:text-zinc-700"}`,onMouseDown:te=>te.stopPropagation(),title:"",children:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2 relative z-10",children:[o.jsx("button",{onClick:te=>{te.stopPropagation(),confirm("")&&kt(s.id,{shots:[]})},className:"p-1 hover:bg-red-100 hover:text-red-500 rounded text-zinc-400 transition-colors",title:"",children:o.jsx(Cs,{size:14})}),o.jsxs("button",{onClick:()=>{var yt,ft;const te=ka(s.id);if(te.length>0){const Q=te.join(`
`),de=/#\s*(\d+)\s*([^#]*)|\s*(\d+)\s*\s*([^#]*)/g,Ce=[];let rt;for(;(rt=de.exec(Q))!==null;){const fe=parseInt(rt[1]||rt[3]),ce=(rt[2]||rt[4]||"").trim();ce&&Ce.push({num:fe,text:ce})}if(Ce.length===0&&Q.split(`
`).filter(ce=>ce.trim()).forEach((ce,Me)=>{const Be=ce.match(/^(\d+)[.\s]+(.*)/);Be?Ce.push({num:parseInt(Be[1]),text:Be[2].trim()}):Ce.push({num:Me+1,text:ce.trim()})}),Ce.length>0){const fe=((yt=s.settings)==null?void 0:yt.shots)||[],ce=[...fe];Ce.forEach((Me,Be)=>{Be<fe.length?ce[Be]={...ce[Be],prompt:Me.text,description:Me.text}:ce.push({id:Date.now()+Math.random()+Be,prompt:Me.text,description:Me.text,model:localStorage.getItem("tapnow_last_video_model")||"",duration:5,status:"draft"})}),kt(s.id,{shots:ce})}else alert(" (: #1 )")}else kt(s.id,{scriptExpanded:!((ft=s.settings)!=null&&ft.scriptExpanded)})},className:`text-xs px-2 py-1 rounded transition-colors flex items-center gap-1 ${e==="dark"?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-500 hover:bg-purple-400 text-white"}`,onMouseDown:te=>te.stopPropagation(),title:ka(s.id).length>0?"":"",children:[o.jsx(Jr,{size:12}),o.jsx("span",{className:"whitespace-nowrap",children:""})]}),(()=>{var ft;const te=wa(s.id),yt=((ft=te==null?void 0:te.selectedKeyframes)==null?void 0:ft.length)||0;return o.jsxs("button",{onClick:()=>{var fe;if(!te||yt===0){alert("");return}const Q=te.selectedKeyframes,de=((fe=s.settings)==null?void 0:fe.shots)||[],Ce=Math.max(de.length,Q.length),rt=Array.from({length:Ce},(ce,Me)=>{var Be,Re,jt,Nt,Ct,K,Qe,Je,ve;return{id:((Be=de[Me])==null?void 0:Be.id)||`shot-${Date.now()}-${Me}`,...de[Me],prompt:((Re=de[Me])==null?void 0:Re.prompt)??"",description:((jt=de[Me])==null?void 0:jt.description)??"",model:((Nt=de[Me])==null?void 0:Nt.model)||localStorage.getItem("tapnow_last_video_model")||"",image_url:((Ct=Q[Me])==null?void 0:Ct.url)??((K=de[Me])==null?void 0:K.image_url)??"",image_filename:((Qe=Q[Me])==null?void 0:Qe.filename)||((Je=de[Me])==null?void 0:Je.image_filename)||"",status:((ve=de[Me])==null?void 0:ve.status)||"draft"}});me(),kt(s.id,{shots:rt}),console.log(`[KeyframeImport] Imported ${Q.length} images, merged to ${rt.length} shots`)},className:`text-xs px-2 py-1 rounded transition-colors flex items-center gap-1 ${yt>0?"bg-blue-600 hover:bg-blue-500 text-white":e==="dark"?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-zinc-200 text-zinc-500 cursor-not-allowed"}`,onMouseDown:Q=>Q.stopPropagation(),disabled:yt===0,title:yt>0?` ${yt} `:"",children:[o.jsx(jc,{size:12}),o.jsxs("span",{className:"whitespace-nowrap",children:["",yt>0?` (${yt})`:""]})]})})(),o.jsxs("div",{className:`flex items-center gap-1 border-l pl-2 ml-1 ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,children:[o.jsx("input",{type:"number",min:"0",max:"20",value:J,onChange:te=>ue(Math.max(0,parseInt(te.target.value)||0)),className:`w-8 text-center text-xs rounded border outline-none py-0.5 ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300"}`,title:" (0=)"}),o.jsx("button",{onClick:()=>{var ft;const te=(((ft=s.settings)==null?void 0:ft.shots)||[]).filter(Q=>Q.status!=="done"&&Q.status!=="generating");if(te.length===0){alert("");return}const yt=te.map(Q=>({nodeId:s.id,shotId:Q.id,retryCount:0}));R(Q=>[...Q,...yt]),console.log(`[Batch] Added ${yt.length} shots to queue. Concurrency: ${J}`)},className:`p-1 rounded transition-colors ${e==="dark"?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-yellow-500 hover:bg-yellow-400 text-white"}`,title:"",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(mm,{size:12,fill:"currentColor"}),o.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:""})]})}),o.jsx("button",{onClick:async()=>{var Q,de,Ce;const te=((Q=s.settings)==null?void 0:Q.mode)||"video",yt=(((de=s.settings)==null?void 0:de.shots)||[]).filter(rt=>te==="image"?rt.output_url:rt.video_url);if(yt.length===0){alert(`${te==="image"?"":""}`);return}const ft=((Ce=s.settings)==null?void 0:Ce.projectTitle)||"";for(let rt=0;rt<yt.length;rt++){const fe=yt[rt],ce=te==="image"?fe.output_url:fe.video_url,Me=te==="image"?"png":"mp4",Be=`${ft}_${rt+1}.${Me}`;try{const jt=await(await fetch(ce)).blob(),Nt=document.createElement("a");Nt.href=URL.createObjectURL(jt),Nt.download=Be,Nt.click(),URL.revokeObjectURL(Nt.href)}catch(Re){console.error("Download failed:",Re)}await new Promise(Re=>setTimeout(Re,300))}},className:`p-1 rounded transition-colors ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-600"}`,title:"",onMouseDown:te=>te.stopPropagation(),children:o.jsx(Fa,{size:12})}),o.jsx("button",{onClick:te=>{var yt;te.stopPropagation(),kt(s.id,{showOutputPreview:!((yt=s.settings)!=null&&yt.showOutputPreview)})},className:`p-1 rounded transition-colors ${(ht=s.settings)!=null&&ht.showOutputPreview?"bg-blue-500 text-white":e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-400":"bg-zinc-200 hover:bg-zinc-300 text-zinc-500"}`,title:(Ve=s.settings)!=null&&Ve.showOutputPreview?"":"",onMouseDown:te=>te.stopPropagation(),children:o.jsx(Za,{size:12,className:`transition-transform ${(ut=s.settings)!=null&&ut.showOutputPreview?"rotate-90":""}`})})]}),((vt=s.settings)==null?void 0:vt.showOutputPreview)&&o.jsx("button",{onClick:te=>{var Q;te.stopPropagation();const yt=((Q=s.settings)==null?void 0:Q.shots)||[],ft=yt.every(de=>de.outputSelected);kt(s.id,{shots:yt.map(de=>({...de,outputSelected:!ft}))})},className:`text-[10px] px-2 py-1 rounded transition-colors ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-600"}`,onMouseDown:te=>te.stopPropagation(),title:"/",children:(((Wt=s.settings)==null?void 0:Wt.shots)||[]).every(te=>te.outputSelected)?"":""})]})]}),((Xe=s.settings)==null?void 0:Xe.scriptExpanded)&&o.jsxs("div",{className:`border-b shrink-0 p-3 space-y-2 ${e==="dark"?"bg-zinc-900/30 border-zinc-800":"bg-zinc-50/50 border-zinc-200"}`,children:[o.jsx("textarea",{value:((kn=s.settings)==null?void 0:kn.scriptText)||"",onChange:te=>kt(s.id,{scriptText:te.target.value}),placeholder:": #1  #2  ...",className:`w-full h-24 p-2 text-xs rounded border resize-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 placeholder-zinc-500":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onMouseDown:te=>te.stopPropagation()}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsx("button",{onClick:()=>{var Me,Be;const yt=ka(s.id).join(`
`),ft=((Me=s.settings)==null?void 0:Me.scriptText)||"",Q=yt||ft;console.log("[ScriptSplitter] Text source:",yt?"connected node":"internal","length:",Q.length);const de=[],Ce=/#\s*(\d+)\s*([^#]*)|\s*(\d+)\s*\s*([^#]*)/g;let rt;for(;(rt=Ce.exec(Q))!==null;){const Re=parseInt(rt[1]||rt[3]),jt=(rt[2]||rt[4]||"").trim();jt&&de.push({num:Re,text:jt})}if(de.length===0&&Q.split(`
`).filter(jt=>jt.trim()).forEach((jt,Nt)=>{const Ct=jt.match(/^(\d+)[.\s]+(.*)/);Ct?de.push({num:parseInt(Ct[1]),text:Ct[2].trim()}):de.push({num:Nt+1,text:jt.trim()})}),de.length===0){alert(": #1  #2 ");return}de.sort((Re,jt)=>Re.num-jt.num);const fe=((Be=s.settings)==null?void 0:Be.shots)||[],ce=[...fe];de.forEach((Re,jt)=>{jt<fe.length?ce[jt]={...ce[jt],prompt:Re.text,description:Re.text}:ce.push({id:Date.now()+Math.random()+jt,prompt:Re.text,description:Re.text,model:localStorage.getItem("tapnow_last_video_model")||"",duration:5,status:"draft"})}),kt(s.id,{shots:ce,scriptExpanded:!1}),console.log("[ScriptSplitter] Merged/Generated shots from text")},className:"px-3 py-1.5 text-xs bg-purple-600 text-white rounded hover:bg-purple-500 transition-colors",onMouseDown:te=>te.stopPropagation(),children:""}),o.jsx("span",{className:`text-[10px] self-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:" #1 #2 "})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3 min-h-0 bg-opacity-50",onWheel:te=>{te.stopPropagation()},children:((Fn=(In=s.settings)==null?void 0:In.shots)==null?void 0:Fn.length)>0?s.settings.shots.map((te,yt)=>{var Q,de,Ce,rt,fe,ce,Me,Be,Re,jt,Nt,Ct;const ft=(Vr==null?void 0:Vr.nodeId)===s.id&&(Vr==null?void 0:Vr.shotId)===te.id;return o.jsxs(xu.Fragment,{children:[o.jsxs("div",{className:"relative h-2 -mt-1 -mb-1 z-10 group/insert flex items-center justify-center cursor-pointer hover:h-6 transition-all",onClick:K=>{K.stopPropagation();const Qe=[...s.settings.shots||[]];Qe.splice(yt,0,{id:Date.now()+Math.random(),prompt:"",description:"",model:localStorage.getItem("tapnow_last_video_model")||"",duration:5,status:"draft"}),kt(s.id,{shots:Qe})},title:"",children:[o.jsx("div",{className:"w-full h-[2px] bg-blue-500 opacity-0 group-hover/insert:opacity-100 transition-opacity"}),o.jsx("div",{className:"absolute w-5 h-5 rounded-full bg-blue-600 text-white flex items-center justify-center opacity-0 group-hover/insert:opacity-100 transition-opacity shadow-sm scale-75 group-hover/insert:scale-100",children:o.jsx(Gs,{size:12})})]}),o.jsxs("div",{tabIndex:0,onClick:K=>{K.stopPropagation(),oa({nodeId:s.id,shotId:te.id}),K.currentTarget.focus()},onPaste:K=>Se(K,te.id),className:`flex gap-3 p-3 rounded-lg border transition-all group/shot cursor-pointer outline-none focus:ring-2 focus:ring-blue-500/50 ${ft?"border-blue-500 ring-1 ring-blue-500 bg-blue-500/5 z-10":e==="dark"?"bg-zinc-900/50 border-zinc-800 hover:border-zinc-600":"bg-white border-zinc-200 hover:border-blue-300 hover:shadow-md"}`,children:[o.jsx("div",{className:`font-mono text-sm w-6 shrink-0 flex items-start pt-1 font-bold ${e==="dark"?"text-zinc-600":"text-zinc-400"}`,children:yt+1}),o.jsxs("div",{className:`w-32 aspect-video rounded border relative group overflow-hidden shrink-0 transition-colors ${e==="dark"?"bg-black border-zinc-800":"bg-zinc-100 border-zinc-300"}`,onClick:K=>{K.stopPropagation()},onDrop:K=>xt(K,te.id),onDragOver:K=>K.preventDefault(),children:[te.video_url?o.jsxs(o.Fragment,{children:[o.jsx("video",{src:te.video_url,className:"w-full h-full object-cover rounded",controls:!0,preload:"metadata",onMouseDown:K=>K.stopPropagation()}),o.jsx("button",{onClick:K=>{K.stopPropagation(),on(s.id,te.id,{video_url:"",status:"draft"})},className:`absolute top-1 right-1 p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity ${e==="dark"?"bg-black/60 hover:bg-red-600 text-white":"bg-white/80 hover:bg-red-500 text-white"}`,title:"",children:o.jsx(Cr,{size:10})})]}):te.image_url?o.jsxs(o.Fragment,{children:[(()=>{let K=te.image_filename||"";if(!K&&te.image_url)try{if(!te.image_url.startsWith("data:")){const Qe=new URL(te.image_url).pathname;K=decodeURIComponent(Qe.split("/").pop()||""),K.startsWith("blob")&&(K="")}}catch{}return K?o.jsx("div",{className:`absolute top-0 left-0 right-0 px-1 py-0.5 text-[8px] truncate z-10 ${e==="dark"?"bg-black/70 text-zinc-300":"bg-white/80 text-zinc-700"}`,title:K,children:K.length>20?K.slice(0,20)+"...":K}):null})(),o.jsx(qr,{src:te.image_url,className:"w-full h-full object-cover cursor-pointer",alt:` ${yt+1}`,onDoubleClick:K=>{K.stopPropagation(),Un({url:te.image_url,type:"image",prompt:te.prompt||te.description||` ${yt+1}`})},onError:K=>{K.target.style.display="none";const Qe=document.createElement("div");Qe.className=`w-full h-full flex items-center justify-center flex-col gap-1 ${e==="dark"?"bg-zinc-900 text-zinc-600":"bg-zinc-100 text-zinc-400"}`,Qe.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg><span class="text-[8px]"></span>',K.target.parentNode&&K.target.parentNode.appendChild(Qe)},title:""}),te.status!=="generating"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:K=>{K.stopPropagation(),Un({url:te.image_url,type:"image",prompt:te.prompt||te.description||` ${yt+1}`})},className:`absolute bottom-1 left-1 p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity z-20 ${e==="dark"?"bg-black/60 hover:bg-blue-600 text-white":"bg-white/80 hover:bg-blue-500 text-white"}`,title:"",children:o.jsx(Ha,{size:10})}),o.jsx("button",{onClick:K=>{K.stopPropagation(),on(s.id,te.id,{image_url:""})},className:`absolute top-1 right-1 p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity ${e==="dark"?"bg-black/60 hover:bg-red-600 text-white":"bg-white/80 hover:bg-red-500 text-white"}`,title:"",children:o.jsx(Cr,{size:10})})]})]}):te.status==="generating"?o.jsxs("div",{className:`w-full h-full flex flex-col items-center justify-center text-[10px] gap-2 ${e==="dark"?"bg-zinc-900 text-zinc-300":"bg-zinc-100 text-zinc-600"}`,children:[o.jsx(Ss,{size:20,className:"animate-spin text-blue-500"}),o.jsx("span",{children:"..."})]}):o.jsxs("div",{className:`w-full h-full flex flex-col items-center justify-center text-[10px] gap-1 ${e==="dark"?"text-zinc-700":"text-zinc-400"}`,children:[o.jsx(Rd,{size:14}),o.jsx("span",{children:"/"})]}),!te.video_url&&!te.image_url&&o.jsxs("label",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-white text-xs transition-opacity cursor-pointer",children:[o.jsxs("span",{className:"flex flex-col items-center gap-1",children:[o.jsx(Pd,{size:14}),""]}),o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:K=>L(K,te.id)})]})]}),(((Q=s.settings)==null?void 0:Q.mode)||"video")==="video"&&te.useFirstLastFrame&&o.jsxs("div",{className:`flex gap-1 mt-1 ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[8px] mb-0.5 text-center",children:""}),o.jsx("div",{className:`aspect-video rounded border overflow-hidden relative group cursor-pointer ${te.firstFrame?e==="dark"?"border-blue-500":"border-blue-400":e==="dark"?"border-zinc-700 border-dashed":"border-zinc-300 border-dashed"}`,onClick:K=>K.stopPropagation(),onMouseDown:K=>K.stopPropagation(),children:te.firstFrame?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:te.firstFrame,className:"w-full h-full object-cover",alt:""}),o.jsx("button",{onClick:K=>{K.stopPropagation(),on(s.id,te.id,{firstFrame:""})},className:"absolute top-0.5 right-0.5 p-0.5 rounded bg-black/60 text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:o.jsx(Cr,{size:8})})]}):o.jsxs("label",{className:"w-full h-full flex items-center justify-center text-[8px] cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[o.jsx(Gs,{size:10}),o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:K=>{var Je;const Qe=(Je=K.target.files)==null?void 0:Je[0];if(Qe){const ve=new FileReader;ve.onload=Te=>on(s.id,te.id,{firstFrame:Te.target.result}),ve.readAsDataURL(Qe)}}})]})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[8px] mb-0.5 text-center",children:""}),o.jsx("div",{className:`aspect-video rounded border overflow-hidden relative group cursor-pointer ${te.lastFrame?e==="dark"?"border-green-500":"border-green-400":e==="dark"?"border-zinc-700 border-dashed":"border-zinc-300 border-dashed"}`,onClick:K=>K.stopPropagation(),onMouseDown:K=>K.stopPropagation(),children:te.lastFrame?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:te.lastFrame,className:"w-full h-full object-cover",alt:""}),o.jsx("button",{onClick:K=>{K.stopPropagation(),on(s.id,te.id,{lastFrame:""})},className:"absolute top-0.5 right-0.5 p-0.5 rounded bg-black/60 text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:o.jsx(Cr,{size:8})})]}):o.jsxs("label",{className:"w-full h-full flex items-center justify-center text-[8px] cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[o.jsx(Gs,{size:10}),o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:K=>{var Je;const Qe=(Je=K.target.files)==null?void 0:Je[0];if(Qe){const ve=new FileReader;ve.onload=Te=>on(s.id,te.id,{lastFrame:Te.target.result}),ve.readAsDataURL(Qe)}}})]})})]})]}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:K=>{K.stopPropagation(),hn((Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="shot-model"&&Ge.shotId===te.id?null:{nodeId:s.id,type:"shot-model",shotId:te.id})},onMouseDown:K=>K.stopPropagation(),className:`flex items-center justify-between gap-1 px-2 py-1 rounded border text-xs transition-colors min-w-[100px] ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,children:[o.jsx("span",{className:"truncate font-mono text-[10px]",children:(()=>{var Je,ve,Te;const Qe=(((Je=s.settings)==null?void 0:Je.mode)||"video")==="image"?"tapnow_last_image_model":"tapnow_last_video_model";return((ve=en.get(te.model))==null?void 0:ve.modelName)||te.model||((Te=en.get(localStorage.getItem(Qe)))==null?void 0:Te.modelName)||""})()}),o.jsx(wi,{size:10,className:"opacity-50 shrink-0"})]}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="shot-model"&&Ge.shotId===te.id&&o.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:K=>K.stopPropagation(),onMouseLeave:()=>Kr(null),children:[o.jsx("div",{className:`w-24 border-r pr-1 max-h-80 overflow-y-auto custom-scrollbar ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(js).filter(([,K])=>{var ve;const Je=(((ve=s.settings)==null?void 0:ve.mode)||"video")==="image"?"Image":"Video";return K.models.some(Te=>Te.type===Je)}).map(([K,Qe])=>o.jsx("button",{onMouseEnter:()=>Kr(K),className:`w-full text-left px-2 py-1.5 text-[10px] rounded transition-colors ${or===K?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:text-zinc-300":"text-zinc-600 hover:text-zinc-800"}`,children:Qe.name||K},K))}),o.jsxs("div",{className:"flex-1 pl-1 max-h-80 overflow-y-auto custom-scrollbar",children:[or&&((de=js[or])==null?void 0:de.models.filter(K=>{var Je;const Qe=((Je=s.settings)==null?void 0:Je.mode)||"video";return K.type===(Qe==="image"?"Image":"Video")}).map(K=>o.jsxs("button",{onClick:()=>{var ve;const Qe=za(K.id);on(s.id,te.id,{model:K.id,duration:te.duration||Qe}),(((ve=s.settings)==null?void 0:ve.mode)||"video")==="image"?(Qp(K.id),localStorage.setItem("tapnow_last_image_model",K.id)):(th(K.id),localStorage.setItem("tapnow_last_video_model",K.id)),hn(null),Kr(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${te.model===K.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[o.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:K.id}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Hi(K.id)}`})]},K.id))),!or&&o.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]}),o.jsx("select",{value:te.ratio||"16:9",onChange:K=>on(s.id,te.id,{ratio:K.target.value}),onClick:K=>K.stopPropagation(),onMouseDown:K=>K.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,children:["16:9","9:16","1:1","4:3","3:4"].map(K=>o.jsx("option",{value:K,children:K},K))}),(((Ce=te.model)==null?void 0:Ce.includes("jimeng"))||((fe=(rt=en.get(te.model))==null?void 0:rt.modelName)==null?void 0:fe.includes("jimeng")))&&o.jsxs("select",{value:te.resolution||"720p",onChange:K=>on(s.id,te.id,{resolution:K.target.value}),onClick:K=>K.stopPropagation(),onMouseDown:K=>K.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,title:"",children:[o.jsx("option",{value:"720p",children:"720p"}),o.jsx("option",{value:"1080p",children:"1080p"})]}),(()=>{var Te,mt;const K=te.model||((Te=ae.find(He=>He.type==="Video"&&He.id==="sora-2"))==null?void 0:Te.id)||((mt=ae.find(He=>He.type==="Video"))==null?void 0:mt.id)||"",Qe=ae.find(He=>He.id===K),Je=(Qe==null?void 0:Qe.durations)||Ju(K),ve=za(K);return o.jsx("select",{value:te.duration||ve,onChange:He=>on(s.id,te.id,{duration:He.target.value}),onClick:He=>He.stopPropagation(),onMouseDown:He=>He.stopPropagation(),className:`text-xs px-2 py-1 rounded border outline-none transition-colors ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200 hover:border-zinc-600":"bg-white border-zinc-300 text-zinc-800 hover:border-zinc-400"}`,children:Je.map(He=>o.jsx("option",{value:He,children:He},He))})})(),(((ce=s.settings)==null?void 0:ce.mode)||"video")==="video"&&o.jsxs("label",{className:`flex items-center gap-1 text-[10px] cursor-pointer px-2 py-1 rounded border transition-colors ${te.useFirstLastFrame?e==="dark"?"border-blue-500 bg-blue-500/20 text-blue-300":"border-blue-400 bg-blue-50 text-blue-600":e==="dark"?"border-zinc-700 text-zinc-400 hover:border-zinc-600":"border-zinc-300 text-zinc-500 hover:border-zinc-400"}`,onClick:K=>K.stopPropagation(),onMouseDown:K=>K.stopPropagation(),title:"",children:[o.jsx("input",{type:"checkbox",checked:te.useFirstLastFrame||!1,onChange:K=>on(s.id,te.id,{useFirstLastFrame:K.target.checked}),className:"w-3 h-3 accent-blue-500"}),""]})]}),o.jsx("textarea",{className:`text-sm outline-none resize-none bg-transparent transition-all ${e==="dark"?"text-zinc-200 placeholder:text-zinc-700":"text-zinc-800 placeholder:text-zinc-400"}`,value:te.description||"",placeholder:"...",title:te.description||"",onChange:K=>on(s.id,te.id,{description:K.target.value}),onClick:K=>{K.stopPropagation(),ft||oa({nodeId:s.id,shotId:te.id})},onMouseDown:K=>K.stopPropagation(),onFocus:K=>{K.stopPropagation(),ft||oa({nodeId:s.id,shotId:te.id})},onInput:K=>{ft&&(K.currentTarget.style.height="auto",K.currentTarget.style.height=K.currentTarget.scrollHeight+"px")},ref:K=>{K&&ft&&(K.style.height="auto",K.style.height=K.scrollHeight+"px")},style:{minHeight:ft?"8rem":"2.5rem",height:ft?"auto":"2.5rem",transition:"all 0.2s ease-in-out"}}),o.jsxs("div",{className:`p-2 rounded text-xs font-mono border transition-all relative ${e==="dark"?"bg-zinc-950 border-zinc-800 text-zinc-400":"bg-zinc-50 border-zinc-200 text-zinc-600"}`,style:{minHeight:ft?"8rem":"2rem",transition:"all 0.2s ease-in-out"},children:[o.jsx("textarea",{className:"w-full bg-transparent outline-none resize-none placeholder:text-opacity-50 transition-all pr-8",value:te.prompt||"",placeholder:"...",onChange:K=>on(s.id,te.id,{prompt:K.target.value}),onClick:K=>{K.stopPropagation(),ft||oa({nodeId:s.id,shotId:te.id})},onMouseDown:K=>K.stopPropagation(),onFocus:K=>{K.stopPropagation(),ft||oa({nodeId:s.id,shotId:te.id})},onInput:K=>{ft&&(K.currentTarget.style.height="auto",K.currentTarget.style.height=K.currentTarget.scrollHeight+"px")},ref:K=>{K&&ft&&(K.style.height="auto",K.style.height=K.scrollHeight+"px")},style:{minHeight:ft?"8rem":"2rem",height:ft?"auto":"2rem",transition:"all 0.2s ease-in-out"}}),(te.model==="sora-2"||te.model==="sora-2-pro")&&Cn.length>0&&o.jsx("button",{onClick:K=>{K.stopPropagation(),go(!0)},className:`absolute top-2 right-2 p-1 rounded transition-colors ${e==="dark"?"text-zinc-500 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-400 hover:text-zinc-700 hover:bg-zinc-200"}`,title:"",children:o.jsx(Wa,{size:12})})]}),(()=>{const K=te.model||"";if(!(K&&(K.includes("sora")||K==="sora-2"||K==="sora-2-pro"))||Cn.length===0)return null;const Je=te.prompt||"",ve=`${s.id}-${te.id}`,Te=Zp[ve]||!1,mt=5,He=Cn.length>mt;return o.jsx("div",{className:"border-t border-dashed mt-1",style:{borderColor:e==="dark"?"rgba(63, 63, 70, 0.5)":"rgba(161, 161, 170, 0.5)"},children:o.jsxs("div",{className:"flex items-center justify-between py-1 px-1",children:[o.jsx("div",{className:"flex gap-2 overflow-x-auto py-2 flex-1 custom-scrollbar",children:(Te?Cn:Cn.slice(0,mt)).map(At=>{const gt=`@${At.username}`,Dt=Je.includes(gt);return o.jsxs("button",{onClick:Rn=>{Rn.stopPropagation();let Yt=Je||"";Dt?Yt=Yt.replace(gt,"").replace(/\s{2,}/g," ").trim():(Yt=Yt.trim(),Yt=Yt?`${Yt} ${gt} `:`${gt} `),on(s.id,te.id,{prompt:Yt})},className:`relative shrink-0 transition-all ${Dt?"scale-110":"opacity-70 hover:opacity-100"}`,title:At.username,children:[o.jsx("img",{src:At.profile_picture_url||"",alt:At.username,className:`w-8 h-8 rounded-full object-cover border-2 ${Dt?"border-blue-500 ring-2 ring-blue-500":"border-transparent"}`,onError:Rn=>{Rn.target.style.display="none"}}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-black/50 rounded-full p-0.5",children:o.jsx(Ba,{size:8,className:"text-green-400"})})]},At.id)})}),He&&o.jsx("button",{onClick:At=>{At.stopPropagation(),Te?Dl(gt=>{const Dt={...gt};return delete Dt[ve],Dt}):(go(!0),Dl(gt=>({...gt,[ve]:!0})))},className:`shrink-0 px-2 py-1 text-[10px] rounded transition-colors ml-2 ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,title:Te?"":"",children:Te?"":`+${Cn.length-mt}`})]})})})(),o.jsxs("div",{className:"flex gap-1 flex-wrap items-center mt-1",children:[(Me=te.tags)==null?void 0:Me.map((K,Qe)=>o.jsx("span",{className:`px-1.5 py-0.5 text-[10px] rounded border ${e==="dark"?"bg-blue-900/30 text-blue-300 border-blue-800":"bg-blue-50 text-blue-600 border-blue-200"}`,children:K},Qe)),te.camera&&o.jsxs("span",{className:`px-1.5 py-0.5 text-[10px] rounded border flex items-center gap-1 ${e==="dark"?"bg-purple-900/30 text-purple-300 border-purple-800":"bg-purple-50 text-purple-600 border-purple-200"}`,children:[o.jsx(Ld,{size:8})," ",te.camera]}),te.time_range&&o.jsx("span",{className:`text-[10px] ml-auto font-mono ${e==="dark"?"text-zinc-600":"text-zinc-400"}`,children:te.time_range})]})]}),o.jsxs("div",{className:`flex flex-col gap-2 justify-center border-l pl-2 shrink-0 ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[(()=>{var ve;const K=((ve=s.settings)==null?void 0:ve.mode)||"video",Qe=K==="image"?te.output_url:te.video_url,Je=te.status==="done"&&Qe;return o.jsx("button",{onClick:Te=>{Te.stopPropagation(),te.status==="generating"?on(s.id,te.id,{status:"draft",errorMsg:null}):K==="image"?generateSingleImage(s.id,te):_h(s.id,te)},className:`p-1.5 rounded text-white shadow-sm transition-all active:scale-95 ${te.status==="generating"?"bg-zinc-500 hover:bg-red-500":Je?"bg-blue-500 hover:bg-green-600":K==="image"?"bg-blue-600 hover:bg-blue-500":"bg-green-600 hover:bg-green-500"}`,title:te.status==="generating"?"":Je?"":`${K==="image"?"":""}`,onMouseDown:Te=>Te.stopPropagation(),children:te.status==="generating"?o.jsxs("div",{className:"relative w-3.5 h-3.5 flex items-center justify-center",children:[o.jsx(Ss,{size:14,className:"animate-spin absolute"}),o.jsx(pm,{size:10,fill:"currentColor",className:"opacity-0 hover:opacity-100 absolute z-10 transition-opacity"})]}):Je?o.jsx(Xa,{size:14}):K==="image"?o.jsx(jc,{size:14}):o.jsx(dm,{size:14,fill:"currentColor"})})})(),o.jsx("button",{onClick:()=>Ky(s.id,te.id),className:`p-1.5 transition-colors ${e==="dark"?"text-zinc-600 hover:text-red-500":"text-zinc-400 hover:text-red-600"}`,title:"",onMouseDown:K=>K.stopPropagation(),children:o.jsx(Cs,{size:14})}),o.jsxs("div",{className:"flex flex-col gap-0.5 ml-1",children:[o.jsx("button",{onClick:()=>{var Je;const K=[...((Je=s.settings)==null?void 0:Je.shots)||[]],Qe=K.findIndex(ve=>ve.id===te.id);Qe>0&&([K[Qe-1],K[Qe]]=[K[Qe],K[Qe-1]],kt(s.id,{shots:K}))},disabled:yt===0,className:`p-0.5 rounded transition-colors ${yt===0?"opacity-30 cursor-not-allowed":""} ${e==="dark"?"text-zinc-500 hover:text-blue-400 hover:bg-zinc-800":"text-zinc-400 hover:text-blue-500 hover:bg-zinc-100"}`,title:"",onMouseDown:K=>K.stopPropagation(),children:o.jsx(Ad,{size:12})}),o.jsx("button",{onClick:()=>{var Je;const K=[...((Je=s.settings)==null?void 0:Je.shots)||[]],Qe=K.findIndex(ve=>ve.id===te.id);Qe<K.length-1&&([K[Qe],K[Qe+1]]=[K[Qe+1],K[Qe]],kt(s.id,{shots:K}))},disabled:yt===(((Re=(Be=s.settings)==null?void 0:Be.shots)==null?void 0:Re.length)||0)-1,className:`p-0.5 rounded transition-colors ${yt===(((Nt=(jt=s.settings)==null?void 0:jt.shots)==null?void 0:Nt.length)||0)-1?"opacity-30 cursor-not-allowed":""} ${e==="dark"?"text-zinc-500 hover:text-blue-400 hover:bg-zinc-800":"text-zinc-400 hover:text-blue-500 hover:bg-zinc-100"}`,title:"",onMouseDown:K=>K.stopPropagation(),children:o.jsx(wi,{size:12})})]})]}),((Ct=s.settings)==null?void 0:Ct.showOutputPreview)&&o.jsxs("div",{className:`flex items-center gap-2 pl-2 border-l shrink-0 ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,children:[o.jsx("input",{type:"checkbox",checked:te.outputSelected||!1,onChange:K=>{K.stopPropagation(),on(s.id,te.id,{outputSelected:K.target.checked})},onClick:K=>K.stopPropagation(),className:"w-4 h-4 rounded accent-blue-500 cursor-pointer",title:""}),(()=>{var Je;const K=((Je=s.settings)==null?void 0:Je.mode)||"video",Qe=K==="image"?te.output_url:te.video_url;return Qe?o.jsx("div",{className:`w-16 h-10 rounded overflow-hidden cursor-pointer border transition-colors ${e==="dark"?"border-zinc-700 hover:border-blue-500":"border-zinc-300 hover:border-blue-400"}`,onClick:ve=>{ve.stopPropagation(),Un({url:Qe,type:K,prompt:te.prompt||te.description||` ${yt+1}`})},onMouseDown:ve=>ve.stopPropagation(),title:"",children:K==="image"?o.jsx("img",{src:Qe,className:"w-full h-full object-cover",alt:"output"}):o.jsx("video",{src:Qe,className:"w-full h-full object-cover",muted:!0})}):o.jsx("div",{className:`w-16 h-10 rounded flex items-center justify-center text-[8px] ${e==="dark"?"bg-zinc-800 text-zinc-600":"bg-zinc-100 text-zinc-400"}`,children:""})})(),o.jsx("button",{onClick:K=>{var ve;K.stopPropagation();const Qe=((ve=s.settings)==null?void 0:ve.mode)||"video",Je=Qe==="image"?te.output_url:te.video_url;Je&&Un({url:Je,type:Qe,prompt:te.prompt||te.description||` ${yt+1}`})},className:`p-1 rounded transition-colors ${e==="dark"?"text-zinc-500 hover:text-blue-400 hover:bg-zinc-800":"text-zinc-400 hover:text-blue-500 hover:bg-zinc-100"}`,onMouseDown:K=>K.stopPropagation(),title:"",children:o.jsx(d2,{size:14})})]})]})]},te.id)}):o.jsxs("div",{className:`flex flex-col items-center justify-center h-40 gap-3 rounded-lg border-2 border-dashed ${e==="dark"?"border-zinc-800 text-zinc-600":"border-zinc-300 text-zinc-400"}`,children:[o.jsx(_c,{size:32,className:"opacity-50"}),o.jsx("span",{className:"text-xs",children:""})]})}),o.jsx("div",{className:`p-3 border-t shrink-0 ${e==="dark"?"bg-zinc-900 border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:o.jsxs("button",{onClick:()=>Vy(s.id),className:`w-full py-2 border border-dashed text-xs rounded transition-colors flex items-center justify-center gap-2 ${e==="dark"?"border-zinc-700 text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200":"border-zinc-300 text-zinc-500 hover:bg-white hover:text-blue-600 hover:border-blue-400"}`,onMouseDown:te=>te.stopPropagation(),children:[o.jsx(Gs,{size:14})," "]})})]})})(),s.type==="image-compare"&&o.jsx("div",{className:"w-full h-full pointer-events-auto",children:o.jsx(Y2,{img1:p[0],img2:p[1]})}),s.type==="preview"&&o.jsxs("div",{className:"flex flex-col h-full pointer-events-auto",children:[o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b text-xs font-semibold ${e==="dark"?"border-zinc-800 text-zinc-200":"border-zinc-200 text-zinc-700"}`,children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ha,{size:13,className:"text-blue-500"}),o.jsx("span",{children:""})]}),o.jsx("span",{className:"text-[10px] text-zinc-500",children:s.previewType==="video"?"":""})]}),o.jsxs("div",{className:"flex-1 flex flex-col p-2 gap-2 min-h-0",children:[o.jsx("div",{className:`relative flex-1 rounded-lg overflow-hidden flex items-center justify-center min-h-0 ${e==="dark"?"bg-zinc-900":"bg-zinc-100"}`,onContextMenu:L=>{const Se=s.content||s.previewMjImages&&s.previewMjImages[0];Se&&y1(L,{url:Se,type:s.previewType||(Gn(Se)?"video":"image"),sourceNode:s})},onDoubleClick:L=>{L.stopPropagation(),L.preventDefault();const Se=s.content||s.previewMjImages&&s.previewMjImages[0];Se&&Un({url:Se,type:s.previewType||(Gn(Se)?"video":"image")})},children:s.content||s.previewMjImages&&s.previewMjImages.length>0?Gn(s.content)||s.previewType==="video"?o.jsx("video",{src:s.content,className:"w-full h-full object-contain bg-black",controls:!0,draggable:!1}):s.previewMjImages&&(s.previewMjImages.length===4||s.previewMjImages.length>1)?o.jsx("div",{className:`w-full h-full grid gap-0.5 p-0.5 ${s.previewMjImages.length===4?"grid-cols-2 grid-rows-2":"grid-cols-2"}`,children:s.previewMjImages.map((L,Se)=>o.jsx("div",{className:"relative w-full h-full overflow-hidden bg-black flex items-center justify-center group",children:o.jsx("img",{src:L,className:"max-w-full max-h-full w-auto h-auto object-contain",alt:` ${Se+1}`,draggable:!1,onError:xt=>{console.error(` ${Se+1} `),xt.target.style.display="none"}})},Se))}):o.jsx("div",{className:"w-full h-full relative",children:o.jsx("img",{src:s.content||s.previewMjImages&&s.previewMjImages[0],className:"w-full h-full object-contain bg-black",draggable:!1,onError:L=>{L.target.style.display="none",L.target.parentNode.classList.add("flex","items-center","justify-center","bg-zinc-900"),L.target.parentNode.innerHTML='<span class="text-zinc-500 text-xs"></span>'}})}):o.jsxs("div",{className:"flex flex-col items-center justify-center text-[11px] text-zinc-500",children:[o.jsx(jc,{className:"w-6 h-6 mb-1 text-zinc-400"}),o.jsx("span",{children:" AI  / AI  "}),o.jsx("span",{children:""})]})}),o.jsxs("div",{className:"flex items-center justify-between gap-2 text-[11px]",children:[o.jsxs("button",{className:`flex-1 inline-flex items-center justify-center gap-1 px-2 py-1 rounded border ${e==="dark"?"border-zinc-700 text-zinc-200 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onMouseDown:L=>L.stopPropagation(),onClick:async()=>{if(s.content)try{await navigator.clipboard.writeText(s.content)}catch{}},children:[o.jsx(So,{size:13}),""]}),o.jsxs("button",{className:`flex-1 inline-flex items-center justify-center gap-1 px-2 py-1 rounded border ${e==="dark"?"border-zinc-700 text-zinc-200 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onMouseDown:L=>L.stopPropagation(),onClick:async()=>{if(!s.content)return;const L=cn(s.x+s.width+100,s.y+s.height/2);let Se;if(!Gn(s.content))try{const xt=await Sr(s.content);xt!=null&&xt.w&&(xt!=null&&xt.h)&&(Se={w:xt.w,h:xt.h})}catch{}ds("input-image",L.x,L.y,null,s.content,Se)},children:[o.jsx(zc,{size:13}),""]}),o.jsxs("button",{className:`flex-1 inline-flex items-center justify-center gap-1 px-2 py-1 rounded border ${e==="dark"?"border-zinc-700 text-zinc-200 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onMouseDown:L=>L.stopPropagation(),onClick:()=>{if(!s.content)return;const L={name:s.previewType==="video"?"Preview.mp4":"Preview.png",type:s.previewType==="video"?"video/mp4":"image/png",content:s.content,isImage:s.previewType!=="video",isVideo:s.previewType==="video",isAudio:!1,fromPreview:!0};bs(Se=>[...Se,L]),wr(!0)},children:[o.jsx(Co,{size:13}),""]})]})]})]}),(s.type==="gen-image"||s.type==="gen-video")&&(()=>{var we,qe,ht,Ve,ut,vt,Wt,Xe,kn,In,Fn,te,yt,ft;const L=q.find(Q=>Q.sourceNodeId===s.id&&(Q.status==="generating"||Q.status==="completed")),Se=L&&L.status==="generating",xt=L!=null&&L.durationMs?(L.durationMs/1e3).toFixed(1):null,bn=py[s.id]||0;return o.jsxs("div",{className:"p-3 flex flex-col h-full pointer-events-auto",children:[(Se||xt)&&o.jsx("div",{className:`mb-2 px-2 py-1 rounded text-[10px] font-mono text-center ${e==="dark"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:Se?o.jsxs("span",{children:[" ",bn.toFixed(1),"s"]}):o.jsxs("span",{children:["  ",xt,"s"]})}),o.jsxs("div",{className:`flex items-center gap-1.5 mb-2 text-xs font-semibold shrink-0 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:[s.type==="gen-image"?o.jsx(I2,{size:12,className:"text-blue-400"}):o.jsx(Ld,{size:12,className:"text-purple-400"}),o.jsx("span",{children:s.type==="gen-image"?"AI ":"AI "})]}),p.length>0&&o.jsxs("div",{className:`mb-2 rounded-lg border p-2 relative group/ref ${e==="dark"?"bg-zinc-900/50 border-purple-500/20":"bg-violet-50 border-violet-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[o.jsxs("span",{className:`text-[10px] font-medium flex items-center gap-1 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:[o.jsx(Rd,{size:10}),""]}),o.jsxs("span",{className:"text-[9px] font-mono text-zinc-500",children:[p.length,"/10"]})]}),o.jsx("div",{className:"flex -space-x-2 overflow-visible pb-1 items-center custom-scrollbar pl-1",children:p.map((Q,de)=>o.jsx("div",{className:"relative shrink-0 flex flex-col items-center gap-0 ",children:o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute -top-1 -left-1 w-4 h-4 text-[9px] font-semibold rounded-full bg-zinc-700 text-white select-none flex items-center justify-center border border-white/70 shadow-sm leading-none pointer-events-none",style:{zIndex:30},children:de+1}),o.jsx("div",{className:`relative w-8 h-8 rounded-full border-2 thumb-stack-item cursor-pointer overflow-hidden ${e==="dark"?"border-[#18181b] bg-zinc-800":"border-white bg-zinc-200"}`,style:{zIndex:10-de},children:o.jsx(qr,{src:Q,className:"w-full h-full object-cover"})})]})},de))})]}),o.jsxs("div",{className:`rounded-lg p-3 mb-2 border focus-within:border-blue-500/30 transition-colors flex-1 flex flex-col ${e==="dark"?"bg-zinc-950/50 border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[s.type==="gen-image"&&(()=>{const Q=s==null?void 0:s.maskContent;let de=i.find(ce=>ce.to===s.id&&(!ce.inputType||ce.inputType==="default"));de||(de=i.find(ce=>ce.to===s.id));const Ce=de?Ft.get(de.from):null,rt=Ce&&Ce.maskContent;return Q||rt?o.jsxs("div",{className:`flex items-center gap-1.5 mb-2 px-2 py-1 rounded text-[10px] font-medium ${e==="dark"?"bg-purple-900/30 text-purple-300 border border-purple-800":"bg-purple-50 text-purple-600 border border-purple-200"}`,children:[o.jsx(ry,{size:12}),o.jsx("span",{children:rt?"":""})]}):null})(),o.jsxs("div",{className:"flex items-start gap-2 mb-1 flex-1 h-full min-h-0",children:[o.jsx("textarea",{className:`flex-1 h-full bg-transparent text-xs outline-none resize-none custom-scrollbar ${e==="dark"?"text-zinc-300 placeholder-zinc-600":"text-zinc-800 placeholder-zinc-400"}`,placeholder:"...",value:s.type==="gen-image"?((we=s.settings)==null?void 0:we.prompt)||"":((qe=s.settings)==null?void 0:qe.videoPrompt)||"",onChange:Q=>kt(s.id,s.type==="gen-image"?{prompt:Q.target.value}:{videoPrompt:Q.target.value}),onMouseDown:Q=>Q.stopPropagation()}),s.type==="gen-video"&&(((ht=s.settings)==null?void 0:ht.model)==="sora-2"||((Ve=s.settings)==null?void 0:Ve.model)==="sora-2-pro")&&Cn.length>0&&o.jsx("div",{className:"relative shrink-0",children:o.jsx("button",{onClick:Q=>{Q.stopPropagation(),go(!0)},className:`p-1.5 rounded transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:"",children:o.jsx(Wa,{size:14})})})]})]}),s.type==="gen-video"&&(()=>{var Re,jt;const Q=((Re=s.settings)==null?void 0:Re.model)||"",de=en.get(Q),Ce=(de==null?void 0:de.modelName)||(de==null?void 0:de.id)||Q;if(!(Ce&&(Ce.includes("sora")||Q.includes("sora")))||Cn.length===0)return null;const fe=((jt=s.settings)==null?void 0:jt.videoPrompt)||"",ce=Zp[s.id]||!1,Me=5,Be=Cn.length>Me;return o.jsx("div",{className:"border-t border-dashed mt-1",style:{borderColor:e==="dark"?"rgba(63, 63, 70, 0.5)":"rgba(161, 161, 170, 0.5)"},children:o.jsxs("div",{className:"flex items-center justify-between py-1 px-1",children:[o.jsx("div",{className:"flex gap-2 overflow-x-auto py-2 flex-1 custom-scrollbar",children:(ce?Cn:Cn.slice(0,Me)).map(Nt=>{const Ct=`@${Nt.username}`,K=fe.includes(Ct);return o.jsxs("button",{onClick:Qe=>{Qe.stopPropagation();let Je=fe||"";K?Je=Je.replace(Ct,"").replace(/\s{2,}/g," ").trim():(Je=Je.trim(),Je=Je?`${Je} ${Ct} `:`${Ct} `),kt(s.id,{videoPrompt:Je})},className:`relative shrink-0 transition-all ${K?"scale-110":"opacity-70 hover:opacity-100"}`,title:Nt.username,children:[o.jsx(qr,{src:Nt.profile_picture_url||"",alt:Nt.username,className:`w-8 h-8 rounded-full object-cover border-2 ${K?"border-blue-500 ring-2 ring-blue-500":"border-transparent"}`,onError:Qe=>{Qe.target.style.display="none"}}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-black/50 rounded-full p-0.5",children:o.jsx(Ba,{size:8,className:"text-green-400"})})]},Nt.id)})}),Be&&o.jsx("button",{onClick:Nt=>{Nt.stopPropagation(),ce?Dl(Ct=>{const K={...Ct};return delete K[s.id],K}):(go(!0),Dl(Ct=>({...Ct,[s.id]:!0})))},className:`shrink-0 px-2 py-1 text-[10px] rounded transition-colors ml-2 ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,title:ce?"":"",children:ce?"":`+${Cn.length-Me}`})]})})})(),s.type==="gen-image"&&(()=>{var Ce;const Q=en.get((Ce=s.settings)==null?void 0:Ce.model);return Q&&(Q.id.includes("mj")||Q.provider.toLowerCase().includes("midjourney"))})()&&(()=>{var Ce,rt;const Q=Gl(s.id,"oref"),de=Gl(s.id,"sref");return o.jsxs("div",{className:"flex flex-col gap-1.5 mb-2 relative","data-mj-instructions":"true",children:[o.jsxs("div",{className:"relative flex items-center gap-1.5","data-mj-oref":"true",children:[o.jsx("div",{className:`input-point ${Q?"connected":""} ${Le===s.id&&Qt==="oref"?"active":""}`,title:"oref",onMouseDown:fe=>{fe.stopPropagation(),fe.preventDefault();const ce=cn(fe.clientX,fe.clientY);$n(ce),Ut(s.id),Kt("oref")},onMouseUp:fe=>us(s.id,fe,"oref"),"data-input-type":"oref",style:{position:"absolute",top:"50%",left:"-0.25rem",transform:"translateY(-50%)",width:"0.5rem",height:"0.5rem",marginRight:"0.25rem",zIndex:20,cursor:"crosshair"}}),o.jsxs("div",{className:"flex items-center gap-1.5 flex-1 ml-2",children:[o.jsx("span",{className:`text-[10px] font-medium ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"oref"}),Q&&o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]})]}),o.jsxs("div",{className:"relative flex items-center gap-1.5",children:[o.jsx("div",{className:"w-0.5rem h-0.5rem mr-0.25rem ml-2"}),o.jsxs("div",{className:"flex items-center gap-1.5 flex-1",children:[o.jsx("span",{className:`text-[10px] font-medium ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"ow"}),((Ce=s.settings)==null?void 0:Ce.mjOw)&&s.settings.mjOw>0&&o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]}),o.jsx("input",{type:"number",min:"1",max:"1000",placeholder:"1-1000",value:((rt=s.settings)==null?void 0:rt.mjOw)||"",onChange:fe=>{const ce=parseInt(fe.target.value,10);isNaN(ce)||ce<1?kt(s.id,{mjOw:""}):ce>1e3?kt(s.id,{mjOw:1e3}):kt(s.id,{mjOw:ce})},onMouseDown:fe=>fe.stopPropagation(),className:`flex-1 px-2 py-1 rounded text-[10px] border outline-none focus:border-blue-500/50 ${e==="dark"?"bg-zinc-900/50 border-zinc-700 text-zinc-300 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`})]}),o.jsxs("div",{className:"relative flex items-center gap-1.5","data-mj-sref":"true",children:[o.jsx("div",{className:`input-point ${de?"connected":""} ${Le===s.id&&Qt==="sref"?"active":""}`,title:"sref",onMouseDown:fe=>{fe.stopPropagation(),fe.preventDefault();const ce=cn(fe.clientX,fe.clientY);$n(ce),Ut(s.id),Kt("sref")},onMouseUp:fe=>us(s.id,fe,"sref"),"data-input-type":"sref",style:{position:"absolute",top:"50%",left:"-0.25rem",transform:"translateY(-50%)",width:"0.5rem",height:"0.5rem",marginRight:"0.25rem",zIndex:20,cursor:"crosshair"}}),o.jsxs("div",{className:"flex items-center gap-1.5 flex-1 ml-2",children:[o.jsx("span",{className:`text-[10px] font-medium ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:"sref"}),de&&o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]})]})]})})(),s.type==="gen-image"&&P&&o.jsxs("div",{className:`mb-2 rounded-lg border p-3 space-y-2 ${e==="dark"?"bg-zinc-900/50 border-zinc-800":"bg-white border-zinc-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{className:"flex items-center gap-1 text-[11px] font-semibold",onClick:()=>$l(Q=>!Q),onMouseDown:Q=>Q.stopPropagation(),children:[o.jsx("span",{className:e==="dark"?"text-zinc-200":"text-zinc-700",children:""}),o.jsx(Za,{size:12,className:`transition-transform ${ws?"":"rotate-90"} ${e==="dark"?"text-zinc-400":"text-zinc-500"}`})]}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[o.jsxs("span",{className:"text-zinc-500",children:[li.length," "]}),o.jsx("button",{className:`px-2 py-0.5 rounded text-[10px] border ${e==="dark"?"border-zinc-700 text-zinc-300 hover:bg-zinc-800":"border-zinc-300 text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>sa(Q=>!Q),onMouseDown:Q=>Q.stopPropagation(),children:fo?"":""})]})]}),!ws&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"max-h-36 overflow-y-auto custom-scrollbar flex flex-wrap gap-2",children:[li.map(Q=>o.jsxs("div",{className:`border rounded-lg px-2 py-1.5 flex items-center gap-2 text-[11px] ${e==="dark"?"border-zinc-700 bg-zinc-950/50 text-zinc-200":"border-zinc-200 bg-zinc-50 text-zinc-700"}`,children:[o.jsx("span",{className:"font-medium whitespace-nowrap",children:Q.name}),o.jsx("button",{onClick:()=>e1(s.id,Q.prompt),className:"px-2 py-0.5 rounded text-[10px] bg-blue-600 text-white hover:bg-blue-500 transition-colors",onMouseDown:de=>de.stopPropagation(),children:""}),fo&&o.jsx("button",{onClick:()=>Qy(Q.id),className:`px-2 py-0.5 rounded text-[10px] border ${e==="dark"?"border-red-500/50 text-red-400 hover:bg-red-500/10":"border-red-200 text-red-600 hover:bg-red-50"}`,onMouseDown:de=>de.stopPropagation(),children:""})]},Q.id)),li.length===0&&o.jsx("div",{className:`text-[11px] ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:""})]}),fo&&o.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[o.jsx("input",{type:"text",value:uo.name,onChange:Q=>zr(de=>({...de,name:Q.target.value})),placeholder:"",className:`w-full px-2 py-1 text-[11px] rounded border ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder:text-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder:text-zinc-400"}`,onMouseDown:Q=>Q.stopPropagation()}),o.jsx("textarea",{value:uo.prompt,onChange:Q=>zr(de=>({...de,prompt:Q.target.value})),placeholder:"...",className:`w-full min-h-[70px] px-2 py-1 text-[11px] rounded border resize-none custom-scrollbar ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder:text-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder:text-zinc-400"}`,onMouseDown:Q=>Q.stopPropagation()}),o.jsx("button",{onClick:qy,className:"w-full py-1.5 rounded text-[11px] font-medium bg-blue-600 hover:bg-blue-500 text-white transition-colors",onMouseDown:Q=>Q.stopPropagation(),children:""})]})]})]}),o.jsxs("div",{className:`mt-auto pt-2 flex items-center justify-between shrink-0 relative gap-2 border-t ${e==="dark"?"border-zinc-800/50":"border-zinc-200"}`,children:[o.jsxs("div",{className:"relative flex-1 min-w-0",children:[o.jsxs("button",{title:(vt=en.get((ut=s.settings)==null?void 0:ut.model))==null?void 0:vt.provider,onClick:Q=>{Q.stopPropagation(),hn((Ge==null?void 0:Ge.type)==="model"?null:{nodeId:s.id,type:"model"})},className:`flex items-center gap-2 pl-1 pr-2 py-1 rounded text-[10px] transition-colors border w-full ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-300 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-700 border-zinc-300"}`,children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${Hi((Wt=s.settings)==null?void 0:Wt.model)}`}),o.jsx("span",{className:"truncate font-mono",children:((kn=en.get((Xe=s.settings)==null?void 0:Xe.model))==null?void 0:kn.id)||"Model"})]}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="model"&&o.jsxs("div",{className:`absolute bottom-full left-0 mb-1 w-96 rounded-lg shadow-xl p-1 z-[60] border flex ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:Q=>Q.stopPropagation(),onMouseLeave:()=>Kr(null),children:[o.jsx("div",{className:`w-36 border-r pr-1 max-h-64 overflow-y-auto custom-scrollbar flex flex-col justify-end ${e==="dark"?"border-zinc-700":"border-zinc-200"}`,children:Object.entries(js).filter(([,Q])=>Q.models.some(de=>de.type===(s.type==="gen-image"?"Image":"Video"))).map(([Q,de])=>o.jsxs("button",{onMouseEnter:()=>Kr(Q),className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left text-[10px] transition-colors ${or===Q?e==="dark"?"bg-zinc-700 text-zinc-100":"bg-zinc-200 text-zinc-900":e==="dark"?"hover:bg-zinc-800 text-zinc-400":"hover:bg-zinc-100 text-zinc-600"}`,children:[o.jsx("span",{className:"truncate font-medium",children:de.name}),o.jsx(Za,{size:10,className:"opacity-50"})]},Q))}),o.jsxs("div",{className:"flex-1 pl-1 max-h-64 overflow-y-auto custom-scrollbar",children:[or&&((In=js[or])==null?void 0:In.models.filter(Q=>Q.type===(s.type==="gen-image"?"Image":"Video")).map(Q=>{var de;return o.jsxs("button",{onClick:()=>{const Ce={model:Q.id};if(Q.id==="grok-3"&&(Ce.ratio="3:2",Ce.duration="8s",Ce.resolution="1080P"),kt(s.id,Ce),s.type==="gen-image"){Qp(Q.id);try{localStorage.setItem("tapnow_last_image_model",Q.id)}catch{}}else if(s.type==="gen-video"){th(Q.id);try{localStorage.setItem("tapnow_last_video_model",Q.id)}catch{}}hn(null),Kr(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${((de=s.settings)==null?void 0:de.model)===Q.id?e==="dark"?"bg-blue-600/30 text-blue-300":"bg-blue-100 text-blue-700":e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"}`,children:[o.jsx("span",{className:"text-[10px] font-medium truncate font-mono",children:Q.id}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${Hi(Q.id)}`})]},Q.id)})),!or&&o.jsx("div",{className:`text-[10px] px-2 py-3 text-center ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:"  Provider"})]})]})]}),s.type==="gen-image"&&(()=>{var de;const Q=en.get((de=s.settings)==null?void 0:de.model);return Q&&(Q.id.includes("mj")||Q.provider.toLowerCase().includes("midjourney"))})()&&o.jsxs("div",{className:"relative flex-1 min-w-0",children:[o.jsx("button",{title:((Fn=Ud.find(Q=>{var de;return Q.value===((de=s.settings)==null?void 0:de.mjVersion)}))==null?void 0:Fn.label)||"MJ V7",onClick:Q=>{Q.stopPropagation(),hn((Ge==null?void 0:Ge.type)==="mjVersion"&&Ge.nodeId===s.id?null:{nodeId:s.id,type:"mjVersion"})},className:`flex items-center gap-2 pl-1 pr-2 py-1 rounded text-[10px] transition-colors border w-full ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-300 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-700 border-zinc-300"}`,children:o.jsx("span",{className:"truncate",children:((te=Ud.find(Q=>{var de;return Q.value===((de=s.settings)==null?void 0:de.mjVersion)}))==null?void 0:te.label)||"MJ V7"})}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="mjVersion"&&o.jsx("div",{className:`absolute bottom-full left-0 mb-1 w-32 rounded-lg shadow-xl p-1 z-[60] border max-h-64 overflow-y-auto custom-scrollbar ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:Q=>Q.stopPropagation(),children:Ud.map(Q=>{var de,Ce;return o.jsxs("button",{onClick:()=>{kt(s.id,{mjVersion:Q.value}),hn(null)},className:`w-full flex items-center justify-between px-2 py-1.5 rounded text-left transition-colors ${e==="dark"?"hover:bg-zinc-800 text-zinc-300":"hover:bg-zinc-100 text-zinc-700"} ${((de=s.settings)==null?void 0:de.mjVersion)===Q.value?e==="dark"?"bg-zinc-800":"bg-zinc-100":""}`,children:[o.jsx("span",{className:"text-xs font-medium",children:Q.label}),((Ce=s.settings)==null?void 0:Ce.mjVersion)===Q.value&&o.jsx("svg",{className:"w-3 h-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},Q.value)})})]}),o.jsxs("div",{className:"flex gap-1 shrink-0",children:[o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:Q=>{Q.stopPropagation(),hn((Ge==null?void 0:Ge.type)==="ratio"&&Ge.nodeId===s.id?null:{nodeId:s.id,type:"ratio"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:((yt=s.settings)==null?void 0:yt.ratio)||"Auto"}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="ratio"&&o.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-20 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:Q=>Q.stopPropagation(),children:W2((ft=s.settings)==null?void 0:ft.model).map(Q=>o.jsx("button",{onClick:()=>{kt(s.id,{ratio:Q}),gy(Q);try{localStorage.setItem("tapnow_last_ratio",Q)}catch{}hn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:Q},Q))})]}),s.type==="gen-video"&&(()=>{var rt,fe;const Q=en.get((rt=s.settings)==null?void 0:rt.model);return((Q==null?void 0:Q.id)||(Q==null?void 0:Q.modelName)||"").includes("grok")?o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:ce=>{ce.stopPropagation(),hn((Ge==null?void 0:Ge.type)==="vres"&&Ge.nodeId===s.id?null:{nodeId:s.id,type:"vres"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:((fe=s.settings)==null?void 0:fe.resolution)||"1080P"}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="vres"&&o.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-24 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:ce=>ce.stopPropagation(),children:H2.map(ce=>o.jsx("button",{onClick:()=>{kt(s.id,{resolution:ce}),by(ce);try{localStorage.setItem("tapnow_last_video_res",ce)}catch{}hn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:ce},ce))})]}):null})(),s.type==="gen-image"&&(()=>{var Ce;const Q=en.get((Ce=s.settings)==null?void 0:Ce.model);return!(Q&&(Q.id.includes("mj")||Q.provider.toLowerCase().includes("midjourney")))})()?o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:Q=>{Q.stopPropagation(),hn((Ge==null?void 0:Ge.type)==="res"&&Ge.nodeId===s.id?null:{nodeId:s.id,type:"res"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:(()=>{var ce,Me;const Q=en.get((ce=s.settings)==null?void 0:ce.model),de=(Q==null?void 0:Q.id)||(Q==null?void 0:Q.modelName)||"",Ce=Nm(de),rt=((Me=s.settings)==null?void 0:Me.resolution)||"Auto",fe=Ce.includes(rt)?rt:Ce[0]||"Auto";return!Ce.includes(rt)&&Ce.length>0&&setTimeout(()=>{kt(s.id,{resolution:Ce[0]})},0),fe})()}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="res"&&(()=>{var rt;const Q=en.get((rt=s.settings)==null?void 0:rt.model),de=(Q==null?void 0:Q.id)||(Q==null?void 0:Q.modelName)||"",Ce=Nm(de);return o.jsx("div",{className:`absolute bottom-full right-0 mb-1 w-24 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:fe=>fe.stopPropagation(),children:Ce.map(fe=>o.jsx("button",{onClick:()=>{kt(s.id,{resolution:fe}),yy(fe);try{localStorage.setItem("tapnow_last_image_res",fe)}catch{}hn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:fe},fe))})})()]}):(()=>{var Ce,rt,fe,ce,Me,Be,Re,jt,Nt,Ct,K,Qe,Je,ve;const Q=en.get((Ce=s.settings)==null?void 0:Ce.model);return Q&&(Q.id.includes("mj")||Q.provider.toLowerCase().includes("midjourney"))?null:o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:Te=>{Te.stopPropagation(),hn((Ge==null?void 0:Ge.type)==="duration"&&Ge.nodeId===s.id?null:{nodeId:s.id,type:"duration"})},className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border ${e==="dark"?"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,children:((rt=s.settings)==null?void 0:rt.duration)||"5s"}),(Ge==null?void 0:Ge.nodeId)===s.id&&Ge.type==="duration"&&o.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-20 rounded-lg shadow-xl p-1 z-[60] border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseDown:Te=>Te.stopPropagation(),children:(((fe=ae.find(Te=>{var mt;return Te.id===((mt=s.settings)==null?void 0:mt.model)}))==null?void 0:fe.durations)||["5s","10s"]).map(Te=>o.jsx("button",{onClick:()=>{kt(s.id,{duration:Te}),hn(null)},className:`w-full text-center py-1 text-[10px] rounded ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:Te},Te))})]}),(((Me=(ce=s.settings)==null?void 0:ce.model)==null?void 0:Me.includes("jimeng"))||((jt=(Re=en.get((Be=s.settings)==null?void 0:Be.model))==null?void 0:Re.modelName)==null?void 0:jt.includes("jimeng"))||((Ct=(Nt=s.settings)==null?void 0:Nt.model)==null?void 0:Ct.includes("grok")))&&o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-[10px] opacity-70",children:""}),o.jsx("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 rounded p-0.5 border dark:border-zinc-700",children:["720p","1080p"].map(Te=>{var mt;return o.jsx("button",{onClick:He=>{He.stopPropagation(),kt(s.id,{resolution:Te})},onMouseDown:He=>He.stopPropagation(),className:`text-[10px] px-2 py-0.5 rounded transition-all ${(((mt=s.settings)==null?void 0:mt.resolution)||"720p")===Te?"bg-white dark:bg-zinc-700 shadow-sm text-blue-600 dark:text-blue-400 font-medium":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:Te},Te)})})]}),s.type==="gen-video"&&((K=s.settings)==null?void 0:K.model)==="sora-2"&&o.jsxs("label",{className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] border cursor-pointer transition-colors ${e==="dark"?(Qe=s.settings)!=null&&Qe.isHD?"bg-blue-600/30 border-blue-500 text-blue-300":"bg-zinc-800/50 hover:bg-zinc-800 text-zinc-400 border-zinc-700/50":(Je=s.settings)!=null&&Je.isHD?"bg-blue-500/30 border-blue-400 text-blue-700":"bg-zinc-100 hover:bg-zinc-200 text-zinc-600 border-zinc-300"}`,onClick:Te=>Te.stopPropagation(),children:[o.jsx("input",{type:"checkbox",checked:((ve=s.settings)==null?void 0:ve.isHD)||!1,onChange:Te=>{Te.stopPropagation(),kt(s.id,{isHD:Te.target.checked})},className:"w-3 h-3 cursor-pointer",onMouseDown:Te=>Te.stopPropagation()}),o.jsx("span",{children:"HD"})]})]})})()]}),o.jsx("button",{onClick:()=>{var rt,fe;const Q=s.type==="gen-image"?((rt=s.settings)==null?void 0:rt.prompt)||"":((fe=s.settings)==null?void 0:fe.videoPrompt)||"",de=ka(s.id),Ce=de.length>0?de.join(" ")+(Q?" "+Q:""):Q;Jl(Ce,s.type==="gen-image"?"image":"video",p,s.id)},className:"bg-blue-600 hover:bg-blue-500 text-white p-1.5 rounded-md shadow-lg active:scale-95 transition-transform shrink-0",title:"",children:o.jsx(dm,{size:12,fill:"currentColor"})})]})]})})()]})]},s.id)},[ze,An,Pr,Eh,Th,en,Gu,e,v,er,H,Le,Qt,Vu,us,cn,ui,be,jr,hn,Wr,$e,Ut,Kt,pt,Un,Gn,kt,ka,Jl,za,Ju,Wy,wa,Ey]),j1=n.length>50,_1=po||Us;return o.jsxs(o.Fragment,{children:[o.jsx(P2,{visible:he.visible,progress:he.progress,status:he.status,type:he.type}),o.jsxs("div",{className:`w-full h-screen font-sans overflow-hidden select-none flex flex-col transition-colors duration-300 ${e==="dark"?"bg-[#09090b] text-white":"bg-zinc-100 text-zinc-900"} ${j1?"perf-mode":""} ${_1?"interacting":""}`,onClick:()=>{ir.visible&&cs(s=>({...s,visible:!1})),pi.visible&&Ru(s=>({...s,visible:!1}))},children:[o.jsxs("div",{className:`h-12 flex items-center justify-between px-4 z-50 shrink-0 border-b transition-colors duration-300 ${e==="dark"?"bg-[#09090b] border-zinc-800":"bg-white border-zinc-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-md flex items-center justify-center",children:o.jsx(h2,{size:16,className:"text-white"})}),o.jsx("span",{className:`font-bold text-sm tracking-wide ${e==="dark"?"text-zinc-200":"text-zinc-800"}`,children:"Tapnow Studio"}),Ln?o.jsx("input",{ref:je,type:"text",value:Vt,onChange:s=>Jn(s.target.value),onBlur:()=>{w(!1);try{localStorage.setItem("tapnow_project_name",Vt)}catch{}},onKeyDown:s=>{if(s.key==="Enter"){w(!1);try{localStorage.setItem("tapnow_project_name",Vt)}catch{}}},className:`ml-2 px-2 py-0.5 text-xs border rounded outline-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`,style:{minWidth:"100px",maxWidth:"200px"}}):o.jsx("span",{onClick:()=>{w(!0),setTimeout(()=>{var s;return(s=je.current)==null?void 0:s.focus()},0)},className:`ml-2 text-xs cursor-pointer hover:underline ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,title:"",children:Vt})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>{const s=["off","normal","ultra"],f=(s.indexOf(D)+1)%s.length,h=s[f];ee(h),localStorage.setItem("tapnow_performance_mode",h)},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${D!=="off"?e==="dark"?"bg-blue-600 border-blue-500 text-white hover:bg-blue-500":"bg-blue-500 border-blue-400 text-white hover:bg-blue-600":e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:D==="ultra"?"":D==="normal"?"":"",children:[o.jsx(mm,{size:14,className:D!=="off"?"fill-current":""}),o.jsx("span",{children:D==="ultra"?"":""})]}),o.jsxs("button",{onClick:Fy,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:"/",children:[o.jsx(Fa,{size:14}),o.jsx("span",{children:""})]}),o.jsx("button",{onClick:Uy,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors border ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:"",children:e==="dark"?o.jsxs(o.Fragment,{children:[o.jsx(N2,{size:14,className:"text-amber-400"}),o.jsx("span",{children:""})]}):o.jsxs(o.Fragment,{children:[o.jsx(g2,{size:14,className:"text-blue-500"}),o.jsx("span",{children:""})]})}),o.jsx("button",{onClick:V,disabled:d.length===0,className:`flex items-center gap-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors border ${d.length===0?e==="dark"?"bg-zinc-900/50 border-zinc-800 text-zinc-600 cursor-not-allowed":"bg-zinc-50 border-zinc-200 text-zinc-400 cursor-not-allowed":e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:" (Ctrl+Z)",children:o.jsx(w2,{size:14})}),o.jsx("button",{onClick:xe,disabled:j.length===0,className:`flex items-center gap-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors border ${j.length===0?e==="dark"?"bg-zinc-900/50 border-zinc-800 text-zinc-600 cursor-not-allowed":"bg-zinc-50 border-zinc-200 text-zinc-400 cursor-not-allowed":e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 hover:bg-zinc-800":"bg-zinc-100 border-zinc-300 text-zinc-700 hover:bg-zinc-200"}`,title:" (Ctrl+Shift+Z)",children:o.jsx(k2,{size:14})}),o.jsx(Cc,{variant:"ghost",onClick:()=>{me(),r([]),a([]),Jn(""),localStorage.removeItem("tapnow_project_name")},children:""}),o.jsx(Cc,{variant:"secondary",icon:_2,onClick:()=>hi(!0),children:"API "})]})]}),o.jsxs("div",{className:`flex-1 relative overflow-hidden flex transition-colors duration-300 ${e==="dark"?"bg-[#09090b]":"bg-zinc-100"}`,children:[o.jsxs("div",{className:`w-14 border-r flex flex-col items-center py-3 gap-3 z-40 shrink-0 transition-colors duration-300 ${e==="dark"?"bg-[#09090b] border-zinc-800":"bg-white border-zinc-200"}`,children:[o.jsx("button",{onClick:n1,className:`p-2.5 rounded-lg transition-all mb-2 ${e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-800 hover:bg-zinc-200"}`,title:"",children:o.jsx(y2,{size:18})}),[{id:"select",icon:x2},{id:"history",icon:um},{id:"characters",icon:Wa}].map(s=>o.jsx("button",{onClick:()=>{dy(s.id),s.id==="history"&&Du(!Wp),s.id==="characters"&&go(!Vp)},className:`p-2.5 rounded-lg transition-all ${uy===s.id?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-200 text-zinc-900":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-800"}`,children:o.jsx(s.icon,{size:18})},s.id)),o.jsx("div",{className:"flex-1"}),o.jsx("button",{onClick:()=>wr(!Ds),className:`p-2.5 rounded-lg transition-all mb-2 ${Ds?"bg-blue-600 text-white":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-500 hover:text-zinc-800"}`,title:"AI ",children:o.jsx(Co,{size:18})}),o.jsx("button",{onClick:By,className:`p-2.5 rounded-lg transition-all ${e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-800 hover:bg-zinc-200"}`,title:"",children:o.jsx(z2,{size:18})}),o.jsx("button",{onClick:Hy,className:`p-2.5 rounded-lg transition-all mb-2 ${e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-800 hover:bg-zinc-200"}`,title:"",children:o.jsx(Pd,{size:18})})]}),Wp&&o.jsxs("div",{className:`w-72 z-30 flex flex-col animate-in slide-in-from-left border-r transition-colors duration-300 ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[o.jsxs("div",{className:`p-3 border-b flex justify-between items-center ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:`font-bold text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),Pe.active&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-16 h-1.5 bg-zinc-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500 transition-all duration-200",style:{width:`${Pe.current/Pe.total*100}%`}})}),o.jsxs("span",{className:"text-[9px] text-zinc-500 font-mono",children:[Pe.current,"/",Pe.total]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>{const u=q.filter(f=>f.status==="completed");bt.size>0?Et(new Set):Et(new Set(u.map(f=>f.id)))},className:`p-1.5 rounded transition-colors flex items-center gap-1 ${bt.size>0?e==="dark"?"text-blue-400 bg-blue-500/20 hover:bg-blue-500/30":"text-blue-600 bg-blue-100 hover:bg-blue-200":e==="dark"?"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:bt.size>0?` (${bt.size})`:"",children:[bt.size>0?o.jsx(Xa,{size:14}):o.jsx(u2,{size:14}),bt.size>0&&o.jsx("span",{className:"text-[9px] font-bold",children:bt.size})]}),o.jsx("button",{onClick:()=>Ll(!0),className:`p-1.5 rounded transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:"",children:o.jsx(_c,{size:14})}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>{if(console.log("[V3.5.1 Debug] Download button clicked, historySelection.size =",bt.size),bt.size>0){const s=[...bt].map(u=>q.find(f=>f.id===u)).filter(Boolean);console.log("[V3.5.1 Debug] Downloading selected items:",s.length),qu(s)}else console.log("[V3.5.1 Debug] Opening dropdown menu"),hn((Ge==null?void 0:Ge.type)==="batch-download"?null:{type:"batch-download"})},className:`p-1.5 rounded transition-colors ${bt.size>0?"text-blue-400 bg-blue-500/20":e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,title:bt.size>0?` (${bt.size})`:"",children:o.jsx(Fa,{size:14})}),(Ge==null?void 0:Ge.type)==="batch-download"&&bt.size===0&&o.jsxs("div",{className:`absolute right-0 top-full mt-1 w-40 rounded-lg shadow-xl py-1 z-50 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseLeave:()=>hn(null),children:[o.jsxs("button",{onClick:()=>{hn(null);const s=q.filter(u=>(u.startTime||0)>=Ze);qu(s)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:[" (",q.filter(s=>(s.startTime||0)>=Ze).length,")"]}),o.jsxs("button",{onClick:()=>{hn(null),qu(q)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,children:[" (",q.length,")"]})]})]}),o.jsx("button",{onClick:()=>Du(!1),children:o.jsx(Cr,{size:12,className:e==="dark"?"text-zinc-500":"text-zinc-400"})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3",children:(()=>{const s=q.filter(f=>(f.startTime||0)>=Ze),u=q.filter(f=>(f.startTime||0)<Ze);return o.jsxs(o.Fragment,{children:[s.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`flex items-center gap-2 text-[10px] ${e==="dark"?"text-blue-400":"text-blue-600"}`,children:[o.jsx("div",{className:"flex-1 h-px bg-blue-500/30"}),o.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-blue-500/10 font-medium",children:[" (",s.length,")"]}),o.jsx("div",{className:"flex-1 h-px bg-blue-500/30"})]}),s.map(f=>o.jsx(gm,{item:f,theme:e,lightboxItem:kr,providers:X,defaultProviders:Od,onDelete:hh,isSelected:bt.has(f.id),onSelect:h=>{console.log("[V3.5.2 Debug] onSelect called, id:",h,"current Set size:",bt.size),Et(p=>{const m=new Set(p);return m.has(h)?m.delete(h):m.add(h),console.log("[V3.5.2 Debug] Updated Set size:",m.size),m})},onClick:()=>{if(f.url){const h=f.mjImages&&f.mjImages.length>1&&f.selectedMjImageIndex!==void 0?f.selectedMjImageIndex:0;Un({...f,url:f.mjImages&&f.mjImages.length>1?f.mjImages[h]:f.url,selectedMjImageIndex:h})}},onContextMenu:h=>Ql(h,f),onImageClick:(h,p,m,S)=>{h.stopPropagation(),ye(T=>T.map($=>$.id===p.id?{...$,url:m,selectedMjImageIndex:S}:$));const I={...p,url:m,selectedMjImageIndex:S};Un(I)},onImageContextMenu:(h,p,m,S)=>Ql(h,p,m,S),onRefresh:h=>{h.apiConfig&&(ye(p=>p.map(m=>m.id===h.id?{...m,status:"generating",errorMsg:null,progress:5}:m)),h.modelName.includes("veo")?vi(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height):Wi(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height,h.apiConfig.modelId||""))},Loader2:Ss,Trash2:Cs,RefreshCw:Uf},f.id))]}),u.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`flex items-center gap-2 text-[10px] ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:[o.jsx("div",{className:`flex-1 h-px ${e==="dark"?"bg-zinc-700":"bg-zinc-300"}`}),o.jsxs("span",{className:"px-2 py-0.5 font-medium",children:[" (",u.length,")"]}),o.jsx("div",{className:`flex-1 h-px ${e==="dark"?"bg-zinc-700":"bg-zinc-300"}`})]}),u.map(f=>o.jsx(gm,{item:f,theme:e,lightboxItem:kr,providers:X,defaultProviders:Od,onDelete:hh,isSelected:bt.has(f.id),onSelect:h=>{console.log("[V3.5.2 Debug] onSelect called (prev), id:",h,"current Set size:",bt.size),Et(p=>{const m=new Set(p);return m.has(h)?m.delete(h):m.add(h),console.log("[V3.5.2 Debug] Updated Set size:",m.size),m})},onClick:()=>{if(f.url){const h=f.mjImages&&f.mjImages.length>1&&f.selectedMjImageIndex!==void 0?f.selectedMjImageIndex:0;Un({...f,url:f.mjImages&&f.mjImages.length>1?f.mjImages[h]:f.url,selectedMjImageIndex:h})}},onContextMenu:h=>Ql(h,f),onImageClick:(h,p,m,S)=>{h.stopPropagation(),ye(T=>T.map($=>$.id===p.id?{...$,url:m,selectedMjImageIndex:S}:$));const I={...p,url:m,selectedMjImageIndex:S};Un(I)},onImageContextMenu:(h,p,m,S)=>Ql(h,p,m,S),onRefresh:h=>{h.apiConfig&&(ye(p=>p.map(m=>m.id===h.id?{...m,status:"generating",errorMsg:null,progress:5}:m)),h.modelName.includes("veo")?vi(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height):Wi(h.remoteTaskId,h.id,h.apiConfig.baseUrl,h.apiConfig.apiKey,h.width,h.height,h.apiConfig.modelId||""))},Loader2:Ss,Trash2:Cs,RefreshCw:Uf},f.id))]})]})})()})]}),Vp&&o.jsxs("div",{className:`w-72 z-30 flex flex-col animate-in slide-in-from-left border-r transition-colors duration-300 ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[o.jsxs("div",{className:`p-3 border-b flex justify-between items-center ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[o.jsx("h3",{className:`font-bold text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:"Sora "}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{const s=ae.find(u=>u.type==="Video"&&(u.id==="sora-2"||u.id==="sora-2-pro"));if(s){const u=(s.url||hr).replace(/\/+$/,"");ca(`${u}/sora/v1/characters`)}else{const u=hr.replace(/\/+$/,"");ca(`${u}/sora/v1/characters`)}la(!0)},className:`px-2 py-1 text-[10px] rounded transition-colors ${e==="dark"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:""}),o.jsx("button",{onClick:()=>go(!1),children:o.jsx(Cr,{size:12,className:e==="dark"?"text-zinc-500":"text-zinc-400"})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3",children:Cn.length===0?o.jsx("div",{className:`text-center py-8 text-sm ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:'""'}):o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Cn.map(s=>o.jsxs("div",{className:`group rounded-lg overflow-hidden border cursor-pointer hover:border-blue-500/50 transition-colors ${e==="dark"?"bg-zinc-900 border-zinc-800":"bg-white border-zinc-200"}`,onClick:()=>{const u=` @${s.username} `,f=document.activeElement;if(f&&(f.tagName==="TEXTAREA"||f.tagName==="INPUT")){const h=f,p=h.selectionStart||0,m=h.selectionEnd||0,S=h.value,I=S.slice(0,p)+u+S.slice(m);h.value=I;const T=p+u.length;h.setSelectionRange(T,T),h.dispatchEvent(new Event("input",{bubbles:!0})),h.focus()}else navigator.clipboard.writeText(u.trim()).then(()=>{alert(`: ${u.trim()}`)})},children:[o.jsxs("div",{className:"aspect-square bg-zinc-800 relative group/char",children:[s.profile_picture_url?o.jsx(qr,{src:s.profile_picture_url,alt:s.username,className:"w-full h-full object-cover",onError:u=>{u.target.style.display="none"}}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:o.jsx(hm,{size:24})}),o.jsx("button",{onClick:u=>{if(u.stopPropagation(),confirm(` "${s.username}" `)){const f=Cn.filter(h=>h.id!==s.id);Lu(f);try{localStorage.setItem("tapnow_characters",JSON.stringify(f))}catch(h){console.error(":",h)}}},className:"absolute top-1 right-1 p-1.5 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 z-10",title:"",children:o.jsx(Cs,{size:12})})]}),o.jsx("div",{className:"p-2 relative",children:o.jsxs("p",{className:`text-xs truncate flex items-center gap-1 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:[s.username,o.jsx(Ba,{size:12,className:"text-green-500 shrink-0",title:"Sora 2 "})]})})]},s.id))})})]}),ly&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center",onClick:()=>la(!1),children:o.jsxs("div",{className:`w-[500px] max-h-[90vh] overflow-y-auto rounded-lg shadow-2xl flex flex-col ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-white border-zinc-200"} border`,onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:`p-4 border-b flex justify-between items-center ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[o.jsx("h3",{className:`font-bold text-sm ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),o.jsx("button",{onClick:()=>la(!1),children:o.jsx(Cr,{size:16,className:e==="dark"?"text-zinc-500":"text-zinc-400"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs mb-2 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("button",{onClick:()=>{Al("url"),Rl("")},className:`px-3 py-1.5 text-xs rounded transition-colors ${Bs==="url"?e==="dark"?"bg-blue-600 text-white":"bg-blue-500 text-white":e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,children:" URL"}),o.jsx("button",{onClick:()=>{Al("history"),Pl(""),ua(null)},className:`px-3 py-1.5 text-xs rounded transition-colors ${Bs==="history"?e==="dark"?"bg-blue-600 text-white":"bg-blue-500 text-white":e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,children:""})]}),Bs==="url"?o.jsx("input",{type:"text",value:xo,onChange:s=>Pl(s.target.value),placeholder:" URL...",className:`w-full px-3 py-2 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`}):o.jsxs("select",{value:yo,onChange:s=>{const u=s.target.value;if(Rl(u),u){const f=ya.get(u);f&&f.url&&(Al("url"),Pl(f.url),Rl(""))}},className:`w-full px-3 py-2 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`,children:[o.jsx("option",{value:"",children:"..."}),q.filter(s=>s.type==="video"&&s.status==="completed"&&s.url).map(s=>{var u;return o.jsxs("option",{value:s.id,children:[((u=s.prompt)==null?void 0:u.slice(0,50))||"Untitled"," - ",s.time]},s.id)})]}),(()=>{let s=null;if(Bs==="url"&&xo.trim())s=xo.trim();else if(Bs==="history"&&yo){const u=ya.get(yo);u&&u.url&&(s=u.url)}return s?o.jsxs("div",{className:"mt-2 mb-2",children:[o.jsx("video",{controls:!0,crossOrigin:"anonymous",className:"w-full h-40 object-contain bg-black rounded-lg",src:s,onError:u=>{console.error(":",s,u),ua("")},onLoadStart:()=>{ua(null)},onLoadedData:()=>{ua(null)}},s),Xp&&o.jsx("div",{className:"text-red-500 text-xs mt-1 text-center",children:Xp})]}):null})()]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs mb-2 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:" 1-3 "}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"number",min:"0",step:"0.1",value:vo,onChange:s=>Kp(parseFloat(s.target.value)||0),className:`w-20 px-2 py-1.5 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`}),o.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:""}),o.jsx("input",{type:"number",min:"0",step:"0.1",value:bo,onChange:s=>Yp(parseFloat(s.target.value)||0),className:`w-20 px-2 py-1.5 text-xs rounded border outline-none ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200":"bg-white border-zinc-300 text-zinc-800"}`}),o.jsxs("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:[": ",(bo-vo).toFixed(1),"s"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs mb-2 ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:"API  (API Endpoint)"}),o.jsx("input",{type:"text",value:Gp,onChange:s=>ca(s.target.value),placeholder:": https://your-domain.com/sora/v1/characters",className:`w-full px-3 py-2 text-xs rounded border outline-none font-mono ${e==="dark"?"bg-zinc-900 border-zinc-700 text-zinc-200 placeholder-zinc-600":"bg-white border-zinc-300 text-zinc-800 placeholder-zinc-400"}`,onFocus:s=>{if(!s.target.value){const u=ae.find(h=>h.type==="Video"&&(h.id==="sora-2"||h.id==="sora-2-pro")),f=u?(u.url||hr).replace(/\/+$/,""):hr.replace(/\/+$/,"");ca(`${f}/sora/v1/characters`)}}}),o.jsx("p",{className:`text-[10px] mt-1 ${e==="dark"?"text-zinc-500":"text-zinc-400"}`,children:""})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{onClick:()=>la(!1),className:`px-4 py-2 text-xs rounded transition-colors ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200"}`,children:""}),o.jsx("button",{onClick:async()=>{if(Bs==="url"&&!xo.trim()){alert(" URL");return}if(Bs==="history"&&!yo){alert("");return}if(bo-vo<1||bo-vo>3){alert(" 1-3 ");return}wo(!0);try{const s=Gp.trim()||null;Bs==="url"?await jh(xo,vo,bo,null,s):await jh("",vo,bo,yo,s)}finally{wo(!1)}},disabled:Ou,className:`px-4 py-2 text-xs rounded transition-colors ${Ou?"bg-zinc-400 text-zinc-200 cursor-not-allowed":e==="dark"?"bg-blue-600 text-white hover:bg-blue-500":"bg-blue-500 text-white hover:bg-blue-600"}`,children:Ou?"...":""})]})]})]})}),o.jsxs("div",{className:"flex-1 relative overflow-hidden flex",children:[o.jsxs("div",{ref:Hs,id:"canvas-bg",className:"flex-1 h-full cursor-default relative",onMouseDown:Ny,onClick:Sy,onDoubleClick:Cy,style:{backgroundImage:e==="dark"?"radial-gradient(#27272a 1px, transparent 1px)":"radial-gradient(rgba(0, 0, 0, 0.08) 0.5px, transparent 0.5px)",backgroundSize:`${20*v.zoom}px ${20*v.zoom}px`,backgroundPosition:`${v.x}px ${v.y}px`,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:[o.jsxs("div",{className:"absolute origin-top-left will-change-transform",style:{transform:`translate3d(${v.x}px, ${v.y}px, 0) scale(${v.zoom})`,width:L2,height:O2,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",transformOrigin:"top left",imageRendering:v.zoom>=1?"auto":"crisp-edges"},children:[o.jsx(Ch,{connections:i,nodesMap:Ft,connectionsByNode:jo,connectingSource:H,connectingTarget:Le,connectingInputType:Qt,mousePos:Vn,apiConfigsMap:en,selectedNodeId:ze,onDisconnectConnection:Zu,visibleNodes:Fl}),Fl.map(s=>z1(s))]}),ls&&o.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-500/10 pointer-events-none z-50",style:{left:Math.min(ls.startX,ls.endX),top:Math.min(ls.startY,ls.endY),width:Math.abs(ls.endX-ls.startX),height:Math.abs(ls.endY-ls.startY)}})]}),o.jsxs("div",{className:`fixed right-0 top-12 bottom-0 border-l shadow-2xl flex flex-col z-50 transition-transform duration-300 ease-in-out select-text ${e==="dark"?"bg-[#121214] border-zinc-800":"bg-white border-zinc-200"} ${Ds?"translate-x-0":"translate-x-full"}`,style:{width:Ls,pointerEvents:Ds?"auto":"none"},children:[o.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 cursor-ew-resize transition-colors z-50 flex items-center justify-center group ${e==="dark"?"hover:bg-blue-600/50":"hover:bg-blue-400/30"}`,onMouseDown:_y,children:o.jsx("div",{className:`h-8 w-1 rounded transition-colors ${e==="dark"?"bg-zinc-700 group-hover:bg-blue-500":"bg-zinc-300 group-hover:bg-blue-500"}`})}),o.jsxs("div",{className:`h-12 flex items-center justify-between px-3 shrink-0 border-b ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[o.jsx("div",{className:"flex items-center gap-2 overflow-hidden",children:o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:ai,onChange:s=>Mn(s.target.value),className:`text-xs border rounded pl-2 pr-6 py-1 appearance-none outline-none focus:border-blue-500 cursor-pointer max-w-[180px] truncate ${e==="dark"?"bg-zinc-800 text-zinc-300 border-zinc-700":"bg-white text-zinc-800 border-zinc-300"}`,children:ae.filter(s=>s.type==="Chat").map(s=>o.jsx("option",{value:s.id,children:s.modelName||s.id},s.id))}),o.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",children:o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Hi(ai)}`})})]})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:$y,className:`p-1.5 rounded ${e==="dark"?"text-zinc-400 hover:text-white hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100"}`,title:"",children:o.jsx(Gs,{size:16})}),Mt.length>1&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>Uu(!Jp),className:`p-1.5 rounded ${e==="dark"?"text-zinc-400 hover:text-white hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100"}`,children:o.jsx(um,{size:16})}),Jp&&o.jsx("div",{className:`absolute right-0 top-full mt-1 w-48 rounded-lg shadow-xl py-1 z-50 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,onMouseLeave:()=>Uu(!1),children:Mt.map(s=>o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 text-xs cursor-pointer ${Nn===s.id?e==="dark"?"bg-zinc-800 text-white":"bg-zinc-100 text-zinc-900":e==="dark"?"text-zinc-400 hover:bg-zinc-800/50":"text-zinc-500 hover:bg-zinc-100"}`,onClick:()=>{Sn(s.id),Uu(!1)},children:[o.jsx("span",{className:"truncate flex-1",children:s.title}),o.jsx("button",{onClick:u=>{u.stopPropagation(),Ay(u,s.id)},className:`p-1 ${e==="dark"?"text-zinc-600 hover:text-red-500":"text-zinc-400 hover:text-red-500"}`,children:o.jsx(Cr,{size:10})})]},s.id))})]}),o.jsx("button",{onClick:()=>wr(!1),className:`p-1.5 rounded ${e==="dark"?"text-zinc-400 hover:text-white hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100"}`,children:o.jsx(Za,{size:16})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4 select-text",children:[_o==null?void 0:_o.messages.map(s=>o.jsxs("div",{className:`flex gap-3 select-text ${s.role==="user"?"flex-row-reverse":""}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 select-none ${s.role==="user"?"bg-blue-600":"bg-green-600"}`,children:s.role==="user"?o.jsx(hm,{size:16,className:"text-white"}):o.jsx(sm,{size:16,className:"text-white"})}),o.jsxs("div",{className:`flex flex-col gap-1 max-w-[85%] select-text ${s.role==="user"?"items-end":"items-start"}`,children:[s.files&&s.files.length>0&&o.jsx("div",{className:`flex flex-wrap gap-2 mb-1 ${s.role==="user"?"justify-end":"justify-start"}`,children:s.files.map((u,f)=>o.jsx("div",{className:`rounded p-1 border flex items-center gap-1 ${e==="dark"?"bg-zinc-800 border-zinc-700":"bg-zinc-100 border-zinc-300"}`,children:u.isImage?o.jsx(qr,{src:u.content,className:"w-16 h-16 object-cover rounded",alt:u.name}):u.isVideo?o.jsx("video",{src:u.content,controls:!0,className:`max-w-full rounded-lg bg-black max-h-[300px] border ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,playsInline:!0}):u.isAudio?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(lm,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:""})]}):u.isPDF?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:"PDF"})]}):u.isDoc?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:"DOC"})]}):u.isExcel?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:"XLS"})]}):o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1 max-w-full truncate px-1",children:u.fileExt||u.name.split(".").pop()||""})]})},f))}),(s.content||s.files&&s.files.length>0)&&o.jsx("div",{className:`rounded-2xl px-4 py-2 text-sm select-text break-words whitespace-pre-wrap ${s.role==="user"?e==="dark"?"bg-zinc-800 text-white rounded-tr-none":"bg-zinc-300 text-zinc-900 rounded-tr-none":e==="dark"?"bg-zinc-800/50 text-zinc-300 rounded-tl-none border border-zinc-800":"bg-zinc-100 text-zinc-800 rounded-tl-none border border-zinc-200"}`,style:{userSelect:"text",cursor:"text"},children:s.isError?o.jsx("span",{className:"text-red-500 select-text cursor-text",style:{userSelect:"text",cursor:"text"},children:s.content}):s.content?o.jsx("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:r2.sanitize(rn.parse(s.content))},style:{userSelect:"text",cursor:"text"}}):null})]})]},s.id||s.timestamp||`msg-${Math.random()}`)),os&&o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600 flex items-center justify-center shrink-0",children:o.jsx(sm,{size:16,className:"text-white"})}),o.jsx("div",{className:`rounded-2xl rounded-tl-none px-4 py-2 border flex items-center ${e==="dark"?"bg-zinc-800/50 border-zinc-800":"bg-zinc-100 border-zinc-200"}`,children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),o.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),o.jsx("div",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),o.jsx("div",{ref:rh})]}),o.jsxs("div",{className:`p-3 border-t ${e==="dark"?"border-zinc-800 bg-[#121214]":"border-zinc-200 bg-zinc-50"}`,children:[Qn.length>0&&o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-2 custom-scrollbar",children:Qn.map((s,u)=>o.jsxs("div",{className:"relative group shrink-0",children:[s.isImage?o.jsx(qr,{src:s.content,className:`w-12 h-12 object-cover rounded border ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,alt:s.name}):s.isVideo?o.jsx("video",{src:s.content,className:`w-16 h-12 object-cover rounded border bg-black ${e==="dark"?"border-zinc-700":"border-zinc-300"}`,muted:!0,playsInline:!0}):s.isAudio?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(lm,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:""})]}):s.isPDF?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:"PDF"})]}):s.isDoc?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:"DOC"})]}):s.isExcel?o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1",children:"XLS"})]}):o.jsxs("div",{className:`w-12 h-12 rounded flex flex-col items-center justify-center ${e==="dark"?"bg-zinc-800 border border-zinc-700 text-zinc-400":"bg-zinc-100 border border-zinc-300 text-zinc-500"}`,children:[o.jsx(Jr,{size:16}),o.jsx("span",{className:"text-[8px] mt-1 max-w-full truncate px-1",children:s.fileExt||s.name.split(".").pop()||""})]}),o.jsx("button",{onClick:()=>Ry(u),className:`absolute -top-1 -right-1 rounded-full p-0.5 border opacity-0 group-hover:opacity-100 transition-opacity ${e==="dark"?"bg-zinc-900 text-zinc-400 hover:text-white border-zinc-700":"bg-white text-zinc-500 hover:text-zinc-900 border-zinc-300"}`,children:o.jsx(Cr,{size:10})})]},u))}),o.jsxs("div",{className:`relative rounded-xl flex items-end p-2 focus-within:border-blue-500/50 transition-colors border ${e==="dark"?"bg-zinc-800/50 border-zinc-700":"bg-white border-zinc-300"}`,children:[o.jsxs("label",{className:`p-2 cursor-pointer transition-colors ${e==="dark"?"text-zinc-400 hover:text-white":"text-zinc-500 hover:text-zinc-900"}`,title:"",children:[o.jsx(v2,{size:18}),o.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:Py,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.md,.js,.py,.html,.css,.json,.csv"})]}),o.jsx("textarea",{value:Ar,onChange:s=>oi(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),gh())},placeholder:"...",className:`w-full bg-transparent text-sm resize-none outline-none max-h-32 py-2 px-1 custom-scrollbar ${e==="dark"?"text-white placeholder-zinc-500":"text-zinc-800 placeholder-zinc-400"}`,rows:1,style:{minHeight:"36px"}}),o.jsx("button",{onClick:gh,disabled:!Ar.trim()&&Qn.length===0||os,className:`p-2 rounded-lg transition-all mb-0.5 ${!Ar.trim()&&Qn.length===0||os?"opacity-50 bg-transparent text-zinc-400":"bg-blue-600 text-white hover:bg-blue-500"}`,children:o.jsx(j2,{size:16})})]}),o.jsx("div",{className:`text-[10px] text-center mt-2 ${e==="dark"?"text-zinc-600":"text-zinc-500"}`,children:" MP4/MP3/PDF/Doc/Excel/Code   Enter "})]})]}),fi.visible&&o.jsx("div",{className:`fixed z-50 w-40 rounded-lg shadow-xl border ${e==="dark"?"bg-[#18181b] border-zinc-800":"bg-white border-zinc-200"}`,style:{left:fi.x,top:fi.y,transform:"translate(-50%, -50%)"},onMouseLeave:()=>ho(s=>({...s,visible:!1})),children:o.jsx("div",{className:"p-1",children:[{type:"input-image",label:""},{type:"text-node",label:""},{type:"video-input",label:" / "},{type:"video-analyze",label:" / "},{type:"storyboard-node",label:""},{type:"gen-image",label:"AI "},{type:"gen-video",label:"AI "},{type:"image-compare",label:""},{type:"preview",label:""}].map(s=>o.jsx("button",{className:`w-full text-left px-3 py-2 text-xs rounded transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>ds(s.type,fi.worldX,fi.worldY,fi.sourceNodeId,void 0,void 0,fi.targetNodeId,fi.inputType),children:s.label},s.type))})}),ir.visible&&o.jsxs("div",{className:`fixed z-[100] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:ir.x,top:ir.y},children:[o.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:x1,children:[o.jsx(Co,{size:14,className:"text-purple-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:g1,children:[o.jsx(So,{size:14,className:"text-blue-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const s=ir.item;s!=null&&s.url&&(r(u=>{const f=u.filter(p=>p.type==="preview");if(!f.length)return u;const h=f[f.length-1].id;return u.map(p=>p.id===h?{...p,content:s.url,previewType:s.type==="video"?"video":"image"}:p)}),cs({visible:!1,x:0,y:0,item:null}))},children:[o.jsx(Ha,{size:14,className:"text-emerald-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:m1,children:[o.jsx(zc,{size:14,className:ze?"text-green-500":"text-zinc-400"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const s=ir.item,u=s.mjImages&&s.mjImages.length>0?s.mjImages[s.selectedMjImageIndex||0]||s.mjImages[0]:s.url||s.mjOriginalUrl;u&&(Vr.nodeId&&Vr.shotId?on(Vr.nodeId,Vr.shotId,{image_url:u}):alert(""),cs({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null}))},children:[o.jsx(_c,{size:14,className:Vr.nodeId&&Vr.shotId?"text-orange-500":"text-zinc-400"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const s=ir.item;if(s!=null&&s.url){const u=(ir.worldX||0)+340,f=ir.worldY||0;ja(s.url,{originX:u,originY:f})}cs({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null})},children:[o.jsx(Dd,{size:14,className:"text-blue-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:async()=>{const s=ir.item;if(s!=null&&s.url){try{const f=s.type==="video"||s.url.includes("/video/")||s.url.includes("video_mp4")?"mp4":"png",p=`${(s.prompt||"download").replace(/[\\/:*?"<>|]/g,"_").slice(0,50)}.${f}`,S=await(await fetch(s.url)).blob(),I=window.URL.createObjectURL(S),T=document.createElement("a");T.href=I,T.download=p,T.click(),window.URL.revokeObjectURL(I),console.log(" :",p)}catch(u){console.error(":",u),alert("")}cs({visible:!1,x:0,y:0,worldX:0,worldY:0,item:null})}},children:[o.jsx(Fa,{size:14,className:"text-green-500"})," ",((Mh=ir.item)==null?void 0:Mh.type)==="video"?"":""]})]}),pi.visible&&o.jsxs("div",{className:`fixed z-[110] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:pi.x,top:pi.y},children:[o.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:d1,children:[o.jsx(Co,{size:14,className:"text-purple-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:f1,children:[o.jsx(So,{size:14,className:"text-blue-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:p1,children:[o.jsx(Ha,{size:14,className:"text-emerald-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:h1,children:[o.jsx(zc,{size:14,className:ze?"text-green-500":"text-zinc-400"})," "]})]}),mo.visible&&o.jsxs("div",{className:`fixed z-[110] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:mo.x,top:mo.y},onMouseLeave:ec,children:[o.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:v1,children:[o.jsx(Co,{size:14,className:"text-purple-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:b1,children:[o.jsx(So,{size:14,className:"text-blue-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const s=mo.item;if(s!=null&&s.url){const u=ks.current;if(u&&u.size===9)ja(s.url,{replaceSelected:!0});else{const h=s.sourceNode,p=h?h.x+h.width+20:void 0,m=h?h.y:void 0;ja(s.url,{originX:p,originY:m})}}ec()},children:[o.jsx(Dd,{size:14,className:"text-blue-500"})," "]})]}),aa.visible&&o.jsxs("div",{className:`fixed z-[110] w-48 rounded-lg shadow-2xl py-1 animate-in fade-in duration-100 border ${e==="dark"?"bg-[#18181b] border-zinc-700":"bg-white border-zinc-200"}`,style:{left:aa.x,top:aa.y},onMouseLeave:Qu,children:[o.jsx("div",{className:`px-3 py-1.5 text-[10px] font-medium border-b mb-1 ${e==="dark"?"text-zinc-500 border-zinc-800":"text-zinc-500 border-zinc-200"}`,children:""}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:k1,children:[o.jsx(Co,{size:14,className:"text-purple-500"})," "]}),o.jsxs("button",{className:`w-full text-left px-3 py-2 text-xs flex items-center gap-2 transition-colors ${e==="dark"?"text-zinc-300 hover:bg-zinc-800":"text-zinc-700 hover:bg-zinc-100"}`,onClick:()=>{const s=aa.nodeId,u=Ft.get(s);if(!u||!u.content)return;const f=ks.current;if(f&&f.size===9)ja(u.content,{replaceSelected:!0});else{const p=u.x+u.width+20,m=u.y;ja(u.content,{originX:p,originY:m})}Qu()},children:[o.jsx(Dd,{size:14,className:"text-blue-500"})," "]})]}),o.jsx(X2,{item:kr,onClose:()=>Un(null),onNavigate:s=>{if(kr&&kr.mjImages&&kr.mjImages.length>s&&s>=0){const u=Math.max(0,Math.min(s,kr.mjImages.length-1));ye(f=>f.map(h=>h.id===kr.id?{...h,url:kr.mjImages[u],selectedMjImageIndex:u}:h)),Un({...kr,url:kr.mjImages[u],selectedMjImageIndex:u})}}}),o.jsxs(G2,{isOpen:ay,onClose:()=>hi(!1),title:"",theme:e,children:[o.jsx("div",{className:"p-4 space-y-3",children:o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"Global API Key Key"}),o.jsx("div",{className:"mt-1 flex gap-2",children:o.jsx("input",{type:"password",value:We,onChange:s=>Ye(s.target.value),className:`flex-1 rounded px-2 py-1 text-xs outline-none focus:border-blue-600/50 border ${e==="dark"?"bg-zinc-900 border-zinc-800 text-zinc-300":"bg-white border-zinc-300 text-zinc-900"}`,placeholder:" Key Key"})})]})}),o.jsxs("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"V2.6.1 "}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),o.jsxs("select",{value:D,onChange:s=>{const u=s.target.value;ee(u),localStorage.setItem("tapnow_performance_mode",u)},className:`text-xs rounded px-2 py-0.5 border outline-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300"}`,children:[o.jsx("option",{value:"off",children:" ()"}),o.jsx("option",{value:"normal",children:" ()"}),o.jsx("option",{value:"ultra",children:" ()"})]})]}),o.jsx("p",{className:"text-[9px] text-zinc-500",children:""})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:""}),o.jsx("input",{type:"text",value:_e,onChange:s=>{const u=s.target.value;Ie(u),localStorage.setItem("tapnow_local_server_url",u)},placeholder:"http://127.0.0.1:9527",className:`w-full text-xs rounded px-2 py-1 border outline-none ${e==="dark"?"bg-zinc-800 border-zinc-700 text-zinc-300":"bg-white border-zinc-300"}`})]}),o.jsx("p",{className:"text-[9px] text-zinc-500 mt-1",children:""})]})]})]}),o.jsxs("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"API "}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{onClick:()=>{const s={version:"3.4.23",exportTime:new Date().toISOString(),globalApiKey:We,providers:X,apiConfigs:ae.map(({key:M,url:O,...P})=>P)},u=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),f=URL.createObjectURL(u),h=document.createElement("a");h.href=f;const p=new Date,m=p.getFullYear().toString().slice(2),S=(p.getMonth()+1).toString().padStart(2,"0"),I=p.getDate().toString().padStart(2,"0"),T=p.getHours().toString().padStart(2,"0"),$=p.getMinutes().toString().padStart(2,"0");h.download=`tapnow-api-keys-${m}${S}${I}-${T}${$}.json`,h.click(),URL.revokeObjectURL(f)},className:`flex-1 px-3 py-2 text-xs rounded flex items-center justify-center gap-2 transition-colors ${e==="dark"?"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 border border-blue-500/30":"bg-blue-50 text-blue-600 hover:bg-blue-100 border border-blue-200"}`,children:[o.jsx(Fa,{size:14})," API Keys"]}),o.jsxs("button",{onClick:()=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async u=>{const f=u.target.files[0];if(f)try{const h=await f.text(),p=JSON.parse(h);if(p.globalApiKey&&(Ye(p.globalApiKey),localStorage.setItem("tapnow_global_key",p.globalApiKey)),p.providers&&oe(m=>({...m,...p.providers})),p.apiConfigs&&Array.isArray(p.apiConfigs)){const m=p.apiConfigs.map(S=>{if(S.modelName&&S.modelName!==S.id)return{id:S.modelName,provider:S.provider,type:S.type,...S.durations?{durations:S.durations}:{}};const{displayName:I,modelName:T,isCustom:$,key:M,url:O,...P}=S;return P});Ae(m)}alert("API ")}catch(h){alert(": "+h.message)}},s.click()},className:`flex-1 px-3 py-2 text-xs rounded flex items-center justify-center gap-2 transition-colors ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700 border border-zinc-700":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 border border-zinc-300"}`,children:[o.jsx(Pd,{size:14})," API Keys"]})]}),o.jsx("p",{className:"text-[9px] text-zinc-500 mt-1",children:" KeyProvider  Key"})]}),o.jsx("div",{className:"mb-2 border-t pt-2 border-zinc-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"/"}),o.jsx("p",{className:`text-[10px] mt-0.5 ${e==="dark"?"text-zinc-600":"text-zinc-500"}`,children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[o.jsx("input",{type:"range",min:"1",max:"30",value:l,onChange:s=>{const u=parseInt(s.target.value)||5;c(u),localStorage.setItem("tapnow_max_undo_steps",String(u))},className:"w-20",onMouseDown:s=>s.stopPropagation()}),o.jsx("span",{className:`text-xs font-mono w-6 text-center ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,children:l})]})]})}),o.jsx("div",{className:"mb-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:""}),o.jsx("p",{className:`text-[10px] mt-0.5 ${e==="dark"?"text-zinc-600":"text-zinc-500"}`,children:"FormDataURL"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-3",children:[o.jsx("input",{type:"checkbox",checked:Ht,onChange:s=>{const u=s.target.checked;vn(u),localStorage.setItem("tapnow_jimeng_use_local_file",String(u))},className:"sr-only peer"}),o.jsx("div",{className:`w-11 h-6 rounded-full peer peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 ${Ht?"bg-blue-600":e==="dark"?"bg-zinc-700":"bg-zinc-300"} peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all`})]})]})}),o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:`text-xs ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{const s=Object.values(da).some(f=>f),u={};s||Object.keys(js).forEach(f=>u[f]=!0),Fu(u)},className:`p-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${e==="dark"?"text-zinc-400":"text-zinc-500"}`,title:Object.values(da).some(s=>s)?"":"",children:o.jsx(c2,{size:14,className:`transition-transform ${Object.values(da).some(s=>s)?"":"rotate-180"}`})}),o.jsxs(Cc,{className:"h-7 text-xs px-3 bg-blue-600 hover:bg-blue-500",onClick:()=>{const s=`custom-${Date.now()}`,u="New Provider";oe(f=>({...f,[s]:{name:u,key:"",url:"",enabled:!0}})),Fu(f=>({...f,[s]:!0})),Ol({key:s,tempName:u})},children:[o.jsx(Gs,{size:14,className:"mr-1"})," "]})]})]}),o.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1",children:Object.entries(js).map(([s,u])=>{var f,h,p;return o.jsxs("div",{className:`group rounded-lg border ${e==="dark"?"bg-[#18181b] border-zinc-800":"bg-zinc-50 border-zinc-200"}`,children:[o.jsx("button",{onClick:()=>Fu(m=>({...m,[s]:!m[s]})),className:`w-full flex items-center justify-between px-3 py-2.5 text-left transition-colors ${e==="dark"?"hover:bg-zinc-800/50":"hover:bg-zinc-100"}`,children:fy===s?o.jsxs("div",{className:"flex items-center justify-between w-full",children:[o.jsxs("span",{className:`text-sm font-semibold ${e==="dark"?"text-zinc-100":"text-zinc-800"}`,children:[" ",u.name,"?"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:m=>{m.stopPropagation(),oe(S=>{const I={...S};return delete I[s],I}),Bu(null)},className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded",children:""}),o.jsx("button",{onClick:m=>{m.stopPropagation(),Bu(null)},className:`text-xs px-2 py-1 rounded ${e==="dark"?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-zinc-200 hover:bg-zinc-300 text-zinc-700"}`,children:""})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${((f=X[s])==null?void 0:f.enabled)!==!1?"bg-green-500":"bg-zinc-500"}`}),(ko==null?void 0:ko.key)===s?o.jsx("input",{type:"text",value:ko.tempName,onChange:m=>Ol(S=>({...S,tempName:m.target.value})),onBlur:()=>{const m=ko.tempName.trim(),S=s;m&&m!==S&&(oe(I=>{const{[S]:T,...$}=I;return{...$,[m]:T}}),Ae(I=>I.map(T=>T.provider===S?{...T,provider:m}:T))),Ol(null)},onKeyDown:m=>{m.key==="Enter"&&m.target.blur(),m.stopPropagation()},onClick:m=>m.stopPropagation(),autoFocus:!0,className:`text-sm font-semibold bg-transparent border-b border-blue-500 outline-none w-full ${e==="dark"?"text-zinc-100":"text-zinc-800"}`}):o.jsx("span",{className:`text-sm font-semibold ${e==="dark"?"text-zinc-100":"text-zinc-800"}`,children:u.name}),o.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${e==="dark"?"bg-zinc-800 text-zinc-500":"bg-zinc-200 text-zinc-500"}`,children:[u.models.length," "]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!ko&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:m=>{m.stopPropagation(),Ol({key:s,tempName:u.name})},className:"p-1 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors opacity-0 group-hover:opacity-100",title:"",children:o.jsx(b2,{size:12,className:e==="dark"?"text-zinc-400":"text-zinc-500"})}),o.jsx("button",{onClick:m=>{m.stopPropagation(),Bu(s)},className:"p-1 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors opacity-0 group-hover:opacity-100",title:"",children:o.jsx(Cs,{size:12,className:e==="dark"?"text-zinc-400 hover:text-red-400":"text-zinc-500 hover:text-red-500"})})]}),o.jsx(wi,{size:16,className:`transition-transform ${da[s]?"rotate-180":""} ${e==="dark"?"text-zinc-500":"text-zinc-400"}`})]})]})}),da[s]&&o.jsxs("div",{className:`px-3 pb-3 border-t ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[o.jsxs("div",{className:"pt-3 pb-2 space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider text-right ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"API Key"}),o.jsx("input",{type:"password",value:((h=X[s])==null?void 0:h.key)||"",onChange:m=>oe(S=>({...S,[s]:{...S[s],key:m.target.value}})),className:`col-span-3 w-full rounded px-2 py-1 text-xs outline-none focus:border-blue-600/50 border ${e==="dark"?"bg-zinc-900 border-zinc-800 text-zinc-300":"bg-white border-zinc-300 text-zinc-900"}`,placeholder:"sk-..."})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[o.jsx("label",{className:`text-[10px] font-medium uppercase tracking-wider text-right ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:"Base URL"}),o.jsx("input",{type:"text",value:((p=X[s])==null?void 0:p.url)||"",onChange:m=>oe(S=>({...S,[s]:{...S[s],url:m.target.value}})),className:`col-span-3 w-full rounded px-2 py-1 text-xs outline-none focus:border-blue-600/50 border ${e==="dark"?"bg-zinc-900 border-zinc-800 text-zinc-300":"bg-white border-zinc-300 text-zinc-900"}`,placeholder:"https://..."})]})]}),o.jsxs("div",{className:`mt-2 pt-2 border-t ${e==="dark"?"border-zinc-800/50":"border-zinc-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:`text-[10px] font-medium uppercase tracking-wider ${e==="dark"?"text-zinc-500":"text-zinc-600"}`,children:""}),o.jsxs("button",{onClick:()=>{const m=`${s}-${Date.now()}`;Ae(S=>[...S,{id:m,provider:s,type:"Chat"}])},className:`text-[9px] px-1.5 py-0.5 rounded flex items-center gap-1 ${e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-200 text-zinc-600 hover:bg-zinc-300"}`,children:[o.jsx(Gs,{size:10})," "]})]}),o.jsx("div",{className:"space-y-1.5",children:u.models.map(m=>o.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 rounded ${e==="dark"?"bg-zinc-900/50 hover:bg-zinc-800/50":"bg-white hover:bg-zinc-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Hi(m.id)}`}),o.jsx("input",{type:"text",value:m.id||"",onChange:S=>mh(m.id,{id:S.target.value},m.id),className:`text-xs bg-transparent border-b border-transparent hover:border-zinc-600 focus:border-blue-500 outline-none flex-1 font-mono ${e==="dark"?"text-zinc-300":"text-zinc-700"}`,placeholder:"model-id",title:` ID: ${m.id}`}),o.jsxs("select",{value:m.type||"Chat",onChange:S=>mh(m.id,{type:S.target.value}),className:`text-[9px] px-1 rounded cursor-pointer outline-none ${e==="dark"?"bg-zinc-800 text-zinc-400 hover:bg-zinc-700":"bg-zinc-200 text-zinc-500 hover:bg-zinc-300"}`,children:[o.jsx("option",{value:"Chat",children:"Chat"}),o.jsx("option",{value:"Image",children:"Image"}),o.jsx("option",{value:"Video",children:"Video"})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>Ty(m.id),disabled:qp===m.id,className:`px-1.5 py-0.5 rounded text-[9px] ${Wu[m.id]==="success"?"text-green-500":e==="dark"?"text-zinc-500 hover:text-zinc-300":"text-zinc-400 hover:text-zinc-600"}`,children:qp===m.id?o.jsx(Ss,{size:10,className:"animate-spin"}):Wu[m.id]==="success"?o.jsx(Xa,{size:10}):o.jsx(Ba,{size:10})}),o.jsx("button",{onClick:()=>Iy(m.id),className:`px-1 ${e==="dark"?"text-zinc-600 hover:text-red-500":"text-zinc-400 hover:text-red-500"}`,children:o.jsx(Cs,{size:10})})]})]},m.id))})]})]})]},s)})}),o.jsx("div",{className:`pt-2 flex justify-end gap-2 border-t mt-3 ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:o.jsx(Cc,{variant:"secondary",onClick:()=>hi(!1),children:""})})]}),cy&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>{Ll(!1),Bi(new Set)}}),o.jsxs("div",{className:`relative w-[90vw] h-[85vh] max-w-7xl rounded-lg shadow-2xl flex flex-col ${e==="dark"?"bg-[#121214] border border-zinc-800":"bg-white border border-zinc-200"}`,children:[o.jsxs("div",{className:`p-4 border-b flex items-center justify-between ${e==="dark"?"border-zinc-800":"border-zinc-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:`text-lg font-bold ${e==="dark"?"text-zinc-100":"text-zinc-900"}`,children:""}),o.jsxs("span",{className:`text-sm ${e==="dark"?"text-zinc-400":"text-zinc-600"}`,children:[" ",_r.size," "]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{_r.size===q.length?Bi(new Set):Bi(new Set(q.map(s=>s.id)))},className:`px-3 py-1.5 text-xs rounded transition-colors ${e==="dark"?"bg-zinc-800 text-zinc-300 hover:bg-zinc-700":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200"}`,children:_r.size===q.length?"":""}),o.jsxs("button",{onClick:()=>{_r.size!==0&&confirm(` ${_r.size} `)&&(ye(s=>{const u=s.filter(f=>!_r.has(f.id));try{localStorage.setItem("tapnow_history",JSON.stringify(u))}catch(f){console.error(":",f)}return u}),Bi(new Set))},disabled:_r.size===0,className:`px-3 py-1.5 text-xs rounded transition-colors flex items-center gap-1.5 ${_r.size===0?e==="dark"?"bg-zinc-800/50 text-zinc-600 cursor-not-allowed":"bg-zinc-100 text-zinc-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:[o.jsx(Cs,{size:14}),""]}),o.jsxs("button",{onClick:async()=>{if(_r.size===0)return;const s=q.filter(p=>_r.has(p.id)&&p.url);if(s.length===0){alert("");return}const u=cn(window.innerWidth/2,window.innerHeight/2),f=u.x,h=u.y;s.forEach((p,m)=>{const S=m%5*20,I=Math.floor(m/5)*20;let T=p.url;p.type==="video"&&!Gn(T)&&(T+=(T.includes("?")?"&":"?")+"force_video_display=true"),p.type==="image"?(async()=>{try{const $=await Sr(T);ds("input-image",f+S,h+I,null,T,$)}catch{ds("input-image",f+S,h+I,null,T)}})():p.type==="video"&&ds("video-input",f+S,h+I,null,T)}),Ll(!1),Bi(new Set)},disabled:_r.size===0,className:`px-3 py-1.5 text-xs rounded transition-colors flex items-center gap-1.5 ${_r.size===0?e==="dark"?"bg-zinc-800/50 text-zinc-600 cursor-not-allowed":"bg-zinc-100 text-zinc-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[o.jsx(zc,{size:14}),""]}),o.jsx("button",{onClick:()=>{Ll(!1),Bi(new Set)},className:`p-1.5 rounded transition-colors ${e==="dark"?"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200"}`,children:o.jsx(Cr,{size:18})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:o.jsx("div",{className:"grid grid-cols-4 gap-4",children:q.map(s=>{var h,p;const u=_r.has(s.id),f=s.mjImages&&s.mjImages.length>1?s.mjImages[s.selectedMjImageIndex||0]||s.mjImages[0]:s.url;return o.jsxs("div",{onClick:()=>{const m=new Set(_r);u?m.delete(s.id):m.add(s.id),Bi(m)},onDoubleClick:m=>{m.stopPropagation();const S={...s,url:f,selectedMjImageIndex:s.mjImages&&s.mjImages.length>1?s.selectedMjImageIndex||0:void 0};Un(S)},className:`relative rounded-lg overflow-hidden border-2 cursor-pointer transition-all ${u?"border-blue-500 shadow-lg shadow-blue-500/20":e==="dark"?"border-zinc-800 hover:border-zinc-700":"border-zinc-200 hover:border-zinc-300"}`,children:[o.jsxs("div",{className:"absolute top-2 right-2 z-10 flex items-center gap-1.5",children:[u&&o.jsx("div",{className:"bg-blue-500 rounded-full p-1",children:o.jsx(ny,{size:16,className:"text-white"})}),s.status==="completed"&&f&&o.jsx("button",{onClick:m=>{m.stopPropagation();const S={...s,url:f,selectedMjImageIndex:s.mjImages&&s.mjImages.length>1?s.selectedMjImageIndex||0:void 0};Un(S)},className:`p-1.5 rounded-full transition-colors backdrop-blur-sm ${e==="dark"?"bg-black/60 text-white hover:bg-black/80":"bg-white/80 text-zinc-700 hover:bg-white"}`,title:" ()",children:o.jsx(Ha,{size:14})})]}),o.jsx("div",{className:`relative ${s.mjImages&&(s.mjImages.length===4||s.mjImages.length>1)||s.mjNeedsSplit&&((p=(h=s.apiConfig)==null?void 0:h.modelId)!=null&&p.includes("mj"))?(()=>{const m=s.mjRatio||"1:1";return m==="16:9"?"aspect-video":m==="9:16"?"aspect-[9/16]":m==="4:3"?"aspect-[4/3]":m==="3:4"?"aspect-[3/4]":m==="21:9"?"aspect-[21/9]":"aspect-square"})():"aspect-video"} ${e==="dark"?"bg-zinc-900":"bg-zinc-100"}`,children:s.status==="completed"&&f?s.type==="video"||Gn(f)?o.jsx("video",{src:f,className:"w-full h-full object-contain",controls:!0,playsInline:!0,preload:"metadata"}):o.jsx(qr,{src:f,className:"w-full h-full object-contain",alt:"",onError:m=>{m.target.style.display="none"}}):o.jsx("div",{className:`w-full h-full flex items-center justify-center ${e==="dark"?"text-zinc-600":"text-zinc-400"}`,children:s.status==="generating"?o.jsx(Ss,{size:24,className:"animate-spin"}):o.jsx(f2,{size:24})})}),o.jsxs("div",{className:`p-2 text-xs ${e==="dark"?"bg-zinc-900 text-zinc-300":"bg-zinc-50 text-zinc-700"}`,children:[o.jsx("div",{className:"truncate font-medium",children:s.prompt||""}),o.jsxs("div",{className:"text-[10px] opacity-70 mt-0.5",children:[s.id||"","  ",s.time]})]})]},s.id)})})})]})]})]})]})]})]})}Fd.createRoot(document.getElementById("root")).render(o.jsx(xu.StrictMode,{children:o.jsx(Z2,{})}));</script>
  <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.\!visible{visibility:visible!important}.visible{visibility:visible}.collapse{visibility:collapse}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-bottom-0\.5{bottom:-.125rem}.-bottom-1\.5{bottom:-.375rem}.-left-1{left:-.25rem}.-right-0\.5{right:-.125rem}.-right-1{right:-.25rem}.-right-2\.5{right:-.625rem}.-top-1{top:-.25rem}.-top-1\.5{top:-.375rem}.-top-10{top:-2.5rem}.-top-2\.5{top:-.625rem}.bottom-0{bottom:0}.bottom-1{bottom:.25rem}.bottom-2{bottom:.5rem}.bottom-4{bottom:1rem}.bottom-8{bottom:2rem}.bottom-full{bottom:100%}.left-0{left:0}.left-1{left:.25rem}.left-1\/2{left:50%}.left-2{left:.5rem}.left-4{left:1rem}.left-6{left:1.5rem}.right-0{right:0}.right-0\.5{right:.125rem}.right-1{right:.25rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-0\.5{top:.125rem}.top-1{top:.25rem}.top-1\/2{top:50%}.top-12{top:3rem}.top-2{top:.5rem}.top-4{top:1rem}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\[100\]{z-index:100}.z-\[110\]{z-index:110}.z-\[200\]{z-index:200}.z-\[60\]{z-index:60}.z-\[9999\]{z-index:9999}.col-span-3{grid-column:span 3 / span 3}.col-span-full{grid-column:1 / -1}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-mb-1{margin-bottom:-.25rem}.-mt-1{margin-top:-.25rem}.mb-0\.5{margin-bottom:.125rem}.mb-1{margin-bottom:.25rem}.mb-1\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-auto{margin-bottom:auto}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-auto{margin-left:auto}.mr-0{margin-right:0}.mr-1{margin-right:.25rem}.mr-1\.5{margin-right:.375rem}.mr-2{margin-right:.5rem}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-auto{margin-top:auto}.line-clamp-1{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-\[21\/9\]{aspect-ratio:21/9}.aspect-\[3\/4\]{aspect-ratio:3/4}.aspect-\[4\/3\]{aspect-ratio:4/3}.aspect-\[9\/16\]{aspect-ratio:9/16}.aspect-square{aspect-ratio:1 / 1}.aspect-video{aspect-ratio:16 / 9}.h-0{height:0px}.h-1{height:.25rem}.h-1\.5{height:.375rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:.5rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\.5{height:.875rem}.h-4{height:1rem}.h-40{height:10rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-\[2px\]{height:2px}.h-\[85vh\]{height:85vh}.h-\[90px\]{height:90px}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-32{max-height:8rem}.max-h-36{max-height:9rem}.max-h-64{max-height:16rem}.max-h-80{max-height:20rem}.max-h-\[140px\]{max-height:140px}.max-h-\[300px\]{max-height:300px}.max-h-\[50vh\]{max-height:50vh}.max-h-\[85vh\]{max-height:85vh}.max-h-\[90vh\]{max-height:90vh}.max-h-full{max-height:100%}.min-h-0{min-height:0px}.min-h-\[70px\]{min-height:70px}.w-0{width:0px}.w-0\.5{width:.125rem}.w-1{width:.25rem}.w-1\.5{width:.375rem}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-16{width:4rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\.5{width:.875rem}.w-32{width:8rem}.w-36{width:9rem}.w-4{width:1rem}.w-40{width:10rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-96{width:24rem}.w-\[500px\]{width:500px}.w-\[680px\]{width:680px}.w-\[90vw\]{width:90vw}.w-auto{width:auto}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[100px\]{min-width:100px}.min-w-\[300px\]{min-width:300px}.max-w-7xl{max-width:80rem}.max-w-\[180px\]{max-width:180px}.max-w-\[360px\]{max-width:360px}.max-w-\[85\%\]{max-width:85%}.max-w-\[90vw\]{max-width:90vw}.max-w-full{max-width:100%}.max-w-xl{max-width:36rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.origin-top-left{transform-origin:top left}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-75{--tw-scale-x: .75;--tw-scale-y: .75;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-90{--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}.animate-bounce{animation:bounce 1s infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.cursor-col-resize{cursor:col-resize}.cursor-default{cursor:default}.cursor-ew-resize{cursor:ew-resize}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.resize-none{resize:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.content-start{align-content:flex-start}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0{gap:0px}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(-.5rem * var(--tw-space-x-reverse));margin-left:calc(-.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-tl-none{border-top-left-radius:0}.rounded-tr-none{border-top-right-radius:0}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-\[\#18181b\]{--tw-border-opacity: 1;border-color:rgb(24 24 27 / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-400{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-500\/30{border-color:#3b82f64d}.border-blue-800{--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-purple-200{--tw-border-opacity: 1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.border-purple-500\/20{border-color:#a855f733}.border-purple-800{--tw-border-opacity: 1;border-color:rgb(107 33 168 / var(--tw-border-opacity, 1))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-red-500\/50{border-color:#ef444480}.border-red-800{--tw-border-opacity: 1;border-color:rgb(153 27 27 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-violet-200{--tw-border-opacity: 1;border-color:rgb(221 214 254 / var(--tw-border-opacity, 1))}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.border-white\/10{border-color:#ffffff1a}.border-white\/60{border-color:#fff9}.border-white\/70{border-color:#ffffffb3}.border-white\/80{border-color:#fffc}.border-zinc-200{--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity, 1))}.border-zinc-300{--tw-border-opacity: 1;border-color:rgb(212 212 216 / var(--tw-border-opacity, 1))}.border-zinc-600{--tw-border-opacity: 1;border-color:rgb(82 82 91 / var(--tw-border-opacity, 1))}.border-zinc-700{--tw-border-opacity: 1;border-color:rgb(63 63 70 / var(--tw-border-opacity, 1))}.border-zinc-700\/50{border-color:#3f3f4680}.border-zinc-800{--tw-border-opacity: 1;border-color:rgb(39 39 42 / var(--tw-border-opacity, 1))}.border-zinc-800\/50{border-color:#27272a80}.bg-\[\#09090b\]{--tw-bg-opacity: 1;background-color:rgb(9 9 11 / var(--tw-bg-opacity, 1))}.bg-\[\#09090b\]\/90{background-color:#09090be6}.bg-\[\#121214\]{--tw-bg-opacity: 1;background-color:rgb(18 18 20 / var(--tw-bg-opacity, 1))}.bg-\[\#18181b\]{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/40{background-color:#0006}.bg-black\/50{background-color:#00000080}.bg-black\/60{background-color:#0009}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\/10{background-color:#3b82f61a}.bg-blue-500\/20{background-color:#3b82f633}.bg-blue-500\/30{background-color:#3b82f64d}.bg-blue-500\/5{background-color:#3b82f60d}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-600\/20{background-color:#2563eb33}.bg-blue-600\/30{background-color:#2563eb4d}.bg-blue-600\/80{background-color:#2563ebcc}.bg-blue-900\/30{background-color:#1e3a8a4d}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-600\/40{background-color:#16a34a66}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-purple-900\/30{background-color:#581c874d}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-red-500\/10{background-color:#ef44441a}.bg-red-500\/80{background-color:#ef4444cc}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-red-600\/30{background-color:#dc26264d}.bg-red-600\/80{background-color:#dc2626cc}.bg-red-900\/30{background-color:#7f1d1d4d}.bg-transparent{background-color:transparent}.bg-violet-50{--tw-bg-opacity: 1;background-color:rgb(245 243 255 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/10{background-color:#ffffff1a}.bg-white\/40{background-color:#fff6}.bg-white\/80{background-color:#fffc}.bg-white\/90{background-color:#ffffffe6}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-yellow-600{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1))}.bg-zinc-100{--tw-bg-opacity: 1;background-color:rgb(244 244 245 / var(--tw-bg-opacity, 1))}.bg-zinc-200{--tw-bg-opacity: 1;background-color:rgb(228 228 231 / var(--tw-bg-opacity, 1))}.bg-zinc-300{--tw-bg-opacity: 1;background-color:rgb(212 212 216 / var(--tw-bg-opacity, 1))}.bg-zinc-400{--tw-bg-opacity: 1;background-color:rgb(161 161 170 / var(--tw-bg-opacity, 1))}.bg-zinc-50{--tw-bg-opacity: 1;background-color:rgb(250 250 250 / var(--tw-bg-opacity, 1))}.bg-zinc-50\/50{background-color:#fafafa80}.bg-zinc-500{--tw-bg-opacity: 1;background-color:rgb(113 113 122 / var(--tw-bg-opacity, 1))}.bg-zinc-600{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.bg-zinc-700{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.bg-zinc-700\/50{background-color:#3f3f4680}.bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.bg-zinc-800\/40{background-color:#27272a66}.bg-zinc-800\/50{background-color:#27272a80}.bg-zinc-900{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.bg-zinc-900\/30{background-color:#18181b4d}.bg-zinc-900\/50{background-color:#18181b80}.bg-zinc-900\/80{background-color:#18181bcc}.bg-zinc-900\/90{background-color:#18181be6}.bg-zinc-950{--tw-bg-opacity: 1;background-color:rgb(9 9 11 / var(--tw-bg-opacity, 1))}.bg-zinc-950\/50{background-color:#09090b80}.bg-opacity-50{--tw-bg-opacity: .5}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-blue-600{--tw-gradient-from: #2563eb var(--tw-gradient-from-position);--tw-gradient-to: rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from: #9333ea var(--tw-gradient-from-position);--tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-indigo-600{--tw-gradient-to: #4f46e5 var(--tw-gradient-to-position)}.fill-current{fill:currentColor}.object-contain{-o-object-fit:contain;object-fit:contain}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-0\.5{padding:.125rem}.p-1{padding:.25rem}.p-1\.5{padding:.375rem}.p-2{padding:.5rem}.p-2\.5{padding:.625rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-1{padding-bottom:.25rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pl-1{padding-left:.25rem}.pl-2{padding-left:.5rem}.pr-1{padding-right:.25rem}.pr-2{padding-right:.5rem}.pr-6{padding-right:1.5rem}.pr-8{padding-right:2rem}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.text-\[8px\]{font-size:8px}.text-\[9px\]{font-size:9px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-none{line-height:1}.tracking-\[0\.3em\]{letter-spacing:.3em}.tracking-tighter{letter-spacing:-.05em}.tracking-wide{letter-spacing:.025em}.tracking-wider{letter-spacing:.05em}.tracking-widest{letter-spacing:.1em}.text-amber-400{--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity, 1))}.text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.text-green-300{--tw-text-opacity: 1;color:rgb(134 239 172 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-purple-300{--tw-text-opacity: 1;color:rgb(216 180 254 / var(--tw-text-opacity, 1))}.text-purple-400{--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity: 1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-200{--tw-text-opacity: 1;color:rgb(254 202 202 / var(--tw-text-opacity, 1))}.text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/70{color:#ffffffb3}.text-yellow-300{--tw-text-opacity: 1;color:rgb(253 224 71 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-zinc-100{--tw-text-opacity: 1;color:rgb(244 244 245 / var(--tw-text-opacity, 1))}.text-zinc-200{--tw-text-opacity: 1;color:rgb(228 228 231 / var(--tw-text-opacity, 1))}.text-zinc-300{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}.text-zinc-400{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.text-zinc-500{--tw-text-opacity: 1;color:rgb(113 113 122 / var(--tw-text-opacity, 1))}.text-zinc-600{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.text-zinc-700{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.text-zinc-800{--tw-text-opacity: 1;color:rgb(39 39 42 / var(--tw-text-opacity, 1))}.text-zinc-900{--tw-text-opacity: 1;color:rgb(24 24 27 / var(--tw-text-opacity, 1))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.placeholder-zinc-400::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(161 161 170 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-400::placeholder{--tw-placeholder-opacity: 1;color:rgb(161 161 170 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-500::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(113 113 122 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-500::placeholder{--tw-placeholder-opacity: 1;color:rgb(113 113 122 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-600::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(82 82 91 / var(--tw-placeholder-opacity, 1))}.placeholder-zinc-600::placeholder{--tw-placeholder-opacity: 1;color:rgb(82 82 91 / var(--tw-placeholder-opacity, 1))}.accent-blue-500{accent-color:#3b82f6}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-20{opacity:.2}.opacity-30{opacity:.3}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_10px_rgba\(0\,0\,0\,0\.5\)\]{--tw-shadow: 0 0 10px rgba(0,0,0,.5);--tw-shadow-colored: 0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_10px_rgba\(255\,255\,255\,0\.5\)\]{--tw-shadow: 0 0 10px rgba(255,255,255,.5);--tw-shadow-colored: 0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(239\,68\,68\,0\.8\)\]{--tw-shadow: 0 0 8px rgba(239,68,68,.8);--tw-shadow-colored: 0 0 8px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(34\,197\,94\,0\.6\)\]{--tw-shadow: 0 0 8px rgba(34,197,94,.6);--tw-shadow-colored: 0 0 8px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(34\,197\,94\,0\.8\)\]{--tw-shadow: 0 0 8px rgba(34,197,94,.8);--tw-shadow-colored: 0 0 8px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-black\/10{--tw-shadow-color: rgb(0 0 0 / .1);--tw-shadow: var(--tw-shadow-colored)}.shadow-black\/40{--tw-shadow-color: rgb(0 0 0 / .4);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-300\/30{--tw-shadow-color: rgb(147 197 253 / .3);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-500\/20{--tw-shadow-color: rgb(59 130 246 / .2);--tw-shadow: var(--tw-shadow-colored)}.shadow-blue-900\/20{--tw-shadow-color: rgb(30 58 138 / .2);--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-300\/60{--tw-ring-color: rgb(147 197 253 / .6)}.ring-blue-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.ring-blue-500\/30{--tw-ring-color: rgb(59 130 246 / .3)}.ring-green-500\/50{--tw-ring-color: rgb(34 197 94 / .5)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\[50px\]{--tw-blur: blur(50px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.grayscale{--tw-grayscale: grayscale(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-\[2px\]{--tw-backdrop-blur: blur(2px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur: blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-xl{--tw-backdrop-blur: blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-linear{transition-timing-function:linear}.will-change-transform{will-change:transform}body{margin:0;padding:0;background-color:#09090b}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.select-text{-webkit-user-select:text;-moz-user-select:text;user-select:text}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.art-loader-container{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#09090b;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:#e4e4e7}.art-center-group{display:flex;flex-direction:column;align-items:center;transform:translateY(-20px)}.art-visual{position:relative;width:60px;height:60px;margin-bottom:30px}.art-ring-outer{position:absolute;top:0;right:0;bottom:0;left:0;border:1px solid rgba(255,255,255,.1);border-radius:50%;animation:art-breathe 4s ease-in-out infinite}.art-ring-inner{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:50%;border:1px solid transparent;border-top-color:#fff;border-left-color:#ffffff4d;opacity:.8;animation:art-spin 2s cubic-bezier(.4,0,.2,1) infinite}.art-dot{position:absolute;top:50%;left:50%;width:4px;height:4px;background-color:#fff;border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px #ffffff80}.art-title{font-size:12px;font-weight:300;text-transform:uppercase;letter-spacing:.3em;opacity:.9;margin-bottom:8px}.art-status{font-family:Courier New,monospace;font-size:10px;color:#71717a;letter-spacing:.1em;animation:art-pulse 2s ease-in-out infinite}.art-footer{position:absolute;bottom:40px;display:flex;flex-direction:column;align-items:center;text-align:center;gap:12px;opacity:0;animation:art-fade-up 1s ease-out .5s forwards}.footer-author{display:flex;flex-direction:column;gap:4px}.footer-author .label{font-size:9px;color:#52525b;text-transform:uppercase;letter-spacing:.2em}.footer-author .name{font-size:14px;font-weight:500;letter-spacing:.5em;color:#fff;text-indent:.5em}.footer-divider{width:20px;height:1px;background-color:#27272a}.footer-thanks{display:flex;flex-direction:column;gap:2px}.footer-thanks .label{font-size:8px;color:#3f3f46;text-transform:uppercase;letter-spacing:.1em}.footer-thanks .content{font-size:10px;color:#71717a;font-family:Courier New,monospace}.footer-thanks .highlight{color:#a1a1aa;font-weight:600}@keyframes art-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes art-breathe{0%,to{transform:scale(1);opacity:.5}50%{transform:scale(1.1);opacity:.2}}@keyframes art-pulse{0%,to{opacity:.4}50%{opacity:.8}}@keyframes art-fade-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.placeholder\:text-zinc-400::-moz-placeholder{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-400::placeholder{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-600::-moz-placeholder{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-600::placeholder{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-700::-moz-placeholder{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.placeholder\:text-zinc-700::placeholder{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.placeholder\:text-opacity-50::-moz-placeholder{--tw-text-opacity: .5}.placeholder\:text-opacity-50::placeholder{--tw-text-opacity: .5}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:left-\[2px\]:after{content:var(--tw-content);left:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.focus-within\:border-blue-500\/30:focus-within{border-color:#3b82f64d}.focus-within\:border-blue-500\/50:focus-within{border-color:#3b82f680}.hover\:h-6:hover{height:1.5rem}.hover\:scale-100:hover{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-blue-300:hover{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.hover\:border-blue-400:hover{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.hover\:border-blue-500:hover{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.hover\:border-blue-500\/30:hover{border-color:#3b82f64d}.hover\:border-blue-500\/50:hover{border-color:#3b82f680}.hover\:border-green-400:hover{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.hover\:border-green-500:hover{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.hover\:border-zinc-300:hover{--tw-border-opacity: 1;border-color:rgb(212 212 216 / var(--tw-border-opacity, 1))}.hover\:border-zinc-400:hover{--tw-border-opacity: 1;border-color:rgb(161 161 170 / var(--tw-border-opacity, 1))}.hover\:border-zinc-500:hover{--tw-border-opacity: 1;border-color:rgb(113 113 122 / var(--tw-border-opacity, 1))}.hover\:border-zinc-600:hover{--tw-border-opacity: 1;border-color:rgb(82 82 91 / var(--tw-border-opacity, 1))}.hover\:border-zinc-700:hover{--tw-border-opacity: 1;border-color:rgb(63 63 70 / var(--tw-border-opacity, 1))}.hover\:bg-black\/70:hover{background-color:#000000b3}.hover\:bg-black\/80:hover{background-color:#000c}.hover\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-200:hover{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-400\/30:hover{background-color:#60a5fa4d}.hover\:bg-blue-500:hover{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-500\/30:hover{background-color:#3b82f64d}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-600\/30:hover{background-color:#2563eb4d}.hover\:bg-blue-600\/50:hover{background-color:#2563eb80}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-green-500:hover{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600\/60:hover{background-color:#16a34a99}.hover\:bg-purple-400:hover{--tw-bg-opacity: 1;background-color:rgb(192 132 252 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-500:hover{--tw-bg-opacity: 1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.hover\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.hover\:bg-red-200:hover{--tw-bg-opacity: 1;background-color:rgb(254 202 202 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-500:hover{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.hover\:bg-red-500\/10:hover{background-color:#ef44441a}.hover\:bg-red-600:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600\/50:hover{background-color:#dc262680}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity, 1))}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/20:hover{background-color:#fff3}.hover\:bg-yellow-400:hover{--tw-bg-opacity: 1;background-color:rgb(250 204 21 / var(--tw-bg-opacity, 1))}.hover\:bg-yellow-500:hover{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-100:hover{--tw-bg-opacity: 1;background-color:rgb(244 244 245 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-200:hover{--tw-bg-opacity: 1;background-color:rgb(228 228 231 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-300:hover{--tw-bg-opacity: 1;background-color:rgb(212 212 216 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-700:hover{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-800:hover{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.hover\:bg-zinc-800\/50:hover{background-color:#27272a80}.hover\:from-purple-500:hover{--tw-gradient-from: #a855f7 var(--tw-gradient-from-position);--tw-gradient-to: rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-indigo-500:hover{--tw-gradient-to: #6366f1 var(--tw-gradient-to-position)}.hover\:text-blue-300:hover{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.hover\:text-blue-400:hover{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.hover\:text-blue-500:hover{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.hover\:text-green-600:hover{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.hover\:text-red-400:hover{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.hover\:text-red-500:hover{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:text-zinc-200:hover{--tw-text-opacity: 1;color:rgb(228 228 231 / var(--tw-text-opacity, 1))}.hover\:text-zinc-300:hover{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}.hover\:text-zinc-600:hover{--tw-text-opacity: 1;color:rgb(82 82 91 / var(--tw-text-opacity, 1))}.hover\:text-zinc-700:hover{--tw-text-opacity: 1;color:rgb(63 63 70 / var(--tw-text-opacity, 1))}.hover\:text-zinc-800:hover{--tw-text-opacity: 1;color:rgb(39 39 42 / var(--tw-text-opacity, 1))}.hover\:text-zinc-900:hover{--tw-text-opacity: 1;color:rgb(24 24 27 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:border-blue-500:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:border-blue-500\/50:focus{border-color:#3b82f680}.focus\:border-blue-600\/50:focus{border-color:#2563eb80}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500\/50:focus{--tw-ring-color: rgb(59 130 246 / .5)}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.group\/insert:hover .group-hover\/insert\:scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\:bg-zinc-200{--tw-bg-opacity: 1;background-color:rgb(228 228 231 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\:bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.group\/insert:hover .group-hover\/insert\:opacity-100,.group:hover .group-hover\:opacity-100{opacity:1}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:focus~.peer-focus\:ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.peer:focus~.peer-focus\:ring-blue-500\/50{--tw-ring-color: rgb(59 130 246 / .5)}@media (prefers-color-scheme: dark){.dark\:border-zinc-700{--tw-border-opacity: 1;border-color:rgb(63 63 70 / var(--tw-border-opacity, 1))}.dark\:bg-blue-900\/30{background-color:#1e3a8a4d}.dark\:bg-zinc-700{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.dark\:bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity, 1))}.dark\:text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\:text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-zinc-200{--tw-text-opacity: 1;color:rgb(228 228 231 / var(--tw-text-opacity, 1))}.dark\:text-zinc-300{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}.dark\:text-zinc-400{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity, 1))}.dark\:hover\:bg-blue-900\/30:hover{background-color:#1e3a8a4d}.dark\:hover\:bg-zinc-700:hover{--tw-bg-opacity: 1;background-color:rgb(63 63 70 / var(--tw-bg-opacity, 1))}.dark\:hover\:text-zinc-300:hover{--tw-text-opacity: 1;color:rgb(212 212 216 / var(--tw-text-opacity, 1))}}</style>
</head>

<body style="margin: 0; padding: 0; background-color: #09090b;">
    <div id="root"></div>
</body>

</html>